function ln(n,e){return n.parent===e.parent?1:2}function cn(n){return n.reduce(hn,0)/n.length}function hn(n,e){return n+e.x}function sn(n){return 1+n.reduce(on,0)}function on(n,e){return Math.max(n,e.y)}function dn(n){for(var e;e=n.children;)n=e[0];return n}function pn(n){for(var e;e=n.children;)n=e[e.length-1];return n}function te(){var n=ln,e=1,t=1,r=!1;function i(u){var l,s=0;u.eachAfter(function(a){var o=a.children;o?(a.x=cn(o),a.y=sn(o)):(a.x=l?s+=n(a,l):0,a.y=0,l=a)});var h=dn(u),f=pn(u),c=h.x-n(h,f)/2,d=f.x+n(f,h)/2;return u.eachAfter(r?function(a){a.x=(a.x-u.x)*e,a.y=(u.y-a.y)*t}:function(a){a.x=(a.x-c)/(d-c)*e,a.y=(1-(u.y?a.y/u.y:1))*t})}return i.separation=function(u){return arguments.length?(n=u,i):n},i.size=function(u){return arguments.length?(r=!1,e=+u[0],t=+u[1],i):r?null:[e,t]},i.nodeSize=function(u){return arguments.length?(r=!0,e=+u[0],t=+u[1],i):r?[e,t]:null},i}function gn(n){var e=0,t=n.children,r=t&&t.length;if(!r)e=1;else for(;--r>=0;)e+=t[r].value;n.value=e}function yn(){return this.eachAfter(gn)}function mn(n,e){let t=-1;for(const r of this)n.call(e,r,++t,this);return this}function xn(n,e){for(var t=this,r=[t],i,u,l=-1;t=r.pop();)if(n.call(e,t,++l,this),i=t.children)for(u=i.length-1;u>=0;--u)r.push(i[u]);return this}function wn(n,e){for(var t=this,r=[t],i=[],u,l,s,h=-1;t=r.pop();)if(i.push(t),u=t.children)for(l=0,s=u.length;l<s;++l)r.push(u[l]);for(;t=i.pop();)n.call(e,t,++h,this);return this}function vn(n,e){let t=-1;for(const r of this)if(n.call(e,r,++t,this))return r}function _n(n){return this.eachAfter(function(e){for(var t=+n(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)t+=r[i].value;e.value=t})}function An(n){return this.eachBefore(function(e){e.children&&e.children.sort(n)})}function zn(n){for(var e=this,t=Mn(e,n),r=[e];e!==t;)e=e.parent,r.push(e);for(var i=r.length;n!==t;)r.splice(i,0,n),n=n.parent;return r}function Mn(n,e){if(n===e)return n;var t=n.ancestors(),r=e.ancestors(),i=null;for(n=t.pop(),e=r.pop();n===e;)i=n,n=t.pop(),e=r.pop();return i}function kn(){for(var n=this,e=[n];n=n.parent;)e.push(n);return e}function Rn(){return Array.from(this)}function Sn(){var n=[];return this.eachBefore(function(e){e.children||n.push(e)}),n}function qn(){var n=this,e=[];return n.each(function(t){t!==n&&e.push({source:t.parent,target:t})}),e}function*In(){var n=this,e,t=[n],r,i,u;do for(e=t.reverse(),t=[];n=e.pop();)if(yield n,r=n.children)for(i=0,u=r.length;i<u;++i)t.push(r[i]);while(t.length)}function nn(n,e){n instanceof Map?(n=[void 0,n],e===void 0&&(e=En)):e===void 0&&(e=Ln);for(var t=new N(n),r,i=[t],u,l,s,h;r=i.pop();)if((l=e(r.data))&&(h=(l=Array.from(l)).length))for(r.children=l,s=h-1;s>=0;--s)i.push(u=l[s]=new N(l[s])),u.parent=r,u.depth=r.depth+1;return t.eachBefore(en)}function Nn(){return nn(this).eachBefore(Cn)}function Ln(n){return n.children}function En(n){return Array.isArray(n)?n[1]:null}function Cn(n){n.data.value!==void 0&&(n.value=n.data.value),n.data=n.data.data}function en(n){var e=0;do n.height=e;while((n=n.parent)&&n.height<++e)}function N(n){this.data=n,this.depth=this.height=0,this.parent=null}N.prototype=nn.prototype={constructor:N,count:yn,each:mn,eachAfter:wn,eachBefore:xn,find:vn,sum:_n,sort:An,path:zn,ancestors:kn,descendants:Rn,leaves:Sn,links:qn,copy:Nn,[Symbol.iterator]:In};function T(n){return n==null?null:tn(n)}function tn(n){if(typeof n!="function")throw new Error;return n}function S(){return 0}function I(n){return function(){return n}}const Tn=1664525,Bn=1013904223,Y=4294967296;function bn(){let n=1;return()=>(n=(Tn*n+Bn)%Y)/Y}function On(n){return typeof n=="object"&&"length"in n?n:Array.from(n)}function Vn(n,e){let t=n.length,r,i;for(;t;)i=e()*t--|0,r=n[t],n[t]=n[i],n[i]=r;return n}function Wn(n,e){for(var t=0,r=(n=Vn(Array.from(n),e)).length,i=[],u,l;t<r;)u=n[t],l&&rn(l,u)?++t:(l=Dn(i=$n(i,u)),t=0);return l}function $n(n,e){var t,r;if(O(e,n))return[e];for(t=0;t<n.length;++t)if(E(e,n[t])&&O(L(n[t],e),n))return[n[t],e];for(t=0;t<n.length-1;++t)for(r=t+1;r<n.length;++r)if(E(L(n[t],n[r]),e)&&E(L(n[t],e),n[r])&&E(L(n[r],e),n[t])&&O(un(n[t],n[r],e),n))return[n[t],n[r],e];throw new Error}function E(n,e){var t=n.r-e.r,r=e.x-n.x,i=e.y-n.y;return t<0||t*t<r*r+i*i}function rn(n,e){var t=n.r-e.r+Math.max(n.r,e.r,1)*1e-9,r=e.x-n.x,i=e.y-n.y;return t>0&&t*t>r*r+i*i}function O(n,e){for(var t=0;t<e.length;++t)if(!rn(n,e[t]))return!1;return!0}function Dn(n){switch(n.length){case 1:return Pn(n[0]);case 2:return L(n[0],n[1]);case 3:return un(n[0],n[1],n[2])}}function Pn(n){return{x:n.x,y:n.y,r:n.r}}function L(n,e){var t=n.x,r=n.y,i=n.r,u=e.x,l=e.y,s=e.r,h=u-t,f=l-r,c=s-i,d=Math.sqrt(h*h+f*f);return{x:(t+u+h/d*c)/2,y:(r+l+f/d*c)/2,r:(d+i+s)/2}}function un(n,e,t){var r=n.x,i=n.y,u=n.r,l=e.x,s=e.y,h=e.r,f=t.x,c=t.y,d=t.r,a=r-l,o=r-f,p=i-s,g=i-c,y=h-u,m=d-u,x=r*r+i*i-u*u,_=x-l*l-s*s+h*h,v=x-f*f-c*c+d*d,w=o*p-a*g,A=(p*v-g*_)/(w*2)-r,k=(g*y-p*m)/w,z=(o*_-a*v)/(w*2)-i,M=(a*m-o*y)/w,q=k*k+M*M-1,R=2*(u+A*k+z*M),X=A*A+z*z-u*u,b=-(Math.abs(q)>1e-6?(R+Math.sqrt(R*R-4*q*X))/(2*q):X/R);return{x:r+A+k*b,y:i+z+M*b,r:b}}function H(n,e,t){var r=n.x-e.x,i,u,l=n.y-e.y,s,h,f=r*r+l*l;f?(u=e.r+t.r,u*=u,h=n.r+t.r,h*=h,u>h?(i=(f+h-u)/(2*f),s=Math.sqrt(Math.max(0,h/f-i*i)),t.x=n.x-i*r-s*l,t.y=n.y-i*l+s*r):(i=(f+u-h)/(2*f),s=Math.sqrt(Math.max(0,u/f-i*i)),t.x=e.x+i*r-s*l,t.y=e.y+i*l+s*r)):(t.x=e.x+t.r,t.y=e.y)}function Z(n,e){var t=n.r+e.r-1e-6,r=e.x-n.x,i=e.y-n.y;return t>0&&t*t>r*r+i*i}function F(n){var e=n._,t=n.next._,r=e.r+t.r,i=(e.x*t.r+t.x*e.r)/r,u=(e.y*t.r+t.y*e.r)/r;return i*i+u*u}function C(n){this._=n,this.next=null,this.previous=null}function jn(n,e){if(!(u=(n=On(n)).length))return 0;var t,r,i,u,l,s,h,f,c,d,a;if(t=n[0],t.x=0,t.y=0,!(u>1))return t.r;if(r=n[1],t.x=-r.r,r.x=t.r,r.y=0,!(u>2))return t.r+r.r;H(r,t,i=n[2]),t=new C(t),r=new C(r),i=new C(i),t.next=i.previous=r,r.next=t.previous=i,i.next=r.previous=t;n:for(h=3;h<u;++h){H(t._,r._,i=n[h]),i=new C(i),f=r.next,c=t.previous,d=r._.r,a=t._.r;do if(d<=a){if(Z(f._,i._)){r=f,t.next=r,r.previous=t,--h;continue n}d+=f._.r,f=f.next}else{if(Z(c._,i._)){t=c,t.next=r,r.previous=t,--h;continue n}a+=c._.r,c=c.previous}while(f!==c.next);for(i.previous=t,i.next=r,t.next=r.previous=r=i,l=F(t);(i=i.next)!==r;)(s=F(i))<l&&(t=i,l=s);r=t.next}for(t=[r._],i=r;(i=i.next)!==r;)t.push(i._);for(i=Wn(t,e),h=0;h<u;++h)t=n[h],t.x-=i.x,t.y-=i.y;return i.r}function Kn(n){return Math.sqrt(n.value)}function re(){var n=null,e=1,t=1,r=S;function i(u){const l=bn();return u.x=e/2,u.y=t/2,n?u.eachBefore(G(n)).eachAfter(V(r,.5,l)).eachBefore(J(1)):u.eachBefore(G(Kn)).eachAfter(V(S,1,l)).eachAfter(V(r,u.r/Math.min(e,t),l)).eachBefore(J(Math.min(e,t)/(2*u.r))),u}return i.radius=function(u){return arguments.length?(n=T(u),i):n},i.size=function(u){return arguments.length?(e=+u[0],t=+u[1],i):[e,t]},i.padding=function(u){return arguments.length?(r=typeof u=="function"?u:I(+u),i):r},i}function G(n){return function(e){e.children||(e.r=Math.max(0,+n(e)||0))}}function V(n,e,t){return function(r){if(i=r.children){var i,u,l=i.length,s=n(r)*e||0,h;if(s)for(u=0;u<l;++u)i[u].r+=s;if(h=jn(i,t),s)for(u=0;u<l;++u)i[u].r-=s;r.r=h+s}}}function J(n){return function(e){var t=e.parent;e.r*=n,t&&(e.x=t.x+n*e.x,e.y=t.y+n*e.y)}}function Xn(n){n.x0=Math.round(n.x0),n.y0=Math.round(n.y0),n.x1=Math.round(n.x1),n.y1=Math.round(n.y1)}function j(n,e,t,r,i){for(var u=n.children,l,s=-1,h=u.length,f=n.value&&(r-e)/n.value;++s<h;)l=u[s],l.y0=t,l.y1=i,l.x0=e,l.x1=e+=l.value*f}var Yn={depth:-1},Q={},W={};function Hn(n){return n.id}function Zn(n){return n.parentId}function ie(){var n=Hn,e=Zn,t;function r(i){var u=Array.from(i),l=n,s=e,h,f,c,d,a,o,p,g,y=new Map;if(t!=null){const m=u.map((v,w)=>Fn(t(v,w,i))),x=m.map(U),_=new Set(m).add("");for(const v of x)_.has(v)||(_.add(v),m.push(v),x.push(U(v)),u.push(W));l=(v,w)=>m[w],s=(v,w)=>x[w]}for(c=0,h=u.length;c<h;++c)f=u[c],o=u[c]=new N(f),(p=l(f,c,i))!=null&&(p+="")&&(g=o.id=p,y.set(g,y.has(g)?Q:o)),(p=s(f,c,i))!=null&&(p+="")&&(o.parent=p);for(c=0;c<h;++c)if(o=u[c],p=o.parent){if(a=y.get(p),!a)throw new Error("missing: "+p);if(a===Q)throw new Error("ambiguous: "+p);a.children?a.children.push(o):a.children=[o],o.parent=a}else{if(d)throw new Error("multiple roots");d=o}if(!d)throw new Error("no root");if(t!=null){for(;d.data===W&&d.children.length===1;)d=d.children[0],--h;for(let m=u.length-1;m>=0&&(o=u[m],o.data===W);--m)o.data=null}if(d.parent=Yn,d.eachBefore(function(m){m.depth=m.parent.depth+1,--h}).eachBefore(en),d.parent=null,h>0)throw new Error("cycle");return d}return r.id=function(i){return arguments.length?(n=T(i),r):n},r.parentId=function(i){return arguments.length?(e=T(i),r):e},r.path=function(i){return arguments.length?(t=T(i),r):t},r}function Fn(n){n=`${n}`;let e=n.length;return P(n,e-1)&&!P(n,e-2)&&(n=n.slice(0,-1)),n[0]==="/"?n:`/${n}`}function U(n){let e=n.length;if(e<2)return"";for(;--e>1&&!P(n,e););return n.slice(0,e)}function P(n,e){if(n[e]==="/"){let t=0;for(;e>0&&n[--e]==="\\";)++t;if((t&1)===0)return!0}return!1}function Gn(n,e){return n.parent===e.parent?1:2}function $(n){var e=n.children;return e?e[0]:n.t}function D(n){var e=n.children;return e?e[e.length-1]:n.t}function Jn(n,e,t){var r=t/(e.i-n.i);e.c-=r,e.s+=t,n.c+=r,e.z+=t,e.m+=t}function Qn(n){for(var e=0,t=0,r=n.children,i=r.length,u;--i>=0;)u=r[i],u.z+=e,u.m+=e,e+=u.s+(t+=u.c)}function Un(n,e,t){return n.a.parent===e.parent?n.a:t}function B(n,e){this._=n,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}B.prototype=Object.create(N.prototype);function ne(n){for(var e=new B(n,0),t,r=[e],i,u,l,s;t=r.pop();)if(u=t._.children)for(t.children=new Array(s=u.length),l=s-1;l>=0;--l)r.push(i=t.children[l]=new B(u[l],l)),i.parent=t;return(e.parent=new B(null,0)).children=[e],e}function ue(){var n=Gn,e=1,t=1,r=null;function i(f){var c=ne(f);if(c.eachAfter(u),c.parent.m=-c.z,c.eachBefore(l),r)f.eachBefore(h);else{var d=f,a=f,o=f;f.eachBefore(function(x){x.x<d.x&&(d=x),x.x>a.x&&(a=x),x.depth>o.depth&&(o=x)});var p=d===a?1:n(d,a)/2,g=p-d.x,y=e/(a.x+p+g),m=t/(o.depth||1);f.eachBefore(function(x){x.x=(x.x+g)*y,x.y=x.depth*m})}return f}function u(f){var c=f.children,d=f.parent.children,a=f.i?d[f.i-1]:null;if(c){Qn(f);var o=(c[0].z+c[c.length-1].z)/2;a?(f.z=a.z+n(f._,a._),f.m=f.z-o):f.z=o}else a&&(f.z=a.z+n(f._,a._));f.parent.A=s(f,a,f.parent.A||d[0])}function l(f){f._.x=f.z+f.parent.m,f.m+=f.parent.m}function s(f,c,d){if(c){for(var a=f,o=f,p=c,g=a.parent.children[0],y=a.m,m=o.m,x=p.m,_=g.m,v;p=D(p),a=$(a),p&&a;)g=$(g),o=D(o),o.a=f,v=p.z+x-a.z-y+n(p._,a._),v>0&&(Jn(Un(p,f,d),f,v),y+=v,m+=v),x+=p.m,y+=a.m,_+=g.m,m+=o.m;p&&!D(o)&&(o.t=p,o.m+=x-m),a&&!$(g)&&(g.t=a,g.m+=y-_,d=f)}return d}function h(f){f.x*=e,f.y=f.depth*t}return i.separation=function(f){return arguments.length?(n=f,i):n},i.size=function(f){return arguments.length?(r=!1,e=+f[0],t=+f[1],i):r?null:[e,t]},i.nodeSize=function(f){return arguments.length?(r=!0,e=+f[0],t=+f[1],i):r?[e,t]:null},i}function K(n,e,t,r,i){for(var u=n.children,l,s=-1,h=u.length,f=n.value&&(i-t)/n.value;++s<h;)l=u[s],l.x0=e,l.x1=r,l.y0=t,l.y1=t+=l.value*f}var an=(1+Math.sqrt(5))/2;function fn(n,e,t,r,i,u){for(var l=[],s=e.children,h,f,c=0,d=0,a=s.length,o,p,g=e.value,y,m,x,_,v,w,A;c<a;){o=i-t,p=u-r;do y=s[d++].value;while(!y&&d<a);for(m=x=y,w=Math.max(p/o,o/p)/(g*n),A=y*y*w,v=Math.max(x/A,A/m);d<a;++d){if(y+=f=s[d].value,f<m&&(m=f),f>x&&(x=f),A=y*y*w,_=Math.max(x/A,A/m),_>v){y-=f;break}v=_}l.push(h={value:y,dice:o<p,children:s.slice(c,d)}),h.dice?j(h,t,r,i,g?r+=p*y/g:u):K(h,t,r,g?t+=o*y/g:i,u),g-=y,c=d}return l}const ee=function n(e){function t(r,i,u,l,s){fn(e,r,i,u,l,s)}return t.ratio=function(r){return n((r=+r)>1?r:1)},t}(an);function ae(){var n=ee,e=!1,t=1,r=1,i=[0],u=S,l=S,s=S,h=S,f=S;function c(a){return a.x0=a.y0=0,a.x1=t,a.y1=r,a.eachBefore(d),i=[0],e&&a.eachBefore(Xn),a}function d(a){var o=i[a.depth],p=a.x0+o,g=a.y0+o,y=a.x1-o,m=a.y1-o;y<p&&(p=y=(p+y)/2),m<g&&(g=m=(g+m)/2),a.x0=p,a.y0=g,a.x1=y,a.y1=m,a.children&&(o=i[a.depth+1]=u(a)/2,p+=f(a)-o,g+=l(a)-o,y-=s(a)-o,m-=h(a)-o,y<p&&(p=y=(p+y)/2),m<g&&(g=m=(g+m)/2),n(a,p,g,y,m))}return c.round=function(a){return arguments.length?(e=!!a,c):e},c.size=function(a){return arguments.length?(t=+a[0],r=+a[1],c):[t,r]},c.tile=function(a){return arguments.length?(n=tn(a),c):n},c.padding=function(a){return arguments.length?c.paddingInner(a).paddingOuter(a):c.paddingInner()},c.paddingInner=function(a){return arguments.length?(u=typeof a=="function"?a:I(+a),c):u},c.paddingOuter=function(a){return arguments.length?c.paddingTop(a).paddingRight(a).paddingBottom(a).paddingLeft(a):c.paddingTop()},c.paddingTop=function(a){return arguments.length?(l=typeof a=="function"?a:I(+a),c):l},c.paddingRight=function(a){return arguments.length?(s=typeof a=="function"?a:I(+a),c):s},c.paddingBottom=function(a){return arguments.length?(h=typeof a=="function"?a:I(+a),c):h},c.paddingLeft=function(a){return arguments.length?(f=typeof a=="function"?a:I(+a),c):f},c}function fe(n,e,t,r,i){var u=n.children,l,s=u.length,h,f=new Array(s+1);for(f[0]=h=l=0;l<s;++l)f[l+1]=h+=u[l].value;c(0,s,n.value,e,t,r,i);function c(d,a,o,p,g,y,m){if(d>=a-1){var x=u[d];x.x0=p,x.y0=g,x.x1=y,x.y1=m;return}for(var _=f[d],v=o/2+_,w=d+1,A=a-1;w<A;){var k=w+A>>>1;f[k]<v?w=k+1:A=k}v-f[w-1]<f[w]-v&&d+1<w&&--w;var z=f[w]-_,M=o-z;if(y-p>m-g){var q=o?(p*M+y*z)/o:y;c(d,w,z,p,g,q,m),c(w,a,M,q,g,y,m)}else{var R=o?(g*M+m*z)/o:m;c(d,w,z,p,g,y,R),c(w,a,M,p,R,y,m)}}}function le(n,e,t,r,i){(n.depth&1?K:j)(n,e,t,r,i)}const ce=function n(e){function t(r,i,u,l,s){if((h=r._squarify)&&h.ratio===e)for(var h,f,c,d,a=-1,o,p=h.length,g=r.value;++a<p;){for(f=h[a],c=f.children,d=f.value=0,o=c.length;d<o;++d)f.value+=c[d].value;f.dice?j(f,i,u,l,g?u+=(s-u)*f.value/g:s):K(f,i,u,g?i+=(l-i)*f.value/g:l,s),g-=f.value}else r._squarify=h=fn(e,r,i,u,l,s),h.ratio=e}return t.ratio=function(r){return n((r=+r)>1?r:1)},t}(an);export{ce as a,ee as b,le as c,K as d,j as e,fe as f,te as g,nn as h,ue as i,re as p,ie as s,ae as t};
