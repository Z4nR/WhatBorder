import{f as Tt,b as st,_ as Z,h as St,l as Jr,a as Q,c as bt,e as wt,m as dh,n as kt,k as bi,o as Cr,p as He,q as Dn,r as vk}from"./@babel-DAuA_VVL.js";import{E as tm}from"./eventemitter3-DCmFwiHc.js";import{e as gk,n as mk,d as yk,c as Pt,a as Bt,b as cr,f as je,g as jt,h as em,i as jo,t as Yn,j as Hn,k as xr,m as rn,l as ur,o as Or,p as bk,q as xk,s as hh,r as Ok,u as wk,v as me,w as Sk,x as ei,y as Vi,z as ai,A as nm,B as Ia,C as Vn,D as Bi,E as rm,F as kk,G as uo,H as Ar,I as Ss,J as ya,K as Ek,L as im,M as Do,N as Bo,O as ph,P as Ye,Q as _k,R as Ak,S as Tk,T as lu,U as cu,V as Rs,W as Wa,X as Mk,Y as vc,Z as vh,_ as am,$ as or,a0 as Pk,a1 as Ns,a2 as Ck,a3 as Lk,a4 as Rk,a5 as gh,a6 as Nk,a7 as Ik,a8 as mh,a9 as jk,aa as Dk,ab as ti,ac as Bk,ad as uu,ae as Fk,af as $k,ag as zk,ah as om,ai as yh,aj as Gk,ak as bh,al as Wk,am as Yk,an as Hk,ao as Vk,ap as Xk,aq as Uk,ar as qk}from"./gl-matrix-CprEA30_.js";import{_ as J,a as ut,b as oe,c as D,d as Pe,e as gc,f as fo,g as Kk}from"./tslib-OBXMYbRD.js";import{g as Kt,a as _n,m as ho,b as Vt,d as Zk,s as yn,c as df,e as Ya,f as Rn,h as ua,i as El,j as Qk,k as fr,r as hf,l as Jk,t as tE,n as eE,q as pf,o as nE,p as vf,u as oi,v as sm,w as rE}from"./d3-array-atsD2wCJ.js";import{c as iE}from"./color-string-UpWxH4A7.js";import{a as gf,d as po,c as mf,l as aE,b as lm,e as cm,m as um,f as fm,s as dm,g as hm,h as pm,i as xh,j as oE}from"./d3-shape-emAqGUXY.js";import{p as Nn}from"./d3-path-DKbKBQE1.js";import{t as sE,a as lE,b as cE,c as uE,d as fE,e as dE,f as hE,s as fu,h as yf,p as pE,g as vE,i as gE}from"./d3-hierarchy-BwT0BVLI.js";import{f as xi}from"./d3-format-bxs9DvuO.js";import{B as mE,a as yE,b as bE,c as xE,d as OE,e as wE,f as SE,G as kE,g as EE,h as _E,i as AE,m as TE,O as ME,j as PE,P as CE,k as LE,p as RE,l as NE,n as IE,o as jE,q as DE,r as BE,s as FE,R as $E,t as zE,u as GE,v as WE,w as YE,x as HE,y as VE,S as XE,z as UE,A as qE,C as KE,Y as ZE,D as QE,E as JE,F as t_,H as e_,I as n_,J as r_,K as i_,L as a_,M as o_,N as s_,Q as l_,T as c_,U as u_,V as f_,W as d_,X as h_,Z as p_,_ as v_,$ as g_,a0 as m_,a1 as y_,a2 as b_,a3 as x_,a4 as O_,a5 as w_,a6 as S_,a7 as k_,a8 as E_,a9 as __,aa as A_,ab as T_,ac as M_,ad as P_,ae as C_,af as L_,ag as R_,ah as N_,ai as I_,aj as j_,ak as D_,al as B_}from"./d3-scale-chromatic-Cuoj2_tT.js";import{f as F_}from"./fecha-DFkiGBGG.js";import{f as vm}from"./flru-DUL4jbEG.js";import{p as $_}from"./pdfast-Ck3ddN0u.js";import{d as z_,a as G_}from"./d3-dsv-BptE8-Pl.js";import{a as W_,b as Y_,c as H_,d as V_,e as X_,f as U_,g as q_,h as K_,i as Z_,j as Q_,k as J_,l as tA,m as eA,n as nA,o as rA,p as iA,q as aA,r as oA,s as sA,t as lA,u as cA,v as uA,w as fA,x as dA,y as hA,z as pA,A as vA,B as gA,C as mA,D as yA,E as bA,F as xA,G as gm}from"./d3-geo-D_Sa4YuD.js";import{f as OA,a as wA,b as SA,c as kA,d as EA,e as _A}from"./d3-force-CuiMVA5-.js";const mm=()=>[["cartesian"]];mm.props={};function AA(t,r){return t=t%(2*Math.PI),r=r%(2*Math.PI),t<0&&(t=2*Math.PI+t),r<0&&(r=2*Math.PI+r),t>=r&&(r=r+2*Math.PI),{startAngle:t,endAngle:r}}const ym=(t={})=>{const r={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1},e=Object.assign(Object.assign({},r),t);return Object.assign(Object.assign({},e),AA(e.startAngle,e.endAngle))},vo=t=>{const{startAngle:r,endAngle:e,innerRadius:n,outerRadius:i}=ym(t);return[["translate",0,.5],["reflect.y"],["translate",0,-.5],["polar",r,e,n,i]]};vo.props={};const bm=({startAngle:t=0,endAngle:r=Math.PI*6,innerRadius:e=0,outerRadius:n=1})=>[["translate",.5,.5],["reflect.y"],["translate",-.5,-.5],["helix",t,r,e,n]];bm.props={};const bf=()=>[["transpose"],["translate",.5,.5],["reflect.x"],["translate",-.5,-.5]];bf.props={transform:!0};const TA=(t={})=>{const r={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},r),t)},xm=t=>{const{startAngle:r,endAngle:e,innerRadius:n,outerRadius:i}=TA(t);return[...bf(),...vo({startAngle:r,endAngle:e,innerRadius:n,outerRadius:i})]};xm.props={};const Om=(t={})=>{const r={startAngle:-Math.PI/2,endAngle:Math.PI*3/2,innerRadius:0,outerRadius:1};return Object.assign(Object.assign({},r),t)},xf=t=>{const{startAngle:r,endAngle:e,innerRadius:n,outerRadius:i}=Om(t);return[["transpose"],["translate",.5,.5],["reflect"],["translate",-.5,-.5],...vo({startAngle:r,endAngle:e,innerRadius:n,outerRadius:i})]};xf.props={};const Of=()=>[["parallel",0,1,0,1]];Of.props={};const wm=({focusX:t=0,focusY:r=0,distortionX:e=2,distortionY:n=2,visual:i=!1})=>[["fisheye",t,r,e,n,i]];wm.props={transform:!0};const Sm=t=>{const{startAngle:r=-Math.PI/2,endAngle:e=Math.PI*3/2,innerRadius:n=0,outerRadius:i=1}=t;return[...Of(),...vo({startAngle:r,endAngle:e,innerRadius:n,outerRadius:i})]};Sm.props={};const km=({value:t})=>r=>r.map(()=>t);km.props={};const Em=({value:t})=>r=>r.map(t);Em.props={};const _m=({value:t})=>r=>r.map(e=>e[t]);_m.props={};const Am=({value:t})=>()=>t;Am.props={};var Xi=function(t){return t!==null&&typeof t!="function"&&isFinite(t.length)},MA=function(t,r){if(!Xi(t))return t;for(var e=[],n=0;n<t.length;n++){var i=t[n];r(i,n)&&e.push(i)}return e};function Le(t){return typeof t=="function"}function pt(t){return t==null}function Ge(t){return Array.isArray(t)}const go=function(t){var r=typeof t;return t!==null&&r==="object"||r==="function"};function wf(t,r){if(t){var e;if(Ge(t))for(var n=0,i=t.length;n<i&&(e=r(t[n],n),e!==!1);n++);else if(go(t)){for(var a in t)if(t.hasOwnProperty(a)&&(e=r(t[a],a),e===!1))break}}}var Tm=Object.keys?function(t){return Object.keys(t)}:function(t){var r=[];return wf(t,function(e,n){Le(t)&&n==="prototype"||r.push(n)}),r};function PA(t,r){var e=Tm(r),n=e.length;if(pt(t))return!n;for(var i=0;i<n;i+=1){var a=e[i];if(r[a]!==t[a]||!(a in t))return!1}return!0}var du=function(t){return typeof t=="object"&&t!==null},CA={}.toString,Mm=function(t,r){return CA.call(t)==="[object "+r+"]"},pr=function(t){if(!du(t)||!Mm(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r};function Ui(t,r){if(!Ge(t))return null;var e;if(Le(r)&&(e=r),pr(r)&&(e=function(i){return PA(i,r)}),e){for(var n=0;n<t.length;n+=1)if(e(t[n]))return t[n]}return null}var LA=function(t){if(!Ge(t))return[];for(var r=[],e=0;e<t.length;e++)r=r.concat(t[e]);return r};function Is(t){if(!Array.isArray(t))return-1/0;var r=t.length;if(!r)return-1/0;for(var e=t[0],n=1;n<r;n++)e=Math.max(e,t[n]);return e}const js=function(t){if(Ge(t))return t.reduce(function(r,e){return Math.min(r,e)},t[0])};var RA=function(t,r,e){if(!Ge(t)&&!pr(t))return t;var n=e;return wf(t,function(i,a){n=r(n,i,a)}),n};function ce(t){return typeof t=="string"}function fa(t){if(Xi(t)){var r=t;return r[r.length-1]}}var be=function(t,r,e){return t<r?r:t>e?e:t};function re(t){return typeof t=="number"}var NA=1e-5;function ja(t,r,e){return e===void 0&&(e=NA),t===r||Math.abs(t-r)<e}const IA=function(t,r){if(Ge(t)){for(var e,n=-1/0,i=0;i<t.length;i++){var a=t[i],o=Le(r)?r(a):a[r];o>n&&(e=a,n=o)}return e}},jA=function(t,r){if(Ge(t)){for(var e,n=1/0,i=0;i<t.length;i++){var a=t[i],o=Le(r)?r(a):a[r];o<n&&(e=a,n=o)}return e}};var Pm=function(t,r){return(t%r+r)%r};const Cm=function(t){return pt(t)?"":t.toString()};var Lm=function(t){var r=Cm(t);return r.charAt(0).toLowerCase()+r.substring(1)};function DA(t,r){return!t||!r?t:t.replace(/\\?\{([^{}]+)\}/g,function(e,n){return e.charAt(0)==="\\"?e.slice(1):r[n]===void 0?"":r[n]})}var Nr=function(t){var r=Cm(t);return r.charAt(0).toUpperCase()+r.substring(1)},Oh=function(t){return Mm(t,"Boolean")};function BA(t){return t===null}var Ut=function(t){return t===void 0};function FA(t){return t instanceof Element||t instanceof Document}function wh(t,r){for(var e in r)r.hasOwnProperty(e)&&e!=="constructor"&&r[e]!==void 0&&(t[e]=r[e])}function $A(t,r,e,n){return r&&wh(t,r),e&&wh(t,e),t}var Ha=function(t){if(typeof t!="object"||t===null)return t;var r;if(Ge(t)){r=[];for(var e=0,n=t.length;e<n;e++)typeof t[e]=="object"&&t[e]!=null?r[e]=Ha(t[e]):r[e]=t[e]}else{r={};for(var i in t)typeof t[i]=="object"&&t[i]!=null?r[i]=Ha(t[i]):r[i]=t[i]}return r};function Rm(t,r,e){var n;return function(){var i=this,a=arguments,o=function(){n=null,t.apply(i,a)};clearTimeout(n),n=setTimeout(o,r)}}function zA(t){var r,e,n,i=t;function a(s,l){++r>i&&(n=e,o(1),++r),e[s]=l}function o(s){r=0,e=Object.create(null),s||(n=Object.create(null))}return o(),{clear:o,has:function(s){return e[s]!==void 0||n[s]!==void 0},get:function(s){var l=e[s];if(l!==void 0)return l;if((l=n[s])!==void 0)return a(s,l),l},set:function(s,l){e[s]!==void 0?e[s]=l:a(s,l)}}}var mc=new Map;function GA(t,r,e){var n=function(){for(var i=[],a=0;a<arguments.length;a++)i[a]=arguments[a];var o=r?r.apply(this,i):i[0];mc.has(t)||mc.set(t,zA(e));var s=mc.get(t);if(s.has(o))return s.get(o);var l=t.apply(this,i);return s.set(o,l),l};return n}var WA=5;function YA(t,r){if(Object.hasOwn)return Object.hasOwn(t,r);if(t==null)throw new TypeError("Cannot convert undefined or null to object");return Object.prototype.hasOwnProperty.call(Object(t),r)}function Nm(t,r,e,n){e=e||0,n=n||WA;for(var i in r)if(YA(r,i)){var a=r[i];a!==null&&pr(a)?(pr(t[i])||(t[i]={}),e<n?Nm(t[i],a,e+1,n):t[i]=r[i]):Ge(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var X=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var n=0;n<r.length;n+=1)Nm(t,r[n]);return t},Im=function(t,r){if(!Xi(t))return-1;var e=Array.prototype.indexOf;if(e)return e.call(t,r);for(var n=-1,i=0;i<t.length;i++)if(t[i]===r){n=i;break}return n},Ds=function(t,r){if(t===r)return!0;if(!t||!r||ce(t)||ce(r))return!1;if(Xi(t)||Xi(r)){if(t.length!==r.length)return!1;for(var e=!0,n=0;n<t.length&&(e=Ds(t[n],r[n]),!!e);n++);return e}if(du(t)||du(r)){var i=Object.keys(t),a=Object.keys(r);if(i.length!==a.length)return!1;for(var e=!0,n=0;n<i.length&&(e=Ds(t[i[n]],r[i[n]]),!!e);n++);return e}return!1},HA=function(t){return t};const VA=function(t,r){r===void 0&&(r=HA);var e={};return go(t)&&!pt(t)&&Object.keys(t).forEach(function(n){e[n]=r(t[n],n)}),e},Rt=function(t,r,e){for(var n=0,i=ce(r)?r.split("."):r;t&&n<i.length;)t=t[i[n++]];return t===void 0||n<i.length?e:t},jm=function(t,r,e){var n=t,i=ce(r)?r.split("."):r;return i.forEach(function(a,o){o<i.length-1?(go(n[a])||(n[a]=re(i[o+1])?[]:{}),n=n[a]):n[a]=e}),t};var XA=Object.prototype.hasOwnProperty;const UA=function(t,r){if(t===null||!pr(t))return{};var e={};return wf(r,function(n){XA.call(t,n)&&(e[n]=t[n])}),e},Sf=function(t,r){return RA(t,function(e,n,i){return r.includes(i)||(e[i]=n),e},{})},li=function(t,r,e){var n,i,a,o,s=0;e||(e={});var l=function(){s=e.leading===!1?0:Date.now(),n=null,o=t.apply(i,a),n||(i=a=null)},c=function(){var u=Date.now();!s&&e.leading===!1&&(s=u);var f=r-(u-s);return i=this,a=arguments,f<=0||f>r?(n&&(clearTimeout(n),n=null),s=u,o=t.apply(i,a),n||(i=a=null)):!n&&e.trailing!==!1&&(n=setTimeout(l,f)),o};return c.cancel=function(){clearTimeout(n),s=0,n=i=a=null},c},yc=function(){},ci=function(t){return t};function Bs(t){return pt(t)?0:Xi(t)?t.length:Object.keys(t).length}var Dm={x1:0,y1:0,x2:0,y2:0,x:0,y:0,qx:null,qy:null};function qA(t,r,e){if(t[e].length>7){t[e].shift();for(var n=t[e],i=e;n.length;)r[e]="A",t.splice(i+=1,0,["C"].concat(n.splice(0,6)));t.splice(e,1)}}var Da={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0};function Bm(t){return Array.isArray(t)&&t.every(function(r){var e=r[0].toLowerCase();return Da[e]===r.length-1&&"achlmqstvz".includes(e)})}function Fm(t){return Bm(t)&&t.every(function(r){var e=r[0];return e===e.toUpperCase()})}function $m(t){return Fm(t)&&t.every(function(r){var e=r[0];return"ACLMQZ".includes(e)})}function Sh(t){for(var r=t.pathValue[t.segmentStart],e=r.toLowerCase(),n=t.data;n.length>=Da[e]&&(e==="m"&&n.length>2?(t.segments.push([r].concat(n.splice(0,2))),e="l",r=r==="m"?"l":"L"):t.segments.push([r].concat(n.splice(0,Da[e]))),!!Da[e]););}function KA(t){var r=t.index,e=t.pathValue,n=e.charCodeAt(r);if(n===48){t.param=0,t.index+=1;return}if(n===49){t.param=1,t.index+=1;return}t.err='[path-util]: invalid Arc flag "'.concat(e[r],'", expecting 0 or 1 at index ').concat(r)}function ZA(t){return t>=48&&t<=57||t===43||t===45||t===46}function Mi(t){return t>=48&&t<=57}function QA(t){var r=t.max,e=t.pathValue,n=t.index,i=n,a=!1,o=!1,s=!1,l=!1,c;if(i>=r){t.err="[path-util]: Invalid path value at index ".concat(i,', "pathValue" is missing param');return}if(c=e.charCodeAt(i),(c===43||c===45)&&(i+=1,c=e.charCodeAt(i)),!Mi(c)&&c!==46){t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(e[i],'" is not a number');return}if(c!==46){if(a=c===48,i+=1,c=e.charCodeAt(i),a&&i<r&&c&&Mi(c)){t.err="[path-util]: Invalid path value at index ".concat(n,', "').concat(e[n],'" illegal number');return}for(;i<r&&Mi(e.charCodeAt(i));)i+=1,o=!0;c=e.charCodeAt(i)}if(c===46){for(l=!0,i+=1;Mi(e.charCodeAt(i));)i+=1,s=!0;c=e.charCodeAt(i)}if(c===101||c===69){if(l&&!o&&!s){t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(e[i],'" invalid float exponent');return}if(i+=1,c=e.charCodeAt(i),(c===43||c===45)&&(i+=1),i<r&&Mi(e.charCodeAt(i)))for(;i<r&&Mi(e.charCodeAt(i));)i+=1;else{t.err="[path-util]: Invalid path value at index ".concat(i,', "').concat(e[i],'" invalid integer exponent');return}}t.index=i,t.param=+t.pathValue.slice(n,i)}function JA(t){var r=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&r.includes(t)}function ks(t){for(var r=t.pathValue,e=t.max;t.index<e&&JA(r.charCodeAt(t.index));)t.index+=1}function tT(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:return!0;default:return!1}}function eT(t){return(t|32)===97}function nT(t){var r=t.max,e=t.pathValue,n=t.index,i=e.charCodeAt(n),a=Da[e[n].toLowerCase()];if(t.segmentStart=n,!tT(i)){t.err='[path-util]: Invalid path value "'.concat(e[n],'" is not a path command');return}if(t.index+=1,ks(t),t.data=[],!a){Sh(t);return}for(;;){for(var o=a;o>0;o-=1){if(eT(i)&&(o===3||o===4)?KA(t):QA(t),t.err.length)return;t.data.push(t.param),ks(t),t.index<r&&e.charCodeAt(t.index)===44&&(t.index+=1,ks(t))}if(t.index>=t.max||!ZA(e.charCodeAt(t.index)))break}Sh(t)}var rT=function(){function t(r){this.pathValue=r,this.segments=[],this.max=r.length,this.index=0,this.param=0,this.segmentStart=0,this.data=[],this.err=""}return t}();function iT(t){if(Bm(t))return[].concat(t);var r=new rT(t);for(ks(r);r.index<r.max&&!r.err.length;)nT(r);return r.err?r.err:r.segments}function aT(t){if(Fm(t))return[].concat(t);var r=iT(t),e=0,n=0,i=0,a=0;return r.map(function(o){var s=o.slice(1).map(Number),l=o[0],c=l.toUpperCase();if(l==="M")return e=s[0],n=s[1],i=e,a=n,["M",e,n];var u;if(l!==c)switch(c){case"A":u=[c,s[0],s[1],s[2],s[3],s[4],s[5]+e,s[6]+n];break;case"V":u=[c,s[0]+n];break;case"H":u=[c,s[0]+e];break;default:{var f=s.map(function(h,p){return h+(p%2?n:e)});u=[c].concat(f)}}else u=[c].concat(s);var d=u.length;switch(c){case"Z":e=i,n=a;break;case"H":e=u[1];break;case"V":n=u[1];break;default:e=u[d-2],n=u[d-1],c==="M"&&(i=e,a=n)}return u})}function oT(t,r){var e=t[0],n=r.x1,i=r.y1,a=r.x2,o=r.y2,s=t.slice(1).map(Number),l=t;if("TQ".includes(e)||(r.qx=null,r.qy=null),e==="H")l=["L",t[1],i];else if(e==="V")l=["L",n,t[1]];else if(e==="S"){var c=n*2-a,u=i*2-o;r.x1=c,r.y1=u,l=["C",c,u].concat(s)}else if(e==="T"){var f=n*2-r.qx,d=i*2-r.qy;r.qx=f,r.qy=d,l=["Q",f,d].concat(s)}else if(e==="Q"){var h=s[0],p=s[1];r.qx=h,r.qy=p}return l}function Fs(t){if($m(t))return[].concat(t);for(var r=aT(t),e=J({},Dm),n=0;n<r.length;n+=1){r[n]=oT(r[n],e);var i=r[n],a=i.length;e.x1=+i[a-2],e.y1=+i[a-1],e.x2=+i[a-4]||e.x1,e.y2=+i[a-3]||e.y1}return r}function sT(t){return $m(t)&&t.every(function(r){var e=r[0];return"MC".includes(e)})}function Fo(t,r,e){var n=t*Math.cos(e)-r*Math.sin(e),i=t*Math.sin(e)+r*Math.cos(e);return{x:n,y:i}}function kf(t,r,e,n,i,a,o,s,l,c){var u=t,f=r,d=e,h=n,p=s,v=l,g=Math.PI*120/180,m=Math.PI/180*(+i||0),y=[],b,x,O,w,S;if(c)x=c[0],O=c[1],w=c[2],S=c[3];else{b=Fo(u,f,-m),u=b.x,f=b.y,b=Fo(p,v,-m),p=b.x,v=b.y;var k=(u-p)/2,E=(f-v)/2,_=k*k/(d*d)+E*E/(h*h);_>1&&(_=Math.sqrt(_),d*=_,h*=_);var A=d*d,M=h*h,T=(a===o?-1:1)*Math.sqrt(Math.abs((A*M-A*E*E-M*k*k)/(A*E*E+M*k*k)));w=T*d*E/h+(u+p)/2,S=T*-h*k/d+(f+v)/2,x=Math.asin(((f-S)/h*Math.pow(10,9)>>0)/Math.pow(10,9)),O=Math.asin(((v-S)/h*Math.pow(10,9)>>0)/Math.pow(10,9)),x=u<w?Math.PI-x:x,O=p<w?Math.PI-O:O,x<0&&(x=Math.PI*2+x),O<0&&(O=Math.PI*2+O),o&&x>O&&(x-=Math.PI*2),!o&&O>x&&(O-=Math.PI*2)}var C=O-x;if(Math.abs(C)>g){var I=O,R=p,L=v;O=x+g*(o&&O>x?1:-1),p=w+d*Math.cos(O),v=S+h*Math.sin(O),y=kf(p,v,d,h,i,0,o,R,L,[O,I,w,S])}C=O-x;var P=Math.cos(x),N=Math.sin(x),j=Math.cos(O),B=Math.sin(O),F=Math.tan(C/4),$=4/3*d*F,W=4/3*h*F,G=[u,f],Y=[u+$*N,f-W*P],V=[p+$*B,v-W*j],z=[p,v];if(Y[0]=2*G[0]-Y[0],Y[1]=2*G[1]-Y[1],c)return Y.concat(V,z,y);y=Y.concat(V,z,y);for(var U=[],q=0,rt=y.length;q<rt;q+=1)U[q]=q%2?Fo(y[q-1],y[q],m).y:Fo(y[q],y[q+1],m).x;return U}function lT(t,r,e,n,i,a){var o=.3333333333333333,s=2/3;return[o*t+s*e,o*r+s*n,o*i+s*e,o*a+s*n,i,a]}function yr(t,r,e){var n=t[0],i=t[1],a=r[0],o=r[1];return[n+(a-n)*e,i+(o-i)*e]}var kh=function(t,r,e,n){var i=.5,a=yr([t,r],[e,n],i);return ut(ut([],a,!0),[e,n,e,n],!1)};function cT(t,r){var e=t[0],n=t.slice(1).map(Number),i=n[0],a=n[1],o,s=r.x1,l=r.y1,c=r.x,u=r.y;switch("TQ".includes(e)||(r.qx=null,r.qy=null),e){case"M":return r.x=i,r.y=a,t;case"A":return o=[s,l].concat(n),["C"].concat(kf(o[0],o[1],o[2],o[3],o[4],o[5],o[6],o[7],o[8],o[9]));case"Q":return r.qx=i,r.qy=a,o=[s,l].concat(n),["C"].concat(lT(o[0],o[1],o[2],o[3],o[4],o[5]));case"L":return["C"].concat(kh(s,l,i,a));case"Z":return s===c&&l===u?["C",s,l,c,u,c,u]:["C"].concat(kh(s,l,c,u))}return t}function hu(t,r){if(r===void 0&&(r=!1),sT(t)){var e=[].concat(t);return r?[e,[]]:e}for(var n=Fs(t),i=J({},Dm),a=[],o="",s=n.length,l,c,u=[],f=0;f<s;f+=1){n[f]&&(o=n[f][0]),a[f]=o;var d=cT(n[f],i);n[f]=d,qA(n,a,f),s=n.length,o==="Z"&&u.push(f),l=n[f],c=l.length,i.x1=+l[c-2],i.y1=+l[c-1],i.x2=+l[c-4]||i.x1,i.y2=+l[c-3]||i.y1}return r?[n,u]:n}function uT(t){return t.map(function(r){return Array.isArray(r)?[].concat(r):r})}function fT(t){var r=t.slice(1).map(function(e,n,i){return n?i[n-1].slice(-2).concat(e.slice(1)):t[0].slice(1).concat(e.slice(1))}).map(function(e){return e.map(function(n,i){return e[e.length-i-2*(1-i%2)]})}).reverse();return[["M"].concat(r[0].slice(0,2))].concat(r.map(function(e){return["C"].concat(e.slice(2))}))}function en(t,r){return Math.sqrt((t[0]-r[0])*(t[0]-r[0])+(t[1]-r[1])*(t[1]-r[1]))}function pu(t,r,e,n,i){var a=en([t,r],[e,n]),o={x:0,y:0};if(typeof i=="number")if(i<=0)o={x:t,y:r};else if(i>=a)o={x:e,y:n};else{var s=yr([t,r],[e,n],i/a),l=s[0],c=s[1];o={x:l,y:c}}return{length:a,point:o,min:{x:Math.min(t,e),y:Math.min(r,n)},max:{x:Math.max(t,e),y:Math.max(r,n)}}}function Eh(t,r){var e=t.x,n=t.y,i=r.x,a=r.y,o=e*i+n*a,s=Math.sqrt((Math.pow(e,2)+Math.pow(n,2))*(Math.pow(i,2)+Math.pow(a,2))),l=e*a-n*i<0?-1:1,c=l*Math.acos(o/s);return c}function dT(t,r,e,n,i,a,o,s,l,c){var u=Math.abs,f=Math.sin,d=Math.cos,h=Math.sqrt,p=Math.PI,v=u(e),g=u(n),m=(i%360+360)%360,y=m*(p/180);if(t===s&&r===l)return{x:t,y:r};if(v===0||g===0)return pu(t,r,s,l,c).point;var b=(t-s)/2,x=(r-l)/2,O={x:d(y)*b+f(y)*x,y:-f(y)*b+d(y)*x},w=Math.pow(O.x,2)/Math.pow(v,2)+Math.pow(O.y,2)/Math.pow(g,2);w>1&&(v*=h(w),g*=h(w));var S=Math.pow(v,2)*Math.pow(g,2)-Math.pow(v,2)*Math.pow(O.y,2)-Math.pow(g,2)*Math.pow(O.x,2),k=Math.pow(v,2)*Math.pow(O.y,2)+Math.pow(g,2)*Math.pow(O.x,2),E=S/k;E=E<0?0:E;var _=(a!==o?1:-1)*h(E),A={x:_*(v*O.y/g),y:_*(-(g*O.x)/v)},M={x:d(y)*A.x-f(y)*A.y+(t+s)/2,y:f(y)*A.x+d(y)*A.y+(r+l)/2},T={x:(O.x-A.x)/v,y:(O.y-A.y)/g},C=Eh({x:1,y:0},T),I={x:(-O.x-A.x)/v,y:(-O.y-A.y)/g},R=Eh(T,I);!o&&R>0?R-=2*p:o&&R<0&&(R+=2*p),R%=2*p;var L=C+R*c,P=v*d(L),N=g*f(L),j={x:d(y)*P-f(y)*N+M.x,y:f(y)*P+d(y)*N+M.y};return j}function hT(t,r,e,n,i,a,o,s,l,c,u){var f,d=u.bbox,h=d===void 0?!0:d,p=u.length,v=p===void 0?!0:p,g=u.sampleSize,m=g===void 0?30:g,y=typeof c=="number",b=t,x=r,O=0,w=[b,x,O],S=[b,x],k=0,E={x:0,y:0},_=[{x:b,y:x}];y&&c<=0&&(E={x:b,y:x});for(var A=0;A<=m;A+=1){if(k=A/m,f=dT(t,r,e,n,i,a,o,s,l,k),b=f.x,x=f.y,h&&_.push({x:b,y:x}),v&&(O+=en(S,[b,x])),S=[b,x],y&&O>=c&&c>w[2]){var M=(O-c)/(O-w[2]);E={x:S[0]*(1-M)+w[0]*M,y:S[1]*(1-M)+w[1]*M}}w=[b,x,O]}return y&&c>=O&&(E={x:s,y:l}),{length:O,point:E,min:{x:Math.min.apply(null,_.map(function(T){return T.x})),y:Math.min.apply(null,_.map(function(T){return T.y}))},max:{x:Math.max.apply(null,_.map(function(T){return T.x})),y:Math.max.apply(null,_.map(function(T){return T.y}))}}}function pT(t,r,e,n,i,a,o,s,l){var c=1-l;return{x:Math.pow(c,3)*t+3*Math.pow(c,2)*l*e+3*c*Math.pow(l,2)*i+Math.pow(l,3)*o,y:Math.pow(c,3)*r+3*Math.pow(c,2)*l*n+3*c*Math.pow(l,2)*a+Math.pow(l,3)*s}}function zm(t,r,e,n,i,a,o,s,l,c){var u,f=c.bbox,d=f===void 0?!0:f,h=c.length,p=h===void 0?!0:h,v=c.sampleSize,g=v===void 0?10:v,m=typeof l=="number",y=t,b=r,x=0,O=[y,b,x],w=[y,b],S=0,k={x:0,y:0},E=[{x:y,y:b}];m&&l<=0&&(k={x:y,y:b});for(var _=0;_<=g;_+=1){if(S=_/g,u=pT(t,r,e,n,i,a,o,s,S),y=u.x,b=u.y,d&&E.push({x:y,y:b}),p&&(x+=en(w,[y,b])),w=[y,b],m&&x>=l&&l>O[2]){var A=(x-l)/(x-O[2]);k={x:w[0]*(1-A)+O[0]*A,y:w[1]*(1-A)+O[1]*A}}O=[y,b,x]}return m&&l>=x&&(k={x:o,y:s}),{length:x,point:k,min:{x:Math.min.apply(null,E.map(function(M){return M.x})),y:Math.min.apply(null,E.map(function(M){return M.y}))},max:{x:Math.max.apply(null,E.map(function(M){return M.x})),y:Math.max.apply(null,E.map(function(M){return M.y}))}}}function vT(t,r,e,n,i,a,o){var s=1-o;return{x:Math.pow(s,2)*t+2*s*o*e+Math.pow(o,2)*i,y:Math.pow(s,2)*r+2*s*o*n+Math.pow(o,2)*a}}function gT(t,r,e,n,i,a,o,s){var l,c=s.bbox,u=c===void 0?!0:c,f=s.length,d=f===void 0?!0:f,h=s.sampleSize,p=h===void 0?10:h,v=typeof o=="number",g=t,m=r,y=0,b=[g,m,y],x=[g,m],O=0,w={x:0,y:0},S=[{x:g,y:m}];v&&o<=0&&(w={x:g,y:m});for(var k=0;k<=p;k+=1){if(O=k/p,l=vT(t,r,e,n,i,a,O),g=l.x,m=l.y,u&&S.push({x:g,y:m}),d&&(y+=en(x,[g,m])),x=[g,m],v&&y>=o&&o>b[2]){var E=(y-o)/(y-b[2]);w={x:x[0]*(1-E)+b[0]*E,y:x[1]*(1-E)+b[1]*E}}b=[g,m,y]}return v&&o>=y&&(w={x:i,y:a}),{length:y,point:w,min:{x:Math.min.apply(null,S.map(function(_){return _.x})),y:Math.min.apply(null,S.map(function(_){return _.y}))},max:{x:Math.max.apply(null,S.map(function(_){return _.x})),y:Math.max.apply(null,S.map(function(_){return _.y}))}}}function Gm(t,r,e){for(var n,i,a,o,s,l,c=Fs(t),u=typeof r=="number",f,d=[],h,p=0,v=0,g=0,m=0,y,b=[],x=[],O=0,w={x:0,y:0},S=w,k=w,E=w,_=0,A=0,M=c.length;A<M;A+=1)y=c[A],h=y[0],f=h==="M",d=f?d:[p,v].concat(y.slice(1)),f?(g=y[1],m=y[2],w={x:g,y:m},S=w,O=0,u&&r<.001&&(E=w)):h==="L"?(n=pu(d[0],d[1],d[2],d[3],(r||0)-_),O=n.length,w=n.min,S=n.max,k=n.point):h==="A"?(i=hT(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],d[8],(r||0)-_,e||{}),O=i.length,w=i.min,S=i.max,k=i.point):h==="C"?(a=zm(d[0],d[1],d[2],d[3],d[4],d[5],d[6],d[7],(r||0)-_,e||{}),O=a.length,w=a.min,S=a.max,k=a.point):h==="Q"?(o=gT(d[0],d[1],d[2],d[3],d[4],d[5],(r||0)-_,e||{}),O=o.length,w=o.min,S=o.max,k=o.point):h==="Z"&&(d=[p,v,g,m],s=pu(d[0],d[1],d[2],d[3],(r||0)-_),O=s.length,w=s.min,S=s.max,k=s.point),u&&_<r&&_+O>=r&&(E=k),x.push(S),b.push(w),_+=O,l=h!=="Z"?y.slice(-2):[g,m],p=l[0],v=l[1];return u&&r>=_&&(E={x:p,y:v}),{length:_,point:E,min:{x:Math.min.apply(null,b.map(function(T){return T.x})),y:Math.min.apply(null,b.map(function(T){return T.y}))},max:{x:Math.max.apply(null,x.map(function(T){return T.x})),y:Math.max.apply(null,x.map(function(T){return T.y}))}}}function mT(t,r){return Gm(t,void 0,J(J({},r),{bbox:!1,length:!0})).length}function yT(t){var r=t.length,e=r-1;return t.map(function(n,i){return t.map(function(a,o){var s=i+o,l;return o===0||t[s]&&t[s][0]==="M"?(l=t[s],["M"].concat(l.slice(-2))):(s>=r&&(s-=e),t[s])})})}function bT(t,r){var e=t.length-1,n=[],i=0,a=0,o=yT(t);return o.forEach(function(s,l){t.slice(1).forEach(function(c,u){a+=en(t[(l+u)%e].slice(-2),r[u%e].slice(-2))}),n[l]=a,a=0}),i=n.indexOf(Math.min.apply(null,n)),o[i]}function xT(t,r,e,n,i,a,o,s){return 3*((s-r)*(e+i)-(o-t)*(n+a)+n*(t-i)-e*(r-a)+s*(i+t/3)-o*(a+r/3))/20}function OT(t){var r=0,e=0,n=0;return hu(t).map(function(i){var a;switch(i[0]){case"M":return r=i[1],e=i[2],0;default:var o=i.slice(1),s=o[0],l=o[1],c=o[2],u=o[3],f=o[4],d=o[5];return n=xT(r,e,s,l,c,u,f,d),a=i.slice(-2),r=a[0],e=a[1],n}}).reduce(function(i,a){return i+a},0)}function _h(t){return OT(t)>=0}function wT(t,r,e){return Gm(t,r,J(J({},e),{bbox:!1,length:!0})).point}var ST=50;function kT(t,r){r===void 0&&(r=.5);var e=t.slice(0,2),n=t.slice(2,4),i=t.slice(4,6),a=t.slice(6,8),o=yr(e,n,r),s=yr(n,i,r),l=yr(i,a,r),c=yr(o,s,r),u=yr(s,l,r),f=yr(c,u,r);return[["C"].concat(o,c,f),["C"].concat(u,l,a)]}function Ah(t){return t.map(function(r,e,n){var i=e&&n[e-1].slice(-2).concat(r.slice(1)),a=e?zm(i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],i[8],{bbox:!1}).length:0,o;return e?o=a?kT(i):[r,r]:o=[r],{s:r,ss:o,l:a}})}function Wm(t,r,e,n){if(n===void 0&&(n=0),n>ST)return console.warn("Maximum recursion depth reached in equalizeSegments"),[t,r];var i=Ah(t),a=Ah(r),o=i.length,s=a.length,l=i.filter(function(m){return m.l}).length,c=a.filter(function(m){return m.l}).length,u=i.filter(function(m){return m.l}).reduce(function(m,y){var b=y.l;return m+b},0)/l||0,f=a.filter(function(m){return m.l}).reduce(function(m,y){var b=y.l;return m+b},0)/c||0,d=e||Math.max(o,s),h=[u,f],p=[d-o,d-s],v=0,g=[i,a].map(function(m,y){return m.l===d?m.map(function(b){return b.s}):m.map(function(b,x){return v=x&&p[y]&&b.l>=h[y],p[y]-=v?1:0,v?b.ss:[b.s]}).flat()});return g[0].length===g[1].length?g:Wm(g[0],g[1],d,n+1)}function Th(t){var r=document.createElement("div");r.innerHTML=t;var e=r.childNodes[0];return e&&r.contains(e)&&r.removeChild(e),e}function Xt(t,r){if(t!==null)return{type:"column",value:t,field:r}}function Va(t,r){const e=Xt(t,r);return Object.assign(Object.assign({},e),{inferred:!0})}function $s(t,r){if(t!==null)return{type:"column",value:t,field:r,visual:!0}}function ET(t,r){const e=Xt(t,r);return Object.assign(Object.assign({},e),{constant:!1})}function Tr(t,r){const e=[];for(const n of t)e[n]=r;return e}function Ct(t,r){const e=t[r];if(!e)return[null,null];const{value:n,field:i=null}=e;return[n,i]}function zs(t,...r){for(const e of r)if(typeof e=="string"){const[n,i]=Ct(t,e);if(n!==null)return[n,i]}else return[e,null];return[null,null]}function mo(t){return t instanceof Date?!1:typeof t=="object"}const yo=()=>(t,r)=>{const{encode:e}=r,{y1:n}=e;return n!==void 0?[t,r]:[t,X({},r,{encode:{y1:Va(Tr(t,0))}})]};yo.props={};function qi(t,...r){return r.reduce((e,n)=>i=>e(n(i)),t)}function Gs(t,r){return r-t?e=>(e-t)/(r-t):e=>.5}function _T(t,r){const e=r<t?r:t,n=t>r?t:r;return i=>Math.min(Math.max(e,i),n)}function Ef(t,r,e,n,i){let a=e||0,o=n||t.length;const s=i||(l=>l);for(;a<o;){const l=Math.floor((a+o)/2);s(t[l])>r?o=l:a=l+1}return a}const vu=Math.sqrt(50),gu=Math.sqrt(10),mu=Math.sqrt(2);function Es(t,r,e){const n=(r-t)/Math.max(0,e),i=Math.floor(Math.log(n)/Math.LN10),a=n/10**i;return i>=0?(a>=vu?10:a>=gu?5:a>=mu?2:1)*10**i:-(10**-i)/(a>=vu?10:a>=gu?5:a>=mu?2:1)}function Mh(t,r,e){const n=Math.abs(r-t)/Math.max(0,e);let i=10**Math.floor(Math.log(n)/Math.LN10);const a=n/i;return a>=vu?i*=10:a>=gu?i*=5:a>=mu&&(i*=2),r<t?-i:i}const Ym=(t,r,e=5)=>{const n=[t,r];let i=0,a=n.length-1,o=n[i],s=n[a],l;return s<o&&([o,s]=[s,o],[i,a]=[a,i]),l=Es(o,s,e),l>0?(o=Math.floor(o/l)*l,s=Math.ceil(s/l)*l,l=Es(o,s,e)):l<0&&(o=Math.ceil(o*l)/l,s=Math.floor(s*l)/l,l=Es(o,s,e)),l>0?(n[i]=Math.floor(o/l)*l,n[a]=Math.ceil(s/l)*l):l<0&&(n[i]=Math.ceil(o*l)/l,n[a]=Math.floor(s*l)/l),n},Xa=1e3,Ua=Xa*60,qa=Ua*60,ui=qa*24,Ba=ui*7,Hm=ui*30,Vm=ui*365;function Ve(t,r,e,n){const i=(c,u)=>{const f=h=>n(h)%u===0;let d=u;for(;d&&!f(c);)e(c,-1),d-=1;return c},a=(c,u)=>{u&&i(c,u),r(c)},o=(c,u)=>{const f=new Date(+c);return a(f,u),f},s=(c,u)=>{const f=new Date(+c-1);return a(f,u),e(f,u),a(f),f};return{ceil:s,floor:o,range:(c,u,f,d)=>{const h=[],p=Math.floor(f),v=d?s(c,f):s(c);for(let g=v;g<u;e(g,p),a(g))h.push(new Date(+g));return h},duration:t}}const AT=Ve(1,t=>t,(t,r=1)=>{t.setTime(+t+r)},t=>t.getTime()),TT=Ve(Xa,t=>{t.setMilliseconds(0)},(t,r=1)=>{t.setTime(+t+Xa*r)},t=>t.getSeconds()),MT=Ve(Ua,t=>{t.setSeconds(0,0)},(t,r=1)=>{t.setTime(+t+Ua*r)},t=>t.getMinutes()),PT=Ve(qa,t=>{t.setMinutes(0,0,0)},(t,r=1)=>{t.setTime(+t+qa*r)},t=>t.getHours()),CT=Ve(ui,t=>{t.setHours(0,0,0,0)},(t,r=1)=>{t.setTime(+t+ui*r)},t=>t.getDate()-1),Xm=Ve(Hm,t=>{t.setDate(1),t.setHours(0,0,0,0)},(t,r=1)=>{const e=t.getMonth();t.setMonth(e+r)},t=>t.getMonth()),LT=Ve(Ba,t=>{t.setDate(t.getDate()-t.getDay()%7),t.setHours(0,0,0,0)},(t,r=1)=>{t.setDate(t.getDate()+7*r)},t=>{const r=Xm.floor(t),e=new Date(+t);return Math.floor((+e-+r)/Ba)}),RT=Ve(Vm,t=>{t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r=1)=>{const e=t.getFullYear();t.setFullYear(e+r)},t=>t.getFullYear()),Um={millisecond:AT,second:TT,minute:MT,hour:PT,day:CT,week:LT,month:Xm,year:RT},NT=Ve(1,t=>t,(t,r=1)=>{t.setTime(+t+r)},t=>t.getTime()),IT=Ve(Xa,t=>{t.setUTCMilliseconds(0)},(t,r=1)=>{t.setTime(+t+Xa*r)},t=>t.getUTCSeconds()),jT=Ve(Ua,t=>{t.setUTCSeconds(0,0)},(t,r=1)=>{t.setTime(+t+Ua*r)},t=>t.getUTCMinutes()),DT=Ve(qa,t=>{t.setUTCMinutes(0,0,0)},(t,r=1)=>{t.setTime(+t+qa*r)},t=>t.getUTCHours()),BT=Ve(ui,t=>{t.setUTCHours(0,0,0,0)},(t,r=1)=>{t.setTime(+t+ui*r)},t=>t.getUTCDate()-1),qm=Ve(Hm,t=>{t.setUTCDate(1),t.setUTCHours(0,0,0,0)},(t,r=1)=>{const e=t.getUTCMonth();t.setUTCMonth(e+r)},t=>t.getUTCMonth()),FT=Ve(Ba,t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7)%7),t.setUTCHours(0,0,0,0)},(t,r=1)=>{t.setTime(+t+Ba*r)},t=>{const r=qm.floor(t),e=new Date(+t);return Math.floor((+e-+r)/Ba)}),$T=Ve(Vm,t=>{t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r=1)=>{const e=t.getUTCFullYear();t.setUTCFullYear(e+r)},t=>t.getUTCFullYear()),Km={millisecond:NT,second:IT,minute:jT,hour:DT,day:BT,week:FT,month:qm,year:$T};function zT(t){const r=t?Km:Um,{year:e,month:n,week:i,day:a,hour:o,minute:s,second:l,millisecond:c}=r;return{tickIntervals:[[l,1],[l,5],[l,15],[l,30],[s,1],[s,5],[s,15],[s,30],[o,1],[o,3],[o,6],[o,12],[a,1],[a,2],[i,1],[n,1],[n,3],[e,1]],year:e,millisecond:c}}function Zm(t,r,e,n,i){const a=+t,o=+r,{tickIntervals:s,year:l,millisecond:c}=zT(i),u=([g,m])=>g.duration*m,f=n?(o-a)/n:e||5,d=n||(o-a)/f,h=s.length,p=Ef(s,d,0,h,u);let v;if(p===h){const g=Mh(a/l.duration,o/l.duration,f);v=[l,g]}else if(p){const g=d/u(s[p-1])<u(s[p])/d,[m,y]=g?s[p-1]:s[p],b=n?Math.ceil(n/m.duration):y;v=[m,b]}else{const g=Math.max(Mh(a,o,f),1);v=[c,g]}return v}const GT=(t,r,e,n,i)=>{const a=t>r,o=a?r:t,s=a?t:r,[l,c]=Zm(o,s,e,n,i),u=[l.floor(o,c),l.ceil(s,c)];return a?u.reverse():u};function Ws(t){return!Ut(t)&&!BA(t)&&!Number.isNaN(t)}const Qm=t=>r=>-t(-r),_f=(t,r)=>{const e=Math.log(t),n=t===Math.E?Math.log:t===10?Math.log10:t===2?Math.log2:i=>Math.log(i)/e;return r?Qm(n):n},Af=(t,r)=>{const e=t===Math.E?Math.exp:n=>t**n;return r?Qm(e):e},WT=(t,r,e,n)=>{const i=t<0,a=_f(n,i),o=Af(n,i),s=t>r,l=s?r:t,c=s?t:r,u=[o(Math.floor(a(l))),o(Math.ceil(a(c)))];return s?u.reverse():u},YT=t=>r=>{const e=t(r);return re(e)?Math.round(e):e};function HT(t,r){return e=>{e.prototype.rescale=function(){this.initRange(),this.nice();const[n]=this.chooseTransforms();this.composeOutput(n,this.chooseClamp(n))},e.prototype.initRange=function(){const{interpolator:n}=this.options;this.options.range=t(n)},e.prototype.composeOutput=function(n,i){const{domain:a,interpolator:o,round:s}=this.getOptions(),l=r(a.map(n)),c=s?YT(o):o;this.output=qi(c,l,i,n)},e.prototype.invert=void 0}}function bc(t,r,e){let n=e;return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(r-t)*6*n:n<1/2?r:n<2/3?t+(r-t)*(2/3-n)*6:t}function VT(t){const r=t[0]/360,e=t[1]/100,n=t[2]/100,i=t[3];if(e===0)return[n*255,n*255,n*255,i];const a=n<.5?n*(1+e):n+e-n*e,o=2*n-a,s=bc(o,a,r+1/3),l=bc(o,a,r),c=bc(o,a,r-1/3);return[s*255,l*255,c*255,i]}function Ph(t){const r=iE.get(t);if(!r)return null;const{model:e,value:n}=r;return e==="rgb"?n:e==="hsl"?VT(n):null}const Ki=(t,r)=>e=>t*(1-e)+r*e,XT=(t,r)=>{const e=Ph(t),n=Ph(r);return e===null||n===null?e?()=>t:()=>r:i=>{const a=new Array(4);for(let u=0;u<4;u+=1){const f=e[u],d=n[u];a[u]=f*(1-i)+d*i}const[o,s,l,c]=a;return`rgba(${Math.round(o)}, ${Math.round(s)}, ${Math.round(l)}, ${c})`}},bo=(t,r)=>typeof t=="number"&&typeof r=="number"?Ki(t,r):typeof t=="string"&&typeof r=="string"?XT(t,r):()=>t,UT=(t,r)=>{const e=Ki(t,r);return n=>Math.round(e(n))};function qT(t,r){const{second:e,minute:n,hour:i,day:a,week:o,month:s,year:l}=r;return e.floor(t)<t?".SSS":n.floor(t)<t?":ss":i.floor(t)<t?"hh:mm":a.floor(t)<t?"hh A":s.floor(t)<t?o.floor(t)<t?"MMM DD":"ddd DD":l.floor(t)<t?"MMMM":"YYYY"}function Ch({map:t,initKey:r},e){const n=r(e);return t.has(n)?t.get(n):e}function KT({map:t,initKey:r},e){const n=r(e);return t.has(n)?t.get(n):(t.set(n,e),e)}function ZT({map:t,initKey:r},e){const n=r(e);return t.has(n)&&(e=t.get(n),t.delete(n)),e}function QT(t){return typeof t=="object"?t.valueOf():t}class Lh extends Map{constructor(r){if(super(),this.map=new Map,this.initKey=QT,r!==null)for(const[e,n]of r)this.set(e,n)}get(r){return super.get(Ch({map:this.map,initKey:this.initKey},r))}has(r){return super.has(Ch({map:this.map,initKey:this.initKey},r))}set(r,e){return super.set(KT({map:this.map,initKey:this.initKey},r),e)}delete(r){return super.delete(ZT({map:this.map,initKey:this.initKey},r))}}class xo{constructor(r){this.options=X({},this.getDefaultOptions()),this.update(r)}getOptions(){return this.options}update(r={}){this.options=X({},this.options,r),this.rescale(r)}rescale(r){}}const _l=Symbol("defaultUnknown");function Rh(t,r,e){for(let n=0;n<r.length;n+=1)t.has(r[n])||t.set(e(r[n]),n)}function Nh(t){const{value:r,from:e,to:n,mapper:i,notFoundReturn:a}=t;let o=i.get(r);if(o===void 0){if(a!==_l)return a;o=e.push(r)-1,i.set(r,o)}return n[o%n.length]}function Ih(t){return t instanceof Date?r=>`${r}`:typeof t=="object"?r=>JSON.stringify(r):r=>r}let Jm=class ty extends xo{getDefaultOptions(){return{domain:[],range:[],unknown:_l}}constructor(r){super(r)}map(r){return this.domainIndexMap.size===0&&Rh(this.domainIndexMap,this.getDomain(),this.domainKey),Nh({value:this.domainKey(r),mapper:this.domainIndexMap,from:this.getDomain(),to:this.getRange(),notFoundReturn:this.options.unknown})}invert(r){return this.rangeIndexMap.size===0&&Rh(this.rangeIndexMap,this.getRange(),this.rangeKey),Nh({value:this.rangeKey(r),mapper:this.rangeIndexMap,from:this.getRange(),to:this.getDomain(),notFoundReturn:this.options.unknown})}rescale(r){const[e]=this.options.domain,[n]=this.options.range;if(this.domainKey=Ih(e),this.rangeKey=Ih(n),!this.rangeIndexMap){this.rangeIndexMap=new Map,this.domainIndexMap=new Map;return}(!r||r.range)&&this.rangeIndexMap.clear(),(!r||r.domain||r.compare)&&(this.domainIndexMap.clear(),this.sortedDomain=void 0)}clone(){return new ty(this.options)}getRange(){return this.options.range}getDomain(){if(this.sortedDomain)return this.sortedDomain;const{domain:r,compare:e}=this.options;return this.sortedDomain=e?[...r].sort(e):r,this.sortedDomain}};function JT(t){const r=Math.min(...t);return t.map(e=>e/r)}function t2(t,r){const e=t.length,n=r-e;return n>0?[...t,...new Array(n).fill(1)]:n<0?t.slice(0,r):t}function e2(t){return Math.round(t*1e12)/1e12}function n2(t){const{domain:r,range:e,paddingOuter:n,paddingInner:i,flex:a,round:o,align:s}=t,l=r.length,c=t2(a,l),[u,f]=e,d=f-u,h=2/l*n+1-1/l*i,p=d/h,v=p*i/l,g=p-l*v,m=JT(c),y=m.reduce((M,T)=>M+T),b=g/y,x=new Lh(r.map((M,T)=>{const C=m[T]*b;return[M,o?Math.floor(C):C]})),O=new Lh(r.map((M,T)=>{const I=m[T]*b+v;return[M,o?Math.floor(I):I]})),w=Array.from(O.values()).reduce((M,T)=>M+T),k=(d-(w-w/l*i))*s,E=u+k;let _=o?Math.round(E):E;const A=new Array(l);for(let M=0;M<l;M+=1){A[M]=e2(_);const T=r[M];_+=O.get(T)}return{valueBandWidth:x,valueStep:O,adjustedRange:A}}function r2(t){var r;const{domain:e}=t,n=e.length;if(n===0)return{valueBandWidth:void 0,valueStep:void 0,adjustedRange:[]};if(!!(!((r=t.flex)===null||r===void 0)&&r.length))return n2(t);const{range:a,paddingOuter:o,paddingInner:s,round:l,align:c}=t;let u,f,d=a[0];const p=a[1]-d,v=o*2,g=n-s;u=p/Math.max(1,v+g),l&&(u=Math.floor(u)),d+=(p-u*(n-s))*c,f=u*(1-s),l&&(d=Math.round(d),f=Math.round(f));const m=new Array(n).fill(0).map((y,b)=>d+b*u);return{valueStep:u,valueBandWidth:f,adjustedRange:m}}let Zi=class ey extends Jm{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,paddingInner:0,paddingOuter:0,padding:0,unknown:_l,flex:[]}}constructor(r){super(r)}clone(){return new ey(this.options)}getStep(r){return this.valueStep===void 0?1:typeof this.valueStep=="number"?this.valueStep:r===void 0?Array.from(this.valueStep.values())[0]:this.valueStep.get(r)}getBandWidth(r){return this.valueBandWidth===void 0?1:typeof this.valueBandWidth=="number"?this.valueBandWidth:r===void 0?Array.from(this.valueBandWidth.values())[0]:this.valueBandWidth.get(r)}getRange(){return this.adjustedRange}getPaddingInner(){const{padding:r,paddingInner:e}=this.options;return r>0?r:e}getPaddingOuter(){const{padding:r,paddingOuter:e}=this.options;return r>0?r:e}rescale(){super.rescale();const{align:r,domain:e,range:n,round:i,flex:a}=this.options,{adjustedRange:o,valueBandWidth:s,valueStep:l}=r2({align:r,range:n,round:i,flex:a,paddingInner:this.getPaddingInner(),paddingOuter:this.getPaddingOuter(),domain:e});this.valueStep=l,this.valueBandWidth=s,this.adjustedRange=o}};const fi=(t,r,e)=>{let n,i,a=t,o=r;if(a===o&&e>0)return[a];let s=Es(a,o,e);if(s===0||!Number.isFinite(s))return[];if(s>0){a=Math.ceil(a/s),o=Math.floor(o/s),i=new Array(n=Math.ceil(o-a+1));for(let l=0;l<n;l+=1)i[l]=(a+l)*s}else{s=-s,a=Math.ceil(a*s),o=Math.floor(o*s),i=new Array(n=Math.ceil(o-a+1));for(let l=0;l<n;l+=1)i[l]=(a+l)/s}return i};let Tf=class ny extends xo{getDefaultOptions(){return{range:[0],domain:[0,1],unknown:void 0,tickCount:5,tickMethod:fi}}map(r){const[e]=this.options.range;return e!==void 0?e:this.options.unknown}invert(r){const[e]=this.options.range;return r===e&&e!==void 0?this.options.domain:[]}getTicks(){const{tickMethod:r,domain:e,tickCount:n}=this.options,[i,a]=e;return!re(i)||!re(a)?[]:r(i,a,n)}clone(){return new ny(this.options)}};function ba(t){return Math.abs(t)<1e-14?t:parseFloat(t.toFixed(14))}const i2=[1,5,2,2.5,4,3],jh=Number.EPSILON*100;function a2(t,r){return(t%r+r)%r}function o2(t){return Math.round(t*1e12)/1e12}function s2(t,r,e,n,i,a){const o=Bs(r),s=Im(r,t);let l=0;const c=a2(n,a);return(c<jh||a-c<jh)&&n<=0&&i>=0&&(l=1),1-s/(o-1)-e+l}function l2(t,r,e){const n=Bs(r);return 1-Im(r,t)/(n-1)-e+1}function c2(t,r,e,n,i,a){const o=(t-1)/(a-i),s=(r-1)/(Math.max(a,n)-Math.min(e,i));return 2-Math.max(o/s,s/o)}function u2(t,r){return t>=r?2-(t-1)/(r-1):1}function f2(t,r,e,n){const i=r-t;return 1-.5*((r-n)**2+(t-e)**2)/(.1*i)**2}function d2(t,r,e){const n=r-t;return e>n?1-((e-n)/2)**2/(.1*n)**2:1}function h2(){return 1}const Mf=(t,r,e=5,n=!0,i=i2,a=[.25,.2,.5,.05])=>{const o=e<0?0:Math.round(e);if(Number.isNaN(t)||Number.isNaN(r)||typeof t!="number"||typeof r!="number"||!o)return[];if(r-t<1e-15||o===1)return[t];const s={score:-2,lmin:0,lmax:0,lstep:0};let l=1;for(;l<1/0;){for(let p=0;p<i.length;p+=1){const v=i[p],g=l2(v,i,l);if(a[0]*g+a[1]+a[2]+a[3]<s.score){l=1/0;break}let m=2;for(;m<1/0;){const y=u2(m,o);if(a[0]*g+a[1]+a[2]*y+a[3]<s.score)break;const b=(r-t)/(m+1)/l/v;let x=Math.ceil(Math.log10(b));for(;x<1/0;){const O=l*v*10**x,w=d2(t,r,O*(m-1));if(a[0]*g+a[1]*w+a[2]*y+a[3]<s.score)break;const S=Math.floor(r/O)*l-(m-1)*l,k=Math.ceil(t/O)*l;if(S<=k){const E=k-S;for(let _=0;_<=E;_+=1){const M=(S+_)*(O/l),T=M+O*(m-1),C=O,I=s2(v,i,l,M,T,C),R=f2(t,r,M,T),L=c2(m,o,t,r,M,T),P=h2(),N=a[0]*I+a[1]*R+a[2]*L+a[3]*P;N>s.score&&(!n||M<=t&&T>=r)&&(s.lmin=M,s.lmax=T,s.lstep=C,s.score=N)}}x+=1}m+=1}}l+=1}const c=ba(s.lmax),u=ba(s.lmin),f=ba(s.lstep),d=Math.floor(o2((c-u)/f))+1,h=new Array(d);h[0]=ba(u);for(let p=1;p<d;p+=1)h[p]=ba(h[p-1]+f);return h};let ry=class iy extends xo{getDefaultOptions(){return{domain:[0,1],range:[0,1],tickCount:5,unknown:void 0,tickMethod:Mf}}map(r){return Ws(r)?r:this.options.unknown}invert(r){return this.map(r)}clone(){return new iy(this.options)}getTicks(){const{domain:r,tickCount:e,tickMethod:n}=this.options,[i,a]=r;return!re(i)||!re(a)?[]:n(i,a,e)}};const p2=(t,r,e)=>{const[n,i]=t,[a,o]=r;let s,l;return n<i?(s=Gs(n,i),l=e(a,o)):(s=Gs(i,n),l=e(o,a)),qi(l,s)},v2=(t,r,e)=>{const n=Math.min(t.length,r.length)-1,i=new Array(n),a=new Array(n),o=t[0]>t[n],s=o?[...t].reverse():t,l=o?[...r].reverse():r;for(let c=0;c<n;c+=1)i[c]=Gs(s[c],s[c+1]),a[c]=e(l[c],l[c+1]);return c=>{const u=Ef(t,c,1,n)-1,f=i[u],d=a[u];return qi(d,f)(c)}},Dh=(t,r,e,n)=>(Math.min(t.length,r.length)>2?v2:p2)(t,r,n?UT:e);let Al=class extends xo{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:Ki,tickCount:5}}map(r){return Ws(r)?this.output(r):this.options.unknown}invert(r){return Ws(r)?this.input(r):this.options.unknown}nice(){if(!this.options.nice)return;const[r,e,n,...i]=this.getTickMethodOptions();this.options.domain=this.chooseNice()(r,e,n,...i)}getTicks(){const{tickMethod:r}=this.options,[e,n,i,...a]=this.getTickMethodOptions();return r(e,n,i,...a)}getTickMethodOptions(){const{domain:r,tickCount:e}=this.options,n=r[0],i=r[r.length-1];return[n,i,e]}chooseNice(){return Ym}rescale(){this.nice();const[r,e]=this.chooseTransforms();this.composeOutput(r,this.chooseClamp(r)),this.composeInput(r,e,this.chooseClamp(e))}chooseClamp(r){const{clamp:e,range:n}=this.options,i=this.options.domain.map(r),a=Math.min(i.length,n.length);return e?_T(i[0],i[a-1]):ci}composeOutput(r,e){const{domain:n,range:i,round:a,interpolate:o}=this.options,s=Dh(n.map(r),i,o,a);this.output=qi(s,e,r)}composeInput(r,e,n){const{domain:i,range:a}=this.options,o=Dh(a,i.map(r),Ki);this.input=qi(e,n,o)}},Zt=class ay extends Al{getDefaultOptions(){return{domain:[0,1],range:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolate:bo,tickMethod:fi,tickCount:5}}chooseTransforms(){return[ci,ci]}clone(){return new ay(this.options)}},oy=class sy extends Zi{getDefaultOptions(){return{domain:[],range:[0,1],align:.5,round:!1,padding:0,unknown:_l,paddingInner:1,paddingOuter:0}}constructor(r){super(r)}getPaddingInner(){return 1}clone(){return new sy(this.options)}update(r){super.update(r)}getPaddingOuter(){return this.options.padding}};const g2=t=>r=>r<0?-((-r)**t):r**t,m2=t=>r=>r<0?-((-r)**(1/t)):r**(1/t),y2=t=>t<0?-Math.sqrt(-t):Math.sqrt(t);let ly=class cy extends Al{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,exponent:2,interpolate:bo,tickMethod:fi,tickCount:5}}constructor(r){super(r)}chooseTransforms(){const{exponent:r}=this.options;if(r===1)return[ci,ci];const e=r===.5?y2:g2(r),n=m2(r);return[e,n]}clone(){return new cy(this.options)}},b2=class uy extends ly{getDefaultOptions(){return{domain:[0,1],range:[0,1],nice:!1,clamp:!1,round:!1,interpolate:bo,tickMethod:fi,tickCount:5,exponent:.5}}constructor(r){super(r)}update(r){super.update(r)}clone(){return new uy(this.options)}},Tl=class fy extends xo{getDefaultOptions(){return{domain:[.5],range:[0,1]}}constructor(r){super(r)}map(r){if(!Ws(r))return this.options.unknown;const e=Ef(this.thresholds,r,0,this.n);return this.options.range[e]}invert(r){const{range:e}=this.options,n=e.indexOf(r),i=this.thresholds;return[i[n-1],i[n]]}clone(){return new fy(this.options)}rescale(){const{domain:r,range:e}=this.options;this.n=Math.min(r.length,e.length-1),this.thresholds=r}};const x2=(t,r,e,n=10)=>{const i=t<0,a=Af(n,i),o=_f(n,i),s=r<t,l=s?r:t,c=s?t:r;let u=o(l),f=o(c),d=[];if(!(n%1)&&f-u<e){if(u=Math.floor(u),f=Math.ceil(f),i)for(;u<=f;u+=1){const h=a(u);for(let p=n-1;p>=1;p-=1){const v=h*p;if(v>c)break;v>=l&&d.push(v)}}else for(;u<=f;u+=1){const h=a(u);for(let p=1;p<n;p+=1){const v=h*p;if(v>c)break;v>=l&&d.push(v)}}d.length*2<e&&(d=fi(l,c,e))}else{const h=e===-1?f-u:Math.min(f-u,e);d=fi(u,f,h).map(a)}return s?d.reverse():d};let O2=class dy extends Al{getDefaultOptions(){return{domain:[1,10],range:[0,1],base:10,interpolate:bo,tickMethod:x2,tickCount:5}}chooseNice(){return WT}getTickMethodOptions(){const{domain:r,tickCount:e,base:n}=this.options,i=r[0],a=r[r.length-1];return[i,a,e,n]}chooseTransforms(){const{base:r,domain:e}=this.options,n=e[0]<0;return[_f(r,n),Af(r,n)]}clone(){return new dy(this.options)}},hy=class py extends Tl{getDefaultOptions(){return{domain:[0,1],range:[.5],nice:!1,tickCount:5,tickMethod:Mf}}constructor(r){super(r)}nice(){const{nice:r}=this.options;if(r){const[e,n,i]=this.getTickMethodOptions();this.options.domain=Ym(e,n,i)}}getTicks(){const{tickMethod:r}=this.options,[e,n,i]=this.getTickMethodOptions();return r(e,n,i)}getTickMethodOptions(){const{domain:r,tickCount:e}=this.options,n=r[0],i=r[r.length-1];return[n,i,e]}rescale(){this.nice();const{range:r,domain:e}=this.options,[n,i]=e;this.n=r.length-1,this.thresholds=new Array(this.n);for(let a=0;a<this.n;a+=1)this.thresholds[a]=((a+1)*i-(a-this.n)*n)/(this.n+1)}invert(r){const[e,n]=super.invert(r),[i,a]=this.options.domain;return e===void 0&&n===void 0?[e,n]:[e||i,n||a]}getThresholds(){return this.thresholds}clone(){return new py(this.options)}};function w2(t,r){const e=t.length;if(!e)return;if(e<2)return t[e-1];const n=(e-1)*r,i=Math.floor(n),a=t[i],o=t[i+1];return a+(o-a)*(n-i)}function S2(t,r,e=!1){const n=t;e||n.sort((a,o)=>a-o);const i=[];for(let a=1;a<r;a+=1)i.push(w2(n,a/r));return i}let vy=class gy extends Tl{getDefaultOptions(){return{domain:[],range:[],tickCount:5,unknown:void 0,tickMethod:Mf}}constructor(r){super(r)}rescale(){const{domain:r,range:e}=this.options;this.n=e.length-1,this.thresholds=S2(r,this.n+1,!1)}invert(r){const[e,n]=super.invert(r),{domain:i}=this.options,a=i[0],o=i[i.length-1];return e===void 0&&n===void 0?[e,n]:[e||a,n||o]}getThresholds(){return this.thresholds}clone(){return new gy(this.options)}getTicks(){const{tickCount:r,domain:e,tickMethod:n}=this.options,i=e.length-1,a=e[0],o=e[i];return n(a,o,r)}};const k2=(t,r,e,n,i)=>{const a=t>r,o=a?r:t,s=a?t:r,[l,c]=Zm(o,s,e,n,i),u=l.range(o,new Date(+s+1),c,!0);return a?u.reverse():u};function E2(t){const r=t.getTimezoneOffset(),e=new Date(t);return e.setMinutes(e.getMinutes()+r,e.getSeconds(),e.getMilliseconds()),e}let _2=class my extends Al{getDefaultOptions(){return{domain:[new Date(2e3,0,1),new Date(2e3,0,2)],range:[0,1],nice:!1,tickCount:5,tickInterval:void 0,unknown:void 0,clamp:!1,tickMethod:k2,interpolate:Ki,mask:void 0,utc:!1}}chooseTransforms(){return[n=>+n,n=>new Date(n)]}chooseNice(){return GT}getTickMethodOptions(){const{domain:r,tickCount:e,tickInterval:n,utc:i}=this.options,a=r[0],o=r[r.length-1];return[a,o,e,n,i]}getFormatter(){const{mask:r,utc:e}=this.options,n=e?Km:Um,i=e?E2:ci;return a=>F_(i(a),r||qT(a,n))}clone(){return new my(this.options)}};var A2=function(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a},yu;function T2(t){return[t(0),t(1)]}const M2=t=>{const[r,e]=t;return qi(Ki(0,1),Gs(r,e))};let bu=yu=class extends Zt{getDefaultOptions(){return{domain:[0,1],unknown:void 0,nice:!1,clamp:!1,round:!1,interpolator:ci,tickMethod:fi,tickCount:5}}constructor(r){super(r)}clone(){return new yu(this.options)}};bu=yu=A2([HT(T2,M2)],bu);var P2=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};function C2(t){var r;let e=t;for(;e;){if(((r=e.attributes)===null||r===void 0?void 0:r.class)==="view")return e;e=e.parentNode}return null}function Ml(t){const{markType:r,nodeName:e}=t;return r==="heatmap"&&e==="image"}function Pf(t,r){const e=r??C2(t).__data__,n=t.__data__,{markKey:i,index:a,seriesIndex:o,normalized:s={x:0}}=n,{markState:l}=e,c=Array.from(l.keys()).find(u=>u.key===i);if(c)return o?o.map(u=>c.data[u]):Ml(t)?c.data[Math.round(c.data.length*s.x)]:c.data[a]}function L2(t,r){const{color:e,series:n,facet:i=!1}=t,{color:a,series:o}=r,s=l=>l&&l.invert&&!(l instanceof Zi)&&!(l instanceof Tf);if(s(n))return n.clone().invert(o);if(o&&n instanceof Zi&&n.invert(o)!==a&&!i)return n.invert(o);if(s(e)){const l=e.invert(a);return Array.isArray(l)?null:l}return null}function di(t){return t}function Cf(t){return t.reduce((r,e)=>(n,...i)=>e(r(n,...i),...i),di)}function R2(t){return t.reduce((r,e)=>n=>P2(this,void 0,void 0,function*(){const i=yield r(n);return e(i)}),di)}function Lf(t){return t.replace(/( |^)[a-z]/g,r=>r.toUpperCase())}function Qi(t=""){throw new Error(t)}function Rf(t,r){const{attributes:e}=r,n=new Set(["id","className"]);for(const[i,a]of Object.entries(e))n.has(i)||t.attr(i,a)}function qt(t){return t!=null&&!Number.isNaN(t)}function N2(t){const r=new Map;return e=>{if(r.has(e))return r.get(e);const n=t(e);return r.set(e,n),n}}function I2(t,r){const{transform:e}=t.style,i=(a=>a==="none"||a===void 0)(e)?"":e;t.style.transform=`${i} ${r}`.trimStart()}function et(t,r){return yy(t,r)||{}}function yy(t,r){const e=Object.entries(t||{}).filter(([n])=>n.startsWith(r)).map(([n,i])=>[Lm(n.replace(r,"").trim()),i]).filter(([n])=>!!n);return e.length===0?null:Object.fromEntries(e)}function j2(t,r){return Object.fromEntries(Object.entries(t).filter(([e])=>r.find(n=>e.startsWith(n))))}function _s(t,...r){return Object.fromEntries(Object.entries(t).filter(([e])=>r.every(n=>!e.startsWith(n))))}function Bh(t,r){if(t===void 0)return null;if(typeof t=="number")return t;const e=+t.replace("%","");return Number.isNaN(e)?null:e/100*r}function Ji(t){return typeof t=="object"&&!(t instanceof Date)&&t!==null&&!Array.isArray(t)}function vr(t){return t===null||t===!1}function by(t,r,e=5,n=0){if(!(n>=e)){for(const i of Object.keys(r)){const a=r[i];!pr(a)||!pr(t[i])?t[i]=a:by(t[i],a,e,n+1)}return t}}function Jn(t,r){return Object.entries(t).reduce((e,[n,i])=>(e[n]=r(i,n,t),e),{})}function Oi(t){return t.map((r,e)=>e)}function D2(t){return t[0]}function xy(t){return t[t.length-1]}function B2(t){return Array.from(new Set(t))}function Oy(t,r){const e=[[],[]];return t.forEach(n=>{e[r(n)?0:1].push(n)}),e}function wy(t,r=t.length){if(r===1)return t.map(n=>[n]);const e=[];for(let n=0;n<t.length;n++){const i=t.slice(n+1);wy(i,r-1).forEach(o=>{e.push([t[n],...o])})}return e}function F2(t){if(t.length===1)return[t];const r=[];for(let e=1;e<=t.length;e++)r.push(...wy(t,e));return r}function Ir(t,r,e){const{encode:n}=e;if(t===null)return[r];const i=$2(t).map(o=>{var s;return[o,(s=Ct(n,o))===null||s===void 0?void 0:s[0]]}).filter(([,o])=>qt(o)),a=o=>i.map(([,s])=>s[o]).join("-");return Array.from(Kt(r,a).values())}function Sy(t){return Array.isArray(t)?W2(t):typeof t=="function"?G2(t):t==="series"?z2:t==="value"?Y2:t==="sum"?H2:t==="maxIndex"?V2:null}function ky(t,r){for(const e of t)e.sort(r)}function Ey(t,r){return(r==null?void 0:r.domain)||Array.from(new Set(t))}function $2(t){return Array.isArray(t)?t:[t]}function z2(t,r,e){return Oo(n=>e[n])}function G2(t){return(r,e,n)=>Oo(i=>t(r[i]))}function W2(t){return(r,e,n)=>(i,a)=>t.reduce((o,s)=>o!==0?o:_n(r[i][s],r[a][s]),0)}function Y2(t,r,e){return Oo(n=>r[n])}function H2(t,r,e){const n=Oi(t),i=Array.from(Kt(n,o=>e[+o]).entries()),a=new Map(i.map(([o,s])=>[o,s.reduce((l,c)=>l+ +r[c])]));return Oo(o=>a.get(e[o]))}function V2(t,r,e){const n=Oi(t),i=Array.from(Kt(n,o=>e[+o]).entries()),a=new Map(i.map(([o,s])=>[o,ho(s,l=>r[l])]));return Oo(o=>a.get(e[o]))}function Oo(t){return(r,e)=>_n(t(r),t(e))}const _y=(t={})=>{const{groupBy:r="x",orderBy:e=null,reverse:n=!1,y:i="y",y1:a="y1",series:o=!0}=t;return(s,l)=>{var c;const{data:u,encode:f,style:d={}}=l,[h,p]=Ct(f,"y"),[v,g]=Ct(f,"y1"),[m]=o?zs(f,"series","color"):Ct(f,"color"),y=Ir(r,s,l),x=((c=Sy(e))!==null&&c!==void 0?c:()=>null)(u,h,m);x&&ky(y,x);const O=new Array(s.length),w=new Array(s.length),S=new Array(s.length),k=[],E=[];for(const I of y){n&&I.reverse();const R=v?+v[I[0]]:0,L=[],P=[];for(const G of I){const Y=S[G]=+h[G]-R;Y<0?P.push(G):Y>=0&&L.push(G)}const N=L.length>0?L:P,j=P.length>0?P:L;let B=L.length-1,F=0;for(;B>0&&h[N[B]]===0;)B--;for(;F<j.length-1&&h[j[F]]===0;)F++;k.push(N[B]),E.push(j[F]);let $=R;for(const G of P.reverse()){const Y=S[G];$=O[G]=(w[G]=$)+Y}let W=R;for(const G of L){const Y=S[G];Y>0?W=O[G]=(w[G]=W)+Y:O[G]=w[G]=W}}const _=new Set(k),A=new Set(E),M=i==="y"?O:w,T=a==="y"?O:w;let C;return l.type==="point"?C={y0:Va(h,p),y:Xt(M,p)}:C={y0:Va(h,p),y:Xt(M,p),y1:Xt(T,g)},[s,X({},l,{encode:Object.assign({},C),style:Object.assign({first:(I,R)=>_.has(R),last:(I,R)=>A.has(R)},d)})]}};_y.props={};function xa(t){return Math.abs(t)>10?String(t):t.toString().padStart(2,"0")}function X2(t){const r=t.getFullYear(),e=xa(t.getMonth()+1),n=xa(t.getDate()),i=`${r}-${e}-${n}`,a=t.getHours(),o=t.getMinutes(),s=t.getSeconds();return a||o||s?`${i} ${xa(a)}:${xa(o)}:${xa(s)}`:i}const Pl=(t={})=>{const{channel:r="x"}=t;return(e,n)=>{const{encode:i}=n,{tooltip:a}=n;if(vr(a))return[e,n];const{title:o}=a;if(o!==void 0)return[e,n];const s=Object.keys(i).filter(c=>c.startsWith(r)).filter(c=>!i[c].inferred).map(c=>Ct(i,c)).filter(([c])=>c).map(c=>c[0]);if(s.length===0)return[e,n];const l=[];for(const c of e)l[c]={value:s.map(u=>u[c]instanceof Date?X2(u[c]):u[c]).join(", ")};return[e,X({},n,{tooltip:{title:l}})]}};Pl.props={};const wi=()=>(t,r)=>{const{encode:e}=r,{x:n}=e;return n!==void 0?[t,r]:[t,X({},r,{encode:{x:Va(Tr(t,0))},scale:{x:{guide:null}}})]};wi.props={};const Cl=()=>(t,r)=>{const{encode:e}=r,{y:n}=e;return n!==void 0?[t,r]:[t,X({},r,{encode:{y:Va(Tr(t,0))},scale:{y:{guide:null}}})]};Cl.props={};const Ay=()=>(t,r)=>{const{encode:e}=r,{size:n}=e;return n!==void 0?[t,r]:[t,X({},r,{encode:{size:$s(Tr(t,3))}})]};Ay.props={};var U2=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Ty=()=>(t,r)=>{const{encode:e}=r,{key:n}=e,i=U2(e,["key"]);if(n!==void 0)return[t,r];const a=Object.values(i).map(({value:s})=>s),o=t.map(s=>a.filter(Array.isArray).map(l=>l[s]).join("-"));return[t,X({},r,{encode:{key:Xt(o)}})]};Ty.props={};const Nf=()=>(t,r)=>{const{encode:e}=r,{series:n,color:i}=e;if(n!==void 0||i===void 0)return[t,r];const[a,o]=Ct(e,"color");return[t,X({},r,{encode:{series:Xt(a,o)}})]};Nf.props={};const My=()=>(t,r)=>{const{data:e}=r;return!Array.isArray(e)||e.some(mo)?[t,r]:[t,X({},r,{encode:{y:Xt(e)}})]};My.props={};const Py=()=>(t,r)=>{const{data:e}=r;return!Array.isArray(e)||e.some(mo)?[t,r]:[t,X({},r,{encode:{x:Xt(e)}})]};Py.props={};const Cy=()=>(t,r)=>{const{encode:e}=r,{y1:n}=e;if(n)return[t,r];const[i]=Ct(e,"y");return[t,X({},r,{encode:{y1:Xt([...i])}})]};Cy.props={};const Ly=()=>(t,r)=>{const{encode:e}=r,{x1:n}=e;if(n)return[t,r];const[i]=Ct(e,"x");return[t,X({},r,{encode:{x1:Xt([...i])}})]};Ly.props={};const Ry=()=>(t,r)=>{const{data:e}=r;if(Array.isArray(e)&&(e.every(Array.isArray)||!e.some(mo))){const n=(i,a)=>Array.isArray(i[0])?i.map(o=>o[a]):[i[a]];return[t,X({},r,{encode:{x:Xt(n(e,0)),x1:Xt(n(e,1))}})]}return[t,r]};Ry.props={};const Ny=()=>(t,r)=>{const{data:e}=r;if(Array.isArray(e)&&(e.every(Array.isArray)||!e.some(mo))){const n=(i,a)=>Array.isArray(i[0])?i.map(o=>o[a]):[i[a]];return[t,X({},r,{encode:{y:Xt(n(e,0)),y1:Xt(n(e,1))}})]}return[t,r]};Ny.props={};const Ll=t=>{const{channel:r}=t;return(e,n)=>{const{encode:i,tooltip:a}=n;if(vr(a))return[e,n];const{items:o=[]}=a;if(!o||o.length>0)return[e,n];const l=(Array.isArray(r)?r:[r]).flatMap(c=>Object.keys(i).filter(u=>u.startsWith(c)).map(u=>{const{field:f,value:d,inferred:h=!1,aggregate:p}=i[u];return h?null:p&&d?{channel:u}:f?{field:f}:d?{channel:u}:null}).filter(u=>u!==null));return[e,X({},n,{tooltip:{items:l}})]}};Ll.props={};const If=()=>(t,r)=>[t,X({scale:{x:{padding:0},y:{padding:0}}},r)];If.props={};var Fh=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Rl=()=>(t,r)=>{const{data:e,style:n={}}=r,i=Fh(r,["data","style"]),{x:a,y:o}=n,s=Fh(n,["x","y"]);if(a==null||o==null)return[t,r];const l=a||0,c=o||0;return[[0],X({},i,{data:[0],cartesian:!0,encode:{x:Xt([l]),y:Xt([c])},scale:{x:{type:"identity",independent:!0,guide:null},y:{type:"identity",independent:!0,guide:null}},style:s})]};Rl.props={};const Iy=()=>(t,r)=>{const{style:e={}}=r;return[t,X({},r,{style:Object.assign(Object.assign({},e),Object.fromEntries(Object.entries(e).filter(([,n])=>typeof n=="function").map(([n,i])=>[n,()=>i])))})]};Iy.props={};const Nl=()=>(t,r)=>{const{data:e}=r;if(!Array.isArray(e)||e.some(mo))return[t,r];const n=Array.isArray(e[0])?e:[e],i=n.map(o=>o[0]),a=n.map(o=>o[1]);return[t,X({},r,{encode:{x:Xt(i),y:Xt(a)}})]};Nl.props={};const jy=()=>(t,r)=>{const{style:e={},encode:n}=r,{series:i}=n,{gradient:a}=e;return!a||i?[t,r]:[t,X({},r,{encode:{series:$s(Tr(t,void 0))}})]};jy.props={};var q2=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Dy=(t={})=>{const{groupBy:r="x",reverse:e=!1,orderBy:n,padding:i}=t;return q2(t,["groupBy","reverse","orderBy","padding"]),(a,o)=>{const{data:s,encode:l,scale:c}=o,{series:u}=c,[f]=Ct(l,"y"),[d]=zs(l,"series","color"),h=Ey(d,u),p=X({},o,{scale:{series:{domain:h,paddingInner:i}}}),v=Ir(r,a,o),g=Sy(n);if(!g)return[a,X(p,{encode:{series:Xt(d)}})];const m=g(s,f,d);m&&ky(v,m);const y=new Array(a.length);for(const b of v){e&&b.reverse();for(let x=0;x<b.length;x++)y[b[x]]=h[x]}return[a,X(p,{encode:{series:Xt(n?y:d)}})]}};Dy.props={};const By=t=>{const{groupBy:r=["x"],reducer:e=(o,s)=>s[o[0]],orderBy:n=null,reverse:i=!1,duration:a}=t;return(o,s)=>{const{encode:l}=s,u=(Array.isArray(r)?r:[r]).map(g=>[g,Ct(l,g)[0]]);if(u.length===0)return[o,s];let f=[o];for(const[,g]of u){const m=[];for(const y of f){const b=Array.from(Kt(y,x=>g[x]).values());m.push(...b)}f=m}if(n){const[g]=Ct(l,n);g&&f.sort((m,y)=>e(m,g)-e(y,g)),i&&f.reverse()}const d=(a||3e3)/f.length,[h]=a?[Tr(o,d)]:zs(l,"enterDuration",Tr(o,d)),[p]=zs(l,"enterDelay",Tr(o,0)),v=new Array(o.length);for(let g=0,m=0;g<f.length;g++){const y=f[g],b=Vt(y,x=>+h[x]);for(const x of y)v[x]=+p[x]+m;m+=b}return[o,X({},s,{encode:{enterDuration:$s(h),enterDelay:$s(v)}})]}};By.props={};var K2=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Z2(t){return typeof t=="function"?t:{min:(e,n)=>Rn(e,i=>n[+i]),max:(e,n)=>Vt(e,i=>n[+i]),first:(e,n)=>n[e[0]],last:(e,n)=>n[e[e.length-1]],mean:(e,n)=>Ya(e,i=>n[+i]),median:(e,n)=>df(e,i=>n[+i]),sum:(e,n)=>yn(e,i=>n[+i]),deviation:(e,n)=>Zk(e,i=>n[+i])}[t]||Vt}const Fy=(t={})=>{const{groupBy:r="x",basis:e="max"}=t;return(n,i)=>{const{encode:a,tooltip:o}=i,{x:s}=a,l=K2(a,["x"]),c=Object.entries(l).filter(([v])=>v.startsWith("y")).map(([v])=>[v,Ct(a,v)[0]]),[,u]=c.find(([v])=>v==="y"),f=c.map(([v])=>[v,new Array(n.length)]),d=Ir(r,n,i),h=Z2(e);for(const v of d){const g=h(v,u);for(const m of v)for(let y=0;y<c.length;y++){const[,b]=c[y],[,x]=f[y];x[m]=+b[m]/g}}const p=vr(o)||(o==null?void 0:o.items)&&(o==null?void 0:o.items.length)!==0;return[n,X({},i,Object.assign({encode:Object.fromEntries(f.map(([v,g])=>[v,Xt(g,Ct(a,v)[1])]))},!p&&a.y0&&{tooltip:{items:[{channel:"y0"}]}}))]}};Fy.props={};function Ys(t,r,e){if(t===null)return[-.5,.5];const n=Ey(t,r),a=new Zi({domain:n,range:[0,1],padding:e}).getBandWidth();return[-a/2,a/2]}function Hs(t,r,e){return r*(1-t)+e*t}const $y=(t={})=>{const{padding:r=0,paddingX:e=r,paddingY:n=r,random:i=Math.random}=t;return(a,o)=>{const{encode:s,scale:l}=o,{x:c,y:u}=l,[f]=Ct(s,"x"),[d]=Ct(s,"y"),h=Ys(f,c,e),p=Ys(d,u,n),v=a.map(()=>Hs(i(),...p)),g=a.map(()=>Hs(i(),...h));return[a,X({scale:{x:{padding:.5},y:{padding:.5}}},o,{encode:{dy:Xt(v),dx:Xt(g)}})]}};$y.props={};const zy=(t={})=>{const{padding:r=0,random:e=Math.random}=t;return(n,i)=>{const{encode:a,scale:o}=i,{x:s}=o,[l]=Ct(a,"x"),c=Ys(l,s,r),u=n.map(()=>Hs(e(),...c));return[n,X({scale:{x:{padding:.5}}},i,{encode:{dx:Xt(u)}})]}};zy.props={};const Gy=(t={})=>{const{padding:r=0,random:e=Math.random}=t;return(n,i)=>{const{encode:a,scale:o}=i,{y:s}=o,[l]=Ct(a,"y"),c=Ys(l,s,r),u=n.map(()=>Hs(e(),...c));return[n,X({scale:{y:{padding:.5}}},i,{encode:{dy:Xt(u)}})]}};Gy.props={};var Q2=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Wy=(t={})=>{const{groupBy:r="x"}=t;return(e,n)=>{const{encode:i}=n,{x:a}=i,o=Q2(i,["x"]),s=Object.entries(o).filter(([d])=>d.startsWith("y")).map(([d])=>[d,Ct(i,d)[0]]),l=s.map(([d])=>[d,new Array(e.length)]),c=Ir(r,e,n),u=new Array(c.length);for(let d=0;d<c.length;d++){const p=c[d].flatMap(m=>s.map(([,y])=>+y[m])),[v,g]=ua(p);u[d]=(v+g)/2}const f=Math.max(...u);for(let d=0;d<c.length;d++){const h=f-u[d],p=c[d];for(const v of p)for(let g=0;g<s.length;g++){const[,m]=s[g],[,y]=l[g];y[v]=+m[v]+h}}return[e,X({},n,{encode:Object.fromEntries(l.map(([d,h])=>[d,Xt(h,Ct(i,d)[1])]))})]}};Wy.props={};const Yy=(t={})=>{const{groupBy:r="x"}=t;return(e,n)=>{const{encode:i}=n,[a]=Ct(i,"y"),[o,s]=Ct(i,"y1"),l=Ir(r,e,n),c=new Array(e.length);for(const u of l){const f=u.map(d=>+a[d]);for(let d=0;d<u.length;d++){const h=u[d],p=Math.max(...f.filter((v,g)=>g!==d));c[h]=+a[h]>p?p:a[h]}}return[e,X({},n,{encode:{y1:Xt(c,s)}})]}};Yy.props={};function $h(t,r){return[t[0]]}function J2(t,r){const e=t.length-1;return[t[e]]}function tM(t,r){const e=ho(t,n=>r[n]);return[t[e]]}function eM(t,r){const e=El(t,n=>r[n]);return[t[e]]}function nM(t){return typeof t=="function"?t:{first:$h,last:J2,max:tM,min:eM}[t]||$h}const Il=(t={})=>{const{groupBy:r="series",channel:e,selector:n}=t;return(i,a)=>{const{encode:o}=a,s=Ir(r,i,a),[l]=Ct(o,e),c=nM(n);return[s.flatMap(u=>c(u,l)),a]}};Il.props={};var rM=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Hy=(t={})=>{const{selector:r}=t,e=rM(t,["selector"]);return Il(Object.assign({channel:"x",selector:r},e))};Hy.props={};var iM=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Vy=(t={})=>{const{selector:r}=t,e=iM(t,["selector"]);return Il(Object.assign({channel:"y",selector:r},e))};Vy.props={};var aM=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function jr(t){return r=>r===null?t:`${t} of ${r}`}function oM(t){if(typeof t=="function")return[t,null];const e={mean:sM,max:cM,count:fM,first:hM,last:pM,sum:dM,min:uM,median:lM}[t];if(!e)throw new Error(`Unknown reducer: ${t}.`);return e()}function sM(){const t=(e,n)=>Ya(e,i=>+n[i]),r=jr("mean");return[t,r]}function lM(){const t=(e,n)=>df(e,i=>+n[i]),r=jr("median");return[t,r]}function cM(){const t=(e,n)=>Vt(e,i=>+n[i]),r=jr("max");return[t,r]}function uM(){const t=(e,n)=>Rn(e,i=>+n[i]),r=jr("min");return[t,r]}function fM(){const t=(e,n)=>e.length,r=jr("count");return[t,r]}function dM(){const t=(e,n)=>yn(e,i=>+n[i]),r=jr("sum");return[t,r]}function hM(){const t=(e,n)=>n[e[0]],r=jr("first");return[t,r]}function pM(){const t=(e,n)=>n[e[e.length-1]],r=jr("last");return[t,r]}const jf=(t={})=>{const{groupBy:r}=t,e=aM(t,["groupBy"]);return(n,i)=>{const{data:a,encode:o}=i,s=r(n,i);if(!s)return[n,i];const l=(h,p)=>{if(h)return h;const{from:v}=p;if(!v)return h;const[,g]=Ct(o,v);return g},c=Object.entries(e).map(([h,p])=>{const[v,g]=oM(p),[m,y]=Ct(o,h),b=l(y,p),x=s.map(O=>v(O,m??a));return[h,Object.assign(Object.assign({},ET(x,(g==null?void 0:g(b))||b)),{aggregate:!0})]}),u=Object.keys(o).map(h=>{const[p,v]=Ct(o,h),g=s.map(m=>p[m[0]]);return[h,Xt(g,v)]}),f=s.map(h=>a[h[0]]);return[Oi(s),X({},i,{data:f,encode:Object.fromEntries([...u,...c])})]}};jf.props={};var vM=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const wo=(t={})=>{const{channels:r=["x","y"]}=t,e=vM(t,["channels"]),n=(i,a)=>Ir(r,i,a);return jf(Object.assign(Object.assign({},e),{groupBy:n}))};wo.props={};const Xy=(t={})=>wo(Object.assign(Object.assign({},t),{channels:["x","color","series"]}));Xy.props={};const Uy=(t={})=>wo(Object.assign(Object.assign({},t),{channels:["y","color","series"]}));Uy.props={};const qy=(t={})=>wo(Object.assign(Object.assign({},t),{channels:["color"]}));qy.props={};function gM(t,r,e){const{by:n=t,reducer:i="max"}=r,[a]=Ct(e,n);if(typeof i=="function")return o=>i(o,a);if(i==="max")return o=>Vt(o,s=>+a[s]);if(i==="min")return o=>Rn(o,s=>+a[s]);if(i==="sum")return o=>yn(o,s=>+a[s]);if(i==="median")return o=>df(o,s=>+a[s]);if(i==="mean")return o=>Ya(o,s=>+a[s]);if(i==="first")return o=>a[o[0]];if(i==="last")return o=>a[o[o.length-1]];throw new Error(`Unknown reducer: ${i}`)}function mM(t,r,e){if(!Array.isArray(e))return t;const n=new Set(e);return t.filter(i=>n.has(r[i]))}const jl=(t={})=>(r,e)=>{const{reverse:n,slice:i,channel:a,by:o,ordinal:s=!0,reducer:l}=t,{encode:c,scale:u={}}=e,f=u[a].domain,[d]=Ct(c,o??a),[h]=Ct(c,a),p=gM(a,{by:o,reducer:l},c),v=mM(r,h,f),g=Qk(v,p,x=>h[x]),m=s?r:fr(r,x=>d[x]);n&&(!s&&m.reverse(),g.reverse());const y=typeof i=="number"?[0,i]:i,b=i?g.slice(...y):g;return[m,X(e,{scale:{[a]:{domain:b}}})]};jl.props={};const Ky=(t={})=>jl(Object.assign(Object.assign({},t),{channel:"x"}));Ky.props={};const Zy=(t={})=>jl(Object.assign(Object.assign({},t),{channel:"color"}));Zy.props={};const Qy=(t={})=>jl(Object.assign(Object.assign({},t),{channel:"y"}));Qy.props={};function yM(t,r){return typeof r=="string"?t.map(e=>e[r]):t.map(r)}function bM(t,r){if(typeof t=="function")return e=>t(e,r);if(t==="sum")return e=>yn(e,n=>+r[n]);throw new Error(`Unknown reducer: ${t}`)}const Jy=(t={})=>{const{field:r,channel:e="y",reducer:n="sum"}=t;return(i,a)=>{const{data:o,encode:s}=a,[l]=Ct(s,"x"),c=r?yM(o,r):Ct(s,e)[0],u=bM(n,c),f=hf(i,u,d=>l[d]).map(d=>d[1]);return[i,X({},a,{scale:{x:{flex:f}}})]}};Jy.props={};function ye([t,r],[e,n]){return[t-e,r-n]}function $o([t,r],[e,n]){return[t+e,r+n]}function ue([t,r],[e,n]){return Math.sqrt(Math.pow(t-e,2)+Math.pow(r-n,2))}function xn([t,r]){return Math.atan2(r,t)}function ta([t,r]){return xn([t,r])+Math.PI/2}function t0(t,r){const e=xn(t),n=xn(r);return e<n?n-e:Math.PI*2-(e-n)}function Df(t){let r=1/0,e=-1/0,n=1/0,i=-1/0;for(const[s,l]of t)r=Math.min(s,r),e=Math.max(s,e),n=Math.min(l,n),i=Math.max(l,i);const a=e-r,o=i-n;return[r,n,a,o]}function e0([t,r],[e,n]){return[(t+e)/2,(r+n)/2]}function xM(t){const{padding:r=0,direction:e="col"}=t;return(n,i,a)=>{const o=n.length;if(o===0)return[];const{innerWidth:s,innerHeight:l}=a,c=l/s;let u=Math.ceil(Math.sqrt(i/c)),f=s/u,d=Math.ceil(i/u),h=d*f;for(;h>l;)u=u+1,f=s/u,d=Math.ceil(i/u),h=d*f;const p=l-d*f,v=d<=1?0:p/(d-1),[g,m]=d<=1?[(s-o*f)/(o-1),(l-f)/2]:[0,0];return n.map((y,b)=>{const[x,O,w,S]=Df(y),k=e==="col"?b%u:Math.floor(b/d),E=e==="col"?Math.floor(b/u):b%d,_=k*f,A=(d-E-1)*f+p,M=(f-r)/w,T=(f-r)/S,C=_-x+g*k+1/2*r,I=A-O-v*E-m+1/2*r;return`translate(${C}, ${I}) scale(${M}, ${T})`})}}const n0=t=>(r,e)=>[r,X({},e,{modifier:xM(t),axis:!1})];n0.props={};var OM=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const zh="thresholds";function wM(t){const[r,e]=ua(t);return Math.min(200,tE(t,r,e))}const Bf=(t={})=>{const{groupChannels:r=["color"],binChannels:e=["x","y"]}=t,n=OM(t,["groupChannels","binChannels"]),i={},a=(o,s)=>{const{encode:l}=s,c=e.map(p=>{const[v]=Ct(l,p);return v}),u=et(n,zh),f=o.filter(p=>c.every(v=>qt(v[p]))),d=[...r.map(p=>{const[v]=Ct(l,p);return v}).filter(qt).map(p=>v=>p[v]),...e.map((p,v)=>{const g=c[v],m=u[p]||wM(g),y=Jk().thresholds(m).value(x=>+g[x])(f),b=new Map(y.flatMap(x=>{const{x0:O,x1:w}=x,S=`${O},${w}`;return x.map(k=>[k,S])}));return i[p]=b,x=>b.get(x)})],h=p=>d.map(v=>v(p)).join("-");return Array.from(Kt(f,h).values())};return jf(Object.assign(Object.assign(Object.assign({},Object.fromEntries(Object.entries(n).filter(([o])=>!o.startsWith(zh)))),Object.fromEntries(e.flatMap(o=>{const s=([c])=>+i[o].get(c).split(",")[0],l=([c])=>+i[o].get(c).split(",")[1];return l.from=o,[[o,s],[`${o}1`,l]]}))),{groupBy:a}))};Bf.props={};const r0=(t={})=>{const{thresholds:r}=t;return Bf(Object.assign(Object.assign({},t),{thresholdsX:r,groupChannels:["color"],binChannels:["x"]}))};r0.props={};function SM(t,r,e,n){const i=t.length;if(n>=i||n===0)return t;const a=h=>r[t[h]]*1,o=h=>e[t[h]]*1,s=[],l=(i-2)/(n-2);let c=0,u,f,d;s.push(c);for(let h=0;h<n-2;h++){let p=0,v=0,g=Math.floor((h+1)*l)+1,m=Math.floor((h+2)*l)+1;m=Math.min(m,i);const y=m-g;for(;g<m;g++)p+=a(g),v+=o(g);p/=y,v/=y;let b=Math.floor((h+0)*l)+1;const x=Math.floor((h+1)*l)+1,O=[a(c),o(c)];for(u=f=-1;b<x;b++)f=Math.abs((O[0]-p)*(a(b)-O[1])-(O[0]-o(b))*(v-O[0]))*.5,f>u&&(u=f,d=b);s.push(d),c=d}return s.push(i-1),s.map(h=>t[h])}function kM(t){if(typeof t=="function")return t;if(t==="lttb")return SM;const r={first:n=>[n[0]],last:n=>[n[n.length-1]],min:(n,i,a)=>[n[El(n,o=>a[o])]],max:(n,i,a)=>[n[ho(n,o=>a[o])]],median:(n,i,a)=>[n[eE(n,o=>a[o])]]},e=r[t]||r.median;return(n,i,a,o)=>{const s=Math.max(1,Math.floor(n.length/o));return EM(n,s).flatMap(c=>e(c,i,a))}}function EM(t,r){const e=t.length,n=[];let i=0;for(;i<e;)n.push(t.slice(i,i+=r));return n}const i0=(t={})=>{const{strategy:r="median",thresholds:e=2e3,groupBy:n=["series","color"]}=t,i=kM(r);return(a,o)=>{const{encode:s}=o,l=Ir(n,a,o),[c]=Ct(s,"x"),[u]=Ct(s,"y");return[l.flatMap(f=>i(f,c,u,e)),o]}};i0.props={};function _M(t){return typeof t=="object"?[t.value,t.ordinal]:[t,!0]}function AM(t){var r;const{encode:e}=t,n=Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),{y:Object.assign(Object.assign({},t.encode.y),{value:[]})})}),i=(r=e==null?void 0:e.color)===null||r===void 0?void 0:r.field;if(!e||!i)return n;let a;for(const[o,s]of Object.entries(e))(o==="x"||o==="y")&&s.field===i&&(a=Object.assign(Object.assign({},a),{[o]:Object.assign(Object.assign({},s),{value:[]})}));return a?Object.assign(Object.assign({},t),{encode:Object.assign(Object.assign({},t.encode),a)}):n}const a0=(t={})=>(r,e)=>{const{encode:n,data:i}=e,a=Object.entries(t).map(([u,f])=>{const[d]=Ct(n,u);if(!d)return null;const[h,p=!0]=_M(f);if(typeof h=="function")return v=>h(d[v]);if(p){const v=Array.isArray(h)?h:[h];return v.length===0?null:g=>v.includes(d[g])}else{const[v,g]=h;return m=>d[m]>=v&&d[m]<=g}}).filter(qt),o=u=>a.every(f=>f(u)),s=r.filter(o),l=s.map((u,f)=>f);if(a.length===0){const u=AM(e);return[r,u]}const c=Object.entries(n).map(([u,f])=>[u,Object.assign(Object.assign({},f),{value:l.map(d=>f.value[s[d]]).filter(d=>d!==void 0)})]);return[l,X({},e,{encode:Object.fromEntries(c),data:s.map(u=>i[u])})]};a0.props={};function Qt(t){const{transformations:r}=t.getOptions();return r.map(([n])=>n).filter(n=>n==="transpose").length%2!==0}function $t(t){const{transformations:r}=t.getOptions();return r.some(([e])=>e==="polar")}function Dl(t){const{transformations:r}=t.getOptions();return r.some(([e])=>e==="reflect")&&r.some(([e])=>e.startsWith("transpose"))}function o0(t){const{transformations:r}=t.getOptions();return r.some(([e])=>e==="helix")}function Bl(t){const{transformations:r}=t.getOptions();return r.some(([e])=>e==="parallel")}function s0(t){const{transformations:r}=t.getOptions();return r.some(([e])=>e==="fisheye")}function TM(t){return Bl(t)&&$t(t)}function da(t){return o0(t)||$t(t)}function MM(t){return $t(t)&&Qt(t)}function PM(t){if(da(t)){const[r,e]=t.getSize(),n=t.getOptions().transformations.find(i=>i[0]==="polar");if(n)return Math.max(r,e)/2*n[4]}return 0}function Fl(t){const{transformations:r}=t.getOptions(),[,,,e,n]=r.find(i=>i[0]==="polar");return[+e,+n]}function Ff(t,r=!0){const{transformations:e}=t.getOptions(),[,n,i]=e.find(a=>a[0]==="polar");return r?[+n*180/Math.PI,+i*180/Math.PI]:[n,i]}function CM(t,r){const{transformations:e}=t.getOptions(),[,...n]=e.find(i=>i[0]===r);return n}/*!
 * @antv/g-math
 * @description Geometry util
 * @version 3.0.1
 * @date 5/9/2025, 8:18:51 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function dr(t,r,e,n){var i=t-e,a=r-n;return Math.sqrt(i*i+a*a)}function l0(t,r){var e=Math.min.apply(Math,Tt(t)),n=Math.min.apply(Math,Tt(r)),i=Math.max.apply(Math,Tt(t)),a=Math.max.apply(Math,Tt(r));return{x:e,y:n,width:i-e,height:a-n}}function LM(t,r,e){return Math.atan(-r/t*Math.tan(e))}function RM(t,r,e){return Math.atan(r/(t*Math.tan(e)))}function NM(t,r,e,n,i,a){return e*Math.cos(i)*Math.cos(a)-n*Math.sin(i)*Math.sin(a)+t}function IM(t,r,e,n,i,a){return e*Math.sin(i)*Math.cos(a)+n*Math.cos(i)*Math.sin(a)+r}function jM(t,r,e,n,i,a,o){for(var s=LM(e,n,i),l=1/0,c=-1/0,u=[a,o],f=-Math.PI*2;f<=Math.PI*2;f+=Math.PI){var d=s+f;a<o?a<d&&d<o&&u.push(d):o<d&&d<a&&u.push(d)}for(var h=0;h<u.length;h++){var p=NM(t,r,e,n,i,u[h]);p<l&&(l=p),p>c&&(c=p)}for(var v=RM(e,n,i),g=1/0,m=-1/0,y=[a,o],b=-Math.PI*2;b<=Math.PI*2;b+=Math.PI){var x=v+b;a<o?a<x&&x<o&&y.push(x):o<x&&x<a&&y.push(x)}for(var O=0;O<y.length;O++){var w=IM(t,r,e,n,i,y[O]);w<g&&(g=w),w>m&&(m=w)}return{x:l,y:g,width:c-l,height:m-g}}var DM=1e-4;function c0(t,r,e,n,i,a){var o=-1,s=1/0,l=[e,n],c=20;a&&a>200&&(c=a/10);for(var u=1/c,f=u/10,d=0;d<=c;d++){var h=d*u,p=[i.apply(void 0,Tt(t.concat([h]))),i.apply(void 0,Tt(r.concat([h])))],v=dr(l[0],l[1],p[0],p[1]);v<s&&(o=h,s=v)}if(o===0)return{x:t[0],y:r[0]};if(o===1){var g=t.length;return{x:t[g-1],y:r[g-1]}}s=1/0;for(var m=0;m<32&&!(f<DM);m++){var y=o-f,b=o+f,x=[i.apply(void 0,Tt(t.concat([y]))),i.apply(void 0,Tt(r.concat([y])))],O=dr(l[0],l[1],x[0],x[1]);if(y>=0&&O<s)o=y,s=O;else{var w=[i.apply(void 0,Tt(t.concat([b]))),i.apply(void 0,Tt(r.concat([b])))],S=dr(l[0],l[1],w[0],w[1]);b<=1&&S<s?(o=b,s=S):f*=.5}}return{x:i.apply(void 0,Tt(t.concat([o]))),y:i.apply(void 0,Tt(r.concat([o])))}}function u0(t,r,e,n){return dr(t,r,e,n)}function f0(t,r,e,n,i){return{x:(1-i)*t+i*e,y:(1-i)*r+i*n}}function BM(t,r,e,n,i,a){var o=[e-t,n-r];if(gk(o,[0,0]))return Math.sqrt((i-t)*(i-t)+(a-r)*(a-r));var s=[-o[1],o[0]];mk(s,s);var l=[i-t,a-r];return Math.abs(yk(l,s))}function xu(t,r,e,n,i){var a=1-i;return a*a*a*t+3*r*i*a*a+3*e*i*i*a+n*i*i*i}function Gh(t,r,e,n){var i=-3*t+9*r-9*e+3*n,a=6*t-12*r+6*e,o=3*r-3*t,s=[],l,c,u;if(ja(i,0))ja(a,0)||(l=-o/a,l>=0&&l<=1&&s.push(l));else{var f=a*a-4*i*o;ja(f,0)?s.push(-a/(2*i)):f>0&&(u=Math.sqrt(f),l=(-a+u)/(2*i),c=(-a-u)/(2*i),l>=0&&l<=1&&s.push(l),c>=0&&c<=1&&s.push(c))}return s}function FM(t,r,e,n,i,a,o,s){for(var l=[t,o],c=[r,s],u=Gh(t,e,i,o),f=Gh(r,n,a,s),d=0;d<u.length;d++)l.push(xu(t,e,i,o,u[d]));for(var h=0;h<f.length;h++)c.push(xu(r,n,a,s,f[h]));return l0(l,c)}function $M(t,r,e,n,i,a,o,s,l,c,u){return c0([t,e,i,o],[r,n,a,s],l,c,xu,u)}function Wh(t,r,e,n,i,a,o,s,l,c,u){var f=$M(t,r,e,n,i,a,o,s,l,c,u);return dr(f.x,f.y,l,c)}function zM(t){if(t.length<2)return 0;for(var r=0,e=0;e<t.length-1;e++){var n=t[e],i=t[e+1];r+=dr(n[0],n[1],i[0],i[1])}return r}function GM(t){return zM(t)}function Ou(t,r,e,n){var i=1-n;return i*i*t+2*n*i*r+n*n*e}function Yh(t,r,e){var n=t+e-2*r;if(ja(n,0))return[.5];var i=(t-r)/n;return i<=1&&i>=0?[i]:[]}function WM(t,r,e,n,i,a){var o=Yh(t,e,i)[0],s=Yh(r,n,a)[0],l=[t,i],c=[r,a];return o!==void 0&&l.push(Ou(t,e,i,o)),s!==void 0&&c.push(Ou(r,n,a,s)),l0(l,c)}function YM(t,r,e,n,i,a,o,s){return c0([t,e,i],[r,n,a],o,s,Ou)}function HM(t,r,e,n,i,a,o,s){var l=YM(t,r,e,n,i,a,o,s);return dr(l.x,l.y,o,s)}/*!
 * @antv/g-lite
 * @description A core module for rendering engine implements DOM API.
 * @version 2.3.1
 * @date 7/18/2025, 7:12:41 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var VM=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},d0={exports:{}};(function(t,r){(function(e,n){t.exports=n()})(VM,function(){function e(O,w,S,k,E){n(O,w,S||0,k||O.length-1,E||a)}function n(O,w,S,k,E){for(;k>S;){if(k-S>600){var _=k-S+1,A=w-S+1,M=Math.log(_),T=.5*Math.exp(2*M/3),C=.5*Math.sqrt(M*T*(_-T)/_)*(A-_/2<0?-1:1),I=Math.max(S,Math.floor(w-A*T/_+C)),R=Math.min(k,Math.floor(w+(_-A)*T/_+C));n(O,w,I,R,E)}var L=O[w],P=S,N=k;for(i(O,S,w),E(O[k],L)>0&&i(O,S,k);P<N;){for(i(O,P,N),P++,N--;E(O[P],L)<0;)P++;for(;E(O[N],L)>0;)N--}E(O[S],L)===0?i(O,S,N):(N++,i(O,N,k)),N<=w&&(S=N+1),w<=N&&(k=N-1)}}function i(O,w,S){var k=O[w];O[w]=O[S],O[S]=k}function a(O,w){return O<w?-1:O>w?1:0}var o=function(w){w===void 0&&(w=9),this._maxEntries=Math.max(4,w),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()};o.prototype.all=function(){return this._all(this.data,[])},o.prototype.search=function(w){var S=this.data,k=[];if(!y(w,S))return k;for(var E=this.toBBox,_=[];S;){for(var A=0;A<S.children.length;A++){var M=S.children[A],T=S.leaf?E(M):M;y(w,T)&&(S.leaf?k.push(M):m(w,T)?this._all(M,k):_.push(M))}S=_.pop()}return k},o.prototype.collides=function(w){var S=this.data;if(!y(w,S))return!1;for(var k=[];S;){for(var E=0;E<S.children.length;E++){var _=S.children[E],A=S.leaf?this.toBBox(_):_;if(y(w,A)){if(S.leaf||m(w,A))return!0;k.push(_)}}S=k.pop()}return!1},o.prototype.load=function(w){if(!(w&&w.length))return this;if(w.length<this._minEntries){for(var S=0;S<w.length;S++)this.insert(w[S]);return this}var k=this._build(w.slice(),0,w.length-1,0);if(!this.data.children.length)this.data=k;else if(this.data.height===k.height)this._splitRoot(this.data,k);else{if(this.data.height<k.height){var E=this.data;this.data=k,k=E}this._insert(k,this.data.height-k.height-1,!0)}return this},o.prototype.insert=function(w){return w&&this._insert(w,this.data.height-1),this},o.prototype.clear=function(){return this.data=b([]),this},o.prototype.remove=function(w,S){if(!w)return this;for(var k=this.data,E=this.toBBox(w),_=[],A=[],M,T,C;k||_.length;){if(k||(k=_.pop(),T=_[_.length-1],M=A.pop(),C=!0),k.leaf){var I=s(w,k.children,S);if(I!==-1)return k.children.splice(I,1),_.push(k),this._condense(_),this}!C&&!k.leaf&&m(k,E)?(_.push(k),A.push(M),M=0,T=k,k=k.children[0]):T?(M++,k=T.children[M],C=!1):k=null}return this},o.prototype.toBBox=function(w){return w},o.prototype.compareMinX=function(w,S){return w.minX-S.minX},o.prototype.compareMinY=function(w,S){return w.minY-S.minY},o.prototype.toJSON=function(){return this.data},o.prototype.fromJSON=function(w){return this.data=w,this},o.prototype._all=function(w,S){for(var k=[];w;)w.leaf?S.push.apply(S,w.children):k.push.apply(k,w.children),w=k.pop();return S},o.prototype._build=function(w,S,k,E){var _=k-S+1,A=this._maxEntries,M;if(_<=A)return M=b(w.slice(S,k+1)),l(M,this.toBBox),M;E||(E=Math.ceil(Math.log(_)/Math.log(A)),A=Math.ceil(_/Math.pow(A,E-1))),M=b([]),M.leaf=!1,M.height=E;var T=Math.ceil(_/A),C=T*Math.ceil(Math.sqrt(A));x(w,S,k,C,this.compareMinX);for(var I=S;I<=k;I+=C){var R=Math.min(I+C-1,k);x(w,I,R,T,this.compareMinY);for(var L=I;L<=R;L+=T){var P=Math.min(L+T-1,R);M.children.push(this._build(w,L,P,E-1))}}return l(M,this.toBBox),M},o.prototype._chooseSubtree=function(w,S,k,E){for(;E.push(S),!(S.leaf||E.length-1===k);){for(var _=1/0,A=1/0,M=void 0,T=0;T<S.children.length;T++){var C=S.children[T],I=h(C),R=v(w,C)-I;R<A?(A=R,_=I<_?I:_,M=C):R===A&&I<_&&(_=I,M=C)}S=M||S.children[0]}return S},o.prototype._insert=function(w,S,k){var E=k?w:this.toBBox(w),_=[],A=this._chooseSubtree(E,this.data,S,_);for(A.children.push(w),u(A,E);S>=0&&_[S].children.length>this._maxEntries;)this._split(_,S),S--;this._adjustParentBBoxes(E,_,S)},o.prototype._split=function(w,S){var k=w[S],E=k.children.length,_=this._minEntries;this._chooseSplitAxis(k,_,E);var A=this._chooseSplitIndex(k,_,E),M=b(k.children.splice(A,k.children.length-A));M.height=k.height,M.leaf=k.leaf,l(k,this.toBBox),l(M,this.toBBox),S?w[S-1].children.push(M):this._splitRoot(k,M)},o.prototype._splitRoot=function(w,S){this.data=b([w,S]),this.data.height=w.height+1,this.data.leaf=!1,l(this.data,this.toBBox)},o.prototype._chooseSplitIndex=function(w,S,k){for(var E,_=1/0,A=1/0,M=S;M<=k-S;M++){var T=c(w,0,M,this.toBBox),C=c(w,M,k,this.toBBox),I=g(T,C),R=h(T)+h(C);I<_?(_=I,E=M,A=R<A?R:A):I===_&&R<A&&(A=R,E=M)}return E||k-S},o.prototype._chooseSplitAxis=function(w,S,k){var E=w.leaf?this.compareMinX:f,_=w.leaf?this.compareMinY:d,A=this._allDistMargin(w,S,k,E),M=this._allDistMargin(w,S,k,_);A<M&&w.children.sort(E)},o.prototype._allDistMargin=function(w,S,k,E){w.children.sort(E);for(var _=this.toBBox,A=c(w,0,S,_),M=c(w,k-S,k,_),T=p(A)+p(M),C=S;C<k-S;C++){var I=w.children[C];u(A,w.leaf?_(I):I),T+=p(A)}for(var R=k-S-1;R>=S;R--){var L=w.children[R];u(M,w.leaf?_(L):L),T+=p(M)}return T},o.prototype._adjustParentBBoxes=function(w,S,k){for(var E=k;E>=0;E--)u(S[E],w)},o.prototype._condense=function(w){for(var S=w.length-1,k=void 0;S>=0;S--)w[S].children.length===0?S>0?(k=w[S-1].children,k.splice(k.indexOf(w[S]),1)):this.clear():l(w[S],this.toBBox)};function s(O,w,S){if(!S)return w.indexOf(O);for(var k=0;k<w.length;k++)if(S(O,w[k]))return k;return-1}function l(O,w){c(O,0,O.children.length,w,O)}function c(O,w,S,k,E){E||(E=b(null)),E.minX=1/0,E.minY=1/0,E.maxX=-1/0,E.maxY=-1/0;for(var _=w;_<S;_++){var A=O.children[_];u(E,O.leaf?k(A):A)}return E}function u(O,w){return O.minX=Math.min(O.minX,w.minX),O.minY=Math.min(O.minY,w.minY),O.maxX=Math.max(O.maxX,w.maxX),O.maxY=Math.max(O.maxY,w.maxY),O}function f(O,w){return O.minX-w.minX}function d(O,w){return O.minY-w.minY}function h(O){return(O.maxX-O.minX)*(O.maxY-O.minY)}function p(O){return O.maxX-O.minX+(O.maxY-O.minY)}function v(O,w){return(Math.max(w.maxX,O.maxX)-Math.min(w.minX,O.minX))*(Math.max(w.maxY,O.maxY)-Math.min(w.minY,O.minY))}function g(O,w){var S=Math.max(O.minX,w.minX),k=Math.max(O.minY,w.minY),E=Math.min(O.maxX,w.maxX),_=Math.min(O.maxY,w.maxY);return Math.max(0,E-S)*Math.max(0,_-k)}function m(O,w){return O.minX<=w.minX&&O.minY<=w.minY&&w.maxX<=O.maxX&&w.maxY<=O.maxY}function y(O,w){return w.minX<=O.maxX&&w.minY<=O.maxY&&w.maxX>=O.minX&&w.maxY>=O.minY}function b(O){return{children:O,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function x(O,w,S,k,E){for(var _=[w,S];_.length;)if(S=_.pop(),w=_.pop(),!(S-w<=k)){var A=w+Math.ceil((S-w)/k/2)*k;e(O,A,w,S,E),_.push(w,A,A,S)}}return o})})(d0);var XM=d0.exports,H=function(t){return t.GROUP="g",t.FRAGMENT="fragment",t.CIRCLE="circle",t.ELLIPSE="ellipse",t.IMAGE="image",t.RECT="rect",t.LINE="line",t.POLYLINE="polyline",t.POLYGON="polygon",t.TEXT="text",t.PATH="path",t.HTML="html",t.MESH="mesh",t}({}),As=function(t){return t[t.ZERO=0]="ZERO",t[t.NEGATIVE_ONE=1]="NEGATIVE_ONE",t}({}),Dr=function(){function t(){Q(this,t),this.plugins=[]}return Z(t,[{key:"addRenderingPlugin",value:function(e){this.plugins.push(e),this.context.renderingPlugins.push(e)}},{key:"removeAllRenderingPlugins",value:function(){var e=this;this.plugins.forEach(function(n){var i=e.context.renderingPlugins.indexOf(n);i>=0&&e.context.renderingPlugins.splice(i,1)})}}])}(),UM=function(){function t(r){Q(this,t),this.clipSpaceNearZ=As.NEGATIVE_ONE,this.plugins=[],this.config=wt({enableDirtyCheck:!0,enableCulling:!1,enableAutoRendering:!0,enableDirtyRectangleRendering:!0,enableDirtyRectangleRenderingDebug:!1,enableSizeAttenuation:!0,enableRenderingOptimization:!1},r)}return Z(t,[{key:"registerPlugin",value:function(e){var n=this.plugins.findIndex(function(i){return i===e});n===-1&&this.plugins.push(e)}},{key:"unregisterPlugin",value:function(e){var n=this.plugins.findIndex(function(i){return i===e});n>-1&&this.plugins.splice(n,1)}},{key:"getPlugins",value:function(){return this.plugins}},{key:"getPlugin",value:function(e){return this.plugins.find(function(n){return n.name===e})}},{key:"getConfig",value:function(){return this.config}},{key:"setConfig",value:function(e){Object.assign(this.config,e)}}])}(),xc=Ar,Pi=Vn,qM=Ck,KM=Lk,Hh=Ns,Oc=Pk,_e=function(){function t(){Q(this,t),this.center=[0,0,0],this.halfExtents=[0,0,0],this.min=[0,0,0],this.max=[0,0,0]}return Z(t,[{key:"update",value:function(e,n){Pi(this.center,e),Pi(this.halfExtents,n),Oc(this.min,this.center,this.halfExtents),xc(this.max,this.center,this.halfExtents)}},{key:"setMinMax",value:function(e,n){xc(this.center,n,e),Hh(this.center,this.center,.5),Oc(this.halfExtents,n,e),Hh(this.halfExtents,this.halfExtents,.5),Pi(this.min,e),Pi(this.max,n)}},{key:"getMin",value:function(){return this.min}},{key:"getMax",value:function(){return this.max}},{key:"add",value:function(e){if(!t.isEmpty(e)){if(t.isEmpty(this)){this.setMinMax(e.getMin(),e.getMax());return}var n=this.center,i=n[0],a=n[1],o=n[2],s=this.halfExtents,l=s[0],c=s[1],u=s[2],f=i-l,d=i+l,h=a-c,p=a+c,v=o-u,g=o+u,m=e.center,y=m[0],b=m[1],x=m[2],O=e.halfExtents,w=O[0],S=O[1],k=O[2],E=y-w,_=y+w,A=b-S,M=b+S,T=x-k,C=x+k;E<f&&(f=E),_>d&&(d=_),A<h&&(h=A),M>p&&(p=M),T<v&&(v=T),C>g&&(g=C),n[0]=(f+d)*.5,n[1]=(h+p)*.5,n[2]=(v+g)*.5,s[0]=(d-f)*.5,s[1]=(p-h)*.5,s[2]=(g-v)*.5,this.min[0]=f,this.min[1]=h,this.min[2]=v,this.max[0]=d,this.max[1]=p,this.max[2]=g}}},{key:"setFromTransformedAABB",value:function(e,n){var i=this.center,a=this.halfExtents,o=e.center,s=e.halfExtents,l=n[0],c=n[4],u=n[8],f=n[1],d=n[5],h=n[9],p=n[2],v=n[6],g=n[10],m=Math.abs(l),y=Math.abs(c),b=Math.abs(u),x=Math.abs(f),O=Math.abs(d),w=Math.abs(h),S=Math.abs(p),k=Math.abs(v),E=Math.abs(g);i[0]=n[12]+l*o[0]+c*o[1]+u*o[2],i[1]=n[13]+f*o[0]+d*o[1]+h*o[2],i[2]=n[14]+p*o[0]+v*o[1]+g*o[2],a[0]=m*s[0]+y*s[1]+b*s[2],a[1]=x*s[0]+O*s[1]+w*s[2],a[2]=S*s[0]+k*s[1]+E*s[2],Oc(this.min,i,a),xc(this.max,i,a)}},{key:"intersects",value:function(e){var n=this.getMax(),i=this.getMin(),a=e.getMax(),o=e.getMin();return i[0]<=a[0]&&n[0]>=o[0]&&i[1]<=a[1]&&n[1]>=o[1]&&i[2]<=a[2]&&n[2]>=o[2]}},{key:"intersection",value:function(e){if(!this.intersects(e))return null;var n=new t,i=qM([0,0,0],this.getMin(),e.getMin()),a=KM([0,0,0],this.getMax(),e.getMax());return n.setMinMax(i,a),n}},{key:"getNegativeFarPoint",value:function(e){return e.pnVertexFlag===273?Pi([0,0,0],this.min):e.pnVertexFlag===272?[this.min[0],this.min[1],this.max[2]]:e.pnVertexFlag===257?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===256?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===17?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===16?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===1?[this.max[0],this.max[1],this.min[2]]:[this.max[0],this.max[1],this.max[2]]}},{key:"getPositiveFarPoint",value:function(e){return e.pnVertexFlag===273?Pi([0,0,0],this.max):e.pnVertexFlag===272?[this.max[0],this.max[1],this.min[2]]:e.pnVertexFlag===257?[this.max[0],this.min[1],this.max[2]]:e.pnVertexFlag===256?[this.max[0],this.min[1],this.min[2]]:e.pnVertexFlag===17?[this.min[0],this.max[1],this.max[2]]:e.pnVertexFlag===16?[this.min[0],this.max[1],this.min[2]]:e.pnVertexFlag===1?[this.min[0],this.min[1],this.max[2]]:[this.min[0],this.min[1],this.min[2]]}}],[{key:"isEmpty",value:function(e){return!e||e.halfExtents[0]===0&&e.halfExtents[1]===0&&e.halfExtents[2]===0}}])}(),ZM=function(){function t(r,e){Q(this,t),this.distance=r||0,this.normal=e||jt(0,1,0),this.updatePNVertexFlag()}return Z(t,[{key:"updatePNVertexFlag",value:function(){this.pnVertexFlag=(+(this.normal[0]>=0)<<8)+(+(this.normal[1]>=0)<<4)+ +(this.normal[2]>=0)}},{key:"distanceToPoint",value:function(e){return ur(e,this.normal)-this.distance}},{key:"normalize",value:function(){var e=1/Bk(this.normal);Ns(this.normal,this.normal,e),this.distance*=e}},{key:"intersectsLine",value:function(e,n,i){var a=this.distanceToPoint(e),o=this.distanceToPoint(n),s=a/(a-o),l=s>=0&&s<=1;return l&&i&&uu(i,e,n,s),l}}])}(),Ci=function(t){return t[t.OUTSIDE=4294967295]="OUTSIDE",t[t.INSIDE=0]="INSIDE",t[t.INDETERMINATE=2147483647]="INDETERMINATE",t}({}),QM=function(){function t(r){if(Q(this,t),this.planes=[],r)this.planes=r;else for(var e=0;e<6;e++)this.planes.push(new ZM)}return Z(t,[{key:"extractFromVPMatrix",value:function(e){var n=bt(e,16),i=n[0],a=n[1],o=n[2],s=n[3],l=n[4],c=n[5],u=n[6],f=n[7],d=n[8],h=n[9],p=n[10],v=n[11],g=n[12],m=n[13],y=n[14],b=n[15];Ye(this.planes[0].normal,s-i,f-l,v-d),this.planes[0].distance=b-g,Ye(this.planes[1].normal,s+i,f+l,v+d),this.planes[1].distance=b+g,Ye(this.planes[2].normal,s+a,f+c,v+h),this.planes[2].distance=b+m,Ye(this.planes[3].normal,s-a,f-c,v-h),this.planes[3].distance=b-m,Ye(this.planes[4].normal,s-o,f-u,v-p),this.planes[4].distance=b-y,Ye(this.planes[5].normal,s+o,f+u,v+p),this.planes[5].distance=b+y,this.planes.forEach(function(x){x.normalize(),x.updatePNVertexFlag()})}}])}(),$e=function(){function t(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;Q(this,t),this.x=0,this.y=0,this.x=r,this.y=e}return Z(t,[{key:"clone",value:function(){return new t(this.x,this.y)}},{key:"copyFrom",value:function(e){this.x=e.x,this.y=e.y}}])}(),ea=function(){function t(r,e,n,i){Q(this,t),this.x=r,this.y=e,this.width=n,this.height=i,this.left=r,this.right=r+n,this.top=e,this.bottom=e+i}return Z(t,[{key:"toJSON",value:function(){}}],[{key:"fromRect",value:function(e){return new t(e.x,e.y,e.width,e.height)}},{key:"applyTransform",value:function(e,n){var i=jo(e.x,e.y,0,1),a=jo(e.x+e.width,e.y,0,1),o=jo(e.x,e.y+e.height,0,1),s=jo(e.x+e.width,e.y+e.height,0,1),l=cr(),c=cr(),u=cr(),f=cr();Yn(l,i,n),Yn(c,a,n),Yn(u,o,n),Yn(f,s,n);var d=Math.min(l[0],c[0],u[0],f[0]),h=Math.min(l[1],c[1],u[1],f[1]),p=Math.max(l[0],c[0],u[0],f[0]),v=Math.max(l[1],c[1],u[1],f[1]);return t.fromRect({x:d,y:h,width:p-d,height:v-h})}}])}(),Gt="Method not implemented.",Li="Use document.documentElement instead.",JM="Cannot append a destroyed element.";function Fi(t){return t===void 0?0:t>360||t<-360?t%360:t}var wc=Pt();function Ze(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;return Array.isArray(t)&&t.length===3?n?or(t):Vn(wc,t):re(t)?n?jt(t,r,e):Ye(wc,t,r,e):n?jt(t[0],t[1]||r,t[2]||e):Ye(wc,t[0],t[1]||r,t[2]||e)}var tP=Math.PI/180;function Yt(t){return t*tP}var eP=180/Math.PI;function gn(t){return t*eP}function nP(t){return 360*t}var Vs=Math.PI/2;function rP(t,r){var e=r[0],n=r[1],i=r[2],a=r[3],o=e*e,s=n*n,l=i*i,c=a*a,u=o+s+l+c,f=e*a-n*i;return f>.499995*u?(t[0]=Vs,t[1]=2*Math.atan2(n,e),t[2]=0):f<-.499995*u?(t[0]=-Vs,t[1]=2*Math.atan2(n,e),t[2]=0):(t[0]=Math.asin(2*(e*i-a*n)),t[1]=Math.atan2(2*(e*a+n*i),1-2*(l+c)),t[2]=Math.atan2(2*(e*n+i*a),1-2*(s+l))),t}function iP(t,r){var e,n,i=Rs(Pt(),r),a=bt(i,3),o=a[0],s=a[1],l=a[2],c=Math.asin(-r[2]/o);return c<Vs?c>-Vs?(e=Math.atan2(r[6]/s,r[10]/l),n=Math.atan2(r[1]/o,r[0]/o)):(n=0,e=-Math.atan2(r[4]/s,r[5]/s)):(n=0,e=Math.atan2(r[4]/s,r[5]/s)),t[0]=e,t[1]=c,t[2]=n,t}function Sc(t,r){return r.length===16?iP(t,r):rP(t,r)}function aP(t,r,e,n,i){var a=Math.cos(t),o=Math.sin(t);return Rk(n*a,i*o,0,-n*o,i*a,0,r,e,1)}function oP(t,r,e,n,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1,l=2*a,c=e-r,u=n-i,f=l/c,d=l/u,h=(e+r)/c,p=(n+i)/u,v,g,m=o-a,y=o*a;return s?(v=-o/m,g=-y/m):(v=-(o+a)/m,g=-2*y/m),t[0]=f,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=d,t[6]=0,t[7]=0,t[8]=h,t[9]=p,t[10]=v,t[11]=-1,t[12]=0,t[13]=0,t[14]=g,t[15]=0,t}function Vh(t){var r=t[0],e=t[1],n=t[3],i=t[4],a=Math.sqrt(r*r+e*e),o=Math.sqrt(n*n+i*i),s=r*i-e*n;if(s<0&&(r<i?a=-a:o=-o),a){var l=1/a;r*=l,e*=l}if(o){var c=1/o;n*=c,i*=c}var u=Math.atan2(e,r),f=gn(u);return[t[6],t[7],a,o,f]}var Bn=Bt(),kn=Bt(),Oa=cr(),gt=[Pt(),Pt(),Pt()],Xh=Pt();function sP(t,r,e,n,i,a){if(!lP(Bn,t)||(Wa(kn,Bn),kn[3]=0,kn[7]=0,kn[11]=0,kn[15]=1,Math.abs(Fk(kn))<1e-8))return!1;var o=Bn[3],s=Bn[7],l=Bn[11],c=Bn[12],u=Bn[13],f=Bn[14],d=Bn[15];if(o!==0||s!==0||l!==0){Oa[0]=o,Oa[1]=s,Oa[2]=l,Oa[3]=d;var h=Hn(kn,kn);if(!h)return!1;$k(kn,kn),Yn(i,Oa,kn)}else i[0]=i[1]=i[2]=0,i[3]=1;if(r[0]=c,r[1]=u,r[2]=f,cP(gt,Bn),e[0]=Or(gt[0]),Bi(gt[0],gt[0]),n[0]=ur(gt[0],gt[1]),kc(gt[1],gt[1],gt[0],1,-n[0]),e[1]=Or(gt[1]),Bi(gt[1],gt[1]),n[0]/=e[1],n[1]=ur(gt[0],gt[2]),kc(gt[2],gt[2],gt[0],1,-n[1]),n[2]=ur(gt[1],gt[2]),kc(gt[2],gt[2],gt[1],1,-n[2]),e[2]=Or(gt[2]),Bi(gt[2],gt[2]),n[1]/=e[2],n[2]/=e[2],zk(Xh,gt[1],gt[2]),ur(gt[0],Xh)<0)for(var p=0;p<3;p++)e[p]*=-1,gt[p][0]*=-1,gt[p][1]*=-1,gt[p][2]*=-1;return a[0]=.5*Math.sqrt(Math.max(1+gt[0][0]-gt[1][1]-gt[2][2],0)),a[1]=.5*Math.sqrt(Math.max(1-gt[0][0]+gt[1][1]-gt[2][2],0)),a[2]=.5*Math.sqrt(Math.max(1-gt[0][0]-gt[1][1]+gt[2][2],0)),a[3]=.5*Math.sqrt(Math.max(1+gt[0][0]+gt[1][1]+gt[2][2],0)),gt[2][1]>gt[1][2]&&(a[0]=-a[0]),gt[0][2]>gt[2][0]&&(a[1]=-a[1]),gt[1][0]>gt[0][1]&&(a[2]=-a[2]),!0}function lP(t,r){var e=r[15];if(e===0)return!1;for(var n=1/e,i=0;i<16;i++)t[i]=r[i]*n;return!0}function cP(t,r){t[0][0]=r[0],t[0][1]=r[1],t[0][2]=r[2],t[1][0]=r[4],t[1][1]=r[5],t[1][2]=r[6],t[2][0]=r[8],t[2][1]=r[9],t[2][2]=r[10]}function kc(t,r,e,n,i){t[0]=r[0]*n+e[0]*i,t[1]=r[1]*n+e[1]*i,t[2]=r[2]*n+e[2]*i}var zt=function(t){return t[t.ORBITING=0]="ORBITING",t[t.EXPLORING=1]="EXPLORING",t[t.TRACKING=2]="TRACKING",t}({}),wu=function(t){return t[t.DEFAULT=0]="DEFAULT",t[t.ROTATIONAL=1]="ROTATIONAL",t[t.TRANSLATIONAL=2]="TRANSLATIONAL",t[t.CINEMATIC=3]="CINEMATIC",t}({}),pn=function(t){return t[t.ORTHOGRAPHIC=0]="ORTHOGRAPHIC",t[t.PERSPECTIVE=1]="PERSPECTIVE",t}({}),h0={UPDATED:"updated"},Uh=2e-4,p0=function(){function t(){Q(this,t),this.clipSpaceNearZ=As.NEGATIVE_ONE,this.eventEmitter=new tm,this.matrix=Bt(),this.right=jt(1,0,0),this.up=jt(0,1,0),this.forward=jt(0,0,1),this.position=jt(0,0,1),this.focalPoint=jt(0,0,0),this.distanceVector=jt(0,0,-1),this.distance=1,this.azimuth=0,this.elevation=0,this.roll=0,this.relAzimuth=0,this.relElevation=0,this.relRoll=0,this.dollyingStep=0,this.maxDistance=1/0,this.minDistance=-1/0,this.zoom=1,this.rotateWorld=!1,this.fov=30,this.near=.1,this.far=1e3,this.aspect=1,this.projectionMatrix=Bt(),this.projectionMatrixInverse=Bt(),this.jitteredProjectionMatrix=void 0,this.enableUpdate=!0,this.type=zt.EXPLORING,this.trackingMode=wu.DEFAULT,this.projectionMode=pn.PERSPECTIVE,this.frustum=new QM,this.orthoMatrix=Bt()}return Z(t,[{key:"isOrtho",value:function(){return this.projectionMode===pn.ORTHOGRAPHIC}},{key:"getProjectionMode",value:function(){return this.projectionMode}},{key:"getPerspective",value:function(){return this.jitteredProjectionMatrix||this.projectionMatrix}},{key:"getPerspectiveInverse",value:function(){return this.projectionMatrixInverse}},{key:"getFrustum",value:function(){return this.frustum}},{key:"getPosition",value:function(){return this.position}},{key:"getFocalPoint",value:function(){return this.focalPoint}},{key:"getDollyingStep",value:function(){return this.dollyingStep}},{key:"getNear",value:function(){return this.near}},{key:"getFar",value:function(){return this.far}},{key:"getZoom",value:function(){return this.zoom}},{key:"getOrthoMatrix",value:function(){return this.orthoMatrix}},{key:"getView",value:function(){return this.view}},{key:"setEnableUpdate",value:function(e){this.enableUpdate=e}},{key:"setType",value:function(e,n){return this.type=e,this.type===zt.EXPLORING?this.setWorldRotation(!0):this.setWorldRotation(!1),this._getAngles(),this.type===zt.TRACKING&&n!==void 0&&this.setTrackingMode(n),this}},{key:"setProjectionMode",value:function(e){return this.projectionMode=e,this}},{key:"setTrackingMode",value:function(e){if(this.type!==zt.TRACKING)throw new Error("Impossible to set a tracking mode if the camera is not of tracking type");return this.trackingMode=e,this}},{key:"setWorldRotation",value:function(e){return this.rotateWorld=e,this._getAngles(),this}},{key:"getViewTransform",value:function(){return Hn(Bt(),this.matrix)}},{key:"getWorldTransform",value:function(){return this.matrix}},{key:"jitterProjectionMatrix",value:function(e,n){var i=xr(Bt(),[e,n,0]);this.jitteredProjectionMatrix=rn(Bt(),i,this.projectionMatrix)}},{key:"clearJitterProjectionMatrix",value:function(){this.jitteredProjectionMatrix=void 0}},{key:"setMatrix",value:function(e){return this.matrix=e,this._update(),this}},{key:"setProjectionMatrix",value:function(e){this.projectionMatrix=e}},{key:"setFov",value:function(e){return this.setPerspective(this.near,this.far,e,this.aspect),this}},{key:"setAspect",value:function(e){return this.setPerspective(this.near,this.far,this.fov,e),this}},{key:"setNear",value:function(e){return this.projectionMode===pn.PERSPECTIVE?this.setPerspective(e,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,e,this.far),this}},{key:"setFar",value:function(e){return this.projectionMode===pn.PERSPECTIVE?this.setPerspective(this.near,e,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,e),this}},{key:"setViewOffset",value:function(e,n,i,a,o,s){return this.aspect=e/n,this.view===void 0&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=n,this.view.offsetX=i,this.view.offsetY=a,this.view.width=o,this.view.height=s,this.projectionMode===pn.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"clearViewOffset",value:function(){return this.view!==void 0&&(this.view.enabled=!1),this.projectionMode===pn.PERSPECTIVE?this.setPerspective(this.near,this.far,this.fov,this.aspect):this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far),this}},{key:"setZoom",value:function(e){return this.zoom=e,this.projectionMode===pn.ORTHOGRAPHIC?this.setOrthographic(this.left,this.rright,this.top,this.bottom,this.near,this.far):this.projectionMode===pn.PERSPECTIVE&&this.setPerspective(this.near,this.far,this.fov,this.aspect),this}},{key:"setZoomByViewportPoint",value:function(e,n){var i=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),a=i.x,o=i.y,s=this.roll;this.rotate(0,0,-s),this.setPosition(a,o),this.setFocalPoint(a,o),this.setZoom(e),this.rotate(0,0,s);var l=this.canvas.viewport2Canvas({x:n[0],y:n[1]}),c=l.x,u=l.y,f=jt(c-a,u-o,0),d=ur(f,this.right)/Or(this.right),h=ur(f,this.up)/Or(this.up),p=this.getPosition(),v=bt(p,2),g=v[0],m=v[1],y=this.getFocalPoint(),b=bt(y,2),x=b[0],O=b[1];return this.setPosition(g-d,m-h),this.setFocalPoint(x-d,O-h),this}},{key:"setPerspective",value:function(e,n,i,a){var o;this.projectionMode=pn.PERSPECTIVE,this.fov=i,this.near=e,this.far=n,this.aspect=a;var s=this.near*Math.tan(Yt(.5*this.fov))/this.zoom,l=2*s,c=this.aspect*l,u=-.5*c;if((o=this.view)!==null&&o!==void 0&&o.enabled){var f=this.view.fullWidth,d=this.view.fullHeight;u+=this.view.offsetX*c/f,s-=this.view.offsetY*l/d,c*=this.view.width/f,l*=this.view.height/d}return oP(this.projectionMatrix,u,u+c,s-l,s,e,this.far,this.clipSpaceNearZ===As.ZERO),Hn(this.projectionMatrixInverse,this.projectionMatrix),this.triggerUpdate(),this}},{key:"setOrthographic",value:function(e,n,i,a,o,s){var l;this.projectionMode=pn.ORTHOGRAPHIC,this.rright=n,this.left=e,this.top=i,this.bottom=a,this.near=o,this.far=s;var c=(this.rright-this.left)/(2*this.zoom),u=(this.top-this.bottom)/(2*this.zoom),f=(this.rright+this.left)/2,d=(this.top+this.bottom)/2,h=f-c,p=f+c,v=d+u,g=d-u;if((l=this.view)!==null&&l!==void 0&&l.enabled){var m=(this.rright-this.left)/this.view.fullWidth/this.zoom,y=(this.top-this.bottom)/this.view.fullHeight/this.zoom;h+=m*this.view.offsetX,p=h+m*this.view.width,v-=y*this.view.offsetY,g=v-y*this.view.height}return this.clipSpaceNearZ===As.NEGATIVE_ONE?bk(this.projectionMatrix,h,p,v,g,o,s):xk(this.projectionMatrix,h,p,v,g,o,s),Hn(this.projectionMatrixInverse,this.projectionMatrix),this._getOrthoMatrix(),this.triggerUpdate(),this}},{key:"setPosition",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.position[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.position[2],a=Ze(e,n,i);return this._setPosition(a),this.setFocalPoint(this.focalPoint),this.triggerUpdate(),this}},{key:"setFocalPoint",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.focalPoint[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:this.focalPoint[2],a=jt(0,1,0);if(this.focalPoint=Ze(e,n,i),this.trackingMode===wu.CINEMATIC){var o=hh(Pt(),this.focalPoint,this.position);e=o[0],n=o[1],i=o[2];var s=Or(o),l=gn(Math.asin(n/s)),c=90+gn(Math.atan2(i,e)),u=Bt();Ok(u,u,Yt(c)),wk(u,u,Yt(l)),a=me(Pt(),[0,1,0],u)}return Hn(this.matrix,Sk(Bt(),this.position,this.focalPoint,a)),this._getAxes(),this._getDistance(),this._getAngles(),this.triggerUpdate(),this}},{key:"getDistance",value:function(){return this.distance}},{key:"getDistanceVector",value:function(){return this.distanceVector}},{key:"setDistance",value:function(e){if(this.distance===e||e<0)return this;this.distance=e,this.distance<Uh&&(this.distance=Uh),this.dollyingStep=this.distance/100;var n=Pt();e=this.distance;var i=this.forward,a=this.focalPoint;return n[0]=e*i[0]+a[0],n[1]=e*i[1]+a[1],n[2]=e*i[2]+a[2],this._setPosition(n),this.triggerUpdate(),this}},{key:"setMaxDistance",value:function(e){return this.maxDistance=e,this}},{key:"setMinDistance",value:function(e){return this.minDistance=e,this}},{key:"setAzimuth",value:function(e){return this.azimuth=Fi(e),this.computeMatrix(),this._getAxes(),this.type===zt.ORBITING||this.type===zt.EXPLORING?this._getPosition():this.type===zt.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getAzimuth",value:function(){return this.azimuth}},{key:"setElevation",value:function(e){return this.elevation=Fi(e),this.computeMatrix(),this._getAxes(),this.type===zt.ORBITING||this.type===zt.EXPLORING?this._getPosition():this.type===zt.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getElevation",value:function(){return this.elevation}},{key:"setRoll",value:function(e){return this.roll=Fi(e),this.computeMatrix(),this._getAxes(),this.type===zt.ORBITING||this.type===zt.EXPLORING?this._getPosition():this.type===zt.TRACKING&&this._getFocalPoint(),this.triggerUpdate(),this}},{key:"getRoll",value:function(){return this.roll}},{key:"_update",value:function(){this._getAxes(),this._getPosition(),this._getDistance(),this._getAngles(),this._getOrthoMatrix(),this.triggerUpdate()}},{key:"computeMatrix",value:function(){var e=ei(je(),[0,0,1],Yt(this.roll));Vi(this.matrix);var n=ei(je(),[1,0,0],Yt((this.rotateWorld&&this.type!==zt.TRACKING||this.type===zt.TRACKING?1:-1)*this.elevation)),i=ei(je(),[0,1,0],Yt((this.rotateWorld&&this.type!==zt.TRACKING||this.type===zt.TRACKING?1:-1)*this.azimuth)),a=ai(je(),i,n);a=ai(je(),a,e);var o=nm(Bt(),a);this.type===zt.ORBITING||this.type===zt.EXPLORING?(Ia(this.matrix,this.matrix,this.focalPoint),rn(this.matrix,this.matrix,o),Ia(this.matrix,this.matrix,[0,0,this.distance])):this.type===zt.TRACKING&&(Ia(this.matrix,this.matrix,this.position),rn(this.matrix,this.matrix,o))}},{key:"_setPosition",value:function(e,n,i){this.position=Ze(e,n,i);var a=this.matrix;a[12]=this.position[0],a[13]=this.position[1],a[14]=this.position[2],a[15]=1,this._getOrthoMatrix()}},{key:"_getAxes",value:function(){Vn(this.right,Ze(Yn(cr(),[1,0,0,0],this.matrix))),Vn(this.up,Ze(Yn(cr(),[0,1,0,0],this.matrix))),Vn(this.forward,Ze(Yn(cr(),[0,0,1,0],this.matrix))),Bi(this.right,this.right),Bi(this.up,this.up),Bi(this.forward,this.forward)}},{key:"_getAngles",value:function(){var e=this.distanceVector[0],n=this.distanceVector[1],i=this.distanceVector[2],a=Or(this.distanceVector);if(a===0){this.elevation=0,this.azimuth=0;return}this.type===zt.TRACKING?(this.elevation=gn(Math.asin(n/a)),this.azimuth=gn(Math.atan2(-e,-i))):this.rotateWorld?(this.elevation=gn(Math.asin(n/a)),this.azimuth=gn(Math.atan2(-e,-i))):(this.elevation=-gn(Math.asin(n/a)),this.azimuth=-gn(Math.atan2(-e,-i)))}},{key:"_getPosition",value:function(){Vn(this.position,Ze(Yn(cr(),[0,0,0,1],this.matrix))),this._getDistance()}},{key:"_getFocalPoint",value:function(){rm(this.distanceVector,[0,0,-this.distance],kk(uo(),this.matrix)),Ar(this.focalPoint,this.position,this.distanceVector),this._getDistance()}},{key:"_getDistance",value:function(){this.distanceVector=hh(Pt(),this.focalPoint,this.position),this.distance=Or(this.distanceVector),this.dollyingStep=this.distance/100}},{key:"_getOrthoMatrix",value:function(){if(this.projectionMode===pn.ORTHOGRAPHIC){var e=this.position,n=ei(je(),[0,0,1],-this.roll*Math.PI/180);Ss(this.orthoMatrix,n,jt((this.rright-this.left)/2-e[0],(this.top-this.bottom)/2-e[1],0),jt(this.zoom,this.zoom,1),e)}}},{key:"triggerUpdate",value:function(){if(this.enableUpdate){var e=this.getViewTransform(),n=rn(Bt(),this.getPerspective(),e);this.getFrustum().extractFromVPMatrix(n),this.eventEmitter.emit(h0.UPDATED)}}},{key:"rotate",value:function(e,n,i){throw new Error(Gt)}},{key:"pan",value:function(e,n){throw new Error(Gt)}},{key:"dolly",value:function(e){throw new Error(Gt)}},{key:"createLandmark",value:function(e,n){throw new Error(Gt)}},{key:"gotoLandmark",value:function(e,n){throw new Error(Gt)}},{key:"cancelLandmarkAnimation",value:function(){throw new Error(Gt)}}])}(),uP=function(t){return t[t.Standard=0]="Standard",t}({}),Xs=function(t){return t[t.ADDED=0]="ADDED",t[t.REMOVED=1]="REMOVED",t[t.Z_INDEX_CHANGED=2]="Z_INDEX_CHANGED",t}({}),fP=Pt(),wa=Bt(),dP=je();function qh(t){if(t.localDirtyFlag){var r=t.localSkew[0]!==0||t.localSkew[1]!==0;if(r){Ss(t.localTransform,t.localRotation,t.localPosition,jt(1,1,1),t.origin),(t.localSkew[0]!==0||t.localSkew[1]!==0)&&(Vi(wa),wa[4]=Math.tan(t.localSkew[0]),wa[1]=Math.tan(t.localSkew[1]),rn(t.localTransform,t.localTransform,wa));var e=Ss(wa,im(dP,0,0,0,1),Ye(fP,1,1,1),t.localScale,t.origin);rn(t.localTransform,t.localTransform,e)}else{var n=t.localTransform,i=t.localPosition,a=t.localRotation,o=t.localScale,s=t.origin,l=i[0]!==0||i[1]!==0||i[2]!==0,c=a[3]!==1||a[0]!==0||a[1]!==0||a[2]!==0,u=o[0]!==1||o[1]!==1||o[2]!==1,f=s[0]!==0||s[1]!==0||s[2]!==0;!c&&!u&&!f?l?xr(n,i):Vi(n):Ss(n,a,i,o,s)}t.localDirtyFlag=!1}}function hP(t,r){t.dirtyFlag&&(r?rn(t.worldTransform,r.worldTransform,t.localTransform):Wa(t.worldTransform,t.localTransform),t.dirtyFlag=!1)}var v0={absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ea(0,0,0,0)},nt=function(t){return t.COORDINATE="<coordinate>",t.COLOR="<color>",t.PAINT="<paint>",t.NUMBER="<number>",t.ANGLE="<angle>",t.OPACITY_VALUE="<opacity-value>",t.SHADOW_BLUR="<shadow-blur>",t.LENGTH="<length>",t.PERCENTAGE="<percentage>",t.LENGTH_PERCENTAGE="<length> | <percentage>",t.LENGTH_PERCENTAGE_12="[<length> | <percentage>]{1,2}",t.LENGTH_PERCENTAGE_14="[<length> | <percentage>]{1,4}",t.LIST_OF_POINTS="<list-of-points>",t.PATH="<path>",t.FILTER="<filter>",t.Z_INDEX="<z-index>",t.OFFSET_DISTANCE="<offset-distance>",t.DEFINED_PATH="<defined-path>",t.MARKER="<marker>",t.TRANSFORM="<transform>",t.TRANSFORM_ORIGIN="<transform-origin>",t.TEXT="<text>",t.TEXT_TRANSFORM="<text-transform>",t}({});function $f(t,r,e){t.prototype=r.prototype=e,e.constructor=t}function g0(t,r){var e=Object.create(t.prototype);for(var n in r)e[n]=r[n];return e}function So(){}var Ka=.7,Us=1/Ka,$i="\\s*([+-]?\\d+)\\s*",Za="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",qn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",pP=/^#([0-9a-f]{3,8})$/,vP=new RegExp(`^rgb\\(${$i},${$i},${$i}\\)$`),gP=new RegExp(`^rgb\\(${qn},${qn},${qn}\\)$`),mP=new RegExp(`^rgba\\(${$i},${$i},${$i},${Za}\\)$`),yP=new RegExp(`^rgba\\(${qn},${qn},${qn},${Za}\\)$`),bP=new RegExp(`^hsl\\(${Za},${qn},${qn}\\)$`),xP=new RegExp(`^hsla\\(${Za},${qn},${qn},${Za}\\)$`),Kh={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$f(So,$l,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Zh,formatHex:Zh,formatHex8:OP,formatHsl:wP,formatRgb:Qh,toString:Qh});function Zh(){return this.rgb().formatHex()}function OP(){return this.rgb().formatHex8()}function wP(){return m0(this).formatHsl()}function Qh(){return this.rgb().formatRgb()}function $l(t){var r,e;return t=(t+"").trim().toLowerCase(),(r=pP.exec(t))?(e=r[1].length,r=parseInt(r[1],16),e===6?Jh(r):e===3?new an(r>>8&15|r>>4&240,r>>4&15|r&240,(r&15)<<4|r&15,1):e===8?zo(r>>24&255,r>>16&255,r>>8&255,(r&255)/255):e===4?zo(r>>12&15|r>>8&240,r>>8&15|r>>4&240,r>>4&15|r&240,((r&15)<<4|r&15)/255):null):(r=vP.exec(t))?new an(r[1],r[2],r[3],1):(r=gP.exec(t))?new an(r[1]*255/100,r[2]*255/100,r[3]*255/100,1):(r=mP.exec(t))?zo(r[1],r[2],r[3],r[4]):(r=yP.exec(t))?zo(r[1]*255/100,r[2]*255/100,r[3]*255/100,r[4]):(r=bP.exec(t))?np(r[1],r[2]/100,r[3]/100,1):(r=xP.exec(t))?np(r[1],r[2]/100,r[3]/100,r[4]):Kh.hasOwnProperty(t)?Jh(Kh[t]):t==="transparent"?new an(NaN,NaN,NaN,0):null}function Jh(t){return new an(t>>16&255,t>>8&255,t&255,1)}function zo(t,r,e,n){return n<=0&&(t=r=e=NaN),new an(t,r,e,n)}function SP(t){return t instanceof So||(t=$l(t)),t?(t=t.rgb(),new an(t.r,t.g,t.b,t.opacity)):new an}function kP(t,r,e,n){return arguments.length===1?SP(t):new an(t,r,e,n??1)}function an(t,r,e,n){this.r=+t,this.g=+r,this.b=+e,this.opacity=+n}$f(an,kP,g0(So,{brighter(t){return t=t==null?Us:Math.pow(Us,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Ka:Math.pow(Ka,t),new an(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new an(si(this.r),si(this.g),si(this.b),qs(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:tp,formatHex:tp,formatHex8:EP,formatRgb:ep,toString:ep}));function tp(){return`#${ni(this.r)}${ni(this.g)}${ni(this.b)}`}function EP(){return`#${ni(this.r)}${ni(this.g)}${ni(this.b)}${ni((isNaN(this.opacity)?1:this.opacity)*255)}`}function ep(){const t=qs(this.opacity);return`${t===1?"rgb(":"rgba("}${si(this.r)}, ${si(this.g)}, ${si(this.b)}${t===1?")":`, ${t})`}`}function qs(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function si(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ni(t){return t=si(t),(t<16?"0":"")+t.toString(16)}function np(t,r,e,n){return n<=0?t=r=e=NaN:e<=0||e>=1?t=r=NaN:r<=0&&(t=NaN),new Tn(t,r,e,n)}function m0(t){if(t instanceof Tn)return new Tn(t.h,t.s,t.l,t.opacity);if(t instanceof So||(t=$l(t)),!t)return new Tn;if(t instanceof Tn)return t;t=t.rgb();var r=t.r/255,e=t.g/255,n=t.b/255,i=Math.min(r,e,n),a=Math.max(r,e,n),o=NaN,s=a-i,l=(a+i)/2;return s?(r===a?o=(e-n)/s+(e<n)*6:e===a?o=(n-r)/s+2:o=(r-e)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Tn(o,s,l,t.opacity)}function _P(t,r,e,n){return arguments.length===1?m0(t):new Tn(t,r,e,n??1)}function Tn(t,r,e,n){this.h=+t,this.s=+r,this.l=+e,this.opacity=+n}$f(Tn,_P,g0(So,{brighter(t){return t=t==null?Us:Math.pow(Us,t),new Tn(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Ka:Math.pow(Ka,t),new Tn(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,r=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,n=e+(e<.5?e:1-e)*r,i=2*e-n;return new an(Ec(t>=240?t-240:t+120,i,n),Ec(t,i,n),Ec(t<120?t+240:t-120,i,n),this.opacity)},clamp(){return new Tn(rp(this.h),Go(this.s),Go(this.l),qs(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=qs(this.opacity);return`${t===1?"hsl(":"hsla("}${rp(this.h)}, ${Go(this.s)*100}%, ${Go(this.l)*100}%${t===1?")":`, ${t})`}`}}));function rp(t){return t=(t||0)%360,t<0?t+360:t}function Go(t){return Math.max(0,Math.min(1,t||0))}function Ec(t,r,e){return(t<60?r+(e-r)*t/60:t<180?e:t<240?r+(e-r)*(240-t)/60:r)*255}function Ce(t,r){if(typeof t!="function"||r!=null&&typeof r!="function")throw new TypeError("Expected a function");var e=function(){for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=r?r.apply(this,a):a[0],l=e.cache;if(l.has(s))return l.get(s);var c=t.apply(this,a);return e.cache=l.set(s,c)||l,c};return e.cache=new(Ce.Cache||Map),Ce.cacheList.push(e.cache),e}Ce.Cache=Map;Ce.cacheList=[];Ce.clearCache=function(){Ce.cacheList.forEach(function(t){return t.clear()})};var it=function(t){return t[t.kUnknown=0]="kUnknown",t[t.kNumber=1]="kNumber",t[t.kPercentage=2]="kPercentage",t[t.kEms=3]="kEms",t[t.kPixels=4]="kPixels",t[t.kRems=5]="kRems",t[t.kDegrees=6]="kDegrees",t[t.kRadians=7]="kRadians",t[t.kGradians=8]="kGradians",t[t.kTurns=9]="kTurns",t[t.kMilliseconds=10]="kMilliseconds",t[t.kSeconds=11]="kSeconds",t[t.kInteger=12]="kInteger",t}({}),An=function(t){return t[t.kUNumber=0]="kUNumber",t[t.kUPercent=1]="kUPercent",t[t.kULength=2]="kULength",t[t.kUAngle=3]="kUAngle",t[t.kUTime=4]="kUTime",t[t.kUOther=5]="kUOther",t}({}),AP=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),TP=function(t){return t[t.kYes=0]="kYes",t[t.kNo=1]="kNo",t}({}),MP=[{name:"em",unit_type:it.kEms},{name:"px",unit_type:it.kPixels},{name:"deg",unit_type:it.kDegrees},{name:"rad",unit_type:it.kRadians},{name:"grad",unit_type:it.kGradians},{name:"ms",unit_type:it.kMilliseconds},{name:"s",unit_type:it.kSeconds},{name:"rem",unit_type:it.kRems},{name:"turn",unit_type:it.kTurns}],na=function(t){return t[t.kUnknownType=0]="kUnknownType",t[t.kUnparsedType=1]="kUnparsedType",t[t.kKeywordType=2]="kKeywordType",t[t.kUnitType=3]="kUnitType",t[t.kSumType=4]="kSumType",t[t.kProductType=5]="kProductType",t[t.kNegateType=6]="kNegateType",t[t.kInvertType=7]="kInvertType",t[t.kMinType=8]="kMinType",t[t.kMaxType=9]="kMaxType",t[t.kClampType=10]="kClampType",t[t.kTransformType=11]="kTransformType",t[t.kPositionType=12]="kPositionType",t[t.kURLImageType=13]="kURLImageType",t[t.kColorType=14]="kColorType",t[t.kUnsupportedColorType=15]="kUnsupportedColorType",t}({}),PP=function(r){return MP.find(function(e){return e.name===r}).unit_type},CP=function(r){return r?r==="number"?it.kNumber:r==="percent"||r==="%"?it.kPercentage:PP(r):it.kUnknown},LP=function(r){switch(r){case it.kNumber:case it.kInteger:return An.kUNumber;case it.kPercentage:return An.kUPercent;case it.kPixels:return An.kULength;case it.kMilliseconds:case it.kSeconds:return An.kUTime;case it.kDegrees:case it.kRadians:case it.kGradians:case it.kTurns:return An.kUAngle;default:return An.kUOther}},RP=function(r){switch(r){case An.kUNumber:return it.kNumber;case An.kULength:return it.kPixels;case An.kUPercent:return it.kPercentage;case An.kUTime:return it.kSeconds;case An.kUAngle:return it.kDegrees;default:return it.kUnknown}},ip=function(r){var e=1;switch(r){case it.kPixels:case it.kDegrees:case it.kSeconds:break;case it.kMilliseconds:e=.001;break;case it.kRadians:e=180/Math.PI;break;case it.kGradians:e=.9;break;case it.kTurns:e=360;break}return e},Su=function(r){switch(r){case it.kNumber:case it.kInteger:return"";case it.kPercentage:return"%";case it.kEms:return"em";case it.kRems:return"rem";case it.kPixels:return"px";case it.kDegrees:return"deg";case it.kRadians:return"rad";case it.kGradians:return"grad";case it.kMilliseconds:return"ms";case it.kSeconds:return"s";case it.kTurns:return"turn"}return""},zl=function(){function t(){Q(this,t)}return Z(t,[{key:"toString",value:function(){return this.buildCSSText(AP.kNo,TP.kNo,"")}},{key:"isNumericValue",value:function(){return this.getType()>=na.kUnitType&&this.getType()<=na.kClampType}}],[{key:"isAngle",value:function(e){return e===it.kDegrees||e===it.kRadians||e===it.kGradians||e===it.kTurns}},{key:"isLength",value:function(e){return e>=it.kEms&&e<it.kDegrees}},{key:"isRelativeUnit",value:function(e){return e===it.kPercentage||e===it.kEms||e===it.kRems}},{key:"isTime",value:function(e){return e===it.kSeconds||e===it.kMilliseconds}}])}(),NP=function(t){function r(e){var n;return Q(this,r),n=kt(this,r),n.colorSpace=e,n}return St(r,t),Z(r,[{key:"getType",value:function(){return na.kColorType}},{key:"to",value:function(n){return this}}])}(zl),kr=function(t){return t[t.Constant=0]="Constant",t[t.LinearGradient=1]="LinearGradient",t[t.RadialGradient=2]="RadialGradient",t}({}),Wo=function(t){function r(e,n){var i;return Q(this,r),i=kt(this,r),i.type=e,i.value=n,i}return St(r,t),Z(r,[{key:"clone",value:function(){return new r(this.type,this.value)}},{key:"buildCSSText",value:function(n,i,a){return a}},{key:"getType",value:function(){return na.kColorType}}])}(zl),On=function(t){function r(e){var n;return Q(this,r),n=kt(this,r),n.value=e,n}return St(r,t),Z(r,[{key:"clone",value:function(){return new r(this.value)}},{key:"getType",value:function(){return na.kKeywordType}},{key:"buildCSSText",value:function(n,i,a){return a+this.value}}])}(zl),IP=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",n="";return Number.isFinite(r)?n="NaN":r>0?n="infinity":n="-infinity",n+=e},ku=function(r){return RP(LP(r))},Wt=function(t){function r(e){var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it.kNumber;Q(this,r),n=kt(this,r);var a;return typeof i=="string"?a=CP(i):a=i,n.unit=a,n.value=e,n}return St(r,t),Z(r,[{key:"clone",value:function(){return new r(this.value,this.unit)}},{key:"equals",value:function(n){var i=n;return this.value===i.value&&this.unit===i.unit}},{key:"getType",value:function(){return na.kUnitType}},{key:"convertTo",value:function(n){if(this.unit===n)return new r(this.value,this.unit);var i=ku(this.unit);if(i!==ku(n)||i===it.kUnknown)return null;var a=ip(this.unit)/ip(n);return new r(this.value*a,n)}},{key:"buildCSSText",value:function(n,i,a){var o;switch(this.unit){case it.kUnknown:break;case it.kInteger:o=Number(this.value).toFixed(0);break;case it.kNumber:case it.kPercentage:case it.kEms:case it.kRems:case it.kPixels:case it.kDegrees:case it.kRadians:case it.kGradians:case it.kMilliseconds:case it.kSeconds:case it.kTurns:{var s=-999999,l=999999,c=this.value,u=Su(this.unit);if(c<s||c>l){var f=Su(this.unit);!Number.isFinite(c)||Number.isNaN(c)?o=IP(c,f):o=c+(f||"")}else o="".concat(c).concat(u)}}return a+=o,a}}])}(zl),En=new Wt(0,"px");new Wt(1,"px");var hi=new Wt(0,"deg"),zf=function(t){function r(e,n,i){var a,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1,s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;return Q(this,r),a=kt(this,r,["rgb"]),a.r=e,a.g=n,a.b=i,a.alpha=o,a.isNone=s,a}return St(r,t),Z(r,[{key:"clone",value:function(){return new r(this.r,this.g,this.b,this.alpha)}},{key:"buildCSSText",value:function(n,i,a){return"".concat(a,"rgba(").concat(this.r,",").concat(this.g,",").concat(this.b,",").concat(this.alpha,")")}}])}(NP),ap=new On("unset"),jP=new On("initial"),DP=new On("inherit"),_c={"":ap,unset:ap,initial:jP,inherit:DP},BP=function(r){return _c[r]||(_c[r]=new On(r)),_c[r]},y0=new zf(0,0,0,0,!0),b0=new zf(0,0,0,0),FP=Ce(function(t,r,e,n){return new zf(t,r,e,n)},function(t,r,e,n){return"rgba(".concat(t,",").concat(r,",").concat(e,",").concat(n,")")}),ae=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:it.kNumber;return new Wt(r,e)};new Wt(50,"%");function $P(t){var r=t.type,e=t.value;return r==="hex"?"#".concat(e):r==="literal"?e:r==="rgb"?"rgb(".concat(e.join(","),")"):"rgba(".concat(e.join(","),")")}var zP=function(){var t={linearGradient:/^(linear\-gradient)/i,repeatingLinearGradient:/^(repeating\-linear\-gradient)/i,radialGradient:/^(radial\-gradient)/i,repeatingRadialGradient:/^(repeating\-radial\-gradient)/i,conicGradient:/^(conic\-gradient)/i,sideOrCorner:/^to (left (top|bottom)|right (top|bottom)|top (left|right)|bottom (left|right)|left|right|top|bottom)/i,extentKeywords:/^(closest\-side|closest\-corner|farthest\-side|farthest\-corner|contain|cover)/,positionKeywords:/^(left|center|right|top|bottom)/i,pixelValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))px/,percentageValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))\%/,emValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))em/,angleValue:/^(-?(([0-9]*\.[0-9]+)|([0-9]+\.?)))deg/,startCall:/^\(/,endCall:/^\)/,comma:/^,/,hexColor:/^\#([0-9a-fA-F]+)/,literalColor:/^([a-zA-Z]+)/,rgbColor:/^rgb/i,rgbaColor:/^rgba/i,number:/^(([0-9]*\.[0-9]+)|([0-9]+\.?))/},r="";function e(L){throw new Error("".concat(r,": ").concat(L))}function n(){var L=i();return r.length>0&&e("Invalid input not EOF"),L}function i(){return b(a)}function a(){return o("linear-gradient",t.linearGradient,l)||o("repeating-linear-gradient",t.repeatingLinearGradient,l)||o("radial-gradient",t.radialGradient,f)||o("repeating-radial-gradient",t.repeatingRadialGradient,f)||o("conic-gradient",t.conicGradient,f)}function o(L,P,N){return s(P,function(j){var B=N();return B&&(I(t.comma)||e("Missing comma before color stops")),{type:L,orientation:B,colorStops:b(x)}})}function s(L,P){var N=I(L);if(N){I(t.startCall)||e("Missing (");var j=P(N);return I(t.endCall)||e("Missing )"),j}}function l(){return c()||u()}function c(){return C("directional",t.sideOrCorner,1)}function u(){return C("angular",t.angleValue,1)}function f(){var L,P=d(),N;return P&&(L=[],L.push(P),N=r,I(t.comma)&&(P=d(),P?L.push(P):r=N)),L}function d(){var L=h()||p();if(L)L.at=g();else{var P=v();if(P){L=P;var N=g();N&&(L.at=N)}else{var j=m();j&&(L={type:"default-radial",at:j})}}return L}function h(){var L=C("shape",/^(circle)/i,0);return L&&(L.style=T()||v()),L}function p(){var L=C("shape",/^(ellipse)/i,0);return L&&(L.style=A()||v()),L}function v(){return C("extent-keyword",t.extentKeywords,1)}function g(){if(C("position",/^at/,0)){var L=m();return L||e("Missing positioning value"),L}}function m(){var L=y();if(L.x||L.y)return{type:"position",value:L}}function y(){return{x:A(),y:A()}}function b(L){var P=L(),N=[];if(P)for(N.push(P);I(t.comma);)P=L(),P?N.push(P):e("One extra comma");return N}function x(){var L=O();return L||e("Expected color definition"),L.length=A(),L}function O(){return S()||E()||k()||w()}function w(){return C("literal",t.literalColor,0)}function S(){return C("hex",t.hexColor,1)}function k(){return s(t.rgbColor,function(){return{type:"rgb",value:b(_)}})}function E(){return s(t.rgbaColor,function(){return{type:"rgba",value:b(_)}})}function _(){return I(t.number)[1]}function A(){return C("%",t.percentageValue,1)||M()||T()}function M(){return C("position-keyword",t.positionKeywords,1)}function T(){return C("px",t.pixelValue,1)||C("em",t.emValue,1)}function C(L,P,N){var j=I(P);if(j)return{type:L,value:j[N]}}function I(L){var P=/^[\n\r\t\s]+/.exec(r);P&&R(P[0].length);var N=L.exec(r);return N&&R(N[0].length),N}function R(L){r=r.substring(L)}return function(L){return r=L,n()}}();function GP(t,r,e,n){var i=Yt(n.value),a=0,o=0,s=a+r/2,l=o+e/2,c=Math.abs(r*Math.cos(i))+Math.abs(e*Math.sin(i)),u=t[0]+s-Math.cos(i)*c/2,f=t[1]+l-Math.sin(i)*c/2,d=t[0]+s+Math.cos(i)*c/2,h=t[1]+l+Math.sin(i)*c/2;return{x1:u,y1:f,x2:d,y2:h}}function WP(t,r,e,n,i,a){var o=n.value,s=i.value;n.unit===it.kPercentage&&(o=n.value/100*r),i.unit===it.kPercentage&&(s=i.value/100*e);var l=Math.max(en([0,0],[o,s]),en([0,e],[o,s]),en([r,e],[o,s]),en([r,0],[o,s]));return a&&(a instanceof Wt?l=a.value:a instanceof On&&(a.value==="closest-side"?l=Math.min(o,r-o,s,e-s):a.value==="farthest-side"?l=Math.max(o,r-o,s,e-s):a.value==="closest-corner"&&(l=Math.min(en([0,0],[o,s]),en([0,e],[o,s]),en([r,e],[o,s]),en([r,0],[o,s]))))),{x:o+t[0],y:s+t[1],r:l}}var YP=/^l\s*\(\s*([\d.]+)\s*\)\s*(.*)/i,HP=/^r\s*\(\s*([\d.]+)\s*,\s*([\d.]+)\s*,\s*([\d.]+)\s*\)\s*(.*)/i,VP=/^p\s*\(\s*([axyn])\s*\)\s*(.*)/i,x0=/[\d.]+:(#[^\s]+|[^\)]+\))/gi;function XP(t){var r,e=t.length;if(t[e-1].length=(r=t[e-1].length)!==null&&r!==void 0?r:{type:"%",value:"100"},e>1){var n;t[0].length=(n=t[0].length)!==null&&n!==void 0?n:{type:"%",value:"0"}}for(var i=0,a=Number(t[0].length.value),o=1;o<e;o++){var s,l=(s=t[o].length)===null||s===void 0?void 0:s.value;if(!pt(l)&&!pt(a)){for(var c=1;c<o-i;c++)t[i+c].length={type:"%",value:"".concat(a+(Number(l)-a)*c/(o-i))};i=o,a=Number(l)}}}var UP={left:180,top:-90,bottom:90,right:0,"left top":225,"top left":225,"left bottom":135,"bottom left":135,"right top":-45,"top right":-45,"right bottom":45,"bottom right":45},qP=Ce(function(t){var r;return t.type==="angular"?r=Number(t.value):r=UP[t.value]||0,ae(r,"deg")}),KP=Ce(function(t){var r=50,e=50,n="%",i="%";if((t==null?void 0:t.type)==="position"){var a=t.value,o=a.x,s=a.y;(o==null?void 0:o.type)==="position-keyword"&&(o.value==="left"?r=0:o.value==="center"?r=50:o.value==="right"?r=100:o.value==="top"?e=0:o.value==="bottom"&&(e=100)),(s==null?void 0:s.type)==="position-keyword"&&(s.value==="left"?r=0:s.value==="center"?e=50:s.value==="right"?r=100:s.value==="top"?e=0:s.value==="bottom"&&(e=100)),((o==null?void 0:o.type)==="px"||(o==null?void 0:o.type)==="%"||(o==null?void 0:o.type)==="em")&&(n=o==null?void 0:o.type,r=Number(o.value)),((s==null?void 0:s.type)==="px"||(s==null?void 0:s.type)==="%"||(s==null?void 0:s.type)==="em")&&(i=s==null?void 0:s.type,e=Number(s.value))}return{cx:ae(r,n),cy:ae(e,i)}}),ZP=Ce(function(t){if(t.indexOf("linear")>-1||t.indexOf("radial")>-1){var r=zP(t);return r.map(function(s){var l=s.type,c=s.orientation,u=s.colorStops;XP(u);var f=u.map(function(b){return{offset:ae(Number(b.length.value),"%"),color:$P(b)}});if(l==="linear-gradient")return new Wo(kr.LinearGradient,{angle:c?qP(c):hi,steps:f});if(l==="radial-gradient"&&(c||(c=[{type:"shape",value:"circle"}]),c[0].type==="shape"&&c[0].value==="circle")){var d=KP(c[0].at),h=d.cx,p=d.cy,v;if(c[0].style){var g=c[0].style,m=g.type,y=g.value;m==="extent-keyword"?v=BP(y):v=ae(y,m)}return new Wo(kr.RadialGradient,{cx:h,cy:p,size:v,steps:f})}})}var e=t[0];if(t[1]==="("||t[2]==="("){if(e==="l"){var n=YP.exec(t);if(n){var i,a=((i=n[2].match(x0))===null||i===void 0?void 0:i.map(function(s){return s.split(":")}))||[];return[new Wo(kr.LinearGradient,{angle:ae(parseFloat(n[1]),"deg"),steps:a.map(function(s){var l=bt(s,2),c=l[0],u=l[1];return{offset:ae(Number(c)*100,"%"),color:u}})})]}}else if(e==="r"){var o=QP(t);if(o)if(ce(o))t=o;else return[new Wo(kr.RadialGradient,o)]}else if(e==="p")return JP(t)}});function QP(t){var r=HP.exec(t);if(r){var e,n=((e=r[4].match(x0))===null||e===void 0?void 0:e.map(function(i){return i.split(":")}))||[];return{cx:ae(50,"%"),cy:ae(50,"%"),steps:n.map(function(i){var a=bt(i,2),o=a[0],s=a[1];return{offset:ae(Number(o)*100,"%"),color:s}})}}return null}function JP(t){var r=VP.exec(t);if(r){var e=r[1],n=r[2];switch(e){case"a":e="repeat";break;case"x":e="repeat-x";break;case"y":e="repeat-y";break;case"n":e="no-repeat";break;default:e="no-repeat"}return{image:n,repetition:e}}return null}function pi(t){return t&&!!t.image}function Ks(t){return t&&!pt(t.r)&&!pt(t.g)&&!pt(t.b)}var Mr=Ce(function(t){if(pi(t))return wt({repetition:"repeat"},t);if(pt(t)&&(t=""),t==="transparent")return b0;if(t==="currentColor")t="black";else if(t==="none")return y0;var r=ZP(t);if(r)return r;var e=$l(t),n=[0,0,0,0];return e!==null&&(n[0]=e.r||0,n[1]=e.g||0,n[2]=e.b||0,n[3]=e.opacity),FP.apply(void 0,n)});function tC(t,r){if(!(!Ks(t)||!Ks(r)))return[[Number(t.r),Number(t.g),Number(t.b),Number(t.alpha)],[Number(r.r),Number(r.g),Number(r.b),Number(r.alpha)],function(e){var n=e.slice();if(n[3])for(var i=0;i<3;i++)n[i]=Math.round(be(n[i],0,255));return n[3]=be(n[3],0,1),"rgba(".concat(n.join(","),")")}]}function ko(t,r){if(pt(r))return ae(0,"px");if(r="".concat(r).trim().toLowerCase(),isFinite(Number(r))){if("px".search(t)>=0)return ae(Number(r),"px");if("deg".search(t)>=0)return ae(Number(r),"deg")}var e=[];r=r.replace(t,function(i){return e.push(i),"U".concat(i)});var n="U(".concat(t.source,")");return e.map(function(i){return ae(Number(r.replace(new RegExp("U".concat(i),"g"),"").replace(new RegExp(n,"g"),"*0")),i)})[0]}var O0=function(r){return ko(new RegExp("px","g"),r)},eC=Ce(O0),nC=function(r){return ko(new RegExp("%","g"),r)};Ce(nC);var w0=function(r){return re(r)||isFinite(Number(r))?ae(Number(r)||0,"px"):ko(new RegExp("px|%|em|rem","g"),r)},Eu=Ce(w0),S0=function(r){return ko(new RegExp("deg|rad|grad|turn","g"),r)},rC=Ce(S0);function iC(t,r,e,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,a="",o=t.value||0,s=r.value||0,l=ku(t.unit),c=t.convertTo(l),u=r.convertTo(l);return c&&u?(o=c.value,s=u.value,a=Su(t.unit)):(Wt.isLength(t.unit)||Wt.isLength(r.unit))&&(o=ln(t,i,e),s=ln(r,i,e),a="px"),[o,s,function(f){return f+a}]}function nn(t){var r=0;return t.unit===it.kDegrees?r=t.value:t.unit===it.kRadians?r=gn(Number(t.value)):t.unit===it.kTurns?r=nP(Number(t.value)):t.value&&(r=t.value),r}function op(t,r){var e;return Array.isArray(t)?e=t.map(function(n){return Number(n)}):ce(t)?e=t.split(" ").map(function(n){return Number(n)}):re(t)&&(e=[t]),r===2?e.length===1?[e[0],e[0]]:[e[0],e[1]]:r===4?e.length===1?[e[0],e[0],e[0],e[0]]:e.length===2?[e[0],e[1],e[0],e[1]]:e.length===3?[e[0],e[1],e[2],e[1]]:[e[0],e[1],e[2],e[3]]:r==="even"&&e.length%2===1?[].concat(Tt(e),Tt(e)):e}function ln(t,r,e){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(t.unit===it.kPixels)return Number(t.value);if(t.unit===it.kPercentage&&e){var i=e.nodeName===H.GROUP?e.getLocalBounds():e.getGeometryBounds();return(n?i.min[r]:0)+t.value/100*i.halfExtents[r]*2}return 0}var aC=function(r){return ko(/deg|rad|grad|turn|px|%/g,r)},oC=["blur","brightness","drop-shadow","contrast","grayscale","sepia","saturate","hue-rotate","invert"];function sC(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";if(t=t.toLowerCase().trim(),t==="none")return[];for(var r=/\s*([\w-]+)\(([^)]*)\)/g,e=[],n,i=0;n=r.exec(t);){if(n.index!==i)return[];if(i=n.index+n[0].length,oC.indexOf(n[1])>-1&&e.push({name:n[1],params:n[2].split(" ").map(function(a){return aC(a)||Mr(a)})}),r.lastIndex===t.length)return e}return[]}function k0(t){return t.toString()}var E0=function(r){return typeof r=="number"?ae(r):/^\s*[-+]?(\d*\.)?\d+\s*$/.test(r)?ae(Number(r)):ae(0)},_u=Ce(E0);Ce(function(t){return ce(t)?t.split(" ").map(_u):t.map(_u)});function Gf(t,r){return[t,r,k0]}function Wf(t,r){return function(e,n){return[e,n,function(i){return k0(be(i,t,r))}]}}function _0(t,r){if(t.length===r.length)return[t,r,function(e){return e}]}function Au(t){return t.parsedStyle.d.totalLength===0&&(t.parsedStyle.d.totalLength=mT(t.parsedStyle.d.absolutePath)),t.parsedStyle.d.totalLength}function lC(t){return t.parsedStyle.points.totalLength===0&&(t.parsedStyle.points.totalLength=GM(t.parsedStyle.points.points)),t.parsedStyle.points.totalLength}function cC(t){for(var r=0;r<t.length;r++){var e=t[r-1],n=t[r],i=n[0];if(i==="M"&&e){var a=e[0],o=[n[1],n[2]],s=void 0;a==="L"||a==="M"?s=[e[1],e[2]]:(a==="C"||a==="A"||a==="Q")&&(s=[e[e.length-2],e[e.length-1]]),s&&Zs(o,s)&&(t.splice(r,1),r--)}}}function uC(t){for(var r=!1,e=t.length,n=0;n<e;n++){var i=t[n],a=i[0];if(a==="C"||a==="A"||a==="Q"){r=!0;break}}return r}function fC(t){for(var r=[],e=[],n=[],i=0;i<t.length;i++){var a=t[i],o=a[0];o==="M"?(n.length&&(e.push(n),n=[]),n.push([a[1],a[2]])):o==="Z"?n.length&&(r.push(n),n=[]):n.push([a[1],a[2]])}return n.length>0&&e.push(n),{polygons:r,polylines:e}}function Zs(t,r){return t[0]===r[0]&&t[1]===r[1]}function dC(t,r){for(var e=[],n=[],i=[],a=0;a<t.length;a++){var o=t[a],s=o.currentPoint,l=o.params,c=o.prePoint,u=void 0;switch(o.command){case"Q":u=WM(c[0],c[1],l[1],l[2],l[3],l[4]);break;case"C":u=FM(c[0],c[1],l[1],l[2],l[3],l[4],l[5],l[6]);break;case"A":var f=o.arcParams;u=jM(f.cx,f.cy,f.rx,f.ry,f.xRotation,f.startAngle,f.endAngle);break;default:e.push(s[0]),n.push(s[1]);break}u&&(o.box=u,e.push(u.x,u.x+u.width),n.push(u.y,u.y+u.height))}e=e.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0}),n=n.filter(function(x){return!Number.isNaN(x)&&x!==1/0&&x!==-1/0});var d=js(e),h=js(n),p=Is(e),v=Is(n);if(i.length===0)return{x:d,y:h,width:p-d,height:v-h};for(var g=0;g<i.length;g++){var m=i[g],y=m.currentPoint,b=void 0;y[0]===d?(b=Yo(m,r),d-=b.xExtra):y[0]===p&&(b=Yo(m,r),p+=b.xExtra),y[1]===h?(b=Yo(m,r),h-=b.yExtra):y[1]===v&&(b=Yo(m,r),v+=b.yExtra)}return{x:d,y:h,width:p-d,height:v-h}}function Yo(t,r){var e=t.prePoint,n=t.currentPoint,i=t.nextPoint,a=Math.pow(n[0]-e[0],2)+Math.pow(n[1]-e[1],2),o=Math.pow(n[0]-i[0],2)+Math.pow(n[1]-i[1],2),s=Math.pow(e[0]-i[0],2)+Math.pow(e[1]-i[1],2),l=Math.acos((a+o-s)/(2*Math.sqrt(a)*Math.sqrt(o)));if(!l||Math.sin(l)===0||ja(l,0))return{xExtra:0,yExtra:0};var c=Math.abs(Math.atan2(i[1]-n[1],i[0]-n[0])),u=Math.abs(Math.atan2(i[0]-n[0],i[1]-n[1]));c=c>Math.PI/2?Math.PI-c:c,u=u>Math.PI/2?Math.PI-u:u;var f={xExtra:Math.cos(l/2-c)*(r/2*(1/Math.sin(l/2)))-r/2||0,yExtra:Math.cos(u-l/2)*(r/2*(1/Math.sin(l/2)))-r/2||0};return f}function sp(t,r){return[r[0]+(r[0]-t[0]),r[1]+(r[1]-t[1])]}var lp=function(r,e){var n=r.x*e.x+r.y*e.y,i=Math.sqrt((Math.pow(r.x,2)+Math.pow(r.y,2))*(Math.pow(e.x,2)+Math.pow(e.y,2))),a=r.x*e.y-r.y*e.x<0?-1:1,o=a*Math.acos(n/i);return o},cp=function(r,e,n,i,a,o,s,l){e=Math.abs(e),n=Math.abs(n),i=Pm(i,360);var c=Yt(i);if(r.x===s.x&&r.y===s.y)return{x:r.x,y:r.y,ellipticalArcAngle:0};if(e===0||n===0)return{x:0,y:0,ellipticalArcAngle:0};var u=(r.x-s.x)/2,f=(r.y-s.y)/2,d={x:Math.cos(c)*u+Math.sin(c)*f,y:-Math.sin(c)*u+Math.cos(c)*f},h=Math.pow(d.x,2)/Math.pow(e,2)+Math.pow(d.y,2)/Math.pow(n,2);h>1&&(e*=Math.sqrt(h),n*=Math.sqrt(h));var p=Math.pow(e,2)*Math.pow(n,2)-Math.pow(e,2)*Math.pow(d.y,2)-Math.pow(n,2)*Math.pow(d.x,2),v=Math.pow(e,2)*Math.pow(d.y,2)+Math.pow(n,2)*Math.pow(d.x,2),g=p/v;g=g<0?0:g;var m=(a!==o?1:-1)*Math.sqrt(g),y={x:m*(e*d.y/n),y:m*(-(n*d.x)/e)},b={x:Math.cos(c)*y.x-Math.sin(c)*y.y+(r.x+s.x)/2,y:Math.sin(c)*y.x+Math.cos(c)*y.y+(r.y+s.y)/2},x={x:(d.x-y.x)/e,y:(d.y-y.y)/n},O=lp({x:1,y:0},x),w={x:(-d.x-y.x)/e,y:(-d.y-y.y)/n},S=lp(x,w);!o&&S>0?S-=2*Math.PI:o&&S<0&&(S+=2*Math.PI),S%=2*Math.PI;var k=O+S*l,E=e*Math.cos(k),_=n*Math.sin(k),A={x:Math.cos(c)*E-Math.sin(c)*_+b.x,y:Math.sin(c)*E+Math.cos(c)*_+b.y,ellipticalArcStartAngle:O,ellipticalArcEndAngle:O+S,ellipticalArcAngle:k,ellipticalArcCenter:b,resultantRx:e,resultantRy:n};return A};function hC(t){for(var r=[],e=null,n=null,i=null,a=0,o=t.length,s=0;s<o;s++){var l=t[s];n=t[s+1];var c=l[0],u={command:c,prePoint:e,params:l,startTangent:null,endTangent:null,currentPoint:null,nextPoint:null,arcParams:null,box:null,cubicParams:null};switch(c){case"M":i=[l[1],l[2]],a=s;break;case"A":var f=pC(e,l);u.arcParams=f;break}if(c==="Z")e=i,n=t[a+1];else{var d=l.length;e=[l[d-2],l[d-1]]}n&&n[0]==="Z"&&(n=t[a],r[a]&&(r[a].prePoint=e)),u.currentPoint=e,r[a]&&Zs(e,r[a].currentPoint)&&(r[a].prePoint=u.prePoint);var h=n?[n[n.length-2],n[n.length-1]]:null;u.nextPoint=h;var p=u.prePoint;if(["L","H","V"].includes(c))u.startTangent=[p[0]-e[0],p[1]-e[1]],u.endTangent=[e[0]-p[0],e[1]-p[1]];else if(c==="Q"){var v=[l[1],l[2]];u.startTangent=[p[0]-v[0],p[1]-v[1]],u.endTangent=[e[0]-v[0],e[1]-v[1]]}else if(c==="T"){var g=r[s-1],m=sp(g.currentPoint,p);g.command==="Q"?(u.command="Q",u.startTangent=[p[0]-m[0],p[1]-m[1]],u.endTangent=[e[0]-m[0],e[1]-m[1]]):(u.command="TL",u.startTangent=[p[0]-e[0],p[1]-e[1]],u.endTangent=[e[0]-p[0],e[1]-p[1]])}else if(c==="C"){var y=[l[1],l[2]],b=[l[3],l[4]];u.startTangent=[p[0]-y[0],p[1]-y[1]],u.endTangent=[e[0]-b[0],e[1]-b[1]],u.startTangent[0]===0&&u.startTangent[1]===0&&(u.startTangent=[y[0]-b[0],y[1]-b[1]]),u.endTangent[0]===0&&u.endTangent[1]===0&&(u.endTangent=[b[0]-y[0],b[1]-y[1]])}else if(c==="S"){var x=r[s-1],O=sp(x.currentPoint,p),w=[l[1],l[2]];x.command==="C"?(u.command="C",u.startTangent=[p[0]-O[0],p[1]-O[1]],u.endTangent=[e[0]-w[0],e[1]-w[1]]):(u.command="SQ",u.startTangent=[p[0]-w[0],p[1]-w[1]],u.endTangent=[e[0]-w[0],e[1]-w[1]])}else if(c==="A"){var S=up(u,0),k=S.x,E=S.y,_=up(u,1,!1),A=_.x,M=_.y;u.startTangent=[k,E],u.endTangent=[A,M]}r.push(u)}return r}function up(t,r){var e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=t.arcParams,i=n.rx,a=i===void 0?0:i,o=n.ry,s=o===void 0?0:o,l=n.xRotation,c=n.arcFlag,u=n.sweepFlag,f=cp({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!c,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},r),d=cp({x:t.prePoint[0],y:t.prePoint[1]},a,s,l,!!c,!!u,{x:t.currentPoint[0],y:t.currentPoint[1]},e?r+.005:r-.005),h=d.x-f.x,p=d.y-f.y,v=Math.sqrt(h*h+p*p);return{x:-h/v,y:-p/v}}function Ho(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function Tu(t,r){return Ho(t)*Ho(r)?(t[0]*r[0]+t[1]*r[1])/(Ho(t)*Ho(r)):1}function fp(t,r){return(t[0]*r[1]<t[1]*r[0]?-1:1)*Math.acos(Tu(t,r))}function pC(t,r){var e=r[1],n=r[2],i=Pm(Yt(r[3]),Math.PI*2),a=r[4],o=r[5],s=t[0],l=t[1],c=r[6],u=r[7],f=Math.cos(i)*(s-c)/2+Math.sin(i)*(l-u)/2,d=-1*Math.sin(i)*(s-c)/2+Math.cos(i)*(l-u)/2,h=f*f/(e*e)+d*d/(n*n);h>1&&(e*=Math.sqrt(h),n*=Math.sqrt(h));var p=e*e*(d*d)+n*n*(f*f),v=p?Math.sqrt((e*e*(n*n)-p)/p):1;a===o&&(v*=-1),isNaN(v)&&(v=0);var g=n?v*e*d/n:0,m=e?v*-n*f/e:0,y=(s+c)/2+Math.cos(i)*g-Math.sin(i)*m,b=(l+u)/2+Math.sin(i)*g+Math.cos(i)*m,x=[(f-g)/e,(d-m)/n],O=[(-1*f-g)/e,(-1*d-m)/n],w=fp([1,0],x),S=fp(x,O);return Tu(x,O)<=-1&&(S=Math.PI),Tu(x,O)>=1&&(S=0),o===0&&S>0&&(S-=2*Math.PI),o===1&&S<0&&(S+=2*Math.PI),{cx:y,cy:b,rx:Zs(t,[c,u])?0:e,ry:Zs(t,[c,u])?0:n,startAngle:w,endAngle:w+S,xRotation:i,arcFlag:a,sweepFlag:o}}function vC(t,r,e){return t.reduce(function(n,i){var a="";if(i[0]==="M"||i[0]==="L"){var o=jt(i[1],i[2],0);e&&me(o,o,e),a="".concat(i[0]).concat(o[0],",").concat(o[1])}else if(i[0]==="Z")a=i[0];else if(i[0]==="C"){var s=jt(i[1],i[2],0),l=jt(i[3],i[4],0),c=jt(i[5],i[6],0);e&&(me(s,s,e),me(l,l,e),me(c,c,e)),a="".concat(i[0]).concat(s[0],",").concat(s[1],",").concat(l[0],",").concat(l[1],",").concat(c[0],",").concat(c[1])}else if(i[0]==="A"){var u=jt(i[6],i[7],0);e&&me(u,u,e),a="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],",").concat(i[5],",").concat(u[0],",").concat(u[1])}else if(i[0]==="Q"){var f=jt(i[1],i[2],0),d=jt(i[3],i[4],0);e&&(me(f,f,e),me(d,d,e)),a="".concat(i[0]).concat(i[1],",").concat(i[2],",").concat(i[3],",").concat(i[4],"}")}return n+=a},"")}function gC(t,r,e,n){return[["M",t,r],["L",e,n]]}function dp(t,r,e,n){var i=(-1+Math.sqrt(2))/3*4,a=t*i,o=r*i,s=e-t,l=e+t,c=n-r,u=n+r;return[["M",s,n],["C",s,n-o,e-a,c,e,c],["C",e+a,c,l,n-o,l,n],["C",l,n+o,e+a,u,e,u],["C",e-a,u,s,n+o,s,n],["Z"]]}function mC(t,r){var e=t.map(function(n,i){return[i===0?"M":"L",n[0],n[1]]});return r&&e.push(["Z"]),e}function yC(t,r,e,n,i){if(i){var a=bt(i,4),o=a[0],s=a[1],l=a[2],c=a[3],u=t>0?1:-1,f=r>0?1:-1,d=u+f!==0?1:0;return[["M",u*o+e,n],["L",t-u*s+e,n],s?["A",s,s,0,0,d,t+e,f*s+n]:null,["L",t+e,r-f*l+n],l?["A",l,l,0,0,d,t+e-u*l,r+n]:null,["L",e+u*c,r+n],c?["A",c,c,0,0,d,e,r+n-f*c]:null,["L",e,f*o+n],o?["A",o,o,0,0,d,u*o+e,n]:null,["Z"]].filter(function(h){return h})}return[["M",e,n],["L",e+t,n],["L",e+t,n+r],["L",e,n+r],["Z"]]}function bC(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t.getLocalTransform(),e=[];switch(t.nodeName){case H.LINE:var n=t.parsedStyle,i=n.x1,a=i===void 0?0:i,o=n.y1,s=o===void 0?0:o,l=n.x2,c=l===void 0?0:l,u=n.y2,f=u===void 0?0:u;e=gC(a,s,c,f);break;case H.CIRCLE:{var d=t.parsedStyle,h=d.r,p=h===void 0?0:h,v=d.cx,g=v===void 0?0:v,m=d.cy,y=m===void 0?0:m;e=dp(p,p,g,y);break}case H.ELLIPSE:{var b=t.parsedStyle,x=b.rx,O=x===void 0?0:x,w=b.ry,S=w===void 0?0:w,k=b.cx,E=k===void 0?0:k,_=b.cy,A=_===void 0?0:_;e=dp(O,S,E,A);break}case H.POLYLINE:case H.POLYGON:var M=t.parsedStyle.points;e=mC(M.points,t.nodeName===H.POLYGON);break;case H.RECT:var T=t.parsedStyle,C=T.width,I=C===void 0?0:C,R=T.height,L=R===void 0?0:R,P=T.x,N=P===void 0?0:P,j=T.y,B=j===void 0?0:j,F=T.radius,$=F&&F.some(function(G){return G!==0});e=yC(I,L,N,B,$&&F.map(function(G){return be(G,0,Math.min(Math.abs(I)/2,Math.abs(L)/2))}));break;case H.PATH:var W=t.parsedStyle.d.absolutePath;e=Tt(W);break}if(e.length)return vC(e,t,r)}var A0=function(r){if(r===""||Array.isArray(r)&&r.length===0)return{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:{x:0,y:0,width:0,height:0}};var e;try{e=Fs(r)}catch{e=Fs(""),console.error("[g]: Invalid SVG Path definition: ".concat(r))}cC(e);var n=uC(e),i=fC(e),a=i.polygons,o=i.polylines,s=hC(e),l=dC(s,0),c=l.x,u=l.y,f=l.width,d=l.height;return{absolutePath:e,hasArc:n,segments:s,polygons:a,polylines:o,totalLength:0,rect:{x:Number.isFinite(c)?c:0,y:Number.isFinite(u)?u:0,width:Number.isFinite(f)?f:0,height:Number.isFinite(d)?d:0}}},xC=Ce(A0);function T0(t){return ce(t)?xC(t):A0(t)}function OC(t,r,e){var n=t.curve,i=r.curve;(!n||n.length===0)&&(n=hu(t.absolutePath,!1),t.curve=n),(!i||i.length===0)&&(i=hu(r.absolutePath,!1),r.curve=i);var a=[n,i];n.length!==i.length&&(a=Wm(n,i));var o=_h(a[0])!==_h(a[1])?fT(a[0]):uT(a[0]);return[o,bT(a[1],o),function(s){return s}]}function wC(t,r){var e;return ce(t)?e=t.split(" ").map(function(n){var i=n.split(","),a=bt(i,2),o=a[0],s=a[1];return[Number(o),Number(s)]}):e=t,{points:e,totalLength:0,segments:[]}}function SC(t,r){return[t.points,r.points,function(e){return e}]}var ve=null,zi=/\s*(\w+)\(([^)]*)\)/g;function tn(t){return function(r){var e=0;return t.map(function(n){return n===ve?r[e++]:n})}}function Hr(t){return t}var Qa={matrix:["NNNNNN",[ve,ve,0,0,ve,ve,0,0,0,0,1,0,ve,ve,0,1],Hr],matrix3d:["NNNNNNNNNNNNNNNN",Hr],rotate:["A"],rotateX:["A"],rotateY:["A"],rotateZ:["A"],rotate3d:["NNNA"],perspective:["L"],scale:["Nn",tn([ve,ve,new Wt(1)]),Hr],scaleX:["N",tn([ve,new Wt(1),new Wt(1)]),tn([ve,new Wt(1)])],scaleY:["N",tn([new Wt(1),ve,new Wt(1)]),tn([new Wt(1),ve])],scaleZ:["N",tn([new Wt(1),new Wt(1),ve])],scale3d:["NNN",Hr],skew:["Aa",null,Hr],skewX:["A",null,tn([ve,hi])],skewY:["A",null,tn([hi,ve])],translate:["Tt",tn([ve,ve,En]),Hr],translateX:["T",tn([ve,En,En]),tn([ve,En])],translateY:["T",tn([En,ve,En]),tn([En,ve])],translateZ:["L",tn([En,En,ve])],translate3d:["TTL",Hr]};function M0(t){for(var r=[],e=t.length,n=0;n<e;n++){var i=t[n],a=i[0],o=i.slice(1);a==="translate"||a==="skew"?o.length===1&&o.push(0):a==="scale"&&o.length===1&&o.push(o[0]);var s=Qa[a];if(!s)return[];var l=o.map(function(c){return ae(c)});r.push({t:a,d:l})}return r}function P0(t){if(Array.isArray(t))return M0(t);if(t=(t||"none").trim(),t==="none")return[];var r=[],e,n=0;for(zi.lastIndex=0;e=zi.exec(t);){if(e.index!==n)return[];n=e.index+e[0].length;var i=e[1],a=Qa[i];if(!a)return[];var o=e[2].split(","),s=a[0];if(s.length<o.length)return[];for(var l=[],c=0;c<s.length;c++){var u=o[c],f=s[c],d=void 0;if(u?d={A:function(p){return p.trim()==="0"?hi:rC(p)},N:_u,T:Eu,L:eC}[f.toUpperCase()](u):d={a:hi,n:l[0],t:En}[f],d===void 0)return[];l.push(d)}if(r.push({t:i,d:l}),zi.lastIndex===t.length)return r}return[]}function kC(t){if(Array.isArray(t))return M0(t);if(t=(t||"none").trim(),t==="none")return[];var r=[],e,n=0;for(zi.lastIndex=0;e=zi.exec(t);){if(e.index!==n)return[];n=e.index+e[0].length;var i=e[1],a=Qa[i];if(!a)return[];var o=e[2].split(","),s=a[0];if(s.length<o.length)return[];for(var l=[],c=0;c<s.length;c++){var u=o[c],f=s[c],d=void 0;if(u?d={A:function(p){return p.trim()==="0"?hi:S0(p)},N:E0,T:w0,L:O0}[f.toUpperCase()](u):d={a:hi,n:l[0],t:En}[f],d===void 0)return[];l.push(d)}if(r.push({t:i,d:l}),zi.lastIndex===t.length)return r}return[]}function EC(t){var r,e,n,i;switch(t.t){case"rotateX":return i=Yt(nn(t.d[0])),[1,0,0,0,0,Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1];case"rotateY":return i=Yt(nn(t.d[0])),[Math.cos(i),0,-Math.sin(i),0,0,1,0,0,Math.sin(i),0,Math.cos(i),0,0,0,0,1];case"rotate":case"rotateZ":return i=Yt(nn(t.d[0])),[Math.cos(i),Math.sin(i),0,0,-Math.sin(i),Math.cos(i),0,0,0,0,1,0,0,0,0,1];case"rotate3d":r=t.d[0].value,e=t.d[1].value,n=t.d[2].value,i=Yt(nn(t.d[3]));var a=r*r+e*e+n*n;if(a===0)r=1,e=0,n=0;else if(a!==1){var o=Math.sqrt(a);r/=o,e/=o,n/=o}var s=Math.sin(i/2),l=s*Math.cos(i/2),c=s*s;return[1-2*(e*e+n*n)*c,2*(r*e*c+n*l),2*(r*n*c-e*l),0,2*(r*e*c-n*l),1-2*(r*r+n*n)*c,2*(e*n*c+r*l),0,2*(r*n*c+e*l),2*(e*n*c-r*l),1-2*(r*r+e*e)*c,0,0,0,0,1];case"scale":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,1,0,0,0,0,1];case"scaleX":return[t.d[0].value,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"scaleY":return[1,0,0,0,0,t.d[0].value,0,0,0,0,1,0,0,0,0,1];case"scaleZ":return[1,0,0,0,0,1,0,0,0,0,t.d[0].value,0,0,0,0,1];case"scale3d":return[t.d[0].value,0,0,0,0,t.d[1].value,0,0,0,0,t.d[2].value,0,0,0,0,1];case"skew":var u=Yt(nn(t.d[0])),f=Yt(nn(t.d[1]));return[1,Math.tan(f),0,0,Math.tan(u),1,0,0,0,0,1,0,0,0,0,1];case"skewX":return i=Yt(nn(t.d[0])),[1,0,0,0,Math.tan(i),1,0,0,0,0,1,0,0,0,0,1];case"skewY":return i=Yt(nn(t.d[0])),[1,Math.tan(i),0,0,0,1,0,0,0,0,1,0,0,0,0,1];case"translate":return r=ln(t.d[0],0,null)||0,e=ln(t.d[1],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,r,e,0,1];case"translateX":return r=ln(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,r,0,0,1];case"translateY":return e=ln(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,e,0,1];case"translateZ":return n=ln(t.d[0],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,0,0,n,1];case"translate3d":return r=ln(t.d[0],0,null)||0,e=ln(t.d[1],0,null)||0,n=ln(t.d[2],0,null)||0,[1,0,0,0,0,1,0,0,0,0,1,0,r,e,n,1];case"perspective":var d=ln(t.d[0],0,null)||0,h=d?-1/d:0;return[1,0,0,0,0,1,0,0,0,0,1,h,0,0,0,1];case"matrix":return[t.d[0].value,t.d[1].value,0,0,t.d[2].value,t.d[3].value,0,0,0,0,1,0,t.d[4].value,t.d[5].value,0,1];case"matrix3d":return t.d.map(function(p){return p.value})}}function _C(t,r){return[t[0]*r[0]+t[4]*r[1]+t[8]*r[2]+t[12]*r[3],t[1]*r[0]+t[5]*r[1]+t[9]*r[2]+t[13]*r[3],t[2]*r[0]+t[6]*r[1]+t[10]*r[2]+t[14]*r[3],t[3]*r[0]+t[7]*r[1]+t[11]*r[2]+t[15]*r[3],t[0]*r[4]+t[4]*r[5]+t[8]*r[6]+t[12]*r[7],t[1]*r[4]+t[5]*r[5]+t[9]*r[6]+t[13]*r[7],t[2]*r[4]+t[6]*r[5]+t[10]*r[6]+t[14]*r[7],t[3]*r[4]+t[7]*r[5]+t[11]*r[6]+t[15]*r[7],t[0]*r[8]+t[4]*r[9]+t[8]*r[10]+t[12]*r[11],t[1]*r[8]+t[5]*r[9]+t[9]*r[10]+t[13]*r[11],t[2]*r[8]+t[6]*r[9]+t[10]*r[10]+t[14]*r[11],t[3]*r[8]+t[7]*r[9]+t[11]*r[10]+t[15]*r[11],t[0]*r[12]+t[4]*r[13]+t[8]*r[14]+t[12]*r[15],t[1]*r[12]+t[5]*r[13]+t[9]*r[14]+t[13]*r[15],t[2]*r[12]+t[6]*r[13]+t[10]*r[14]+t[14]*r[15],t[3]*r[12]+t[7]*r[13]+t[11]*r[14]+t[15]*r[15]]}function AC(t){return t.length===0?[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]:t.map(EC).reduce(_C)}function hp(t){var r=[0,0,0],e=[1,1,1],n=[0,0,0],i=[0,0,0,1],a=[0,0,0,1];return sP(AC(t),r,e,n,i,a),[[r,e,n,a,i]]}var TC=function(){function t(n,i){for(var a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]],o=0;o<4;o++)for(var s=0;s<4;s++)for(var l=0;l<4;l++)a[o][s]+=i[o][l]*n[l][s];return a}function r(n){return n[0][2]===0&&n[0][3]===0&&n[1][2]===0&&n[1][3]===0&&n[2][0]===0&&n[2][1]===0&&n[2][2]===1&&n[2][3]===0&&n[3][2]===0&&n[3][3]===1}function e(n,i,a,o,s){for(var l=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]],c=0;c<4;c++)l[c][3]=s[c];for(var u=0;u<3;u++)for(var f=0;f<3;f++)l[3][u]+=n[f]*l[f][u];var d=o[0],h=o[1],p=o[2],v=o[3],g=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];g[0][0]=1-2*(h*h+p*p),g[0][1]=2*(d*h-p*v),g[0][2]=2*(d*p+h*v),g[1][0]=2*(d*h+p*v),g[1][1]=1-2*(d*d+p*p),g[1][2]=2*(h*p-d*v),g[2][0]=2*(d*p-h*v),g[2][1]=2*(h*p+d*v),g[2][2]=1-2*(d*d+h*h),l=t(l,g);var m=[[1,0,0,0],[0,1,0,0],[0,0,1,0],[0,0,0,1]];a[2]&&(m[2][1]=a[2],l=t(l,m)),a[1]&&(m[2][1]=0,m[2][0]=a[0],l=t(l,m)),a[0]&&(m[2][0]=0,m[1][0]=a[0],l=t(l,m));for(var y=0;y<3;y++)for(var b=0;b<3;b++)l[y][b]*=i[y];return r(l)?[l[0][0],l[0][1],l[1][0],l[1][1],l[3][0],l[3][1]]:l[0].concat(l[1],l[2],l[3])}return e}();function MC(t){return t.toFixed(6).replace(".000000","")}function Ac(t,r){var e,n;return t.decompositionPair!==r&&(t.decompositionPair=r,e=hp(t)),r.decompositionPair!==t&&(r.decompositionPair=t,n=hp(r)),e[0]===null||n[0]===null?[[!1],[!0],function(i){return i?r[0].d:t[0].d}]:(e[0].push(0),n[0].push(1),[e,n,function(i){var a=CC(e[0][3],n[0][3],i[5]),o=TC(i[0],i[1],i[2],a,i[4]),s=o.map(MC).join(",");return s}])}function PC(t,r){for(var e=0,n=0;n<t.length;n++)e+=t[n]*r[n];return e}function CC(t,r,e){var n=PC(t,r);n=be(n,-1,1);var i=[];if(n===1)i=t;else for(var a=Math.acos(n),o=Math.sin(e*a)*1/Math.sqrt(1-n*n),s=0;s<4;s++)i.push(t[s]*(Math.cos(e*a)-n*o)+r[s]*o);return i}function Tc(t){return t.replace(/[XY]/,"")}function Mc(t){return t.replace(/(X|Y|Z|3d)?$/,"3d")}var LC=function(r,e){return r==="perspective"&&e==="perspective"||(r==="matrix"||r==="matrix3d")&&(e==="matrix"||e==="matrix3d")};function RC(t,r,e){var n=!1;if(!t.length||!r.length){t.length||(n=!0,t=r,r=[]);for(var i=function(){var A=t[a],M=A.t,T=A.d,C=M.substring(0,5)==="scale"?1:0;r.push({t:M,d:T.map(function(I){return typeof I=="number"?ae(C):ae(C,I.unit)})})},a=0;a<t.length;a++)i()}var o=[],s=[],l=[];if(t.length!==r.length){var c=Ac(t,r);o=[c[0]],s=[c[1]],l=[["matrix",[c[2]]]]}else for(var u=0;u<t.length;u++){var f=t[u].t,d=r[u].t,h=t[u].d,p=r[u].d,v=Qa[f],g=Qa[d],m=void 0;if(LC(f,d)){var y=Ac([t[u]],[r[u]]);o.push(y[0]),s.push(y[1]),l.push(["matrix",[y[2]]]);continue}else if(f===d)m=f;else if(v[2]&&g[2]&&Tc(f)===Tc(d))m=Tc(f),h=v[2](h),p=g[2](p);else if(v[1]&&g[1]&&Mc(f)===Mc(d))m=Mc(f),h=v[1](h),p=g[1](p);else{var b=Ac(t,r);o=[b[0]],s=[b[1]],l=[["matrix",[b[2]]]];break}for(var x=[],O=[],w=[],S=0;S<h.length;S++){var k=iC(h[S],p[S],e,!1,S);x[S]=k[0],O[S]=k[1],w.push(k[2])}o.push(x),s.push(O),l.push([m,w])}if(n){var E=o;o=s,s=E}return[o,s,function(_){return _.map(function(A,M){var T=A.map(function(C,I){return l[M][1][I](C)}).join(",");return l[M][0]==="matrix"&&T.split(",").length===16&&(l[M][0]="matrix3d"),l[M][0]==="matrix3d"&&T.split(",").length===6&&(l[M][0]="matrix"),"".concat(l[M][0],"(").concat(T,")")}).join(" ")}]}var NC=Ce(function(t){if(ce(t)){if(t==="text-anchor")return[ae(0,"px"),ae(0,"px")];var r=t.split(" ");return r.length===1&&(r[0]==="top"||r[0]==="bottom"?(r[1]=r[0],r[0]="center"):r[1]="center"),r.length!==2?null:[Eu(pp(r[0])),Eu(pp(r[1]))]}return[ae(t[0]||0,"px"),ae(t[1]||0,"px")]});function pp(t){return t==="center"?"50%":t==="left"||t==="top"?"0%":t==="right"||t==="bottom"?"100%":t}var Yf=[{n:"display",k:["none"]},{n:"opacity",int:!0,inh:!0,d:"1",syntax:nt.OPACITY_VALUE},{n:"fillOpacity",int:!0,inh:!0,d:"1",syntax:nt.OPACITY_VALUE},{n:"strokeOpacity",int:!0,inh:!0,d:"1",syntax:nt.OPACITY_VALUE},{n:"fill",int:!0,k:["none"],d:"none",syntax:nt.PAINT},{n:"fillRule",k:["nonzero","evenodd"],d:"nonzero"},{n:"stroke",int:!0,k:["none"],d:"none",syntax:nt.PAINT,l:!0},{n:"shadowType",k:["inner","outer","both"],d:"outer",l:!0},{n:"shadowColor",int:!0,syntax:nt.COLOR},{n:"shadowOffsetX",int:!0,l:!0,d:"0",syntax:nt.LENGTH_PERCENTAGE},{n:"shadowOffsetY",int:!0,l:!0,d:"0",syntax:nt.LENGTH_PERCENTAGE},{n:"shadowBlur",int:!0,l:!0,d:"0",syntax:nt.SHADOW_BLUR},{n:"lineWidth",int:!0,inh:!0,d:"1",l:!0,a:["strokeWidth"],syntax:nt.LENGTH_PERCENTAGE},{n:"increasedLineWidthForHitTesting",inh:!0,d:"0",l:!0,syntax:nt.LENGTH_PERCENTAGE},{n:"lineJoin",inh:!0,l:!0,a:["strokeLinejoin"],k:["miter","bevel","round"],d:"miter"},{n:"lineCap",inh:!0,l:!0,a:["strokeLinecap"],k:["butt","round","square"],d:"butt"},{n:"lineDash",int:!0,inh:!0,k:["none"],a:["strokeDasharray"],syntax:nt.LENGTH_PERCENTAGE_12},{n:"lineDashOffset",int:!0,inh:!0,d:"0",a:["strokeDashoffset"],syntax:nt.LENGTH_PERCENTAGE},{n:"offsetPath",syntax:nt.DEFINED_PATH},{n:"offsetDistance",int:!0,syntax:nt.OFFSET_DISTANCE},{n:"dx",int:!0,l:!0,d:"0",syntax:nt.LENGTH_PERCENTAGE},{n:"dy",int:!0,l:!0,d:"0",syntax:nt.LENGTH_PERCENTAGE},{n:"zIndex",ind:!0,int:!0,d:"0",k:["auto"],syntax:nt.Z_INDEX},{n:"visibility",k:["visible","hidden"],ind:!0,inh:!0,int:!0,d:"visible"},{n:"pointerEvents",inh:!0,k:["none","auto","stroke","fill","painted","visible","visiblestroke","visiblefill","visiblepainted","all"],d:"auto"},{n:"filter",ind:!0,l:!0,k:["none"],d:"none",syntax:nt.FILTER},{n:"clipPath",syntax:nt.DEFINED_PATH},{n:"textPath",syntax:nt.DEFINED_PATH},{n:"textPathSide",k:["left","right"],d:"left"},{n:"textPathStartOffset",l:!0,d:"0",syntax:nt.LENGTH_PERCENTAGE},{n:"transform",p:100,int:!0,k:["none"],d:"none",syntax:nt.TRANSFORM},{n:"transformOrigin",p:100,d:"0 0",l:!0,syntax:nt.TRANSFORM_ORIGIN},{n:"cx",int:!0,l:!0,d:"0",syntax:nt.COORDINATE},{n:"cy",int:!0,l:!0,d:"0",syntax:nt.COORDINATE},{n:"cz",int:!0,l:!0,d:"0",syntax:nt.COORDINATE},{n:"r",int:!0,l:!0,d:"0",syntax:nt.LENGTH_PERCENTAGE},{n:"rx",int:!0,l:!0,d:"0",syntax:nt.LENGTH_PERCENTAGE},{n:"ry",int:!0,l:!0,d:"0",syntax:nt.LENGTH_PERCENTAGE},{n:"x",int:!0,l:!0,d:"0",syntax:nt.COORDINATE},{n:"y",int:!0,l:!0,d:"0",syntax:nt.COORDINATE},{n:"z",int:!0,l:!0,d:"0",syntax:nt.COORDINATE},{n:"width",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:nt.LENGTH_PERCENTAGE},{n:"height",int:!0,l:!0,k:["auto","fit-content","min-content","max-content"],d:"0",syntax:nt.LENGTH_PERCENTAGE},{n:"radius",int:!0,l:!0,d:"0",syntax:nt.LENGTH_PERCENTAGE_14},{n:"x1",int:!0,l:!0,syntax:nt.COORDINATE},{n:"y1",int:!0,l:!0,syntax:nt.COORDINATE},{n:"z1",int:!0,l:!0,syntax:nt.COORDINATE},{n:"x2",int:!0,l:!0,syntax:nt.COORDINATE},{n:"y2",int:!0,l:!0,syntax:nt.COORDINATE},{n:"z2",int:!0,l:!0,syntax:nt.COORDINATE},{n:"d",int:!0,l:!0,d:"",syntax:nt.PATH,p:50},{n:"points",int:!0,l:!0,syntax:nt.LIST_OF_POINTS,p:50},{n:"text",l:!0,d:"",syntax:nt.TEXT,p:50},{n:"textTransform",l:!0,inh:!0,k:["capitalize","uppercase","lowercase","none"],d:"none",syntax:nt.TEXT_TRANSFORM,p:51},{n:"font",l:!0},{n:"fontSize",int:!0,inh:!0,d:"16px",l:!0,syntax:nt.LENGTH_PERCENTAGE},{n:"fontFamily",l:!0,inh:!0,d:"sans-serif"},{n:"fontStyle",l:!0,inh:!0,k:["normal","italic","oblique"],d:"normal"},{n:"fontWeight",l:!0,inh:!0,k:["normal","bold","bolder","lighter"],d:"normal"},{n:"fontVariant",l:!0,inh:!0,k:["normal","small-caps"],d:"normal"},{n:"lineHeight",l:!0,syntax:nt.LENGTH,int:!0,d:"0"},{n:"letterSpacing",l:!0,syntax:nt.LENGTH,int:!0,d:"0"},{n:"miterLimit",l:!0,syntax:nt.NUMBER,d:function(r){return r===H.PATH||r===H.POLYGON||r===H.POLYLINE?"4":"10"}},{n:"wordWrap",l:!0},{n:"wordWrapWidth",l:!0},{n:"maxLines",l:!0},{n:"textOverflow",l:!0,d:"clip"},{n:"leading",l:!0},{n:"textBaseline",l:!0,inh:!0,k:["top","hanging","middle","alphabetic","ideographic","bottom"],d:"alphabetic"},{n:"textAlign",l:!0,inh:!0,k:["start","center","middle","end","left","right"],d:"start"},{n:"markerStart",syntax:nt.MARKER},{n:"markerEnd",syntax:nt.MARKER},{n:"markerMid",syntax:nt.MARKER},{n:"markerStartOffset",syntax:nt.LENGTH,l:!0,int:!0,d:"0"},{n:"markerEndOffset",syntax:nt.LENGTH,l:!0,int:!0,d:"0"}],IC=new Set(Yf.filter(function(t){return!!t.l}).map(function(t){return t.n})),C0={},jC=function(){function t(r){var e=this;Q(this,t),this.runtime=r,Yf.forEach(function(n){e.registerMetadata(n)})}return Z(t,[{key:"registerMetadata",value:function(e){[e.n].concat(Tt(e.a||[])).forEach(function(n){C0[n]=e})}},{key:"getPropertySyntax",value:function(e){return this.runtime.CSSPropertySyntaxFactory[e]}},{key:"processProperties",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{forceUpdateGeometry:!1};Object.assign(e.attributes,n);var a=e.parsedStyle.clipPath,o=e.parsedStyle.offsetPath;DC(e,n);var s=!!i.forceUpdateGeometry;if(!s){for(var l in n)if(IC.has(l)){s=!0;break}}var c=L0(e);c.has("fill")&&n.fill&&(e.parsedStyle.fill=Mr(n.fill)),c.has("stroke")&&n.stroke&&(e.parsedStyle.stroke=Mr(n.stroke)),c.has("shadowColor")&&n.shadowColor&&(e.parsedStyle.shadowColor=Mr(n.shadowColor)),c.has("filter")&&n.filter&&(e.parsedStyle.filter=sC(n.filter)),c.has("radius")&&!pt(n.radius)&&(e.parsedStyle.radius=op(n.radius,4)),c.has("lineDash")&&!pt(n.lineDash)&&(e.parsedStyle.lineDash=op(n.lineDash,"even")),c.has("points")&&n.points&&(e.parsedStyle.points=wC(n.points)),c.has("d")&&n.d===""&&(e.parsedStyle.d=wt({},v0)),c.has("d")&&n.d&&(e.parsedStyle.d=T0(n.d)),c.has("textTransform")&&n.textTransform&&this.runtime.CSSPropertySyntaxFactory[nt.TEXT_TRANSFORM].calculator(null,null,{value:n.textTransform},e,null),c.has("clipPath")&&!Ut(n.clipPath)&&this.runtime.CSSPropertySyntaxFactory[nt.DEFINED_PATH].calculator("clipPath",a,n.clipPath,e,this.runtime),c.has("offsetPath")&&n.offsetPath&&this.runtime.CSSPropertySyntaxFactory[nt.DEFINED_PATH].calculator("offsetPath",o,n.offsetPath,e,this.runtime),c.has("transform")&&n.transform&&(e.parsedStyle.transform=P0(n.transform)),c.has("transformOrigin")&&n.transformOrigin&&(e.parsedStyle.transformOrigin=NC(n.transformOrigin)),c.has("markerStart")&&n.markerStart&&(e.parsedStyle.markerStart=this.runtime.CSSPropertySyntaxFactory[nt.MARKER].calculator(null,n.markerStart,n.markerStart,null,null)),c.has("markerEnd")&&n.markerEnd&&(e.parsedStyle.markerEnd=this.runtime.CSSPropertySyntaxFactory[nt.MARKER].calculator(null,n.markerEnd,n.markerEnd,null,null)),c.has("markerMid")&&n.markerMid&&(e.parsedStyle.markerMid=this.runtime.CSSPropertySyntaxFactory[nt.MARKER].calculator("",n.markerMid,n.markerMid,null,null)),c.has("zIndex")&&!pt(n.zIndex)&&this.runtime.CSSPropertySyntaxFactory[nt.Z_INDEX].postProcessor(e),c.has("offsetDistance")&&!pt(n.offsetDistance)&&this.runtime.CSSPropertySyntaxFactory[nt.OFFSET_DISTANCE].postProcessor(e),c.has("transform")&&n.transform&&this.runtime.CSSPropertySyntaxFactory[nt.TRANSFORM].postProcessor(e),c.has("transformOrigin")&&n.transformOrigin&&this.runtime.CSSPropertySyntaxFactory[nt.TRANSFORM_ORIGIN].postProcessor(e),s&&(e.geometry.dirty=!0,e.dirty(!0,!0),i.forceUpdateGeometry||this.runtime.sceneGraphService.dirtyToRoot(e))}},{key:"updateGeometry",value:function(e){var n=e.nodeName,i=this.runtime.geometryUpdaterFactory[n];if(i){var a=e.geometry;a.contentBounds||(a.contentBounds=new _e),a.renderBounds||(a.renderBounds=new _e);var o=e.parsedStyle,s=i.update(o,e),l=s.cx,c=l===void 0?0:l,u=s.cy,f=u===void 0?0:u,d=s.cz,h=d===void 0?0:d,p=s.hwidth,v=p===void 0?0:p,g=s.hheight,m=g===void 0?0:g,y=s.hdepth,b=y===void 0?0:y,x=[Math.abs(v),Math.abs(m),b],O=o.stroke,w=o.lineWidth,S=w===void 0?1:w,k=o.increasedLineWidthForHitTesting,E=k===void 0?0:k,_=o.shadowType,A=_===void 0?"outer":_,M=o.shadowColor,T=o.filter,C=T===void 0?[]:T,I=o.transformOrigin,R=[c,f,h];a.contentBounds.update(R,x);var L=n===H.POLYLINE||n===H.POLYGON||n===H.PATH?Math.SQRT2:.5,P=O&&!O.isNone;if(P){var N=((S||0)+(E||0))*L;x[0]+=N,x[1]+=N}if(a.renderBounds.update(R,x),M&&A&&A!=="inner"){var j=a.renderBounds,B=j.min,F=j.max,$=o.shadowBlur,W=o.shadowOffsetX,G=o.shadowOffsetY,Y=$||0,V=W||0,z=G||0,U=B[0]-Y+V,q=F[0]+Y+V,rt=B[1]-Y+z,tt=F[1]+Y+z;B[0]=Math.min(B[0],U),F[0]=Math.max(F[0],q),B[1]=Math.min(B[1],rt),F[1]=Math.max(F[1],tt),a.renderBounds.setMinMax(B,F)}C.forEach(function(ft){var dt=ft.name,mt=ft.params;if(dt==="blur"){var xe=mt[0].value;a.renderBounds.update(a.renderBounds.center,Ar(a.renderBounds.halfExtents,a.renderBounds.halfExtents,[xe,xe,0]))}else if(dt==="drop-shadow"){var We=mt[0].value,se=mt[1].value,Oe=mt[2].value,we=a.renderBounds,te=we.min,It=we.max,fe=te[0]-Oe+We,de=It[0]+Oe+We,he=te[1]-Oe+se,ee=It[1]+Oe+se;te[0]=Math.min(te[0],fe),It[0]=Math.max(It[0],de),te[1]=Math.min(te[1],he),It[1]=Math.max(It[1],ee),a.renderBounds.setMinMax(te,It)}}),e.geometry.dirty=!1;var at=v<0,ot=m<0,lt=(at?-1:1)*(I?ln(I[0],0,e,!0):0),vt=(ot?-1:1)*(I?ln(I[1],1,e,!0):0);(lt||vt)&&e.setOrigin(lt,vt)}}},{key:"updateSizeAttenuation",value:function(e,n){e.style.isSizeAttenuation?(e.style.rawLineWidth||(e.style.rawLineWidth=e.style.lineWidth),e.style.lineWidth=(e.style.rawLineWidth||1)/n,e.nodeName===H.CIRCLE&&(e.style.rawR||(e.style.rawR=e.style.r),e.style.r=(e.style.rawR||1)/n)):(e.style.rawLineWidth&&(e.style.lineWidth=e.style.rawLineWidth,delete e.style.rawLineWidth),e.nodeName===H.CIRCLE&&e.style.rawR&&(e.style.r=e.style.rawR,delete e.style.rawR))}}])}();function DC(t,r){var e=L0(t);for(var n in r)e.has(n)&&(t.parsedStyle[n]=r[n])}function L0(t){return t.constructor.PARSED_STYLE_LIST}var BC=function(){function t(){Q(this,t),this.mixer=Gf}return Z(t,[{key:"calculator",value:function(e,n,i,a){return nn(i)}}])}(),FC=function(){function t(){Q(this,t)}return Z(t,[{key:"calculator",value:function(e,n,i,a,o){return i instanceof On&&(i=null),o.sceneGraphService.updateDisplayObjectDependency(e,n,i,a),e==="clipPath"&&a.forEach(function(s){s.childNodes.length===0&&o.sceneGraphService.dirtyToRoot(s)}),i}}])}(),$C=function(){function t(){Q(this,t),this.parser=Mr,this.mixer=tC}return Z(t,[{key:"calculator",value:function(e,n,i,a){return i instanceof On?i.value==="none"?y0:b0:i}}])}(),zC=function(){function t(){Q(this,t)}return Z(t,[{key:"calculator",value:function(e,n,i){return i instanceof On?[]:i}}])}();function vp(t){var r=t.parsedStyle,e=r.fontSize;return pt(e)?null:e}var Mu=function(){function t(){Q(this,t),this.mixer=Gf}return Z(t,[{key:"calculator",value:function(e,n,i,a,o){if(re(i))return i;if(Wt.isRelativeUnit(i.unit)){if(i.unit===it.kPercentage)return 0;if(i.unit===it.kEms){if(a.parentNode){var s=vp(a.parentNode);if(s)return s*=i.value,s}return 0}if(i.unit===it.kRems){var l;if(a!=null&&(l=a.ownerDocument)!==null&&l!==void 0&&l.documentElement){var c=vp(a.ownerDocument.documentElement);if(c)return c*=i.value,c}return 0}}else return i.value}}])}(),GC=function(){function t(){Q(this,t),this.mixer=_0}return Z(t,[{key:"calculator",value:function(e,n,i){return i.map(function(a){return a.value})}}])}(),WC=function(){function t(){Q(this,t),this.mixer=_0}return Z(t,[{key:"calculator",value:function(e,n,i){return i.map(function(a){return a.value})}}])}(),YC=function(){function t(){Q(this,t)}return Z(t,[{key:"calculator",value:function(e,n,i,a){var o;i instanceof On&&(i=null);var s=(o=i)===null||o===void 0?void 0:o.cloneNode(!0);return s&&(s.style.isMarker=!0),s}}])}(),HC=function(){function t(){Q(this,t),this.mixer=Gf}return Z(t,[{key:"calculator",value:function(e,n,i){return i.value}}])}(),VC=function(){function t(){Q(this,t),this.mixer=Wf(0,1)}return Z(t,[{key:"calculator",value:function(e,n,i){return i.value}},{key:"postProcessor",value:function(e){var n=e.parsedStyle,i=n.offsetPath,a=n.offsetDistance;if(i){var o=i.nodeName;if(o===H.LINE||o===H.PATH||o===H.POLYLINE){var s=i.getPoint(a);s&&e.setLocalPosition(s.x,s.y)}}}}])}(),XC=function(){function t(){Q(this,t),this.mixer=Wf(0,1)}return Z(t,[{key:"calculator",value:function(e,n,i){return i.value}}])}(),UC=function(){function t(){Q(this,t),this.parser=T0,this.mixer=OC}return Z(t,[{key:"calculator",value:function(e,n,i){return i instanceof On&&i.value==="unset"?{absolutePath:[],hasArc:!1,segments:[],polygons:[],polylines:[],curve:null,totalLength:0,rect:new ea(0,0,0,0)}:i}}])}(),qC=Z(function t(){Q(this,t),this.mixer=SC}),KC=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.mixer=Wf(0,1/0),e}return St(r,t),Z(r)}(Mu),ZC=function(){function t(){Q(this,t)}return Z(t,[{key:"calculator",value:function(e,n,i,a){return i instanceof On?i.value==="unset"?"":i.value:"".concat(i)}},{key:"postProcessor",value:function(e){e.nodeValue="".concat(e.parsedStyle.text)||""}}])}(),QC=function(){function t(){Q(this,t)}return Z(t,[{key:"calculator",value:function(e,n,i,a){var o=a.getAttribute("text");if(o){var s=o;i.value==="capitalize"?s=o.charAt(0).toUpperCase()+o.slice(1):i.value==="lowercase"?s=o.toLowerCase():i.value==="uppercase"&&(s=o.toUpperCase()),a.parsedStyle.text=s}return i.value}}])}(),Pc=new WeakMap;function JC(t,r,e){if(t){var n=typeof t=="string"?document.getElementById(t):t;Pc.has(n)&&Pc.get(n).destroy(e),Pc.set(n,r)}}var Hf=typeof window<"u"&&typeof window.document<"u";function tL(t){return!!t.getAttribute}function eL(t,r){for(var e=0,n=t.length;e<n;){var i=e+n>>>1;R0(t[i],r)<0?e=i+1:n=i}return e}function R0(t,r){var e=Number(t.parsedStyle.zIndex||0),n=Number(r.parsedStyle.zIndex||0);if(e===n){var i=t.parentNode;if(i){var a=i.childNodes||[];return a.indexOf(t)-a.indexOf(r)}}return e-n}function N0(t){var r=t;do{var e,n=(e=r.parsedStyle)===null||e===void 0?void 0:e.clipPath;if(n)return r;r=r.parentElement}while(r!==null);return null}var gp="px";function nL(t,r,e){Hf&&t.style&&(t.style.width=r+gp,t.style.height=e+gp)}function I0(t,r){if(Hf)return document.defaultView.getComputedStyle(t,null).getPropertyValue(r)}function rL(t){var r=I0(t,"width");return r==="auto"?t.offsetWidth:parseFloat(r)}function iL(t){var r=I0(t,"height");return r==="auto"?t.offsetHeight:parseFloat(r)}var aL=1,oL={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},Pu=typeof performance=="object"&&performance.now?performance:Date;function Qs(t){return t.nodeName===H.FRAGMENT?!0:t.getRootNode().nodeName===H.FRAGMENT}function Si(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"auto",r=arguments.length>1?arguments[1]:void 0,e=arguments.length>2?arguments[2]:void 0,n=!1,i=!1,a=!!r&&!r.isNone,o=!!e&&!e.isNone;return t==="visiblepainted"||t==="painted"||t==="auto"?(n=a,i=o):t==="visiblefill"||t==="fill"?n=!0:t==="visiblestroke"||t==="stroke"?i=!0:(t==="visible"||t==="all")&&(n=!0,i=!0),[n,i]}var sL=1,lL=function(){return sL++},Kn=typeof self=="object"&&self.self===self?self:typeof global=="object"&&global.global===global?global:{},cL=Date.now(),uL=function(){return Kn.performance&&typeof Kn.performance.now=="function"?Kn.performance.now():Date.now()-cL},Ta={},mp=Date.now(),fL=function(r){if(typeof r!="function")throw new TypeError("".concat(r," is not a function"));var e=Date.now(),n=e-mp,i=n>16?0:16-n,a=lL();return Ta[a]=r,Object.keys(Ta).length>1||setTimeout(function(){mp=e;var o=Ta;Ta={},Object.keys(o).forEach(function(s){return o[s](uL())})},i),a},dL=function(r){delete Ta[r]},hL=["","webkit","moz","ms","o"],j0=function(r){return typeof r!="string"?fL:r===""?Kn.requestAnimationFrame:Kn["".concat(r,"RequestAnimationFrame")]},pL=function(r){return typeof r!="string"?dL:r===""?Kn.cancelAnimationFrame:Kn["".concat(r,"CancelAnimationFrame")]||Kn["".concat(r,"CancelRequestAnimationFrame")]},vL=function(r,e){for(var n=0;r[n]!==void 0;){if(e(r[n]))return r[n];n+=1}},D0=vL(hL,function(t){return!!j0(t)}),Vf=j0(D0),B0=pL(D0);Kn.requestAnimationFrame=Vf;Kn.cancelAnimationFrame=B0;var gL=function(){function t(){Q(this,t),this.callbacks=[]}return Z(t,[{key:"getCallbacksNum",value:function(){return this.callbacks.length}},{key:"tapPromise",value:function(e,n){this.callbacks.push(n)}},{key:"promise",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Promise.all(this.callbacks.map(function(a){return a.apply(void 0,n)}))}}])}(),mL=function(){function t(){Q(this,t),this.callbacks=[]}return Z(t,[{key:"tapPromise",value:function(e,n){this.callbacks.push(n)}},{key:"promise",value:function(){var r=Cr(He().mark(function n(){var i,a,o,s,l=arguments;return He().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!this.callbacks.length){c.next=6;break}return c.next=1,(i=this.callbacks)[0].apply(i,l);case 1:a=c.sent,o=0;case 2:if(!(o<this.callbacks.length-1)){c.next=5;break}return s=this.callbacks[o],c.next=3,s(a);case 3:a=c.sent;case 4:o++,c.next=2;break;case 5:return c.abrupt("return",a);case 6:return c.abrupt("return",null);case 7:case"end":return c.stop()}},n,this)}));function e(){return r.apply(this,arguments)}return e}()}])}(),qe=function(){function t(){Q(this,t),this.callbacks=[]}return Z(t,[{key:"tap",value:function(e,n){this.callbacks.push(n)}},{key:"call",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var a=arguments;this.callbacks.forEach(function(o){o.apply(void 0,a)})}}])}(),Cc=function(){function t(){Q(this,t),this.callbacks=[]}return Z(t,[{key:"tap",value:function(e,n){this.callbacks.push(n)}},{key:"call",value:function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];if(this.callbacks.length){for(var a=arguments,o=this.callbacks[0].apply(void 0,a),s=0;s<this.callbacks.length-1;s++){var l=this.callbacks[s];o=l(o)}return o}return null}}])}(),yL=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],bL=/([\"\'])[^\'\"]+\1/;function xL(t){for(var r=t.fontSize,e=r===void 0?16:r,n=t.fontFamily,i=n===void 0?"sans-serif":n,a=t.fontStyle,o=a===void 0?"normal":a,s=t.fontVariant,l=s===void 0?"normal":s,c=t.fontWeight,u=c===void 0?"normal":c,f=re(e)&&"".concat(e,"px")||"16px",d=i.split(","),h=d.length-1;h>=0;h--){var p=d[h].trim();!bL.test(p)&&yL.indexOf(p)<0&&(p='"'.concat(p,'"')),d[h]=p}return"".concat(o," ").concat(l," ").concat(u," ").concat(f," ").concat(d.join(","))}function Lc(t,r,e){return Vi(t),t[4]=Math.tan(r),t[1]=Math.tan(e),t}var Ee=Bt(),OL=Bt(),wL={scale:function(r){ti(Ee,[r[0].value,r[1].value,1])},scaleX:function(r){ti(Ee,[r[0].value,1,1])},scaleY:function(r){ti(Ee,[1,r[0].value,1])},scaleZ:function(r){ti(Ee,[1,1,r[0].value])},scale3d:function(r){ti(Ee,[r[0].value,r[1].value,r[2].value])},translate:function(r){xr(Ee,[r[0].value,r[1].value,0])},translateX:function(r){xr(Ee,[r[0].value,0,0])},translateY:function(r){xr(Ee,[0,r[0].value,0])},translateZ:function(r){xr(Ee,[0,0,r[0].value])},translate3d:function(r){xr(Ee,[r[0].value,r[1].value,r[2].value])},rotate:function(r){mh(Ee,Yt(nn(r[0])))},rotateX:function(r){Dk(Ee,Yt(nn(r[0])))},rotateY:function(r){jk(Ee,Yt(nn(r[0])))},rotateZ:function(r){mh(Ee,Yt(nn(r[0])))},rotate3d:function(r){Ik(Ee,Yt(nn(r[3])),[r[0].value,r[1].value,r[2].value])},skew:function(r){Lc(Ee,Yt(r[0].value),Yt(r[1].value))},skewX:function(r){Lc(Ee,Yt(r[0].value),0)},skewY:function(r){Lc(Ee,0,Yt(r[0].value))},matrix:function(r){gh(Ee,r[0].value,r[1].value,0,0,r[2].value,r[3].value,0,0,0,0,1,0,r[4].value,r[5].value,0,1)},matrix3d:function(r){gh.apply(Nk,[Ee].concat(Tt(r.map(function(e){return e.value}))))}},SL=jt(1,1,1),kL=Pt(),yp={translate:function(r,e){K.sceneGraphService.setLocalScale(r,SL,!1),K.sceneGraphService.setLocalEulerAngles(r,kL,void 0,void 0,!1),K.sceneGraphService.setLocalPosition(r,[e[0].value,e[1].value,0],!1),K.sceneGraphService.dirtyLocalTransform(r,r.transformable)}};function F0(t,r){if(t.length){if(t.length===1&&yp[t[0].t]){yp[t[0].t](r,t[0].d);return}for(var e=Vi(OL),n=0;n<t.length;n++){var i=t[n],a=i.t,o=i.d,s=wL[a];s&&(s(o),am(e,e,Ee))}r.setLocalTransform(e)}else r.resetLocalTransform();return r.getLocalTransform()}var EL=function(){function t(){Q(this,t),this.parser=kC,this.mixer=RC}return Z(t,[{key:"calculator",value:function(e,n,i,a){return i instanceof On?[]:i}},{key:"postProcessor",value:function(e){F0(e.parsedStyle.transform,e)}}])}(),_L=function(){function t(){Q(this,t)}return Z(t,[{key:"postProcessor",value:function(e){var n=e.parsedStyle.transformOrigin;n[0].unit===it.kPixels&&n[1].unit===it.kPixels?e.setOrigin(n[0].value,n[1].value):e.getGeometryBounds()}}])}(),AL=function(){function t(){Q(this,t)}return Z(t,[{key:"calculator",value:function(e,n,i,a){return i.value}},{key:"postProcessor",value:function(e){if(e.parentNode){var n=e.parentNode,i=n.renderable,a=n.sortable;i&&n.dirty(),a&&(a.dirty=!0,a.dirtyReason=Xs.Z_INDEX_CHANGED)}}}])}(),TL=function(){function t(){Q(this,t)}return Z(t,[{key:"update",value:function(e,n){var i=e.cx,a=i===void 0?0:i,o=e.cy,s=o===void 0?0:o,l=e.r,c=l===void 0?0:l;return{cx:a,cy:s,hwidth:c,hheight:c}}}])}(),ML=function(){function t(){Q(this,t)}return Z(t,[{key:"update",value:function(e,n){var i=e.cx,a=i===void 0?0:i,o=e.cy,s=o===void 0?0:o,l=e.rx,c=l===void 0?0:l,u=e.ry,f=u===void 0?0:u;return{cx:a,cy:s,hwidth:c,hheight:f}}}])}(),PL=function(){function t(){Q(this,t)}return Z(t,[{key:"update",value:function(e){var n=e.x1,i=e.y1,a=e.x2,o=e.y2,s=Math.min(n,a),l=Math.max(n,a),c=Math.min(i,o),u=Math.max(i,o),f=l-s,d=u-c,h=f/2,p=d/2;return{cx:s+h,cy:c+p,hwidth:h,hheight:p}}}])}(),CL=function(){function t(){Q(this,t)}return Z(t,[{key:"update",value:function(e){var n=e.d,i=n.rect,a=i.x,o=i.y,s=i.width,l=i.height,c=s/2,u=l/2;return{cx:a+c,cy:o+u,hwidth:c,hheight:u}}}])}(),LL=function(){function t(){Q(this,t)}return Z(t,[{key:"update",value:function(e){if(e.points&&Ge(e.points.points)){var n=e.points.points,i=Math.min.apply(Math,Tt(n.map(function(d){return d[0]}))),a=Math.max.apply(Math,Tt(n.map(function(d){return d[0]}))),o=Math.min.apply(Math,Tt(n.map(function(d){return d[1]}))),s=Math.max.apply(Math,Tt(n.map(function(d){return d[1]}))),l=a-i,c=s-o,u=l/2,f=c/2;return{cx:i+u,cy:o+f,hwidth:u,hheight:f}}return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),RL=function(){function t(){Q(this,t)}return Z(t,[{key:"update",value:function(e,n){var i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o,l=e.src,c=e.width,u=c===void 0?0:c,f=e.height,d=f===void 0?0:f,h=u,p=d;return l&&!ce(l)&&(h||(h=l.width,e.width=h),p||(p=l.height,e.height=p)),{cx:a+h/2,cy:s+p/2,hwidth:h/2,hheight:p/2}}}])}(),NL=function(){function t(r){Q(this,t),this.globalRuntime=r}return Z(t,[{key:"isReadyToMeasure",value:function(e,n){var i=e.text;return i}},{key:"update",value:function(e,n){var i,a=e.text,o=e.textAlign,s=o===void 0?"start":o,l=e.lineWidth,c=l===void 0?1:l,u=e.textBaseline,f=u===void 0?"alphabetic":u,d=e.dx,h=d===void 0?0:d,p=e.dy,v=p===void 0?0:p,g=e.x,m=g===void 0?0:g,y=e.y,b=y===void 0?0:y;if(!this.isReadyToMeasure(e,n))return e.metrics={font:"",width:0,height:0,lines:[],lineWidths:[],lineHeight:0,maxLineWidth:0,fontProperties:{ascent:0,descent:0,fontSize:0},lineMetrics:[]},{hwidth:0,hheight:0,cx:0,cy:0};var x=(n==null||(i=n.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0?void 0:i.getConfig())||{},O=x.offscreenCanvas,w=this.globalRuntime.textService.measureText(a,e,O);e.metrics=w;var S=w.width,k=w.height,E=S/2,_=k/2,A=m+E;s==="center"||s==="middle"?A+=c/2-E:(s==="right"||s==="end")&&(A+=c-E*2);var M=b-_;return f==="middle"?M+=_:f==="top"||f==="hanging"?M+=_*2:f==="alphabetic"||(f==="bottom"||f==="ideographic")&&(M+=0),h&&(A+=h),v&&(M+=v),{cx:A,cy:M,hwidth:E,hheight:_}}}])}(),IL=function(){function t(){Q(this,t)}return Z(t,[{key:"update",value:function(e,n){return{cx:0,cy:0,hwidth:0,hheight:0}}}])}(),jL=function(){function t(){Q(this,t)}return Z(t,[{key:"update",value:function(e,n){var i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o,l=e.width,c=l===void 0?0:l,u=e.height,f=u===void 0?0:u;return{cx:a+c/2,cy:s+f/2,hwidth:c/2,hheight:f/2}}}])}(),Gl=function(){function t(r){Q(this,t),this.eventPhase=t.prototype.NONE,this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.defaultPrevented=!1,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new $e,this.page=new $e,this.canvas=new $e,this.viewport=new $e,this.composed=!1,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=r}return Z(t,[{key:"name",get:function(){return this.type}},{key:"layerX",get:function(){return this.layer.x}},{key:"layerY",get:function(){return this.layer.y}},{key:"pageX",get:function(){return this.page.x}},{key:"pageY",get:function(){return this.page.y}},{key:"x",get:function(){return this.canvas.x}},{key:"y",get:function(){return this.canvas.y}},{key:"canvasX",get:function(){return this.canvas.x}},{key:"canvasY",get:function(){return this.canvas.y}},{key:"viewportX",get:function(){return this.viewport.x}},{key:"viewportY",get:function(){return this.viewport.y}},{key:"composedPath",value:function(){return this.manager&&(!this.path||this.path[0]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}},{key:"propagationPath",get:function(){return this.composedPath()}},{key:"preventDefault",value:function(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}},{key:"stopImmediatePropagation",value:function(){this.propagationImmediatelyStopped=!0}},{key:"stopPropagation",value:function(){this.propagationStopped=!0}},{key:"initEvent",value:function(){}},{key:"initUIEvent",value:function(){}},{key:"clone",value:function(){throw new Error(Gt)}}])}(),$0=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.client=new $e,e.movement=new $e,e.offset=new $e,e.global=new $e,e.screen=new $e,e}return St(r,t),Z(r,[{key:"clientX",get:function(){return this.client.x}},{key:"clientY",get:function(){return this.client.y}},{key:"movementX",get:function(){return this.movement.x}},{key:"movementY",get:function(){return this.movement.y}},{key:"offsetX",get:function(){return this.offset.x}},{key:"offsetY",get:function(){return this.offset.y}},{key:"globalX",get:function(){return this.global.x}},{key:"globalY",get:function(){return this.global.y}},{key:"screenX",get:function(){return this.screen.x}},{key:"screenY",get:function(){return this.screen.y}},{key:"getModifierState",value:function(n){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(n)}},{key:"initMouseEvent",value:function(){throw new Error(Gt)}}])}(Gl),Cu=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.width=0,e.height=0,e.isPrimary=!1,e}return St(r,t),Z(r,[{key:"getCoalescedEvents",value:function(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}},{key:"getPredictedEvents",value:function(){throw new Error("getPredictedEvents is not supported!")}},{key:"clone",value:function(){return this.manager.clonePointerEvent(this)}}])}($0),Lu=function(t){function r(){return Q(this,r),kt(this,r,arguments)}return St(r,t),Z(r,[{key:"clone",value:function(){return this.manager.cloneWheelEvent(this)}}])}($0),Ht=function(t){function r(e,n){var i;return Q(this,r),i=kt(this,r,[null]),i.type=e,i.detail=n,Object.assign(i,n),i}return St(r,t),Z(r)}(Gl),z0=function(){function t(){Q(this,t),this.emitter=new tm}return Z(t,[{key:"on",value:function(e,n,i){return this.addEventListener(e,n,i),this}},{key:"addEventListener",value:function(e,n,i){var a=!1,o=!1;if(Oh(i))a=i;else if(i){var s=i.capture;a=s===void 0?!1:s;var l=i.once;o=l===void 0?!1:l}a&&(e+="capture"),n=Le(n)?n:n.handleEvent;var c=Le(n)?void 0:n;return o?this.emitter.once(e,n,c):this.emitter.on(e,n,c),this}},{key:"off",value:function(e,n,i){return e?this.removeEventListener(e,n,i):this.removeAllEventListeners(),this}},{key:"removeAllEventListeners",value:function(){var e;(e=this.emitter)===null||e===void 0||e.removeAllListeners()}},{key:"removeEventListener",value:function(e,n,i){var a;if(!this.emitter)return this;var o=Oh(i)?i:i==null?void 0:i.capture;o&&(e+="capture"),n=Le(n)?n:(a=n)===null||a===void 0?void 0:a.handleEvent;var s=Le(n)?void 0:n;return this.emitter.off(e,n,s),this}},{key:"emit",value:function(e,n){this.dispatchEvent(new Ht(e,n))}},{key:"dispatchEventToSelf",value:function(e){e.target||(e.target=this),e.currentTarget=this,this.emitter.emit(e.type,e)}},{key:"dispatchEvent",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0;if(i)return this.dispatchEventToSelf(e),!0;var a;if(this.document)a=this;else if(this.defaultView)a=this.defaultView;else{var o;a=(o=this.ownerDocument)===null||o===void 0?void 0:o.defaultView}if(a){if(e.manager=a.getEventService(),!e.manager)return!1;e.defaultPrevented=!1,e.path?e.path.length=0:e.page=[],n||(e.target=this),e.manager.dispatchEvent(e,e.type,n)}else this.dispatchEventToSelf(e);return!e.defaultPrevented}}])}(),le=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.shadow=!1,e.ownerDocument=null,e.isConnected=!1,e.baseURI="",e.childNodes=[],e.nodeType=0,e.nodeName="",e.nodeValue=null,e.parentNode=null,e.destroyed=!1,e}return St(r,t),Z(r,[{key:"textContent",get:function(){var n="";this.nodeName===H.TEXT&&(n+=this.style.text);var i=Jr(this.childNodes),a;try{for(i.s();!(a=i.n()).done;){var o=a.value;o.nodeName===H.TEXT?n+=o.nodeValue:n+=o.textContent}}catch(s){i.e(s)}finally{i.f()}return n},set:function(n){var i=this;this.childNodes.slice().forEach(function(a){i.removeChild(a)}),this.nodeName===H.TEXT&&(this.style.text="".concat(n))}},{key:"getRootNode",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return this.parentNode?this.parentNode.getRootNode(n):n.composed&&this.host?this.host.getRootNode(n):this}},{key:"hasChildNodes",value:function(){return this.childNodes.length>0}},{key:"isDefaultNamespace",value:function(n){throw new Error(Gt)}},{key:"lookupNamespaceURI",value:function(n){throw new Error(Gt)}},{key:"lookupPrefix",value:function(n){throw new Error(Gt)}},{key:"normalize",value:function(){throw new Error(Gt)}},{key:"isEqualNode",value:function(n){return this===n}},{key:"isSameNode",value:function(n){return this.isEqualNode(n)}},{key:"parent",get:function(){return this.parentNode}},{key:"parentElement",get:function(){return null}},{key:"nextSibling",get:function(){return null}},{key:"previousSibling",get:function(){return null}},{key:"firstChild",get:function(){return this.childNodes.length>0?this.childNodes[0]:null}},{key:"lastChild",get:function(){return this.childNodes.length>0?this.childNodes[this.childNodes.length-1]:null}},{key:"compareDocumentPosition",value:function(n){if(n===this)return 0;for(var i=n,a=this,o=[i],s=[a];(l=i.parentNode)!==null&&l!==void 0?l:a.parentNode;){var l;i=i.parentNode?(o.push(i.parentNode),i.parentNode):i,a=a.parentNode?(s.push(a.parentNode),a.parentNode):a}if(i!==a)return r.DOCUMENT_POSITION_DISCONNECTED|r.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC|r.DOCUMENT_POSITION_PRECEDING;var c=o.length>s.length?o:s,u=c===o?s:o;if(c[c.length-u.length]===u[0])return c===o?r.DOCUMENT_POSITION_CONTAINED_BY|r.DOCUMENT_POSITION_FOLLOWING:r.DOCUMENT_POSITION_CONTAINS|r.DOCUMENT_POSITION_PRECEDING;for(var f=c.length-u.length,d=u.length-1;d>=0;d--){var h=u[d],p=c[f+d];if(p!==h){var v=h.parentNode.childNodes;return v.indexOf(h)<v.indexOf(p)?u===o?r.DOCUMENT_POSITION_PRECEDING:r.DOCUMENT_POSITION_FOLLOWING:c===o?r.DOCUMENT_POSITION_PRECEDING:r.DOCUMENT_POSITION_FOLLOWING}}return r.DOCUMENT_POSITION_FOLLOWING}},{key:"contain",value:function(n){return this.contains(n)}},{key:"contains",value:function(n){for(var i=n;i&&this!==i;)i=i.parentNode;return!!i}},{key:"getAncestor",value:function(n){for(var i=this;n>0&&i;)i=i.parentNode,n--;return i}},{key:"forEach",value:function(n){for(var i=[this];i.length>0;){var a=i.pop(),o=n(a);if(o===!1)break;for(var s=a.childNodes.length-1;s>=0;s--)i.push(a.childNodes[s])}}}],[{key:"isNode",value:function(n){return!!n.childNodes}}])}(z0);le.DOCUMENT_POSITION_DISCONNECTED=1;le.DOCUMENT_POSITION_PRECEDING=2;le.DOCUMENT_POSITION_FOLLOWING=4;le.DOCUMENT_POSITION_CONTAINS=8;le.DOCUMENT_POSITION_CONTAINED_BY=16;le.DOCUMENT_POSITION_IMPLEMENTATION_SPECIFIC=32;var DL=2048,BL=function(){function t(r,e){var n=this;Q(this,t),this.nativeHTMLMap=new WeakMap,this.cursor="default",this.mappingTable={},this.mappingState={trackingData:{}},this.eventPool=new Map,this.tmpMatrix=Bt(),this.tmpVec3=Pt(),this.onPointerDown=function(i){var a=n.createPointerEvent(i);if(n.dispatchEvent(a,"pointerdown"),a.pointerType==="touch")n.dispatchEvent(a,"touchstart");else if(a.pointerType==="mouse"||a.pointerType==="pen"){var o=a.button===2;n.dispatchEvent(a,o?"rightdown":"mousedown")}var s=n.trackingData(i.pointerId);s.pressTargetsByButton[i.button]=a.composedPath(),n.freeEvent(a)},this.onPointerUp=function(i){var a=Pu.now(),o=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);if(n.dispatchEvent(o,"pointerup"),o.pointerType==="touch")n.dispatchEvent(o,"touchend");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var s=o.button===2;n.dispatchEvent(o,s?"rightup":"mouseup")}var l=n.trackingData(i.pointerId),c=n.findMountedTarget(l.pressTargetsByButton[i.button]),u=c;if(c&&!o.composedPath().includes(c)){for(var f=c;f&&!o.composedPath().includes(f);){if(o.currentTarget=f,n.notifyTarget(o,"pointerupoutside"),o.pointerType==="touch")n.notifyTarget(o,"touchendoutside");else if(o.pointerType==="mouse"||o.pointerType==="pen"){var d=o.button===2;n.notifyTarget(o,d?"rightupoutside":"mouseupoutside")}le.isNode(f)&&(f=f.parentNode)}delete l.pressTargetsByButton[i.button],u=f}if(u){var h,p=n.clonePointerEvent(o,"click");p.target=u,p.path=[],l.clicksByButton[i.button]||(l.clicksByButton[i.button]={clickCount:0,target:p.target,timeStamp:a});var v=n.context.renderingContext.root.ownerDocument.defaultView,g=l.clicksByButton[i.button];g.target===p.target&&a-g.timeStamp<v.getConfig().dblClickSpeed?++g.clickCount:g.clickCount=1,g.target=p.target,g.timeStamp=a,p.detail=g.clickCount,(h=o.detail)!==null&&h!==void 0&&h.preventClick||(!n.context.config.useNativeClickEvent&&(p.pointerType==="mouse"||p.pointerType==="touch")&&n.dispatchEvent(p,"click"),n.dispatchEvent(p,"pointertap")),n.freeEvent(p)}n.freeEvent(o)},this.onPointerMove=function(i){var a=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0),o=a.pointerType==="mouse"||a.pointerType==="pen",s=n.trackingData(i.pointerId),l=n.findMountedTarget(s.overTargets);if(s.overTargets&&l!==a.target){var c=i.type==="mousemove"?"mouseout":"pointerout",u=n.createPointerEvent(i,c,l||void 0);if(n.dispatchEvent(u,"pointerout"),o&&n.dispatchEvent(u,"mouseout"),!a.composedPath().includes(l)){var f=n.createPointerEvent(i,"pointerleave",l||void 0);for(f.eventPhase=f.AT_TARGET;f.target&&!a.composedPath().includes(f.target);)f.currentTarget=f.target,n.notifyTarget(f),o&&n.notifyTarget(f,"mouseleave"),le.isNode(f.target)&&(f.target=f.target.parentNode);n.freeEvent(f)}n.freeEvent(u)}if(l!==a.target){var d=i.type==="mousemove"?"mouseover":"pointerover",h=n.clonePointerEvent(a,d);n.dispatchEvent(h,"pointerover"),o&&n.dispatchEvent(h,"mouseover");for(var p=l&&le.isNode(l)&&l.parentNode;p&&p!==(le.isNode(n.rootTarget)&&n.rootTarget.parentNode)&&p!==a.target;)p=p.parentNode;var v=!p||p===(le.isNode(n.rootTarget)&&n.rootTarget.parentNode);if(v){var g=n.clonePointerEvent(a,"pointerenter");for(g.eventPhase=g.AT_TARGET;g.target&&g.target!==l&&g.target!==(le.isNode(n.rootTarget)&&n.rootTarget.parentNode);)g.currentTarget=g.target,n.notifyTarget(g),o&&n.notifyTarget(g,"mouseenter"),le.isNode(g.target)&&(g.target=g.target.parentNode);n.freeEvent(g)}n.freeEvent(h)}n.dispatchEvent(a,"pointermove"),a.pointerType==="touch"&&n.dispatchEvent(a,"touchmove"),o&&(n.dispatchEvent(a,"mousemove"),n.cursor=n.getCursor(a.target)),s.overTargets=a.composedPath(),n.freeEvent(a)},this.onPointerOut=function(i){var a=n.trackingData(i.pointerId);if(a.overTargets){var o=i.pointerType==="mouse"||i.pointerType==="pen",s=n.findMountedTarget(a.overTargets),l=n.createPointerEvent(i,"pointerout",s||void 0);n.dispatchEvent(l),o&&n.dispatchEvent(l,"mouseout");var c=n.createPointerEvent(i,"pointerleave",s||void 0);for(c.eventPhase=c.AT_TARGET;c.target&&c.target!==(le.isNode(n.rootTarget)&&n.rootTarget.parentNode);)c.currentTarget=c.target,n.notifyTarget(c),o&&n.notifyTarget(c,"mouseleave"),le.isNode(c.target)&&(c.target=c.target.parentNode);a.overTargets=null,n.freeEvent(l),n.freeEvent(c)}n.cursor=null},this.onPointerOver=function(i){var a=n.trackingData(i.pointerId),o=n.createPointerEvent(i),s=o.pointerType==="mouse"||o.pointerType==="pen";n.dispatchEvent(o,"pointerover"),s&&n.dispatchEvent(o,"mouseover"),o.pointerType==="mouse"&&(n.cursor=n.getCursor(o.target));var l=n.clonePointerEvent(o,"pointerenter");for(l.eventPhase=l.AT_TARGET;l.target&&l.target!==(le.isNode(n.rootTarget)&&n.rootTarget.parentNode);)l.currentTarget=l.target,n.notifyTarget(l),s&&n.notifyTarget(l,"mouseenter"),le.isNode(l.target)&&(l.target=l.target.parentNode);a.overTargets=o.composedPath(),n.freeEvent(o),n.freeEvent(l)},this.onPointerUpOutside=function(i){var a=n.trackingData(i.pointerId),o=n.findMountedTarget(a.pressTargetsByButton[i.button]),s=n.createPointerEvent(i);if(o){for(var l=o;l;)s.currentTarget=l,n.notifyTarget(s,"pointerupoutside"),s.pointerType==="touch"||(s.pointerType==="mouse"||s.pointerType==="pen")&&n.notifyTarget(s,s.button===2?"rightupoutside":"mouseupoutside"),le.isNode(l)&&(l=l.parentNode);delete a.pressTargetsByButton[i.button]}n.freeEvent(s)},this.onWheel=function(i){var a=n.createWheelEvent(i);n.dispatchEvent(a),n.freeEvent(a)},this.onClick=function(i){if(n.context.config.useNativeClickEvent){var a=n.createPointerEvent(i);n.dispatchEvent(a),n.freeEvent(a)}},this.onPointerCancel=function(i){var a=n.createPointerEvent(i,void 0,void 0,n.context.config.alwaysTriggerPointerEventOnCanvas?n.rootTarget:void 0);n.dispatchEvent(a),n.freeEvent(a)},this.globalRuntime=r,this.context=e}return Z(t,[{key:"init",value:function(){this.rootTarget=this.context.renderingContext.root.parentNode,this.addEventMapping("pointerdown",this.onPointerDown),this.addEventMapping("pointerup",this.onPointerUp),this.addEventMapping("pointermove",this.onPointerMove),this.addEventMapping("pointerout",this.onPointerOut),this.addEventMapping("pointerleave",this.onPointerOut),this.addEventMapping("pointercancel",this.onPointerCancel),this.addEventMapping("pointerover",this.onPointerOver),this.addEventMapping("pointerupoutside",this.onPointerUpOutside),this.addEventMapping("wheel",this.onWheel),this.addEventMapping("click",this.onClick)}},{key:"destroy",value:function(){this.mappingTable={},this.mappingState={},this.eventPool.clear()}},{key:"getScale",value:function(){var e=this.context.contextService.getBoundingClientRect(),n=1,i=1,a=this.context.contextService.getDomElement();if(a&&e){var o=a.offsetWidth,s=a.offsetHeight;o&&s&&(n=e.width/o,i=e.height/s)}return{scaleX:n,scaleY:i,bbox:e}}},{key:"client2Viewport",value:function(e){var n=this.getScale(),i=n.scaleX,a=n.scaleY,o=n.bbox;return new $e((e.x-((o==null?void 0:o.left)||0))/i,(e.y-((o==null?void 0:o.top)||0))/a)}},{key:"viewport2Client",value:function(e){var n=this.getScale(),i=n.scaleX,a=n.scaleY,o=n.bbox;return new $e((e.x+((o==null?void 0:o.left)||0))*i,(e.y+((o==null?void 0:o.top)||0))*a)}},{key:"viewport2Canvas",value:function(e){var n=e.x,i=e.y,a=this.rootTarget.defaultView,o=a.getCamera(),s=this.context.config,l=s.width,c=s.height,u=o.getPerspectiveInverse(),f=o.getWorldTransform(),d=rn(this.tmpMatrix,f,u),h=Ye(this.tmpVec3,n/l*2-1,(1-i/c)*2-1,0);return me(h,h,d),new $e(h[0],h[1])}},{key:"canvas2Viewport",value:function(e){var n=this.rootTarget.defaultView,i=n.getCamera(),a=i.getPerspective(),o=i.getViewTransform(),s=rn(this.tmpMatrix,a,o),l=Ye(this.tmpVec3,e.x,e.y,0);me(this.tmpVec3,this.tmpVec3,s);var c=this.context.config,u=c.width,f=c.height;return new $e((l[0]+1)/2*u,(1-(l[1]+1)/2)*f)}},{key:"setPickHandler",value:function(e){this.pickHandler=e}},{key:"addEventMapping",value:function(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort(function(i,a){return i.priority-a.priority})}},{key:"mapEvent",value:function(e){if(this.rootTarget){var n=this.mappingTable[e.type];if(n)for(var i=0,a=n.length;i<a;i++)n[i].fn(e);else console.warn("[EventService]: Event mapping not defined for ".concat(e.type))}}},{key:"dispatchEvent",value:function(e,n,i){if(!i)e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n);else{e.eventPhase=e.AT_TARGET;var a=this.rootTarget.defaultView||null;e.currentTarget=a,this.notifyListeners(e,n)}}},{key:"propagate",value:function(e,n){if(e.target){var i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(var a=i.length-1;a>=1;a--)if(e.currentTarget=i[a],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){var o=i.indexOf(e.currentTarget);e.eventPhase=e.BUBBLING_PHASE;for(var s=o+1;s<i.length;s++)if(e.currentTarget=i[s],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}}},{key:"propagationPath",value:function(e){var n=[e],i=this.rootTarget.defaultView||null;if(i&&i===e)return n.unshift(i.document),n;for(var a=0;a<DL&&e!==this.rootTarget;a++)le.isNode(e)&&e.parentNode&&(n.push(e.parentNode),e=e.parentNode);return i&&n.push(i),n}},{key:"hitTest",value:function(e){var n=e.viewportX,i=e.viewportY,a=this.context.config,o=a.width,s=a.height,l=a.disableHitTesting;return n<0||i<0||n>o||i>s?null:!l&&this.pickHandler(e)||this.rootTarget||null}},{key:"isNativeEventFromCanvas",value:function(e,n){var i,a=n==null?void 0:n.target;if((i=a)!==null&&i!==void 0&&i.shadowRoot&&(a=n.composedPath()[0]),a){if(a===e)return!0;if(e&&e.contains)return e.contains(a)}return n!=null&&n.composedPath?n.composedPath().indexOf(e)>-1:!1}},{key:"getExistedHTML",value:function(e){if(e.nativeEvent.composedPath)for(var n=0,i=e.nativeEvent.composedPath();n<i.length;n++){var a=i[n],o=this.nativeHTMLMap.get(a);if(o)return o}return null}},{key:"pickTarget",value:function(e){return this.hitTest({clientX:e.clientX,clientY:e.clientY,viewportX:e.viewportX,viewportY:e.viewportY,x:e.canvasX,y:e.canvasY})}},{key:"createPointerEvent",value:function(e,n,i,a){var o=this.allocateEvent(Cu);this.copyPointerData(e,o),this.copyMouseData(e,o),this.copyData(e,o),o.nativeEvent=e.nativeEvent,o.originalEvent=e;var s=this.getExistedHTML(o),l=this.context.contextService.getDomElement();return o.target=i??(s||this.isNativeEventFromCanvas(l,o.nativeEvent)&&this.pickTarget(o)||a),typeof n=="string"&&(o.type=n),o}},{key:"createWheelEvent",value:function(e){var n=this.allocateEvent(Lu);this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e;var i=this.getExistedHTML(n),a=this.context.contextService.getDomElement();return n.target=i||this.isNativeEventFromCanvas(a,n.nativeEvent)&&this.pickTarget(n),n}},{key:"trackingData",value:function(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}},{key:"cloneWheelEvent",value:function(e){var n=this.allocateEvent(Lu);return n.nativeEvent=e.nativeEvent,n.originalEvent=e.originalEvent,this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.target=e.target,n.path=e.composedPath().slice(),n.type=e.type,n}},{key:"clonePointerEvent",value:function(e,n){var i=this.allocateEvent(Cu);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=n??i.type,i}},{key:"copyPointerData",value:function(e,n){n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist}},{key:"copyMouseData",value:function(e,n){n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.shiftKey=e.shiftKey,n.client.copyFrom(e.client),n.movement.copyFrom(e.movement),n.canvas.copyFrom(e.canvas),n.screen.copyFrom(e.screen),n.global.copyFrom(e.global),n.offset.copyFrom(e.offset)}},{key:"copyWheelData",value:function(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}},{key:"copyData",value:function(e,n){n.isTrusted=e.isTrusted,n.timeStamp=Pu.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.page.copyFrom(e.page),n.viewport.copyFrom(e.viewport)}},{key:"allocateEvent",value:function(e){this.eventPool.has(e)||this.eventPool.set(e,[]);var n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=[],n.target=null,n}},{key:"freeEvent",value:function(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");var n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}},{key:"notifyTarget",value:function(e,n){n=n??e.type;var i=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?"".concat(n,"capture"):n;this.notifyListeners(e,i),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}},{key:"notifyListeners",value:function(e,n){var i=e.currentTarget.emitter,a=i._events[n];if(a)if("fn"in a)a.once&&i.removeListener(n,a.fn,void 0,!0),a.fn.call(e.currentTarget||a.context,e);else for(var o=0;o<a.length&&!e.propagationImmediatelyStopped;o++)a[o].once&&i.removeListener(n,a[o].fn,void 0,!0),a[o].fn.call(e.currentTarget||a[o].context,e)}},{key:"findMountedTarget",value:function(e){if(!e)return null;for(var n=e[e.length-1],i=e.length-2;i>=0;i--){var a=e[i];if(a===this.rootTarget||le.isNode(a)&&a.parentNode===n)n=e[i];else break}return n}},{key:"getCursor",value:function(e){for(var n=e;n;){var i=tL(n)&&n.getAttribute("cursor");if(i)return i;n=le.isNode(n)&&n.parentNode}}}])}(),Xf=function(){function t(){Q(this,t)}return Z(t,[{key:"getOrCreateCanvas",value:function(e,n){if(this.canvas)return this.canvas;if(e||K.offscreenCanvas)this.canvas=e||K.offscreenCanvas,this.context=this.canvas.getContext("2d",wt({willReadFrequently:!0},n));else try{this.canvas=new window.OffscreenCanvas(0,0),this.context=this.canvas.getContext("2d",wt({willReadFrequently:!0},n)),(!this.context||!this.context.measureText)&&(this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"))}catch{this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",wt({willReadFrequently:!0},n))}return this.canvas.width=10,this.canvas.height=10,this.canvas}},{key:"getOrCreateContext",value:function(e,n){return this.context?this.context:(this.getOrCreateCanvas(e,n),this.context)}}],[{key:"createCanvas",value:function(){try{return new window.OffscreenCanvas(0,0)}catch{}try{return document.createElement("canvas")}catch{}return null}}])}(),Gi=function(t){return t[t.CAMERA_CHANGED=0]="CAMERA_CHANGED",t[t.DISPLAY_OBJECT_CHANGED=1]="DISPLAY_OBJECT_CHANGED",t[t.NONE=2]="NONE",t}({}),FL=function(){function t(r,e){Q(this,t),this.inited=!1,this.stats={total:0,rendered:0},this.zIndexCounter=0,this.hooks={init:new qe,initAsync:new gL,dirtycheck:new Cc,cull:new Cc,beginFrame:new qe,beforeRender:new qe,render:new qe,afterRender:new qe,endFrame:new qe,destroy:new qe,pick:new mL,pickSync:new Cc,pointerDown:new qe,pointerUp:new qe,pointerMove:new qe,pointerOut:new qe,pointerOver:new qe,pointerWheel:new qe,pointerCancel:new qe,click:new qe},this.globalRuntime=r,this.context=e}return Z(t,[{key:"init",value:function(e){var n=this,i=wt(wt({},this.globalRuntime),this.context);this.context.renderingPlugins.forEach(function(a){a.apply(i,n.globalRuntime)}),this.hooks.init.call(),this.hooks.initAsync.getCallbacksNum()===0?(this.inited=!0,e()):this.hooks.initAsync.promise().then(function(){n.inited=!0,e()}).catch(function(a){})}},{key:"getStats",value:function(){return this.stats}},{key:"disableDirtyRectangleRendering",value:function(){var e=this.context.config.renderer,n=e.getConfig(),i=n.enableDirtyRectangleRendering;return!i||this.context.renderingContext.renderReasons.has(Gi.CAMERA_CHANGED)}},{key:"render",value:function(e,n,i){var a=this;this.stats.total=0,this.stats.rendered=0,this.zIndexCounter=0;var o=this.context.renderingContext;if(this.globalRuntime.sceneGraphService.syncHierarchy(o.root),this.globalRuntime.sceneGraphService.triggerPendingEvents(),o.renderReasons.size&&this.inited){o.dirtyRectangleRenderingDisabled=this.disableDirtyRectangleRendering();var s=o.renderReasons.size===1&&o.renderReasons.has(Gi.CAMERA_CHANGED),l=!e.disableRenderHooks||!s;l&&this.renderDisplayObject(o.root,e,o),this.hooks.beginFrame.call(n),l&&o.renderListCurrentFrame.forEach(function(c){a.hooks.beforeRender.call(c),a.hooks.render.call(c),a.hooks.afterRender.call(c)}),this.hooks.endFrame.call(n),o.renderListCurrentFrame=[],o.renderReasons.clear(),i()}}},{key:"renderDisplayObject",value:function(e,n,i){var a=this,o=n.renderer.getConfig(),s=o.enableDirtyCheck,l=o.enableCulling;function c(v){var g=v.renderable,m=v.sortable,y=s?g.dirty||i.dirtyRectangleRenderingDisabled?v:null:v,b=null;y&&(b=l?a.hooks.cull.call(y,a.context.camera):y,b&&(a.stats.rendered+=1,i.renderListCurrentFrame.push(b))),v.dirty(!1),m.renderOrder=a.zIndexCounter,a.zIndexCounter+=1,a.stats.total+=1,m.dirty&&(a.sort(v,m),m.dirty=!1,m.dirtyChildren=[],m.dirtyReason=void 0)}for(var u=[e];u.length>0;){var f,d=u.pop();c(d);for(var h=((f=d.sortable)===null||f===void 0||(f=f.sorted)===null||f===void 0?void 0:f.length)>0?d.sortable.sorted:d.childNodes,p=h.length-1;p>=0;p--)u.push(h[p])}}},{key:"sort",value:function(e,n){var i,a;(n==null||(i=n.sorted)===null||i===void 0?void 0:i.length)>0&&n.dirtyReason!==Xs.Z_INDEX_CHANGED?n.dirtyChildren.forEach(function(o){var s=n.sorted.indexOf(o);s>-1&&n.sorted.splice(s,1);var l=e.childNodes.indexOf(o);if(l>-1)if(n.sorted.length===0)n.sorted.push(o);else{var c=eL(n.sorted,o);n.sorted.splice(c,0,o)}}):n.sorted=e.childNodes.slice().sort(R0),((a=n.sorted)===null||a===void 0?void 0:a.length)>0&&e.childNodes.filter(function(o){return o.parsedStyle.zIndex}).length===0&&(n.sorted=[])}},{key:"destroy",value:function(){this.inited=!1,this.hooks.destroy.call(),this.globalRuntime.sceneGraphService.clearPendingEvents()}},{key:"dirtify",value:function(){this.context.renderingContext.renderReasons.add(Gi.DISPLAY_OBJECT_CHANGED)}}])}(),$L=/\[\s*(.*)=(.*)\s*\]/,zL=function(){function t(){Q(this,t)}return Z(t,[{key:"selectOne",value:function(e,n){var i=this;if(e.startsWith("."))return n.find(function(l){return((l==null?void 0:l.classList)||[]).indexOf(i.getIdOrClassname(e))>-1});if(e.startsWith("#"))return n.find(function(l){return l.id===i.getIdOrClassname(e)});if(e.startsWith("[")){var a=this.getAttribute(e),o=a.name,s=a.value;return o?n.find(function(l){return n!==l&&(o==="name"?l.name===s:i.attributeToString(l,o)===s)}):null}return n.find(function(l){return n!==l&&l.nodeName===e})}},{key:"selectAll",value:function(e,n){var i=this;if(e.startsWith("."))return n.findAll(function(l){return n!==l&&((l==null?void 0:l.classList)||[]).indexOf(i.getIdOrClassname(e))>-1});if(e.startsWith("#"))return n.findAll(function(l){return n!==l&&l.id===i.getIdOrClassname(e)});if(e.startsWith("[")){var a=this.getAttribute(e),o=a.name,s=a.value;return o?n.findAll(function(l){return n!==l&&(o==="name"?l.name===s:i.attributeToString(l,o)===s)}):[]}return n.findAll(function(l){return n!==l&&l.nodeName===e})}},{key:"is",value:function(e,n){if(e.startsWith("."))return n.className===this.getIdOrClassname(e);if(e.startsWith("#"))return n.id===this.getIdOrClassname(e);if(e.startsWith("[")){var i=this.getAttribute(e),a=i.name,o=i.value;return a==="name"?n.name===o:this.attributeToString(n,a)===o}return n.nodeName===e}},{key:"getIdOrClassname",value:function(e){return e.substring(1)}},{key:"getAttribute",value:function(e){var n=e.match($L),i="",a="";return n&&n.length>2&&(i=n[1].replace(/"/g,""),a=n[2].replace(/"/g,"")),{name:i,value:a}}},{key:"attributeToString",value:function(e,n){if(!e.getAttribute)return"";var i=e.getAttribute(n);return pt(i)?"":i.toString?i.toString():""}}])}(),Et=function(t){return t.ATTR_MODIFIED="DOMAttrModified",t.INSERTED="DOMNodeInserted",t.MOUNTED="DOMNodeInsertedIntoDocument",t.REMOVED="removed",t.UNMOUNTED="DOMNodeRemovedFromDocument",t.REPARENT="reparent",t.DESTROY="destroy",t.BOUNDS_CHANGED="bounds-changed",t.CULLED="culled",t}({}),tr=function(t){function r(e,n,i,a,o,s,l,c){var u;return Q(this,r),u=kt(this,r,[null]),u.relatedNode=n,u.prevValue=i,u.newValue=a,u.attrName=o,u.attrChange=s,u.prevParsedValue=l,u.newParsedValue=c,u.type=e,u}return St(r,t),Z(r)}(Gl);tr.ADDITION=2;tr.MODIFICATION=1;tr.REMOVAL=3;var GL=new tr(Et.REPARENT,null,"","","",0,"",""),WL=em(),Vo=Pt(),YL=jt(1,1,1),HL=Bt(),VL=em(),Vr=Pt(),XL=Bt(),Xr=je(),UL=Pt(),qL=je(),KL=Pt(),Sa=Pt(),Ur=Pt(),Xo=Bt(),bp=je(),xp=je(),Uo=je(),qo={affectChildren:!0},ZL=function(){function t(r){Q(this,t),this.pendingEvents=new Map,this.boundsChangedEvent=new Ht(Et.BOUNDS_CHANGED),this.displayObjectDependencyMap=new WeakMap,this.runtime=r}return Z(t,[{key:"matches",value:function(e,n){return this.runtime.sceneGraphSelector.is(e,n)}},{key:"querySelector",value:function(e,n){return this.runtime.sceneGraphSelector.selectOne(e,n)}},{key:"querySelectorAll",value:function(e,n){return this.runtime.sceneGraphSelector.selectAll(e,n)}},{key:"attach",value:function(e,n,i){var a,o=!1;e.parentNode&&(o=e.parentNode!==n,this.detach(e));var s=e.nodeName===H.FRAGMENT,l=Qs(n);e.parentNode=n;var c=s?e.childNodes:[e];re(i)?c.forEach(function(v){n.childNodes.splice(i,0,v),v.parentNode=n}):c.forEach(function(v){n.childNodes.push(v),v.parentNode=n});var u=n,f=u.sortable;if((f!=null&&(a=f.sorted)!==null&&a!==void 0&&a.length||f.dirty||e.parsedStyle.zIndex)&&(f.dirtyChildren.indexOf(e)===-1&&f.dirtyChildren.push(e),f.dirty=!0,f.dirtyReason=Xs.ADDED),!l){if(s)this.dirtifyFragment(e);else{var d=e.transformable;d&&this.dirtyWorldTransform(e,d)}if(o){var h,p=((h=n.ownerDocument)===null||h===void 0||(h=h.defaultView)===null||h===void 0||(h=h.getConfig())===null||h===void 0||(h=h.future)===null||h===void 0?void 0:h.experimentalCancelEventPropagation)===!0;e.dispatchEvent(GL,p,p)}}}},{key:"detach",value:function(e){var n,i;if(e.parentNode){var a=e.transformable,o=e.parentNode,s=o.sortable;(s!=null&&(n=s.sorted)!==null&&n!==void 0&&n.length||(i=e.style)!==null&&i!==void 0&&i.zIndex)&&(s.dirtyChildren.indexOf(e)===-1&&s.dirtyChildren.push(e),s.dirty=!0,s.dirtyReason=Xs.REMOVED);var l=e.parentNode.childNodes.indexOf(e);l>-1&&e.parentNode.childNodes.splice(l,1),a&&this.dirtyWorldTransform(e,a),e.parentNode=null}}},{key:"getLocalPosition",value:function(e){return e.transformable.localPosition}},{key:"getLocalRotation",value:function(e){return e.transformable.localRotation}},{key:"getLocalScale",value:function(e){return e.transformable.localScale}},{key:"getLocalSkew",value:function(e){return e.transformable.localSkew}},{key:"getLocalTransform",value:function(e){var n=e.transformable;return qh(n),n.localTransform}},{key:"setLocalPosition",value:function(e,n){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=e.transformable;Sa[0]=n[0],Sa[1]=n[1],Sa[2]=(i=n[2])!==null&&i!==void 0?i:0,!ya(o.localPosition,Sa)&&(Vn(o.localPosition,Sa),a&&this.dirtyLocalTransform(e,o))}},{key:"translateLocal",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=jt(n,i,a));var o=e.transformable;ya(n,Vo)||(Ek(n,n,o.localRotation),Ar(o.localPosition,o.localPosition,n),this.dirtyLocalTransform(e,o))}},{key:"setLocalRotation",value:function(e,n,i,a,o){var s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;typeof n=="number"&&(n=im(Xr,n,i,a,o));var l=e.transformable;Do(l.localRotation,n),s&&this.dirtyLocalTransform(e,l)}},{key:"rotateLocal",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=jt(n,i,a));var o=e.transformable;Bo(xp,n[0],n[1],n[2]),ph(o.localRotation,o.localRotation,xp),this.dirtyLocalTransform(e,o)}},{key:"setLocalScale",value:function(e,n){var i,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=e.transformable;Ye(Vr,n[0],n[1],(i=n[2])!==null&&i!==void 0?i:o.localScale[2]),!ya(Vr,o.localScale)&&(Vn(o.localScale,Vr),a&&this.dirtyLocalTransform(e,o))}},{key:"scaleLocal",value:function(e,n){var i,a=e.transformable;_k(a.localScale,a.localScale,Ye(Vr,n[0],n[1],(i=n[2])!==null&&i!==void 0?i:1)),this.dirtyLocalTransform(e,a)}},{key:"setLocalSkew",value:function(e,n,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;typeof n=="number"&&(n=Ak(VL,n,i));var o=e.transformable;Tk(o.localSkew,n),a&&this.dirtyLocalTransform(e,o)}},{key:"setLocalEulerAngles",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;typeof n=="number"&&(n=jt(n,i,a));var s=e.transformable;Bo(s.localRotation,n[0],n[1],n[2]),o&&this.dirtyLocalTransform(e,s)}},{key:"setLocalTransform",value:function(e,n){var i=lu(UL,n),a=cu(qL,n),o=Rs(KL,n);this.setLocalScale(e,o,!1),this.setLocalPosition(e,i,!1),this.setLocalRotation(e,a,void 0,void 0,void 0,!1),this.dirtyLocalTransform(e,e.transformable)}},{key:"resetLocalTransform",value:function(e){this.setLocalScale(e,YL,!1),this.setLocalPosition(e,Vo,!1),this.setLocalEulerAngles(e,Vo,void 0,void 0,!1),this.setLocalSkew(e,WL,void 0,!1),this.dirtyLocalTransform(e,e.transformable)}},{key:"getPosition",value:function(e){var n=e.transformable;return lu(n.position,this.getWorldTransform(e,n))}},{key:"getRotation",value:function(e){var n=e.transformable;return cu(n.rotation,this.getWorldTransform(e,n))}},{key:"getScale",value:function(e){var n=e.transformable;return Rs(n.scaling,this.getWorldTransform(e,n))}},{key:"getOrigin",value:function(e){return e.getGeometryBounds(),e.transformable.origin}},{key:"getWorldTransform",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:e.transformable;return!n.localDirtyFlag&&!n.dirtyFlag||(e.parentNode&&e.parentNode.transformable&&this.getWorldTransform(e.parentNode),this.internalUpdateTransform(e)),n.worldTransform}},{key:"setPosition",value:function(e,n){var i,a=e.transformable;if(Ur[0]=n[0],Ur[1]=n[1],Ur[2]=(i=n[2])!==null&&i!==void 0?i:0,!ya(this.getPosition(e),Ur)){if(Vn(a.position,Ur),e.parentNode===null||!e.parentNode.transformable)Vn(a.localPosition,Ur);else{var o=e.parentNode.transformable;Wa(Xo,o.worldTransform),Hn(Xo,Xo),me(a.localPosition,Ur,Xo)}this.dirtyLocalTransform(e,a)}}},{key:"translate",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=Ye(Vr,n,i,a)),!ya(n,Vo)&&(Ar(Vr,this.getPosition(e),n),this.setPosition(e,Vr))}},{key:"setRotation",value:function(e,n,i,a,o){var s=e.transformable;if(typeof n=="number"&&(n=Mk(n,i,a,o)),e.parentNode===null||!e.parentNode.transformable)this.setLocalRotation(e,n);else{var l=this.getRotation(e.parentNode);Do(Xr,l),vc(Xr,Xr),ai(s.localRotation,Xr,n),vh(s.localRotation,s.localRotation),this.dirtyLocalTransform(e,s)}}},{key:"rotate",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=jt(n,i,a));var o=e.transformable;if(e.parentNode===null||!e.parentNode.transformable)this.rotateLocal(e,n);else{var s=Xr;Bo(s,n[0],n[1],n[2]);var l=this.getRotation(e),c=this.getRotation(e.parentNode);Do(Uo,c),vc(Uo,Uo),ai(s,Uo,s),ai(o.localRotation,s,l),vh(o.localRotation,o.localRotation),this.dirtyLocalTransform(e,o)}}},{key:"setOrigin",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=[n,i,a]);var o=e.transformable;if(!(n[0]===o.origin[0]&&n[1]===o.origin[1]&&n[2]===o.origin[2])){var s=o.origin;s[0]=n[0],s[1]=n[1],s[2]=n[2]||0,this.dirtyLocalTransform(e,o)}}},{key:"setEulerAngles",value:function(e,n){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;typeof n=="number"&&(n=jt(n,i,a));var o=e.transformable;if(e.parentNode===null||!e.parentNode.transformable)this.setLocalEulerAngles(e,n);else{Bo(o.localRotation,n[0],n[1],n[2]);var s=this.getRotation(e.parentNode);Do(bp,vc(Xr,s)),ph(o.localRotation,o.localRotation,bp),this.dirtyLocalTransform(e,o)}}},{key:"getTransformedGeometryBounds",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=arguments.length>2?arguments[2]:void 0,a=this.getGeometryBounds(e,n);if(!_e.isEmpty(a)){var o=i||new _e;return o.setFromTransformedAABB(a,this.getWorldTransform(e)),o}return null}},{key:"getGeometryBounds",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i=e,a=i.geometry;a.dirty&&K.styleValueRegistry.updateGeometry(e);var o=n?a.renderBounds:a.contentBounds||null;return o||new _e}},{key:"getBounds",value:function(e){var n=this,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e,o=a.renderable;if(!o.boundsDirty&&!i&&o.bounds)return o.bounds;if(!o.renderBoundsDirty&&i&&o.renderBounds)return o.renderBounds;var s=i?o.renderBounds:o.bounds,l=this.getTransformedGeometryBounds(e,i,s),c=e.childNodes;if(c.forEach(function(d){var h=n.getBounds(d,i);h&&(l?l.add(h):(l=s||new _e,l.update(h.center,h.halfExtents)))}),l||(l=new _e),i){var u=N0(e);if(u){var f=u.parsedStyle.clipPath.getBounds(i);l?f&&(l=f.intersection(l)):l.update(f.center,f.halfExtents)}}return i?(o.renderBounds=l,o.renderBoundsDirty=!1):(o.bounds=l,o.boundsDirty=!1),l}},{key:"getLocalBounds",value:function(e){if(e.parentNode){var n=HL;e.parentNode.transformable&&(n=Hn(XL,this.getWorldTransform(e.parentNode)));var i=this.getBounds(e);if(!_e.isEmpty(i)){var a=new _e;return a.setFromTransformedAABB(i,n),a}}return this.getBounds(e)}},{key:"getBoundingClientRect",value:function(e){var n,i,a=this.getGeometryBounds(e);_e.isEmpty(a)||(i=new _e,i.setFromTransformedAABB(a,this.getWorldTransform(e)));var o=(n=e.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0?void 0:n.getContextService().getBoundingClientRect();if(i){var s=i.getMin(),l=bt(s,2),c=l[0],u=l[1],f=i.getMax(),d=bt(f,2),h=d[0],p=d[1];return new ea(c+((o==null?void 0:o.left)||0),u+((o==null?void 0:o.top)||0),h-c,p-u)}return new ea((o==null?void 0:o.left)||0,(o==null?void 0:o.top)||0,0,0)}},{key:"internalUpdateTransform",value:function(e){var n,i=(n=e.parentNode)===null||n===void 0?void 0:n.transformable;qh(e.transformable),hP(e.transformable,i)}},{key:"internalUpdateElement",value:function(e,n){var i,a,o,s,l=((i=e.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0,c=n[n.length-1],u=(c==null?void 0:c.transformDirty)||((a=e.transformable)===null||a===void 0?void 0:a.localDirtyFlag);if(e.transformable){var f;(f=e.transformable).dirtyFlag||(f.dirtyFlag=u)}if(this.internalUpdateTransform(e),u){var d;(d=e.dirty)===null||d===void 0||d.call(e,!0,!0)}var h=((o=e.renderable)===null||o===void 0?void 0:o.boundsDirty)||((s=e.renderable)===null||s===void 0?void 0:s.renderBoundsDirty);if((u||h)&&(c==null?void 0:c.shapeUpdated)===!1&&l)for(var p=n.length-1;p>=0;){var v,g,m=n[p];if(m.shapeUpdated)break;(v=(g=m.node).dirty)===null||v===void 0||v.call(g,!0,!0),m.shapeUpdated=!0,p-=1}return u}},{key:"syncHierarchy",value:function(e){for(var n,i,a=[e],o=e.parentNode?[{node:e.parentNode,transformDirty:((n=e.parentNode.transformable)===null||n===void 0?void 0:n.localDirtyFlag)||((i=e.parentNode.transformable)===null||i===void 0?void 0:i.dirtyFlag),shapeUpdated:!1}]:[];a.length>0;){for(var s=a.pop(),l=o[o.length-1];o.length>0&&s.parentNode!==l.node;)l=o.pop();var c=this.internalUpdateElement(s,o);if(s.childNodes.length>0){for(var u=s.childNodes.length-1;u>=0;u--)a.push(s.childNodes[u]);o.push({node:s,transformDirty:c,shapeUpdated:!1})}}}},{key:"dirtyLocalTransform",value:function(e,n){Qs(e)||n.localDirtyFlag||(n.localDirtyFlag=!0,n.dirtyFlag||this.dirtyWorldTransform(e,n))}},{key:"dirtyWorldTransform",value:function(e,n){this.dirtifyWorldInternal(e,n),this.dirtyToRoot(e,!0)}},{key:"dirtifyWorldInternal",value:function(e,n){var i,a=this,o=((i=e.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig())===null||i===void 0||(i=i.future)===null||i===void 0?void 0:i.experimentalAttributeUpdateOptimization)===!0;n.dirtyFlag||(n.dirtyFlag=!0,e.dirty(!0,!0),o||e.childNodes.forEach(function(s){var l=s.transformable;a.dirtifyWorldInternal(s,l)}))}},{key:"dirtyToRoot",value:function(e){for(var n,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=e,o=((n=e.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig())===null||n===void 0||(n=n.future)===null||n===void 0?void 0:n.experimentalAttributeUpdateOptimization)===!0;a;){var s,l;if((s=(l=a).dirty)===null||s===void 0||s.call(l,!0,!0),o)break;a=a.parentNode}i&&e.forEach(function(c){var u;(u=c.dirty)===null||u===void 0||u.call(c,!0,!0)}),this.informDependentDisplayObjects(e),this.pendingEvents.set(e,i)}},{key:"dirtifyFragment",value:function(e){var n,i,a=e.transformable;a&&(a.dirtyFlag=!0,a.localDirtyFlag=!0),(n=(i=e).dirty)===null||n===void 0||n.call(i,!0,!0);for(var o=e.childNodes.length,s=0;s<o;s++)this.dirtifyFragment(e.childNodes[s]);e.nodeName===H.FRAGMENT&&this.pendingEvents.set(e,!1)}},{key:"triggerPendingEvents",value:function(){var e=this,n=new Set,i,a,o=function(l,c){if(!(!l.isConnected||n.has(l)||l.nodeName===H.FRAGMENT)){if(e.boundsChangedEvent.detail=c,e.boundsChangedEvent.target=l,l.isMutationObserved)l.dispatchEvent(e.boundsChangedEvent);else{if(i===void 0){var u;i=((u=l.ownerDocument.defaultView)===null||u===void 0||(u=u.getConfig())===null||u===void 0||(u=u.future)===null||u===void 0?void 0:u.experimentalCancelEventPropagation)===!0}l.ownerDocument.defaultView.dispatchEvent(e.boundsChangedEvent,!0,i)}n.add(l)}};this.pendingEvents.forEach(function(s,l){if(l.nodeName!==H.FRAGMENT){if(a===void 0){var c;a=((c=l.ownerDocument)===null||c===void 0||(c=c.defaultView)===null||c===void 0||(c=c.getConfig())===null||c===void 0||(c=c.future)===null||c===void 0?void 0:c.experimentalAttributeUpdateOptimization)===!0}qo.affectChildren=s,a?o(l,qo):s?l.forEach(function(u){o(u,qo)}):o(l,qo)}}),n.clear(),this.clearPendingEvents()}},{key:"clearPendingEvents",value:function(){this.pendingEvents.clear()}},{key:"updateDisplayObjectDependency",value:function(e,n,i,a){if(n&&n!==i){var o=this.displayObjectDependencyMap.get(n);if(o&&o[e]){var s=o[e].indexOf(a);o[e].splice(s,1)}}if(i){var l=this.displayObjectDependencyMap.get(i);l||(this.displayObjectDependencyMap.set(i,{}),l=this.displayObjectDependencyMap.get(i)),l[e]||(l[e]=[]),l[e].push(a)}}},{key:"informDependentDisplayObjects",value:function(e){var n,i=this,a=this.displayObjectDependencyMap.get(e);if(a){var o=(n=e.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig())===null||n===void 0||(n=n.future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation;Object.keys(a).forEach(function(s){a[s].forEach(function(l){i.dirtyToRoot(l,!0),l.dispatchEvent(new tr(Et.ATTR_MODIFIED,l,i,i,s,tr.MODIFICATION,i,i),o,o),l.isCustomElement&&l.isConnected&&l.attributeChangedCallback&&l.attributeChangedCallback(s,i,i)})})}}}])}(),qr={MetricsString:"|q",BaselineSymbol:"M",BaselineMultiplier:1.4,HeightMultiplier:2,Newlines:[10,13],BreakingSpaces:[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},Op=/[a-zA-Z0-9\u00C0-\u00D6\u00D8-\u00f6\u00f8-\u00ff!"#$%&'()*+,-./:;]/,QL=/[!%),.:;?\]}'""]/,JL=/[$('"]/,tR=/[!),.:;?\]}'""]/,eR=/[([{'"]/,nR=/[)\]'"?!:;,.]/,rR=/[(['"...]/,iR=/[!%),.:;?\]}'"]/,aR=/[$([{'"#]/,oR=new RegExp("".concat(QL.source,"|").concat(tR.source,"|").concat(nR.source,"|").concat(iR.source)),sR=new RegExp("".concat(JL.source,"|").concat(eR.source,"|").concat(rR.source,"|").concat(aR.source)),lR=function(){function t(r){var e=this;Q(this,t),this.fontMetricsCache={},this.shouldBreakByKinsokuShorui=function(n,i){return e.isBreakingSpace(i)?!1:!!(n&&(sR.exec(i)||oR.exec(n)))},this.trimByKinsokuShorui=function(n){var i=Tt(n),a=i[i.length-2];if(!a)return n;var o=a[a.length-1];return i[i.length-2]=a.slice(0,-1),i[i.length-1]=o+i[i.length-1],i},this.runtime=r}return Z(t,[{key:"measureFont",value:function(e,n){if(this.fontMetricsCache[e])return this.fontMetricsCache[e];var i={ascent:0,descent:0,fontSize:0},a=this.runtime.offscreenCanvasCreator.getOrCreateCanvas(n),o=this.runtime.offscreenCanvasCreator.getOrCreateContext(n,{willReadFrequently:!0});o.font=e;var s=qr.MetricsString+qr.BaselineSymbol,l=Math.ceil(o.measureText(s).width),c=Math.ceil(o.measureText(qr.BaselineSymbol).width),u=qr.HeightMultiplier*c;c=c*qr.BaselineMultiplier|0,a.width=l,a.height=u,o.fillStyle="#f00",o.fillRect(0,0,l,u),o.font=e,o.textBaseline="alphabetic",o.fillStyle="#000",o.fillText(s,0,c);var f=o.getImageData(0,0,l||1,u||1).data,d=f.length,h=l*4,p=0,v=0,g=!1;for(p=0;p<c;++p){for(var m=0;m<h;m+=4)if(f[v+m]!==255){g=!0;break}if(!g)v+=h;else break}for(i.ascent=c-p,v=d-h,g=!1,p=u;p>c;--p){for(var y=0;y<h;y+=4)if(f[v+y]!==255){g=!0;break}if(!g)v-=h;else break}return i.descent=p-c,i.fontSize=i.ascent+i.descent,this.fontMetricsCache[e]=i,i}},{key:"measureText",value:function(e,n,i){var a=n.fontSize,o=a===void 0?16:a,s=n.wordWrap,l=s===void 0?!1:s,c=n.lineHeight,u=n.lineWidth,f=u===void 0?1:u,d=n.textBaseline,h=d===void 0?"alphabetic":d,p=n.textAlign,v=p===void 0?"start":p,g=n.letterSpacing,m=g===void 0?0:g,y=n.textPath;n.textPathSide,n.textPathStartOffset;var b=n.leading,x=b===void 0?0:b,O=xL(n),w=this.measureFont(O,i);w.fontSize===0&&(w.fontSize=o,w.ascent=o);var S=this.runtime.offscreenCanvasCreator.getOrCreateContext(i);S.font=O,n.isOverflowing=!1;var k=l?this.wordWrap(e,n,i):e,E=k.split(/(?:\r\n|\r|\n)/),_=new Array(E.length),A=0;if(y){y.getTotalLength();for(var M=0;M<E.length;M++)S.measureText(E[M]).width+(E[M].length-1)*m}else{for(var T=0;T<E.length;T++){var C=S.measureText(E[T]).width+(E[T].length-1)*m;_[T]=C,A=Math.max(A,C)}var I=A+f,R=c||w.fontSize+f,L=Math.max(R,w.fontSize+f)+(E.length-1)*(R+x);R+=x;var P=0;return h==="middle"?P=-L/2:h==="bottom"||h==="alphabetic"||h==="ideographic"?P=-L:(h==="top"||h==="hanging")&&(P=0),{font:O,width:I,height:L,lines:E,lineWidths:_,lineHeight:R,maxLineWidth:A,fontProperties:w,lineMetrics:_.map(function(N,j){var B=0;return v==="center"||v==="middle"?B-=N/2:(v==="right"||v==="end")&&(B-=N),new ea(B-f/2,P+j*R,N+f,R)})}}}},{key:"wordWrap",value:function(e,n,i){var a=this,o=Array.from(e);if(o.length===0)return"";var s=this,l=n.wordWrapWidth,c=l===void 0?0:l,u=n.letterSpacing,f=u===void 0?0:u,d=n.maxLines,h=d===void 0?1/0:d,p=n.textOverflow,v=this.runtime.offscreenCanvasCreator.getOrCreateContext(i),g=c+f,m="";p==="ellipsis"?m="...":p&&p!=="clip"&&(m=p);var y=[""],b=0,x=0,O=-1,w={},S=function(P){return a.getFromCache(P,f,w,v)},k=S(m);function E(L,P,N,j){for(;S(L)<j&&P<o.length-1&&!s.isNewline(o[P+1]);)P+=1,L+=o[P];for(;S(L)>j&&P>=N;)P-=1,L=L.slice(0,-1);return{lineTxt:L,txtLastCharIndex:P}}function _(L,P){if(!(k<=0||k>g)){if(!y[L]){y[L]=m;return}var N=E(y[L],P,O+1,g-k);y[L]=N.lineTxt+m}}for(var A=0;A<o.length;A++){var M=o[A],T=o[A-1],C=o[A+1],I=S(M);if(this.isNewline(M)){if(b+1>=h){A<o.length-1&&_(b,A-1),n.isOverflowing=!0;break}O=A-1,b+=1,x=0,y[b]="";continue}if(I>g){_(b,A-1),n.isOverflowing=!0;break}if(x>0&&x+I>g){var R=E(y[b],A-1,O+1,g);if(R.txtLastCharIndex!==A-1){if(y[b]=R.lineTxt,R.txtLastCharIndex===o.length-1)break;A=R.txtLastCharIndex+1,M=o[A],T=o[A-1],C=o[A+1],I=S(M)}if(b+1>=h){_(b,A-1),n.isOverflowing=!0;break}if(O=A-1,b+=1,x=0,y[b]="",this.isBreakingSpace(M))continue;this.canBreakInLastChar(M)||(y=this.trimToBreakable(y),x=this.sumTextWidthByCache(y[b]||"",S)),this.shouldBreakByKinsokuShorui(M,C)&&(y=this.trimByKinsokuShorui(y),x+=S(T||""))}x+=I,y[b]+=M}return y.join(`
`)}},{key:"isBreakingSpace",value:function(e){return typeof e!="string"?!1:qr.BreakingSpaces.indexOf(e.charCodeAt(0))>=0}},{key:"isNewline",value:function(e){return typeof e!="string"?!1:qr.Newlines.indexOf(e.charCodeAt(0))>=0}},{key:"trimToBreakable",value:function(e){var n=Tt(e),i=n[n.length-2],a=this.findBreakableIndex(i);if(a===-1||!i)return n;var o=i.slice(a,a+1),s=this.isBreakingSpace(o),l=a+1,c=a+(s?0:1);return n[n.length-1]+=i.slice(l,i.length),n[n.length-2]=i.slice(0,c),n}},{key:"canBreakInLastChar",value:function(e){return!(e&&Op.test(e))}},{key:"sumTextWidthByCache",value:function(e,n){return e.split("").reduce(function(i,a){return i+n(a)},0)}},{key:"findBreakableIndex",value:function(e){for(var n=e.length-1;n>=0;n--)if(!Op.test(e[n]))return n;return-1}},{key:"getFromCache",value:function(e,n,i,a){var o=i[e];if(typeof o!="number"){var s=e.length*n,l=a.measureText(e);o=l.width+s,i[e]=o}return o}}])}(),K={},cR=function(t){var r=new RL,e=new LL;return t={},st(st(st(st(st(st(st(st(st(st(t,H.FRAGMENT,null),H.CIRCLE,new TL),H.ELLIPSE,new ML),H.RECT,r),H.IMAGE,r),H.GROUP,new IL),H.LINE,new PL),H.TEXT,new NL(K)),H.POLYLINE,e),H.POLYGON,e),st(st(st(t,H.PATH,new CL),H.HTML,new jL),H.MESH,null)}(),uR=function(t){var r=new $C,e=new Mu;return t={},st(st(st(st(st(st(st(st(st(st(t,nt.PERCENTAGE,null),nt.NUMBER,new HC),nt.ANGLE,new BC),nt.DEFINED_PATH,new FC),nt.PAINT,r),nt.COLOR,r),nt.FILTER,new zC),nt.LENGTH,e),nt.LENGTH_PERCENTAGE,e),nt.LENGTH_PERCENTAGE_12,new GC),st(st(st(st(st(st(st(st(st(st(t,nt.LENGTH_PERCENTAGE_14,new WC),nt.COORDINATE,new Mu),nt.OFFSET_DISTANCE,new VC),nt.OPACITY_VALUE,new XC),nt.PATH,new UC),nt.LIST_OF_POINTS,new qC),nt.SHADOW_BLUR,new KC),nt.TEXT,new ZC),nt.TEXT_TRANSFORM,new QC),nt.TRANSFORM,new EL),st(st(st(t,nt.TRANSFORM_ORIGIN,new _L),nt.Z_INDEX,new AL),nt.MARKER,new YC)}(),fR=function(){return typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{}};K.CameraContribution=p0;K.AnimationTimeline=null;K.EasingFunction=null;K.offscreenCanvasCreator=new Xf;K.sceneGraphSelector=new zL;K.sceneGraphService=new ZL(K);K.textService=new lR(K);K.geometryUpdaterFactory=cR;K.CSSPropertySyntaxFactory=uR;K.styleValueRegistry=new jC(K);K.layoutRegistry=null;K.globalThis=fR();K.enableStyleSyntax=!0;K.enableSizeAttenuation=!1;var dR=0,Ru=new tr(Et.INSERTED,null,"","","",0,"",""),Nu=new tr(Et.REMOVED,null,"","","",0,"",""),G0=new Ht(Et.DESTROY),hR=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.entity=dR++,e.transformable={dirtyFlag:!1,localDirtyFlag:!1,localPosition:[0,0,0],localRotation:[0,0,0,1],localScale:[1,1,1],localTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],localSkew:[0,0],position:[0,0,0],rotation:[0,0,0,1],scaling:[1,1,1],worldTransform:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],origin:[0,0,0]},e.renderable={bounds:void 0,boundsDirty:!0,renderBounds:void 0,renderBoundsDirty:!0,dirtyRenderBounds:void 0,dirty:!1},e.geometry={contentBounds:void 0,renderBounds:void 0,dirty:!0},e.cullable={strategy:uP.Standard,visibilityPlaneMask:-1,visible:!0,enable:!0},e.sortable={dirty:!1,sorted:void 0,renderOrder:0,dirtyChildren:[],dirtyReason:void 0},e.rBushNode={aabb:void 0},e.namespaceURI="g",e.scrollLeft=0,e.scrollTop=0,e.clientTop=0,e.clientLeft=0,e.style={},e.computedStyle={},e.parsedStyle={},e.attributes={},e}return St(r,t),Z(r,[{key:"dirty",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.renderable.dirty=n,i&&(this.renderable.boundsDirty=n,this.renderable.renderBoundsDirty=n)}},{key:"className",get:function(){return this.getAttribute("class")||""},set:function(n){this.setAttribute("class",n)}},{key:"classList",get:function(){return this.className.split(" ").filter(function(n){return n!==""})}},{key:"tagName",get:function(){return this.nodeName}},{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"parentElement",get:function(){return this.parentNode}},{key:"nextSibling",get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n+1]||null}return null}},{key:"previousSibling",get:function(){if(this.parentNode){var n=this.parentNode.childNodes.indexOf(this);return this.parentNode.childNodes[n-1]||null}return null}},{key:"cloneNode",value:function(n){throw new Error(Gt)}},{key:"appendChild",value:function(n,i){var a;if(n.destroyed)throw new Error(JM);return K.sceneGraphService.attach(n,this,i),(a=this.ownerDocument)!==null&&a!==void 0&&a.defaultView&&(!Qs(this)&&n.nodeName===H.FRAGMENT?this.ownerDocument.defaultView.mountFragment(n):this.ownerDocument.defaultView.mountChildren(n)),this.isMutationObserved&&(Ru.relatedNode=this,n.dispatchEvent(Ru)),n}},{key:"insertBefore",value:function(n,i){if(!i)this.appendChild(n);else{n.parentElement&&n.parentElement.removeChild(n);var a=this.childNodes.indexOf(i);a===-1?this.appendChild(n):this.appendChild(n,a)}return n}},{key:"replaceChild",value:function(n,i){var a=this.childNodes.indexOf(i);return this.removeChild(i),this.appendChild(n,a),i}},{key:"removeChild",value:function(n){var i,a,o=((i=this.ownerDocument)===null||i===void 0||(i=i.defaultView)===null||i===void 0||(i=i.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;return Nu.relatedNode=this,n.dispatchEvent(Nu,o,o),(a=n.ownerDocument)!==null&&a!==void 0&&a.defaultView&&n.ownerDocument.defaultView.unmountChildren(n),K.sceneGraphService.detach(n),n}},{key:"removeChildren",value:function(){for(var n=this.childNodes.length-1;n>=0;n--){var i=this.childNodes[n];this.removeChild(i)}}},{key:"destroyChildren",value:function(){for(var n=this.childNodes.length-1;n>=0;n--){var i=this.childNodes[n];i.childNodes.length>0&&i.destroyChildren(),i.destroy()}}},{key:"matches",value:function(n){return K.sceneGraphService.matches(n,this)}},{key:"getElementById",value:function(n){return K.sceneGraphService.querySelector("#".concat(n),this)}},{key:"getElementsByName",value:function(n){return K.sceneGraphService.querySelectorAll('[name="'.concat(n,'"]'),this)}},{key:"getElementsByClassName",value:function(n){return K.sceneGraphService.querySelectorAll(".".concat(n),this)}},{key:"getElementsByTagName",value:function(n){return K.sceneGraphService.querySelectorAll(n,this)}},{key:"querySelector",value:function(n){return K.sceneGraphService.querySelector(n,this)}},{key:"querySelectorAll",value:function(n){return K.sceneGraphService.querySelectorAll(n,this)}},{key:"closest",value:function(n){var i=this;do{if(K.sceneGraphService.matches(n,i))return i;i=i.parentElement}while(i!==null);return null}},{key:"find",value:function(n){var i=this,a=null;return this.forEach(function(o){return o!==i&&n(o)?(a=o,!1):!0}),a}},{key:"findAll",value:function(n){var i=this,a=[];return this.forEach(function(o){o!==i&&n(o)&&a.push(o)}),a}},{key:"after",value:function(){var n=this;if(this.parentNode){for(var i=this.parentNode.childNodes.indexOf(this),a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];o.forEach(function(l,c){var u;return(u=n.parentNode)===null||u===void 0?void 0:u.appendChild(l,i+c+1)})}}},{key:"before",value:function(){if(this.parentNode){for(var n,i=this.parentNode.childNodes.indexOf(this),a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];var l=o[0],c=o.slice(1);this.parentNode.appendChild(l,i),(n=l).after.apply(n,Tt(c))}}},{key:"replaceWith",value:function(){this.after.apply(this,arguments),this.remove()}},{key:"append",value:function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(s){return n.appendChild(s)})}},{key:"prepend",value:function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];a.forEach(function(s,l){return n.appendChild(s,l)})}},{key:"replaceChildren",value:function(){for(;this.childNodes.length&&this.firstChild;)this.removeChild(this.firstChild);this.append.apply(this,arguments)}},{key:"remove",value:function(){return this.parentNode?this.parentNode.removeChild(this):this}},{key:"destroy",value:function(){var n,i=((n=this.ownerDocument)===null||n===void 0||(n=n.defaultView)===null||n===void 0||(n=n.getConfig().future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation)===!0;this.destroyChildren(),this.dispatchEvent(G0,i,i),this.remove(),this.emitter.removeAllListeners(),this.destroyed=!0}},{key:"getGeometryBounds",value:function(){return K.sceneGraphService.getGeometryBounds(this)}},{key:"getRenderBounds",value:function(){return K.sceneGraphService.getBounds(this,!0)}},{key:"getBounds",value:function(){return K.sceneGraphService.getBounds(this)}},{key:"getLocalBounds",value:function(){return K.sceneGraphService.getLocalBounds(this)}},{key:"getBoundingClientRect",value:function(){return K.sceneGraphService.getBoundingClientRect(this)}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"computedStyleMap",value:function(){return new Map(Object.entries(this.computedStyle))}},{key:"getAttributeNames",value:function(){return Object.keys(this.attributes)}},{key:"getAttribute",value:function(n){if(typeof n!="symbol"){var i=this.attributes[n];return i}}},{key:"hasAttribute",value:function(n){return this.getAttributeNames().includes(n)}},{key:"hasAttributes",value:function(){return!!this.getAttributeNames().length}},{key:"removeAttribute",value:function(n){this.setAttribute(n,null),delete this.attributes[n]}},{key:"setAttribute",value:function(n,i,a,o){this.attributes[n]=i}},{key:"getAttributeNS",value:function(n,i){throw new Error(Gt)}},{key:"getAttributeNode",value:function(n){throw new Error(Gt)}},{key:"getAttributeNodeNS",value:function(n,i){throw new Error(Gt)}},{key:"hasAttributeNS",value:function(n,i){throw new Error(Gt)}},{key:"removeAttributeNS",value:function(n,i){throw new Error(Gt)}},{key:"removeAttributeNode",value:function(n){throw new Error(Gt)}},{key:"setAttributeNS",value:function(n,i,a){throw new Error(Gt)}},{key:"setAttributeNode",value:function(n){throw new Error(Gt)}},{key:"setAttributeNodeNS",value:function(n){throw new Error(Gt)}},{key:"toggleAttribute",value:function(n,i){throw new Error(Gt)}}])}(le);function Lt(t){return!!(t!=null&&t.nodeName)}var pR=K.globalThis.Proxy?K.globalThis.Proxy:function(){},$n=new tr(Et.ATTR_MODIFIED,null,null,null,null,tr.MODIFICATION,null,null),ka=Pt(),vR=je(),Jt=function(t){function r(e){var n;return Q(this,r),n=kt(this,r),n.isCustomElement=!1,n.isMutationObserved=!1,n.activeAnimations=[],n.config=e,n.id=e.id||"",n.name=e.name||"",(e.className||e.class)&&(n.className=e.className||e.class),n.nodeName=e.type||H.GROUP,e.initialParsedStyle&&Object.assign(n.parsedStyle,e.initialParsedStyle),n.initAttributes(e.style),K.enableStyleSyntax&&(n.style=new pR({setProperty:function(a,o){n.setAttribute(a,o)},getPropertyValue:function(a){return n.getAttribute(a)},removeProperty:function(a){n.removeAttribute(a)},item:function(){return""}},{get:function(a,o){return a[o]!==void 0?a[o]:n.getAttribute(o)},set:function(a,o,s){return n.setAttribute(o,s),!0}})),n}return St(r,t),Z(r,[{key:"destroy",value:function(){dh(r,"destroy",this)([]),this.getAnimations().forEach(function(n){n.cancel()})}},{key:"cloneNode",value:function(n,i){var a=wt({},this.attributes);for(var o in a){var s=a[o];Lt(s)&&o!=="clipPath"&&o!=="offsetPath"&&o!=="textPath"&&(a[o]=s.cloneNode(n)),i&&(a[o]=i(o,s))}var l=new this.constructor(wt(wt({},this.config),{},{style:a}));return l.setLocalTransform(this.getLocalTransform()),n&&this.children.forEach(function(c){if(!c.style.isMarker){var u=c.cloneNode(n);l.appendChild(u)}}),l}},{key:"initAttributes",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i={forceUpdateGeometry:!0};K.styleValueRegistry.processProperties(this,n,i),this.dirty()}},{key:"setAttribute",value:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,o=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0;Ut(i)||(a||i!==this.attributes[n])&&(this.internalSetAttribute(n,i,{memoize:o}),dh(r,"setAttribute",this)([n,i]))}},{key:"internalSetAttribute",value:function(n,i){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},o=this.attributes[n],s=this.parsedStyle[n];K.styleValueRegistry.processProperties(this,st({},n,i),a),this.dirty();var l=this.parsedStyle[n];if(this.isConnected)if($n.relatedNode=this,$n.prevValue=o,$n.newValue=i,$n.attrName=n,$n.prevParsedValue=s,$n.newParsedValue=l,this.isMutationObserved)this.dispatchEvent($n);else{var c,u=((c=this.ownerDocument.defaultView.getConfig().future)===null||c===void 0?void 0:c.experimentalCancelEventPropagation)===!0;$n.target=this,this.ownerDocument.defaultView.dispatchEvent($n,!0,u)}if(this.isCustomElement&&this.isConnected||!this.isCustomElement){var f,d;(f=(d=this).attributeChangedCallback)===null||f===void 0||f.call(d,n,o,i,s,l)}}},{key:"getBBox",value:function(){var n=this.getBounds(),i=n.getMin(),a=bt(i,2),o=a[0],s=a[1],l=n.getMax(),c=bt(l,2),u=c[0],f=c[1];return new ea(o,s,u-o,f-s)}},{key:"setOrigin",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return K.sceneGraphService.setOrigin(this,Ze(n,i,a,!1)),this}},{key:"getOrigin",value:function(){return K.sceneGraphService.getOrigin(this)}},{key:"setPosition",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return K.sceneGraphService.setPosition(this,Ze(n,i,a,!1)),this}},{key:"setLocalPosition",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return K.sceneGraphService.setLocalPosition(this,Ze(n,i,a,!1)),this}},{key:"translate",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return K.sceneGraphService.translate(this,Ze(n,i,a,!1)),this}},{key:"translateLocal",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return K.sceneGraphService.translateLocal(this,Ze(n,i,a,!1)),this}},{key:"getPosition",value:function(){return K.sceneGraphService.getPosition(this)}},{key:"getLocalPosition",value:function(){return K.sceneGraphService.getLocalPosition(this)}},{key:"scale",value:function(n,i,a){return this.scaleLocal(n,i,a)}},{key:"scaleLocal",value:function(n,i,a){return typeof n=="number"&&(i=i||n,a=a||n,n=Ze(n,i,a,!1)),K.sceneGraphService.scaleLocal(this,n),this}},{key:"setLocalScale",value:function(n,i,a){return typeof n=="number"&&(i=i||n,a=a||n,n=Ze(n,i,a,!1)),K.sceneGraphService.setLocalScale(this,n),this}},{key:"getLocalScale",value:function(){return K.sceneGraphService.getLocalScale(this)}},{key:"getScale",value:function(){return K.sceneGraphService.getScale(this)}},{key:"getEulerAngles",value:function(){var n=Sc(ka,K.sceneGraphService.getWorldTransform(this)),i=bt(n,3),a=i[2];return gn(a)}},{key:"getLocalEulerAngles",value:function(){var n=Sc(ka,K.sceneGraphService.getLocalRotation(this)),i=bt(n,3),a=i[2];return gn(a)}},{key:"setEulerAngles",value:function(n){return K.sceneGraphService.setEulerAngles(this,0,0,n),this}},{key:"setLocalEulerAngles",value:function(n){return K.sceneGraphService.setLocalEulerAngles(this,0,0,n),this}},{key:"rotateLocal",value:function(n,i,a){return pt(i)&&pt(a)?K.sceneGraphService.rotateLocal(this,0,0,n):K.sceneGraphService.rotateLocal(this,n,i,a),this}},{key:"rotate",value:function(n,i,a){return pt(i)&&pt(a)?K.sceneGraphService.rotate(this,0,0,n):K.sceneGraphService.rotate(this,n,i,a),this}},{key:"setRotation",value:function(n,i,a,o){return K.sceneGraphService.setRotation(this,n,i,a,o),this}},{key:"setLocalRotation",value:function(n,i,a,o){return K.sceneGraphService.setLocalRotation(this,n,i,a,o),this}},{key:"setLocalSkew",value:function(n,i){return K.sceneGraphService.setLocalSkew(this,n,i),this}},{key:"getRotation",value:function(){return K.sceneGraphService.getRotation(this)}},{key:"getLocalRotation",value:function(){return K.sceneGraphService.getLocalRotation(this)}},{key:"getLocalSkew",value:function(){return K.sceneGraphService.getLocalSkew(this)}},{key:"getLocalTransform",value:function(){return K.sceneGraphService.getLocalTransform(this)}},{key:"getWorldTransform",value:function(){return K.sceneGraphService.getWorldTransform(this)}},{key:"setLocalTransform",value:function(n){return K.sceneGraphService.setLocalTransform(this,n),this}},{key:"resetLocalTransform",value:function(){K.sceneGraphService.resetLocalTransform(this)}},{key:"getAnimations",value:function(){return this.activeAnimations}},{key:"animate",value:function(n,i){var a,o=(a=this.ownerDocument)===null||a===void 0?void 0:a.timeline;return o?o.play(this,n,i):null}},{key:"isVisible",value:function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.visibility)!=="hidden"}},{key:"interactive",get:function(){return this.isInteractive()},set:function(n){this.style.pointerEvents=n?"auto":"none"}},{key:"isInteractive",value:function(){var n;return((n=this.parsedStyle)===null||n===void 0?void 0:n.pointerEvents)!=="none"}},{key:"isCulled",value:function(){return!!(this.cullable&&this.cullable.enable&&!this.cullable.visible)}},{key:"toFront",value:function(){return this.parentNode&&(this.style.zIndex=Math.max.apply(Math,Tt(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})))+1),this}},{key:"toBack",value:function(){return this.parentNode&&(this.style.zIndex=Math.min.apply(Math,Tt(this.parentNode.children.map(function(n){return Number(n.style.zIndex)})))-1),this}},{key:"getConfig",value:function(){return this.config}},{key:"attr",value:function(){for(var n=this,i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];var s=a[0],l=a[1];return s?go(s)?(Object.keys(s).forEach(function(c){n.setAttribute(c,s[c])}),this):a.length===2?(this.setAttribute(s,l),this):this.attributes[s]:this.attributes}},{key:"getMatrix",value:function(n){var i=n||this.getWorldTransform(),a=lu(ka,i),o=bt(a,2),s=o[0],l=o[1],c=Rs(ka,i),u=bt(c,2),f=u[0],d=u[1],h=cu(vR,i),p=Sc(ka,h),v=bt(p,3),g=v[0],m=v[2];return aP(g||m,s,l,f,d)}},{key:"getLocalMatrix",value:function(){return this.getMatrix(this.getLocalTransform())}},{key:"setMatrix",value:function(n){var i=Vh(n),a=bt(i,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4];this.setEulerAngles(u).setPosition(o,s).setLocalScale(l,c)}},{key:"setLocalMatrix",value:function(n){var i=Vh(n),a=bt(i,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4];this.setLocalEulerAngles(u).setLocalPosition(o,s).setLocalScale(l,c)}},{key:"show",value:function(){this.forEach(function(n){n.style.visibility="visible"})}},{key:"hide",value:function(){this.forEach(function(n){n.style.visibility="hidden"})}},{key:"getCount",value:function(){return this.childElementCount}},{key:"getParent",value:function(){return this.parentElement}},{key:"getChildren",value:function(){return this.children}},{key:"getFirst",value:function(){return this.firstElementChild}},{key:"getLast",value:function(){return this.lastElementChild}},{key:"getChildByIndex",value:function(n){return this.children[n]||null}},{key:"add",value:function(n,i){return this.appendChild(n,i)}},{key:"set",value:function(n,i){this.config[n]=i}},{key:"get",value:function(n){return this.config[n]}},{key:"moveTo",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(n,i,a),this}},{key:"move",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return this.setPosition(n,i,a),this}},{key:"setZIndex",value:function(n){return this.style.zIndex=n,this}}])}(hR);Jt.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","display","draggable","droppable","fill","fillOpacity","fillRule","filter","increasedLineWidthForHitTesting","lineCap","lineDash","lineDashOffset","lineJoin","lineWidth","miterLimit","hitArea","offsetDistance","offsetPath","offsetX","offsetY","opacity","pointerEvents","shadowColor","shadowType","shadowBlur","shadowOffsetX","shadowOffsetY","stroke","strokeOpacity","strokeWidth","strokeLinecap","strokeLineJoin","strokeDasharray","strokeDashoffset","transform","transformOrigin","textTransform","visibility","zIndex"]);var gr=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(this,r),kt(this,r,[wt({type:H.CIRCLE},e)])}return St(r,t),Z(r)}(Jt);gr.PARSED_STYLE_LIST=new Set([].concat(Tt(Jt.PARSED_STYLE_LIST),["cx","cy","cz","r","isBillboard","isSizeAttenuation"]));var gR=["style"],Wl=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=bi(n,gR);return Q(this,r),e=kt(this,r,[wt({style:i},a)]),e.isCustomElement=!0,e}return St(r,t),Z(r)}(Jt);Wl.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var Yl=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(this,r),kt(this,r,[wt({type:H.ELLIPSE},e)])}return St(r,t),Z(r)}(Jt);Yl.PARSED_STYLE_LIST=new Set([].concat(Tt(Jt.PARSED_STYLE_LIST),["cx","cy","cz","rx","ry","isBillboard","isSizeAttenuation"]));var mR=function(t){function r(){return Q(this,r),kt(this,r,[{type:H.FRAGMENT}])}return St(r,t),Z(r)}(Jt);mR.PARSED_STYLE_LIST=new Set(["class","className"]);var Re=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(this,r),kt(this,r,[wt({type:H.GROUP},e)])}return St(r,t),Z(r)}(Jt);Re.PARSED_STYLE_LIST=new Set(["class","className","clipPath","cursor","draggable","droppable","opacity","pointerEvents","transform","transformOrigin","zIndex","visibility"]);var yR=["style"],Eo=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=bi(n,yR);return Q(this,r),e=kt(this,r,[wt({type:H.HTML,style:i},a)]),e.cullable.enable=!1,e}return St(r,t),Z(r,[{key:"getDomElement",value:function(){return this.parsedStyle.$el}},{key:"getClientRects",value:function(){return[this.getBoundingClientRect()]}},{key:"getLocalBounds",value:function(){if(this.parentNode){var n=Hn(Bt(),this.parentNode.getWorldTransform()),i=this.getBounds();if(!_e.isEmpty(i)){var a=new _e;return a.setFromTransformedAABB(i,n),a}}return this.getBounds()}}])}(Jt);Eo.PARSED_STYLE_LIST=new Set([].concat(Tt(Jt.PARSED_STYLE_LIST),["x","y","$el","innerHTML","width","height"]));var Hl=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(this,r),kt(this,r,[wt({type:H.IMAGE},e)])}return St(r,t),Z(r)}(Jt);Hl.PARSED_STYLE_LIST=new Set([].concat(Tt(Jt.PARSED_STYLE_LIST),["x","y","z","src","width","height","isBillboard","billboardRotation","isSizeAttenuation","keepAspectRatio"]));var bR=["style"],ki=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=bi(n,bR);Q(this,r),e=kt(this,r,[wt({type:H.LINE,style:wt({x1:0,y1:0,x2:0,y2:0,z1:0,z2:0},i)},a)]),e.markerStartAngle=0,e.markerEndAngle=0;var o=e.parsedStyle,s=o.markerStart,l=o.markerEnd;return s&&Lt(s)&&(e.markerStartAngle=s.getLocalEulerAngles(),e.appendChild(s)),l&&Lt(l)&&(e.markerEndAngle=l.getLocalEulerAngles(),e.appendChild(l)),e.transformMarker(!0),e.transformMarker(!1),e}return St(r,t),Z(r,[{key:"attributeChangedCallback",value:function(n,i,a,o,s){n==="x1"||n==="y1"||n==="x2"||n==="y2"||n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&Lt(o)&&(this.markerStartAngle=0,o.remove()),s&&Lt(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):n==="markerEnd"&&(o&&Lt(o)&&(this.markerEndAngle=0,o.remove()),s&&Lt(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1)))}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=i.x1,u=i.x2,f=i.y1,d=i.y2,h=n?a:o;if(!(!h||!Lt(h))){var p=0,v,g,m,y,b,x;n?(m=c,y=f,v=u-c,g=d-f,b=s||0,x=this.markerStartAngle):(m=u,y=d,v=c-u,g=f-d,b=l||0,x=this.markerEndAngle),p=Math.atan2(g,v),h.setLocalEulerAngles(p*180/Math.PI+x),h.setLocalPosition(m+Math.cos(p)*b,y+Math.sin(p)*b)}}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle,o=a.x1,s=a.y1,l=a.x2,c=a.y2,u=f0(o,s,l,c,n),f=u.x,d=u.y,h=me(Pt(),jt(f,d,0),i?this.getWorldTransform():this.getLocalTransform());return new $e(h[0],h[1])}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(n/this.getTotalLength(),i)}},{key:"getTotalLength",value:function(){var n=this.parsedStyle,i=n.x1,a=n.y1,o=n.x2,s=n.y2;return u0(i,a,o,s)}}])}(Jt);ki.PARSED_STYLE_LIST=new Set([].concat(Tt(Jt.PARSED_STYLE_LIST),["x1","y1","x2","y2","z1","z2","isBillboard","isSizeAttenuation","markerStart","markerEnd","markerStartOffset","markerEndOffset"]));var xR=["style"],Qe=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=bi(n,xR);Q(this,r),e=kt(this,r,[wt({type:H.PATH,style:i,initialParsedStyle:{miterLimit:4,d:wt({},v0)}},a)]),e.markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var o=e.parsedStyle,s=o.markerStart,l=o.markerEnd,c=o.markerMid;return s&&Lt(s)&&(e.markerStartAngle=s.getLocalEulerAngles(),e.appendChild(s)),c&&Lt(c)&&e.placeMarkerMid(c),l&&Lt(l)&&(e.markerEndAngle=l.getLocalEulerAngles(),e.appendChild(l)),e.transformMarker(!0),e.transformMarker(!1),e}return St(r,t),Z(r,[{key:"attributeChangedCallback",value:function(n,i,a,o,s){n==="d"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&Lt(o)&&(this.markerStartAngle=0,o.remove()),s&&Lt(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):n==="markerEnd"?(o&&Lt(o)&&(this.markerEndAngle=0,o.remove()),s&&Lt(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(s)}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=n?a:o;if(!(!c||!Lt(c))){var u=0,f,d,h,p,v,g;if(n){var m=this.getStartTangent(),y=bt(m,2),b=y[0],x=y[1];h=x[0],p=x[1],f=b[0]-x[0],d=b[1]-x[1],v=s||0,g=this.markerStartAngle}else{var O=this.getEndTangent(),w=bt(O,2),S=w[0],k=w[1];h=k[0],p=k[1],f=S[0]-k[0],d=S[1]-k[1],v=l||0,g=this.markerEndAngle}u=Math.atan2(d,f),c.setLocalEulerAngles(u*180/Math.PI+g),c.setLocalPosition(h+Math.cos(u)*v,p+Math.sin(u)*v)}}},{key:"placeMarkerMid",value:function(n){var i=this.parsedStyle.d.segments;if(this.markerMidList.forEach(function(u){u.remove()}),n&&Lt(n))for(var a=1;a<i.length-1;a++){var o=bt(i[a].currentPoint,2),s=o[0],l=o[1],c=a===1?n:n.cloneNode(!0);this.markerMidList.push(c),this.appendChild(c),c.setLocalPosition(s,l)}}},{key:"getTotalLength",value:function(){return Au(this)}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.d.absolutePath,o=wT(a,n),s=o.x,l=o.y,c=me(Pt(),jt(s,l,0),i?this.getWorldTransform():this.getLocalTransform());return new $e(c[0],c[1])}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPointAtLength(n*Au(this),i)}},{key:"getStartTangent",value:function(){var n=this.parsedStyle.d.segments,i=[];if(n.length>1){var a=n[0].currentPoint,o=n[1].currentPoint,s=n[1].startTangent;i=[],s?(i.push([a[0]-s[0],a[1]-s[1]]),i.push([a[0],a[1]])):(i.push([o[0],o[1]]),i.push([a[0],a[1]]))}return i}},{key:"getEndTangent",value:function(){var n=this.parsedStyle.d.segments,i=n.length,a=[];if(i>1){var o=n[i-2].currentPoint,s=n[i-1].currentPoint,l=n[i-1].endTangent;a=[],l?(a.push([s[0]-l[0],s[1]-l[1]]),a.push([s[0],s[1]])):(a.push([o[0],o[1]]),a.push([s[0],s[1]]))}return a}}])}(Jt);Qe.PARSED_STYLE_LIST=new Set([].concat(Tt(Jt.PARSED_STYLE_LIST),["d","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard","isSizeAttenuation"]));var OR=["style"],ha=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},i=n.style,a=bi(n,OR);Q(this,r),e=kt(this,r,[wt({type:H.POLYGON,style:i,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!0}},a)]),e.markerStartAngle=0,e.markerEndAngle=0,e.markerMidList=[];var o=e.parsedStyle,s=o.markerStart,l=o.markerEnd,c=o.markerMid;return s&&Lt(s)&&(e.markerStartAngle=s.getLocalEulerAngles(),e.appendChild(s)),c&&Lt(c)&&e.placeMarkerMid(c),l&&Lt(l)&&(e.markerEndAngle=l.getLocalEulerAngles(),e.appendChild(l)),e.transformMarker(!0),e.transformMarker(!1),e}return St(r,t),Z(r,[{key:"attributeChangedCallback",value:function(n,i,a,o,s){n==="points"?(this.transformMarker(!0),this.transformMarker(!1),this.placeMarkerMid(this.parsedStyle.markerMid)):n==="markerStartOffset"||n==="markerEndOffset"?(this.transformMarker(!0),this.transformMarker(!1)):n==="markerStart"?(o&&Lt(o)&&(this.markerStartAngle=0,o.remove()),s&&Lt(s)&&(this.markerStartAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!0))):n==="markerEnd"?(o&&Lt(o)&&(this.markerEndAngle=0,o.remove()),s&&Lt(s)&&(this.markerEndAngle=s.getLocalEulerAngles(),this.appendChild(s),this.transformMarker(!1))):n==="markerMid"&&this.placeMarkerMid(s)}},{key:"transformMarker",value:function(n){var i=this.parsedStyle,a=i.markerStart,o=i.markerEnd,s=i.markerStartOffset,l=i.markerEndOffset,c=i.points,u=c||{},f=u.points,d=n?a:o;if(!(!d||!Lt(d)||!f)){var h=0,p,v,g,m,y,b;if(g=f[0][0],m=f[0][1],n)p=f[1][0]-f[0][0],v=f[1][1]-f[0][1],y=s||0,b=this.markerStartAngle;else{var x=f.length;this.parsedStyle.isClosed?(p=f[x-1][0]-f[0][0],v=f[x-1][1]-f[0][1]):(g=f[x-1][0],m=f[x-1][1],p=f[x-2][0]-f[x-1][0],v=f[x-2][1]-f[x-1][1]),y=l||0,b=this.markerEndAngle}h=Math.atan2(v,p),d.setLocalEulerAngles(h*180/Math.PI+b),d.setLocalPosition(g+Math.cos(h)*y,m+Math.sin(h)*y)}}},{key:"placeMarkerMid",value:function(n){var i=this.parsedStyle.points,a=i||{},o=a.points;if(this.markerMidList.forEach(function(f){f.remove()}),this.markerMidList=[],n&&Lt(n)&&o)for(var s=1;s<(this.parsedStyle.isClosed?o.length:o.length-1);s++){var l=o[s][0],c=o[s][1],u=s===1?n:n.cloneNode(!0);this.markerMidList.push(u),this.appendChild(u),u.setLocalPosition(l,c)}}}])}(Jt);ha.PARSED_STYLE_LIST=new Set([].concat(Tt(Jt.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isClosed","isBillboard","isSizeAttenuation"]));var wR=["style"],Vl=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.style,i=bi(e,wR);return Q(this,r),kt(this,r,[wt({type:H.POLYLINE,style:n,initialParsedStyle:{points:{points:[],totalLength:0,segments:[]},miterLimit:4,isClosed:!1}},i)])}return St(r,t),Z(r,[{key:"getTotalLength",value:function(){return lC(this)}},{key:"getPointAtLength",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;return this.getPoint(n/this.getTotalLength(),i)}},{key:"getPoint",value:function(n){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,a=this.parsedStyle.points.points;if(this.parsedStyle.points.segments.length===0){var o=[],s=0,l,c,u=this.getTotalLength();a.forEach(function(m,y){a[y+1]&&(l=[0,0],l[0]=s/u,c=u0(m[0],m[1],a[y+1][0],a[y+1][1]),s+=c,l[1]=s/u,o.push(l))}),this.parsedStyle.points.segments=o}var f=0,d=0;this.parsedStyle.points.segments.forEach(function(m,y){n>=m[0]&&n<=m[1]&&(f=(n-m[0])/(m[1]-m[0]),d=y)});var h=f0(a[d][0],a[d][1],a[d+1][0],a[d+1][1],f),p=h.x,v=h.y,g=me(Pt(),jt(p,v,0),i?this.getWorldTransform():this.getLocalTransform());return new $e(g[0],g[1])}},{key:"getStartTangent",value:function(){var n=this.parsedStyle.points.points,i=[];return i.push([n[1][0],n[1][1]]),i.push([n[0][0],n[0][1]]),i}},{key:"getEndTangent",value:function(){var n=this.parsedStyle.points.points,i=n.length-1,a=[];return a.push([n[i-1][0],n[i-1][1]]),a.push([n[i][0],n[i][1]]),a}}])}(ha);Vl.PARSED_STYLE_LIST=new Set([].concat(Tt(ha.PARSED_STYLE_LIST),["points","markerStart","markerMid","markerEnd","markerStartOffset","markerEndOffset","isBillboard"]));var Br=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(this,r),kt(this,r,[wt({type:H.RECT},e)])}return St(r,t),Z(r)}(Jt);Br.PARSED_STYLE_LIST=new Set([].concat(Tt(Jt.PARSED_STYLE_LIST),["x","y","z","width","height","isBillboard","isSizeAttenuation","radius"]));var SR=["style"],Pn=function(t){function r(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=e.style,i=bi(e,SR);return Q(this,r),kt(this,r,[wt({type:H.TEXT,style:wt({fill:"black"},n)},i)])}return St(r,t),Z(r,[{key:"getComputedTextLength",value:function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.maxLineWidth)||0}},{key:"getLineBoundingRects",value:function(){var n;return this.getGeometryBounds(),((n=this.parsedStyle.metrics)===null||n===void 0?void 0:n.lineMetrics)||[]}},{key:"isOverflowing",value:function(){return this.getGeometryBounds(),!!this.parsedStyle.isOverflowing}}])}(Jt);Pn.PARSED_STYLE_LIST=new Set([].concat(Tt(Jt.PARSED_STYLE_LIST),["x","y","z","isBillboard","billboardRotation","isSizeAttenuation","text","textAlign","textBaseline","fontStyle","fontSize","fontFamily","fontWeight","fontVariant","lineHeight","letterSpacing","leading","wordWrap","wordWrapWidth","maxLines","textOverflow","isOverflowing","textPath","textDecorationLine","textDecorationColor","textDecorationStyle","textPathSide","textPathStartOffset","metrics","dx","dy"]));var kR=function(){function t(){Q(this,t),this.registry={},this.define(H.CIRCLE,gr),this.define(H.ELLIPSE,Yl),this.define(H.RECT,Br),this.define(H.IMAGE,Hl),this.define(H.LINE,ki),this.define(H.GROUP,Re),this.define(H.PATH,Qe),this.define(H.POLYGON,ha),this.define(H.POLYLINE,Vl),this.define(H.TEXT,Pn),this.define(H.HTML,Eo)}return Z(t,[{key:"define",value:function(e,n){this.registry[e]=n}},{key:"get",value:function(e){return this.registry[e]}}])}(),W0={number:function(r){return new Wt(r)},percent:function(r){return new Wt(r,"%")},px:function(r){return new Wt(r,"px")},em:function(r){return new Wt(r,"em")},rem:function(r){return new Wt(r,"rem")},deg:function(r){return new Wt(r,"deg")},grad:function(r){return new Wt(r,"grad")},rad:function(r){return new Wt(r,"rad")},turn:function(r){return new Wt(r,"turn")},s:function(r){return new Wt(r,"s")},ms:function(r){return new Wt(r,"ms")},registerProperty:function(r){var e=r.name,n=r.inherits,i=r.interpolable,a=r.initialValue,o=r.syntax;K.styleValueRegistry.registerMetadata({n:e,inh:n,int:i,d:a,syntax:o})},registerLayout:function(r,e){K.layoutRegistry.registerLayout(r,e)}},ER=function(t){function r(){var e;Q(this,r),e=kt(this,r),e.defaultView=null,e.ownerDocument=null,e.nodeName="document";try{e.timeline=new K.AnimationTimeline(e)}catch{}var n={};return Yf.forEach(function(i){var a=i.n,o=i.inh,s=i.d;o&&s&&(n[a]=Le(s)?s(H.GROUP):s)}),e.documentElement=new Re({id:"g-root",style:n}),e.documentElement.ownerDocument=e,e.documentElement.parentNode=e,e.childNodes=[e.documentElement],e}return St(r,t),Z(r,[{key:"children",get:function(){return this.childNodes}},{key:"childElementCount",get:function(){return this.childNodes.length}},{key:"firstElementChild",get:function(){return this.firstChild}},{key:"lastElementChild",get:function(){return this.lastChild}},{key:"createElement",value:function(n,i){if(n==="svg")return this.documentElement;var a=this.defaultView.customElements.get(n);a||(console.warn("Unsupported tagName: ",n),a=n==="tspan"?Pn:Re);var o=new a(i);return o.ownerDocument=this,o}},{key:"createElementNS",value:function(n,i,a){return this.createElement(i,a)}},{key:"cloneNode",value:function(n){throw new Error(Gt)}},{key:"destroy",value:function(){try{this.documentElement.destroyChildren(),this.timeline.destroy()}catch{}}},{key:"elementsFromBBox",value:function(n,i,a,o){var s=this.defaultView.context.rBushRoot,l=s.search({minX:n,minY:i,maxX:a,maxY:o}),c=[];return l.forEach(function(u){var f=u.displayObject,d=f.parsedStyle.pointerEvents,h=d===void 0?"auto":d,p=["auto","visiblepainted","visiblefill","visiblestroke","visible"].includes(h);(!p||p&&f.isVisible())&&!f.isCulled()&&f.isInteractive()&&c.push(f)}),c.sort(function(u,f){return f.sortable.renderOrder-u.sortable.renderOrder}),c}},{key:"elementFromPointSync",value:function(n,i){var a=this.defaultView.canvas2Viewport({x:n,y:i}),o=a.x,s=a.y,l=this.defaultView.getConfig(),c=l.width,u=l.height;if(o<0||s<0||o>c||s>u)return null;var f=this.defaultView.viewport2Client({x:o,y:s}),d=f.x,h=f.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!0,position:{x:n,y:i,viewportX:o,viewportY:s,clientX:d,clientY:h},picked:[]}),v=p.picked;return v&&v[0]||this.documentElement}},{key:"elementFromPoint",value:function(){var e=Cr(He().mark(function i(a,o){var s,l,c,u,f,d,h,p,v,g,m;return He().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(s=this.defaultView.canvas2Viewport({x:a,y:o}),l=s.x,c=s.y,u=this.defaultView.getConfig(),f=u.width,d=u.height,!(l<0||c<0||l>f||c>d)){y.next=1;break}return y.abrupt("return",null);case 1:return h=this.defaultView.viewport2Client({x:l,y:c}),p=h.x,v=h.y,y.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!0,position:{x:a,y:o,viewportX:l,viewportY:c,clientX:p,clientY:v},picked:[]});case 2:return g=y.sent,m=g.picked,y.abrupt("return",m&&m[0]||this.documentElement);case 3:case"end":return y.stop()}},i,this)}));function n(i,a){return e.apply(this,arguments)}return n}()},{key:"elementsFromPointSync",value:function(n,i){var a=this.defaultView.canvas2Viewport({x:n,y:i}),o=a.x,s=a.y,l=this.defaultView.getConfig(),c=l.width,u=l.height;if(o<0||s<0||o>c||s>u)return[];var f=this.defaultView.viewport2Client({x:o,y:s}),d=f.x,h=f.y,p=this.defaultView.getRenderingService().hooks.pickSync.call({topmost:!1,position:{x:n,y:i,viewportX:o,viewportY:s,clientX:d,clientY:h},picked:[]}),v=p.picked;return v[v.length-1]!==this.documentElement&&v.push(this.documentElement),v}},{key:"elementsFromPoint",value:function(){var e=Cr(He().mark(function i(a,o){var s,l,c,u,f,d,h,p,v,g,m;return He().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(s=this.defaultView.canvas2Viewport({x:a,y:o}),l=s.x,c=s.y,u=this.defaultView.getConfig(),f=u.width,d=u.height,!(l<0||c<0||l>f||c>d)){y.next=1;break}return y.abrupt("return",[]);case 1:return h=this.defaultView.viewport2Client({x:l,y:c}),p=h.x,v=h.y,y.next=2,this.defaultView.getRenderingService().hooks.pick.promise({topmost:!1,position:{x:a,y:o,viewportX:l,viewportY:c,clientX:p,clientY:v},picked:[]});case 2:return g=y.sent,m=g.picked,m[m.length-1]!==this.documentElement&&m.push(this.documentElement),y.abrupt("return",m);case 3:case"end":return y.stop()}},i,this)}));function n(i,a){return e.apply(this,arguments)}return n}()},{key:"appendChild",value:function(n,i){throw new Error(Li)}},{key:"insertBefore",value:function(n,i){throw new Error(Li)}},{key:"removeChild",value:function(n,i){throw new Error(Li)}},{key:"replaceChild",value:function(n,i,a){throw new Error(Li)}},{key:"append",value:function(){throw new Error(Li)}},{key:"prepend",value:function(){throw new Error(Li)}},{key:"getElementById",value:function(n){return this.documentElement.getElementById(n)}},{key:"getElementsByName",value:function(n){return this.documentElement.getElementsByName(n)}},{key:"getElementsByTagName",value:function(n){return this.documentElement.getElementsByTagName(n)}},{key:"getElementsByClassName",value:function(n){return this.documentElement.getElementsByClassName(n)}},{key:"querySelector",value:function(n){return this.documentElement.querySelector(n)}},{key:"querySelectorAll",value:function(n){return this.documentElement.querySelectorAll(n)}},{key:"find",value:function(n){return this.documentElement.find(n)}},{key:"findAll",value:function(n){return this.documentElement.findAll(n)}}])}(le),Y0=function(){function t(r){Q(this,t),this.strategies=r}return Z(t,[{key:"apply",value:function(e){var n=e.config,i=e.camera,a=e.renderingService,o=e.renderingContext,s=this.strategies;a.hooks.cull.tap(t.tag,function(l){if(l){var c,u=l.cullable;if(s.length===0?u.visible=o.unculledEntities.indexOf(l.entity)>-1:u.visible=s.every(function(d){return d.isVisible(i,l)}),!l.isCulled()&&l.isVisible())return l;var f=((c=n.future)===null||c===void 0?void 0:c.experimentalCancelEventPropagation)===!0;return l.dispatchEvent(new Ht(Et.CULLED),f,f),null}return l}),a.hooks.afterRender.tap(t.tag,function(l){l.cullable.visibilityPlaneMask=-1})}}])}();Y0.tag="Culling";var H0=function(){function t(){var r=this;Q(this,t),this.autoPreventDefault=!1,this.rootPointerEvent=new Cu(null),this.rootWheelEvent=new Lu(null),this.onPointerMove=function(e){var n,i=(n=r.context.renderingContext.root)===null||n===void 0||(n=n.ownerDocument)===null||n===void 0?void 0:n.defaultView;if(!(i.supportsTouchEvents&&e.pointerType==="touch")){var a=r.normalizeToPointerEvent(e,i),o=Jr(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,c=r.bootstrapEvent(r.rootPointerEvent,l,i,e);r.context.eventService.mapEvent(c)}}catch(u){o.e(u)}finally{o.f()}r.setCursor(r.context.eventService.cursor)}},this.onClick=function(e){var n,i=(n=r.context.renderingContext.root)===null||n===void 0||(n=n.ownerDocument)===null||n===void 0?void 0:n.defaultView,a=r.normalizeToPointerEvent(e,i),o=Jr(a),s;try{for(o.s();!(s=o.n()).done;){var l=s.value,c=r.bootstrapEvent(r.rootPointerEvent,l,i,e);r.context.eventService.mapEvent(c)}}catch(u){o.e(u)}finally{o.f()}r.setCursor(r.context.eventService.cursor)}}return Z(t,[{key:"apply",value:function(e){var n=this;this.context=e;var i=e.renderingService,a=this.context.renderingContext.root.ownerDocument.defaultView;this.context.eventService.setPickHandler(function(o){var s=n.context.renderingService.hooks.pickSync.call({position:o,picked:[],topmost:!0}),l=s.picked;return l[0]||null}),i.hooks.pointerWheel.tap(t.tag,function(o){var s=n.normalizeWheelEvent(o);n.context.eventService.mapEvent(s)}),i.hooks.pointerDown.tap(t.tag,function(o){if(!(a.supportsTouchEvents&&o.pointerType==="touch")){var s=n.normalizeToPointerEvent(o,a);if(n.autoPreventDefault&&s[0].isNormalized){var l=o.cancelable||!("cancelable"in o);l&&o.preventDefault()}var c=Jr(s),u;try{for(c.s();!(u=c.n()).done;){var f=u.value,d=n.bootstrapEvent(n.rootPointerEvent,f,a,o);n.context.eventService.mapEvent(d)}}catch(h){c.e(h)}finally{c.f()}n.setCursor(n.context.eventService.cursor)}}),i.hooks.pointerUp.tap(t.tag,function(o){if(!(a.supportsTouchEvents&&o.pointerType==="touch")){var s=n.context.contextService.getDomElement(),l=n.context.eventService.isNativeEventFromCanvas(s,o),c=l?"":"outside",u=n.normalizeToPointerEvent(o,a),f=Jr(u),d;try{for(f.s();!(d=f.n()).done;){var h=d.value,p=n.bootstrapEvent(n.rootPointerEvent,h,a,o);p.type+=c,n.context.eventService.mapEvent(p)}}catch(v){f.e(v)}finally{f.f()}n.setCursor(n.context.eventService.cursor)}}),i.hooks.pointerMove.tap(t.tag,this.onPointerMove),i.hooks.pointerOver.tap(t.tag,this.onPointerMove),i.hooks.pointerOut.tap(t.tag,this.onPointerMove),i.hooks.click.tap(t.tag,this.onClick),i.hooks.pointerCancel.tap(t.tag,function(o){var s=n.normalizeToPointerEvent(o,a),l=Jr(s),c;try{for(l.s();!(c=l.n()).done;){var u=c.value,f=n.bootstrapEvent(n.rootPointerEvent,u,a,o);n.context.eventService.mapEvent(f)}}catch(d){l.e(d)}finally{l.f()}n.setCursor(n.context.eventService.cursor)})}},{key:"bootstrapEvent",value:function(e,n,i,a){e.view=i,e.originalEvent=null,e.nativeEvent=a,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n);var o=this.context.eventService.client2Viewport({x:n.clientX,y:n.clientY}),s=o.x,l=o.y;e.viewport.x=s,e.viewport.y=l;var c=this.context.eventService.viewport2Canvas(e.viewport),u=c.x,f=c.y;return e.canvas.x=u,e.canvas.y=f,e.global.copyFrom(e.canvas),e.offset.copyFrom(e.canvas),e.isTrusted=a.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=oL[e.type]||e.type),e}},{key:"normalizeWheelEvent",value:function(e){var n=this.rootWheelEvent;this.transferMouseData(n,e),n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ;var i=this.context.eventService.client2Viewport({x:e.clientX,y:e.clientY}),a=i.x,o=i.y;n.viewport.x=a,n.viewport.y=o;var s=this.context.eventService.viewport2Canvas(n.viewport),l=s.x,c=s.y;return n.canvas.x=l,n.canvas.y=c,n.global.copyFrom(n.canvas),n.offset.copyFrom(n.canvas),n.nativeEvent=e,n.type=e.type,n}},{key:"transferMouseData",value:function(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=Pu.now(),e.type=n.type,e.altKey=n.altKey,e.metaKey=n.metaKey,e.shiftKey=n.shiftKey,e.ctrlKey=n.ctrlKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.screen.x=n.screenX,e.screen.y=n.screenY,e.relatedTarget=null}},{key:"setCursor",value:function(e){this.context.contextService.applyCursorStyle(e||this.context.config.cursor||"default")}},{key:"normalizeToPointerEvent",value:function(e,n){var i=[];if(n.isTouchEvent(e))for(var a=0;a<e.changedTouches.length;a++){var o=e.changedTouches[a];Ut(o.button)&&(o.button=0),Ut(o.buttons)&&(o.buttons=1),Ut(o.isPrimary)&&(o.isPrimary=e.touches.length===1&&e.type==="touchstart"),Ut(o.width)&&(o.width=o.radiusX||1),Ut(o.height)&&(o.height=o.radiusY||1),Ut(o.tiltX)&&(o.tiltX=0),Ut(o.tiltY)&&(o.tiltY=0),Ut(o.pointerType)&&(o.pointerType="touch"),Ut(o.pointerId)&&(o.pointerId=o.identifier||0),Ut(o.pressure)&&(o.pressure=o.force||.5),Ut(o.twist)&&(o.twist=0),Ut(o.tangentialPressure)&&(o.tangentialPressure=0),o.isNormalized=!0,o.type=e.type,i.push(o)}else if(n.isMouseEvent(e)){var s=e;Ut(s.isPrimary)&&(s.isPrimary=!0),Ut(s.width)&&(s.width=1),Ut(s.height)&&(s.height=1),Ut(s.tiltX)&&(s.tiltX=0),Ut(s.tiltY)&&(s.tiltY=0),Ut(s.pointerType)&&(s.pointerType="mouse"),Ut(s.pointerId)&&(s.pointerId=aL),Ut(s.pressure)&&(s.pressure=.5),Ut(s.twist)&&(s.twist=0),Ut(s.tangentialPressure)&&(s.tangentialPressure=0),s.isNormalized=!0,i.push(s)}else i.push(e);return i}}])}();H0.tag="Event";var _R=[H.CIRCLE,H.ELLIPSE,H.IMAGE,H.RECT,H.LINE,H.POLYLINE,H.POLYGON,H.TEXT,H.PATH,H.HTML],AR=function(){function t(){Q(this,t)}return Z(t,[{key:"isVisible",value:function(e,n){var i,a=n.cullable;if(!a.enable)return!0;var o=n.getRenderBounds();if(_e.isEmpty(o))return!1;var s=e.getFrustum(),l=(i=n.parentNode)===null||i===void 0||(i=i.cullable)===null||i===void 0?void 0:i.visibilityPlaneMask;return a.visibilityPlaneMask=this.computeVisibilityWithPlaneMask(n,o,l||Ci.INDETERMINATE,s.planes),a.visible=a.visibilityPlaneMask!==Ci.OUTSIDE,a.visible}},{key:"computeVisibilityWithPlaneMask",value:function(e,n,i,a){if(i===Ci.OUTSIDE||i===Ci.INSIDE)return i;for(var o=Ci.INSIDE,s=_R.indexOf(e.nodeName)>-1,l=0,c=a.length;l<c;++l){var u=1<<l;if((i&u)!==0&&!(s&&(l===4||l===5))){var f=a[l],d=f.normal,h=f.distance;if(ur(d,n.getPositiveFarPoint(a[l]))+h<0)return Ci.OUTSIDE;ur(d,n.getNegativeFarPoint(a[l]))+h<0&&(o|=u)}}return o}}])}(),V0=function(){function t(){Q(this,t),this.syncTasks=new Map,this.isFirstTimeRendering=!0,this.syncing=!1,this.isFirstTimeRenderingFinished=!1}return Z(t,[{key:"apply",value:function(e){var n=this,i,a,o=e.config,s=e.renderingService,l=e.renderingContext,c=e.rBushRoot,u=l.root.ownerDocument.defaultView;this.rBush=c;var f=function(y){s.dirtify()},d=function(y){n.syncTasks.set(y.target,y.detail.affectChildren),s.dirtify()},h=function(y){var b=y.target;K.enableSizeAttenuation&&K.styleValueRegistry.updateSizeAttenuation(b,u.getCamera().getZoom())},p=function(y){var b=y.target,x=b.rBushNode;x!=null&&x.aabb&&n.rBush.remove(x.aabb),n.syncTasks.delete(b),K.sceneGraphService.dirtyToRoot(b),s.dirtify()};s.hooks.init.tap(t.tag,function(){u.addEventListener(Et.MOUNTED,h),u.addEventListener(Et.UNMOUNTED,p),u.addEventListener(Et.ATTR_MODIFIED,f),u.addEventListener(Et.BOUNDS_CHANGED,d)}),s.hooks.destroy.tap(t.tag,function(){u.removeEventListener(Et.MOUNTED,h),u.removeEventListener(Et.UNMOUNTED,p),u.removeEventListener(Et.ATTR_MODIFIED,f),u.removeEventListener(Et.BOUNDS_CHANGED,d),n.syncTasks.clear()});var v=(i=K.globalThis.requestIdleCallback)!==null&&i!==void 0?i:Vf.bind(K.globalThis),g=((a=o.future)===null||a===void 0?void 0:a.experimentalRICSyncRTree)===!0;s.hooks.endFrame.tap(t.tag,function(){n.isFirstTimeRendering?(n.isFirstTimeRendering=!1,n.syncing=!0,v(function(){n.syncRTree(!0),n.isFirstTimeRenderingFinished=!0})):g&&K.globalThis.requestIdleCallback&&K.globalThis.cancelIdleCallback?(K.globalThis.cancelIdleCallback(n.ricSyncRTreeId),n.ricSyncRTreeId=K.globalThis.requestIdleCallback(function(){return n.syncRTree()})):n.syncRTree()})}},{key:"syncNode",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(e.isConnected){var i=e.rBushNode;i.aabb&&this.rBush.remove(i.aabb);var a=e.getRenderBounds();if(a){var o=e.renderable;n&&(o.dirtyRenderBounds||(o.dirtyRenderBounds=new _e),o.dirtyRenderBounds.update(a.center,a.halfExtents));var s=a.getMin(),l=bt(s,2),c=l[0],u=l[1],f=a.getMax(),d=bt(f,2),h=d[0],p=d[1];i.aabb||(i.aabb={}),i.aabb.displayObject=e,i.aabb.minX=c,i.aabb.minY=u,i.aabb.maxX=h,i.aabb.maxY=p}if(i.aabb&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.maxX)&&!isNaN(i.aabb.minX)&&!isNaN(i.aabb.minY))return i.aabb}}},{key:"syncRTree",value:function(){var e=this,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;if(!(!n&&(this.syncing||this.syncTasks.size===0))){this.syncing=!0;var i=[],a=new Set,o=function(l){if(!a.has(l)&&l.renderable){var c=e.syncNode(l,n);c&&(i.push(c),a.add(l))}};this.syncTasks.forEach(function(s,l){s&&l.forEach(o);for(var c=l;c;)o(c),c=c.parentElement}),this.rBush.load(i),i.length=0,this.syncing=!1}}}])}();V0.tag="Prepare";var mn=function(t){return t.READY="ready",t.BEFORE_RENDER="beforerender",t.RERENDER="rerender",t.AFTER_RENDER="afterrender",t.BEFORE_DESTROY="beforedestroy",t.AFTER_DESTROY="afterdestroy",t.RESIZE="resize",t.DIRTY_RECTANGLE="dirtyrectangle",t.RENDERER_CHANGED="rendererchanged",t}({}),wp=500,TR=.1,MR=1e3,Ko=new Ht(Et.MOUNTED),Zo=new Ht(Et.UNMOUNTED),Rc=new Ht(mn.BEFORE_RENDER),Sp=new Ht(mn.RERENDER),Nc=new Ht(mn.AFTER_RENDER),X0=function(t){function r(e){var n;Q(this,r),n=kt(this,r),n.Element=Jt,n.inited=!1,n.context={};var i=e.container,a=e.canvas,o=e.renderer,s=e.width,l=e.height,c=e.background,u=e.cursor,f=e.supportsMutipleCanvasesInOneContainer,d=e.cleanUpOnDestroy,h=d===void 0?!0:d,p=e.offscreenCanvas,v=e.devicePixelRatio,g=e.requestAnimationFrame,m=e.cancelAnimationFrame,y=e.createImage,b=e.supportsTouchEvents,x=e.supportsPointerEvents,O=e.isTouchEvent,w=e.isMouseEvent,S=e.dblClickSpeed,k=s,E=l,_=v||Hf&&window.devicePixelRatio||1;return _=_>=1?Math.ceil(_):1,a&&(k=s||rL(a)||a.width/_,E=l||iL(a)||a.height/_),n.customElements=new kR,n.devicePixelRatio=_,n.requestAnimationFrame=g??Vf.bind(K.globalThis),n.cancelAnimationFrame=m??B0.bind(K.globalThis),n.createImage=y??function(){return new window.Image},n.supportsTouchEvents=b??"ontouchstart"in K.globalThis,n.supportsPointerEvents=x??!!K.globalThis.PointerEvent,n.isTouchEvent=O??function(A){return n.supportsTouchEvents&&A instanceof K.globalThis.TouchEvent},n.isMouseEvent=w??function(A){return!K.globalThis.MouseEvent||A instanceof K.globalThis.MouseEvent&&(!n.supportsPointerEvents||!(A instanceof K.globalThis.PointerEvent))},p&&(K.offscreenCanvas=p),n.document=new ER,n.document.defaultView=n,f||JC(i,n,h),n.initRenderingContext(wt(wt({},e),{},{width:k,height:E,background:c??"transparent",cursor:u??"default",cleanUpOnDestroy:h,devicePixelRatio:_,requestAnimationFrame:n.requestAnimationFrame,cancelAnimationFrame:n.cancelAnimationFrame,createImage:n.createImage,supportsTouchEvents:n.supportsTouchEvents,supportsPointerEvents:n.supportsPointerEvents,isTouchEvent:n.isTouchEvent,isMouseEvent:n.isMouseEvent,dblClickSpeed:S??200})),n.initDefaultCamera(k,E,o.clipSpaceNearZ),n.initRenderer(o,!0),n}return St(r,t),Z(r,[{key:"initRenderingContext",value:function(n){this.context.config=n,this.context.renderingContext={root:this.document.documentElement,unculledEntities:[],renderListCurrentFrame:[],renderReasons:new Set,force:!1,dirty:!1}}},{key:"initDefaultCamera",value:function(n,i,a){var o=this,s=new K.CameraContribution;s.clipSpaceNearZ=a,s.setType(zt.EXPLORING,wu.DEFAULT).setPosition(n/2,i/2,wp).setFocalPoint(n/2,i/2,0).setOrthographic(n/-2,n/2,i/2,i/-2,TR,MR),s.canvas=this,s.eventEmitter.on(h0.UPDATED,function(){o.context.renderingContext.renderReasons.add(Gi.CAMERA_CHANGED),K.enableSizeAttenuation&&o.getConfig().renderer.getConfig().enableSizeAttenuation&&o.updateSizeAttenuation()}),this.context.camera=s}},{key:"updateSizeAttenuation",value:function(){var n=this.getCamera().getZoom();this.document.documentElement.forEach(function(i){K.styleValueRegistry.updateSizeAttenuation(i,n)})}},{key:"getConfig",value:function(){return this.context.config}},{key:"getRoot",value:function(){return this.document.documentElement}},{key:"getCamera",value:function(){return this.context.camera}},{key:"getContextService",value:function(){return this.context.contextService}},{key:"getEventService",value:function(){return this.context.eventService}},{key:"getRenderingService",value:function(){return this.context.renderingService}},{key:"getRenderingContext",value:function(){return this.context.renderingContext}},{key:"getStats",value:function(){return this.getRenderingService().getStats()}},{key:"ready",get:function(){var n=this;return this.readyPromise||(this.readyPromise=new Promise(function(i){n.resolveReadyPromise=function(){i(n)}}),this.inited&&this.resolveReadyPromise()),this.readyPromise}},{key:"destroy",value:function(){var n,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,a=arguments.length>1?arguments[1]:void 0;Ce.clearCache();var o=((n=this.getConfig().future)===null||n===void 0?void 0:n.experimentalCancelEventPropagation)===!0;a||this.dispatchEvent(new Ht(mn.BEFORE_DESTROY),o,o),this.frameId&&this.cancelAnimationFrame(this.frameId);var s=this.getRoot();i&&(this.unmountChildren(s),this.document.destroy(),this.getEventService().destroy()),this.getRenderingService().destroy(),this.getContextService().destroy(),this.context.rBushRoot&&this.context.rBushRoot.clear(),a||this.dispatchEvent(new Ht(mn.AFTER_DESTROY),o,o);var l=function(u){u.currentTarget=null,u.manager=null,u.target=null,u.relatedNode=null};l(Ko),l(Zo),l(Rc),l(Sp),l(Nc),l($n),l(Ru),l(Nu),l(G0)}},{key:"changeSize",value:function(n,i){this.resize(n,i)}},{key:"resize",value:function(n,i){var a,o=this.context.config;o.width=n,o.height=i,this.getContextService().resize(n,i);var s=this.context.camera,l=s.getProjectionMode();s.setPosition(n/2,i/2,wp).setFocalPoint(n/2,i/2,0),l===pn.ORTHOGRAPHIC?s.setOrthographic(n/-2,n/2,i/2,i/-2,s.getNear(),s.getFar()):s.setAspect(n/i);var c=((a=o.future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;this.dispatchEvent(new Ht(mn.RESIZE,{width:n,height:i}),c,c)}},{key:"appendChild",value:function(n,i){return this.document.documentElement.appendChild(n,i)}},{key:"insertBefore",value:function(n,i){return this.document.documentElement.insertBefore(n,i)}},{key:"removeChild",value:function(n){return this.document.documentElement.removeChild(n)}},{key:"removeChildren",value:function(){this.document.documentElement.removeChildren()}},{key:"destroyChildren",value:function(){this.document.documentElement.destroyChildren()}},{key:"render",value:function(n){var i,a=this;n&&(Rc.detail=n,Nc.detail=n);var o=((i=this.getConfig().future)===null||i===void 0?void 0:i.experimentalCancelEventPropagation)===!0;this.dispatchEvent(Rc,o,o);var s=this.getRenderingService();s.render(this.getConfig(),n,function(){a.dispatchEvent(Sp,o,o)}),this.dispatchEvent(Nc,o,o)}},{key:"run",value:function(){var n=this,i=function(o,s){n.render(s),n.frameId=n.requestAnimationFrame(i)};i()}},{key:"initRenderer",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(!n)throw new Error("Renderer is required.");this.inited=!1,this.readyPromise=void 0,this.context.rBushRoot=new XM,this.context.renderingPlugins=[],this.context.renderingPlugins.push(new H0,new V0,new Y0([new AR])),this.loadRendererContainerModule(n),this.context.contextService=new this.context.ContextService(wt(wt({},K),this.context)),this.context.renderingService=new FL(K,this.context),this.context.eventService=new BL(K,this.context),this.context.eventService.init(),this.context.contextService.init?(this.context.contextService.init(),this.initRenderingService(n,a,!0)):this.context.contextService.initAsync().then(function(){i.initRenderingService(n,a)}).catch(function(o){console.error(o)})}},{key:"initRenderingService",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.context.renderingService.init(function(){var s;i.inited=!0;var l=((s=i.getConfig().future)===null||s===void 0?void 0:s.experimentalCancelEventPropagation)===!0;a?o?i.requestAnimationFrame(function(){i.dispatchEvent(new Ht(mn.READY),l,l)}):i.dispatchEvent(new Ht(mn.READY),l,l):i.dispatchEvent(new Ht(mn.RENDERER_CHANGED),l,l),i.readyPromise&&i.resolveReadyPromise(),a||i.getRoot().forEach(function(c){var u,f;(u=(f=c).dirty)===null||u===void 0||u.call(f,!0,!0)}),i.mountChildren(i.getRoot()),n.getConfig().enableAutoRendering&&i.run()})}},{key:"loadRendererContainerModule",value:function(n){var i=this,a=n.getPlugins();a.forEach(function(o){o.context=i.context,o.init(K)})}},{key:"setRenderer",value:function(n){var i=this.getConfig();if(i.renderer!==n){var a=i.renderer;i.renderer=n,this.destroy(!1,!0),Tt((a==null?void 0:a.getPlugins())||[]).reverse().forEach(function(o){o.destroy(K)}),this.initRenderer(n)}}},{key:"setCursor",value:function(n){var i=this.getConfig();i.cursor=n,this.getContextService().applyCursorStyle(n)}},{key:"unmountChildren",value:function(n){var i=this;if(n.childNodes.forEach(function(s){i.unmountChildren(s)}),this.inited){if(n.isMutationObserved)n.dispatchEvent(Zo);else{var a,o=((a=this.getConfig().future)===null||a===void 0?void 0:a.experimentalCancelEventPropagation)===!0;Zo.target=n,this.dispatchEvent(Zo,!0,o)}n!==this.document.documentElement&&(n.ownerDocument=null),n.isConnected=!1}n.isCustomElement&&n.disconnectedCallback&&n.disconnectedCallback()}},{key:"mountChildren",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Qs(n);if(this.inited){if(!n.isConnected&&(n.ownerDocument=this.document,n.isConnected=!0,!a))if(n.isMutationObserved)n.dispatchEvent(Ko);else{var o,s=((o=this.getConfig().future)===null||o===void 0?void 0:o.experimentalCancelEventPropagation)===!0;Ko.target=n,this.dispatchEvent(Ko,!0,s)}}else console.warn("[g]: You are trying to call `canvas.appendChild` before canvas' initialization finished. You can either await `canvas.ready` or listen to `CanvasEvent.READY` manually.","appended child: ",n.nodeName);n.childNodes.forEach(function(l){i.mountChildren(l,a)}),n.isCustomElement&&n.connectedCallback&&n.connectedCallback()}},{key:"mountFragment",value:function(n){this.mountChildren(n,!1)}},{key:"client2Viewport",value:function(n){return this.getEventService().client2Viewport(n)}},{key:"viewport2Client",value:function(n){return this.getEventService().viewport2Client(n)}},{key:"viewport2Canvas",value:function(n){return this.getEventService().viewport2Canvas(n)}},{key:"canvas2Viewport",value:function(n){return this.getEventService().canvas2Viewport(n)}},{key:"getPointByClient",value:function(n,i){return this.client2Viewport({x:n,y:i})}},{key:"getClientByPoint",value:function(n,i){return this.viewport2Client({x:n,y:i})}}])}(z0);/*!
 * @antv/g-camera-api
 * @description A simple implementation of Camera API.
 * @version 2.0.40
 * @date 7/18/2025, 7:12:58 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var PR=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.landmarks=[],e}return St(r,t),Z(r,[{key:"rotate",value:function(n,i,a){if(this.relElevation=Fi(i),this.relAzimuth=Fi(n),this.relRoll=Fi(a),this.elevation+=this.relElevation,this.azimuth+=this.relAzimuth,this.roll+=this.relRoll,this.type===zt.EXPLORING){var o=ei(je(),[1,0,0],Yt((this.rotateWorld?1:-1)*this.relElevation)),s=ei(je(),[0,1,0],Yt((this.rotateWorld?1:-1)*this.relAzimuth)),l=ei(je(),[0,0,1],Yt(this.relRoll)),c=ai(je(),s,o);c=ai(je(),c,l);var u=nm(Bt(),c);Ia(this.matrix,this.matrix,[0,0,-this.distance]),rn(this.matrix,this.matrix,u),Ia(this.matrix,this.matrix,[0,0,this.distance])}else{if(Math.abs(this.elevation)>90)return this;this.computeMatrix()}return this._getAxes(),this.type===zt.ORBITING||this.type===zt.EXPLORING?this._getPosition():this.type===zt.TRACKING&&this._getFocalPoint(),this._update(),this}},{key:"pan",value:function(n,i){var a=Ze(n,i,0),o=or(this.position);return Ar(o,o,Ns(Pt(),this.right,a[0])),Ar(o,o,Ns(Pt(),this.up,a[1])),this._setPosition(o),this.triggerUpdate(),this}},{key:"dolly",value:function(n){var i=this.forward,a=or(this.position),o=n*this.dollyingStep,s=this.distance+n*this.dollyingStep;return o=Math.max(Math.min(s,this.maxDistance),this.minDistance)-this.distance,a[0]+=o*i[0],a[1]+=o*i[1],a[2]+=o*i[2],this._setPosition(a),this.type===zt.ORBITING||this.type===zt.EXPLORING?this._getDistance():this.type===zt.TRACKING&&Ar(this.focalPoint,a,this.distanceVector),this.triggerUpdate(),this}},{key:"cancelLandmarkAnimation",value:function(){this.landmarkAnimationID!==void 0&&this.canvas.cancelAnimationFrame(this.landmarkAnimationID)}},{key:"createLandmark",value:function(n){var i,a,o,s,l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=l.position,u=c===void 0?this.position:c,f=l.focalPoint,d=f===void 0?this.focalPoint:f,h=l.roll,p=l.zoom,v=new K.CameraContribution;v.setType(this.type,void 0),v.setPosition(u[0],(i=u[1])!==null&&i!==void 0?i:this.position[1],(a=u[2])!==null&&a!==void 0?a:this.position[2]),v.setFocalPoint(d[0],(o=d[1])!==null&&o!==void 0?o:this.focalPoint[1],(s=d[2])!==null&&s!==void 0?s:this.focalPoint[2]),v.setRoll(h??this.roll),v.setZoom(p??this.zoom);var g={name:n,matrix:om(v.getWorldTransform()),right:or(v.right),up:or(v.up),forward:or(v.forward),position:or(v.getPosition()),focalPoint:or(v.getFocalPoint()),distanceVector:or(v.getDistanceVector()),distance:v.getDistance(),dollyingStep:v.getDollyingStep(),azimuth:v.getAzimuth(),elevation:v.getElevation(),roll:v.getRoll(),relAzimuth:v.relAzimuth,relElevation:v.relElevation,relRoll:v.relRoll,zoom:v.getZoom()};return this.landmarks.push(g),g}},{key:"gotoLandmark",value:function(n){var i=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=ce(n)?this.landmarks.find(function(A){return A.name===n}):n;if(o){var s=re(a)?{duration:a}:a,l=s.easing,c=l===void 0?"linear":l,u=s.duration,f=u===void 0?100:u,d=s.easingFunction,h=d===void 0?void 0:d,p=s.onfinish,v=p===void 0?void 0:p,g=s.onframe,m=g===void 0?void 0:g,y=.01;this.cancelLandmarkAnimation();var b=o.position,x=o.focalPoint,O=o.zoom,w=o.roll,S=h||K.EasingFunction(c),k,E=function(){i.setFocalPoint(x),i.setPosition(b),i.setRoll(w),i.setZoom(O),i.computeMatrix(),i.triggerUpdate(),v==null||v()};if(f===0)return E();var _=function(M){k===void 0&&(k=M);var T=M-k;if(T>=f){E();return}var C=S(T/f),I=Pt(),R=Pt(),L=1,P=0;uu(I,i.focalPoint,x,C),uu(R,i.position,b,C),P=i.roll*(1-C)+w*C,L=i.zoom*(1-C)+O*C,i.setFocalPoint(I),i.setPosition(R),i.setRoll(P),i.setZoom(L);var N=yh(I,x)+yh(R,b);if(N<=y&&O===void 0&&w===void 0)return E();i.computeMatrix(),i.triggerUpdate(),T<f&&(m==null||m(C),i.landmarkAnimationID=i.canvas.requestAnimationFrame(_))};this.canvas.requestAnimationFrame(_)}}}])}(p0);K.CameraContribution=PR;/*!
 * @antv/g-web-animations-api
 * @description A simple implementation of Web Animations API.
 * @version 2.1.27
 * @date 7/18/2025, 7:14:45 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Ic=function(t){function r(e,n,i,a){var o;return Q(this,r),o=kt(this,r,[e]),o.currentTime=i,o.timelineTime=a,o.target=n,o.type="finish",o.bubbles=!1,o.currentTarget=n,o.defaultPrevented=!1,o.eventPhase=o.AT_TARGET,o.timeStamp=Date.now(),o.currentTime=i,o.timelineTime=a,o}return St(r,t),Z(r)}(Gl),CR=0,LR=function(){function t(r,e){var n;Q(this,t),this.currentTimePending=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._playbackRate=1,this._inTimeline=!0,this.effect=r,r.animation=this,this.timeline=e,this.id="".concat(CR++),this._inEffect=!!this.effect.update(0),this._totalDuration=Number((n=this.effect)===null||n===void 0?void 0:n.getComputedTiming().endTime),this._holdTime=0,this._paused=!1,this.oldPlayState="idle",this.updatePromises()}return Z(t,[{key:"pending",get:function(){return this._startTime===null&&!this._paused&&this.playbackRate!==0||this.currentTimePending}},{key:"playState",get:function(){return this._idle?"idle":this._isFinished?"finished":this._paused?"paused":"running"}},{key:"ready",get:function(){var e=this;return this.readyPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.readyPromise=new Promise(function(n,i){e.resolveReadyPromise=function(){n(e)},e.rejectReadyPromise=function(){i(new Error)}}),this.pending||this.resolveReadyPromise()),this.readyPromise}},{key:"finished",get:function(){var e=this;return this.finishedPromise||(this.timeline.animationsWithPromises.indexOf(this)===-1&&this.timeline.animationsWithPromises.push(this),this.finishedPromise=new Promise(function(n,i){e.resolveFinishedPromise=function(){n(e)},e.rejectFinishedPromise=function(){i(new Error)}}),this.playState==="finished"&&this.resolveFinishedPromise()),this.finishedPromise}},{key:"currentTime",get:function(){return this.updatePromises(),this._idle||this.currentTimePending?null:this._currentTime},set:function(e){if(e=Number(e),!isNaN(e)){if(this.timeline.restart(),!this._paused&&this._startTime!==null){var n;this._startTime=Number((n=this.timeline)===null||n===void 0?void 0:n.currentTime)-e/this.playbackRate}this.currentTimePending=!1,this._currentTime!==e&&(this._idle&&(this._idle=!1,this._paused=!0),this.tickCurrentTime(e,!0),this.timeline.applyDirtiedAnimation(this))}}},{key:"startTime",get:function(){return this._startTime},set:function(e){if(e!==null){if(this.updatePromises(),e=Number(e),isNaN(e)||this._paused||this._idle)return;this._startTime=e,this.tickCurrentTime((Number(this.timeline.currentTime)-this._startTime)*this.playbackRate),this.timeline.applyDirtiedAnimation(this),this.updatePromises()}}},{key:"playbackRate",get:function(){return this._playbackRate},set:function(e){if(e!==this._playbackRate){this.updatePromises();var n=this.currentTime;this._playbackRate=e,this.startTime=null,this.playState!=="paused"&&this.playState!=="idle"&&(this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this)),n!==null&&(this.currentTime=n),this.updatePromises()}}},{key:"_isFinished",get:function(){return!this._idle&&(this._playbackRate>0&&Number(this._currentTime)>=this._totalDuration||this._playbackRate<0&&Number(this._currentTime)<=0)}},{key:"totalDuration",get:function(){return this._totalDuration}},{key:"_needsTick",get:function(){return this.pending||this.playState==="running"||!this._finishedFlag}},{key:"updatePromises",value:function(){var e;if((e=this.effect.target)!==null&&e!==void 0&&e.destroyed)return this.readyPromise=void 0,this.finishedPromise=void 0,!1;var n=this.oldPlayState,i=this.pending?"pending":this.playState;return this.readyPromise&&i!==n&&(i==="idle"?(this.rejectReadyPromise(),this.readyPromise=void 0):n==="pending"?this.resolveReadyPromise():i==="pending"&&(this.readyPromise=void 0)),this.finishedPromise&&i!==n&&(i==="idle"?(this.rejectFinishedPromise(),this.finishedPromise=void 0):i==="finished"?this.resolveFinishedPromise():n==="finished"&&(this.finishedPromise=void 0)),this.oldPlayState=i,this.readyPromise||this.finishedPromise}},{key:"play",value:function(){this.updatePromises(),this._paused=!1,(this._isFinished||this._idle)&&(this.rewind(),this._startTime=null),this._finishedFlag=!1,this._idle=!1,this.ensureAlive(),this.timeline.applyDirtiedAnimation(this),this.timeline.animations.indexOf(this)===-1&&this.timeline.animations.push(this),this.updatePromises()}},{key:"pause",value:function(){this.updatePromises(),this.currentTime&&(this._holdTime=this.currentTime),!this._isFinished&&!this._paused&&!this._idle?this.currentTimePending=!0:this._idle&&(this.rewind(),this._idle=!1),this._startTime=null,this._paused=!0,this.updatePromises()}},{key:"finish",value:function(){this.updatePromises(),!this._idle&&(this.currentTime=this._playbackRate>0?this._totalDuration:0,this._startTime=this._totalDuration-this.currentTime,this.currentTimePending=!1,this.timeline.applyDirtiedAnimation(this),this.updatePromises())}},{key:"cancel",value:function(){var e=this;if(this.updatePromises(),!!this._inEffect&&(this._inEffect=!1,this._idle=!0,this._paused=!1,this._finishedFlag=!0,this._currentTime=0,this._startTime=null,this.effect.update(null),this.timeline.applyDirtiedAnimation(this),this.updatePromises(),this.oncancel)){var n=new Ic(null,this,this.currentTime,null);setTimeout(function(){e.oncancel(n)})}}},{key:"reverse",value:function(){this.updatePromises();var e=this.currentTime;this.playbackRate*=-1,this.play(),e!==null&&(this.currentTime=e),this.updatePromises()}},{key:"updatePlaybackRate",value:function(e){this.playbackRate=e}},{key:"targetAnimations",value:function(){var e,n=(e=this.effect)===null||e===void 0?void 0:e.target;return n.getAnimations()}},{key:"markTarget",value:function(){var e=this.targetAnimations();e.indexOf(this)===-1&&e.push(this)}},{key:"unmarkTarget",value:function(){var e=this.targetAnimations(),n=e.indexOf(this);n!==-1&&e.splice(n,1)}},{key:"tick",value:function(e,n){!this._idle&&!this._paused&&(this._startTime===null?n&&(this.startTime=e-this._currentTime/this.playbackRate):this._isFinished||this.tickCurrentTime((e-this._startTime)*this.playbackRate)),n&&(this.currentTimePending=!1,this.fireEvents(e))}},{key:"rewind",value:function(){if(this.playbackRate>=0)this.currentTime=0;else if(this._totalDuration<1/0)this.currentTime=this._totalDuration;else throw new Error("Unable to rewind negative playback rate animation with infinite duration")}},{key:"persist",value:function(){throw new Error(Gt)}},{key:"addEventListener",value:function(e,n,i){throw new Error(Gt)}},{key:"removeEventListener",value:function(e,n,i){throw new Error(Gt)}},{key:"dispatchEvent",value:function(e){throw new Error(Gt)}},{key:"commitStyles",value:function(){throw new Error(Gt)}},{key:"ensureAlive",value:function(){if(this.playbackRate<0&&this.currentTime===0){var e;this._inEffect=!!((e=this.effect)!==null&&e!==void 0&&e.update(-1))}else{var n;this._inEffect=!!((n=this.effect)!==null&&n!==void 0&&n.update(this.currentTime))}!this._inTimeline&&(this._inEffect||!this._finishedFlag)&&(this._inTimeline=!0,this.timeline.animations.push(this))}},{key:"tickCurrentTime",value:function(e,n){e!==this._currentTime&&(this._currentTime=e,this._isFinished&&!n&&(this._currentTime=this._playbackRate>0?this._totalDuration:0),this.ensureAlive())}},{key:"fireEvents",value:function(e){var n=this;if(this._isFinished){if(!this._finishedFlag){if(this.onfinish){var i=new Ic(null,this,this.currentTime,e);setTimeout(function(){n.onfinish&&n.onfinish(i)})}this._finishedFlag=!0}}else{if(this.onframe&&this.playState==="running"){var a=new Ic(null,this,this.currentTime,e);this.onframe(a)}this._finishedFlag=!1}}}])}(),RR=4,NR=.001,IR=1e-7,jR=10,Ma=11,Qo=1/(Ma-1),DR=typeof Float32Array=="function",U0=function(r,e){return 1-3*e+3*r},q0=function(r,e){return 3*e-6*r},K0=function(r){return 3*r},Js=function(r,e,n){return((U0(e,n)*r+q0(e,n))*r+K0(e))*r},Z0=function(r,e,n){return 3*U0(e,n)*r*r+2*q0(e,n)*r+K0(e)},BR=function(r,e,n,i,a){var o,s,l=0;do s=e+(n-e)/2,o=Js(s,i,a)-r,o>0?n=s:e=s;while(Math.abs(o)>IR&&++l<jR);return s},FR=function(r,e,n,i){for(var a=0;a<RR;++a){var o=Z0(e,n,i);if(o===0)return e;var s=Js(e,n,i)-r;e-=s/o}return e},Uf=function(r,e,n,i){if(!(r>=0&&r<=1&&n>=0&&n<=1))throw new Error("bezier x values must be in [0, 1] range");if(r===e&&n===i)return function(l){return l};for(var a=DR?new Float32Array(Ma):new Array(Ma),o=0;o<Ma;++o)a[o]=Js(o*Qo,r,n);var s=function(c){for(var u=0,f=1,d=Ma-1;f!==d&&a[f]<=c;++f)u+=Qo;--f;var h=(c-a[f])/(a[f+1]-a[f]),p=u+h*Qo,v=Z0(p,r,n);return v>=NR?FR(c,p,r,n):v===0?p:BR(c,u,u+Qo,r,n)};return function(l){return l===0||l===1?l:Js(s(l),e,i)}},$R=function(r){return r=r.replace(/([A-Z])/g,function(e){return"-".concat(e.toLowerCase())}),r.charAt(0)==="-"?r.substring(1):r},Jo=function(r){return Math.pow(r,2)},ts=function(r){return Math.pow(r,3)},es=function(r){return Math.pow(r,4)},ns=function(r){return Math.pow(r,5)},rs=function(r){return Math.pow(r,6)},is=function(r){return 1-Math.cos(r*Math.PI/2)},as=function(r){return 1-Math.sqrt(1-r*r)},os=function(r){return r*r*(3*r-2)},ss=function(r){for(var e,n=4;r<((e=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((e*3-2)/22-r,2)},ls=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=bt(e,2),i=n[0],a=i===void 0?1:i,o=n[1],s=o===void 0?.5:o,l=be(Number(a),1,10),c=be(Number(s),.1,2);return r===0||r===1?r:-l*Math.pow(2,10*(r-1))*Math.sin((r-1-c/(Math.PI*2)*Math.asin(1/l))*(Math.PI*2)/c)},Ea=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=arguments.length>2?arguments[2]:void 0,i=bt(e,4),a=i[0],o=a===void 0?1:a,s=i[1],l=s===void 0?100:s,c=i[2],u=c===void 0?10:c,f=i[3],d=f===void 0?0:f;o=be(o,.1,1e3),l=be(l,.1,1e3),u=be(u,.1,1e3),d=be(d,.1,1e3);var h=Math.sqrt(l/o),p=u/(2*Math.sqrt(l*o)),v=p<1?h*Math.sqrt(1-p*p):0,g=1,m=p<1?(p*h+-d)/v:-d+h,y=n?n*r/1e3:r;return p<1?y=Math.exp(-y*p*h)*(g*Math.cos(v*y)+m*Math.sin(v*y)):y=(g+m*y)*Math.exp(-y*h),r===0||r===1?r:1-y},jc=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=e,i=bt(n,2),a=i[0],o=a===void 0?10:a,s=i[1],l=s==="start"?Math.ceil:Math.floor;return l(be(r,0,1)*o)/o},kp=function(r){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],n=bt(e,4),i=n[0],a=n[1],o=n[2],s=n[3];return Uf(i,a,o,s)(r)},cs=Uf(.42,0,1,1),un=function(r){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return 1-r(1-e,n,i)}},fn=function(r){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return e<.5?r(e*2,n,i)/2:1-r(e*-2+2,n,i)/2}},dn=function(r){return function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=arguments.length>2?arguments[2]:void 0;return e<.5?(1-r(1-e*2,n,i))/2:(r(e*2-1,n,i)+1)/2}},Ep={steps:jc,"step-start":function(r){return jc(r,[1,"start"])},"step-end":function(r){return jc(r,[1,"end"])},linear:function(r){return r},"cubic-bezier":kp,ease:function(r){return kp(r,[.25,.1,.25,1])},in:cs,out:un(cs),"in-out":fn(cs),"out-in":dn(cs),"in-quad":Jo,"out-quad":un(Jo),"in-out-quad":fn(Jo),"out-in-quad":dn(Jo),"in-cubic":ts,"out-cubic":un(ts),"in-out-cubic":fn(ts),"out-in-cubic":dn(ts),"in-quart":es,"out-quart":un(es),"in-out-quart":fn(es),"out-in-quart":dn(es),"in-quint":ns,"out-quint":un(ns),"in-out-quint":fn(ns),"out-in-quint":dn(ns),"in-expo":rs,"out-expo":un(rs),"in-out-expo":fn(rs),"out-in-expo":dn(rs),"in-sine":is,"out-sine":un(is),"in-out-sine":fn(is),"out-in-sine":dn(is),"in-circ":as,"out-circ":un(as),"in-out-circ":fn(as),"out-in-circ":dn(as),"in-back":os,"out-back":un(os),"in-out-back":fn(os),"out-in-back":dn(os),"in-bounce":ss,"out-bounce":un(ss),"in-out-bounce":fn(ss),"out-in-bounce":dn(ss),"in-elastic":ls,"out-elastic":un(ls),"in-out-elastic":fn(ls),"out-in-elastic":dn(ls),spring:Ea,"spring-in":Ea,"spring-out":un(Ea),"spring-in-out":fn(Ea),"spring-out-in":dn(Ea)},zR=function(r){return $R(r).replace(/^ease-/,"").replace(/(\(|\s).+/,"").toLowerCase().trim()},GR=function(r){return Ep[zR(r)]||Ep.linear},WR=function(r){return r},YR=1,HR=.5,_p=0;function Ap(t,r){return function(e){if(e>=1)return 1;var n=1/t;return e+=r*n,e-e%n}}var us="\\s*(-?\\d+\\.?\\d*|-?\\.\\d+)\\s*",VR=new RegExp("cubic-bezier\\(".concat(us,",").concat(us,",").concat(us,",").concat(us,"\\)")),XR=/steps\(\s*(\d+)\s*\)/,UR=/steps\(\s*(\d+)\s*,\s*(start|middle|end)\s*\)/;function qf(t){var r=VR.exec(t);if(r)return Uf.apply(void 0,Tt(r.slice(1).map(Number)));var e=XR.exec(t);if(e)return Ap(Number(e[1]),_p);var n=UR.exec(t);return n?Ap(Number(n[1]),{start:YR,middle:HR,end:_p}[n[2]]):GR(t)}function qR(t){return Math.abs(KR(t)/(t.playbackRate||1))}function KR(t){var r;return t.duration===0||t.iterations===0?0:(t.duration==="auto"?0:Number(t.duration))*((r=t.iterations)!==null&&r!==void 0?r:1)}var Q0=0,Kf=1,Xl=2,J0=3;function ZR(t,r,e){if(r===null)return Q0;var n=e.endTime;return r<Math.min(e.delay,n)?Kf:r>=Math.min(e.delay+t+e.endDelay,n)?Xl:J0}function QR(t,r,e,n,i){switch(n){case Kf:return r==="backwards"||r==="both"?0:null;case J0:return e-i;case Xl:return r==="forwards"||r==="both"?t:null;case Q0:return null}}function JR(t,r,e,n,i){var a=i;return t===0?r!==Kf&&(a+=e):a+=n/t,a}function tN(t,r,e,n,i,a){var o=t===1/0?r%1:t%1;return o===0&&e===Xl&&n!==0&&(i!==0||a===0)&&(o=1),o}function eN(t,r,e,n){return t===Xl&&r===1/0?1/0:e===1?Math.floor(n)-1:Math.floor(n)}function nN(t,r,e){var n=t;if(t!=="normal"&&t!=="reverse"){var i=r;t==="alternate-reverse"&&(i+=1),n="normal",i!==1/0&&i%2!==0&&(n="reverse")}return n==="normal"?e:1-e}function rN(t,r,e){var n=ZR(t,r,e),i=QR(t,e.fill,r,n,e.delay);if(i===null)return null;var a=e.duration==="auto"?0:e.duration,o=JR(a,n,e.iterations,i,e.iterationStart),s=tN(o,e.iterationStart,n,e.iterations,i,a),l=eN(n,e.iterations,s,o),c=nN(e.direction,l,s);return e.currentIteration=l,e.progress=c,e.easingFunction(c)}function iN(t,r,e){var n=aN(t,r),i=oN(n,e);return function(a,o){if(o!==null)i.filter(function(l){return o>=l.applyFrom&&o<l.applyTo}).forEach(function(l){var c=o-l.startOffset,u=l.endOffset-l.startOffset,f=u===0?0:c/u;a.setAttribute(l.property,l.interpolation(f),!1,!1)});else for(var s in n)tb(s)&&a.setAttribute(s,null)}}function tb(t){return t!=="offset"&&t!=="easing"&&t!=="composite"&&t!=="computedOffset"}function aN(t,r){for(var e={},n=0;n<t.length;n++)for(var i in t[n])if(tb(i)){var a={offset:t[n].offset,computedOffset:t[n].computedOffset,easing:t[n].easing,easingFunction:qf(t[n].easing)||r.easingFunction,value:t[n][i]};e[i]=e[i]||[],e[i].push(a)}return e}function oN(t,r){var e=[];for(var n in t)for(var i=t[n],a=0;a<i.length-1;a++){var o=a,s=a+1,l=i[o].computedOffset,c=i[s].computedOffset,u=l,f=c;a===0&&(u=-1/0,c===0&&(s=o)),a===i.length-2&&(f=1/0,l===1&&(o=s)),e.push({applyFrom:u,applyTo:f,startOffset:i[o].computedOffset,endOffset:i[s].computedOffset,easingFunction:i[o].easingFunction,property:n,interpolation:sN(n,i[o].value,i[s].value,r)})}return e.sort(function(d,h){return d.startOffset-h.startOffset}),e}var Tp=function(r,e,n){return function(i){var a=eb(r,e,i);return re(a)?a:n(a)}};function sN(t,r,e,n){var i=C0[t];if(i&&i.syntax&&i.int){var a=K.styleValueRegistry.getPropertySyntax(i.syntax);if(a){var o=a.parser,s=o?o(r,n):r,l=o?o(e,n):e,c=a.mixer(s,l,n);if(c){var u=Tp.apply(void 0,Tt(c));return function(f){return f===0?r:f===1?e:u(f)}}}}return Tp(!1,!0,function(f){return f?e:r})}function eb(t,r,e){if(typeof t=="number"&&typeof r=="number")return t*(1-e)+r*e;if(typeof t=="boolean"&&typeof r=="boolean"||typeof t=="string"&&typeof r=="string")return e<.5?t:r;if(Array.isArray(t)&&Array.isArray(r)){for(var n=t.length,i=r.length,a=Math.max(n,i),o=[],s=0;s<a;s++)o.push(eb(t[s<n?s:n-1],r[s<i?s:i-1],e));return o}throw new Error("Mismatched interpolation arguments ".concat(t,":").concat(r))}var lN=function(){function t(){Q(this,t),this.delay=0,this.direction="normal",this.duration="auto",this._easing="linear",this.easingFunction=WR,this.endDelay=0,this.fill="auto",this.iterationStart=0,this.iterations=1,this.currentIteration=null,this.progress=null}return Z(t,[{key:"easing",get:function(){return this._easing},set:function(e){this.easingFunction=qf(e),this._easing=e}}])}();function cN(t){var r=[];for(var e in t)if(!(e in["easing","offset","composite"])){var n=t[e];Array.isArray(n)||(n=[n]);for(var i=n.length,a=0;a<i;a++){if(!r[a]){var o={};"offset"in t&&(o.offset=Number(t.offset)),"easing"in t&&(o.easing=t.easing),"composite"in t&&(o.composite=t.composite),r[a]=o}n[a]!==void 0&&n[a]!==null&&(r[a][e]=n[a])}}return r.sort(function(s,l){return(s.computedOffset||0)-(l.computedOffset||0)}),r}function Mp(t,r){if(t===null)return[];Array.isArray(t)||(t=cN(t));for(var e=t.map(function(l){var c={};r!=null&&r.composite&&(c.composite="auto");for(var u in l){var f=l[u];if(u==="offset"){if(f!==null){if(f=Number(f),!isFinite(f))throw new Error("Keyframe offsets must be numbers.");if(f<0||f>1)throw new Error("Keyframe offsets must be between 0 and 1.");c.computedOffset=f}}else if(u==="composite"&&["replace","add","accumulate","auto"].indexOf(f)===-1)throw new Error("".concat(f," compositing is not supported"));c[u]=f}return c.offset===void 0&&(c.offset=null),c.easing===void 0&&(c.easing=(r==null?void 0:r.easing)||"linear"),c.composite===void 0&&(c.composite="auto"),c}),n=!0,i=-1/0,a=0;a<e.length;a++){var o=e[a].offset;if(pt(o))n=!1;else{if(o<i)throw new TypeError("Keyframes are not loosely sorted by offset. Sort or specify offsets.");i=o}}e=e.filter(function(l){return Number(l.offset)>=0&&Number(l.offset)<=1});function s(){var l,c=e,u=c.length;if(e[u-1].computedOffset=Number((l=e[u-1].offset)!==null&&l!==void 0?l:1),u>1){var f;e[0].computedOffset=Number((f=e[0].offset)!==null&&f!==void 0?f:0)}for(var d=0,h=Number(e[0].computedOffset),p=1;p<u;p++){var v=e[p].computedOffset;if(!pt(v)&&!pt(h)){for(var g=1;g<p-d;g++)e[d+g].computedOffset=h+(Number(v)-h)*g/(p-d);d=p,h=Number(v)}}}return n||s(),e}var uN="backwards|forwards|both|none".split("|"),fN="reverse|alternate|alternate-reverse".split("|");function dN(t,r){var e=new lN;return typeof t=="number"&&!isNaN(t)?e.duration=t:t!==void 0&&Object.keys(t).forEach(function(n){if(t[n]!==void 0&&t[n]!==null&&t[n]!=="auto"){if((typeof e[n]=="number"||n==="duration")&&(typeof t[n]!="number"||isNaN(t[n]))||n==="fill"&&uN.indexOf(t[n])===-1||n==="direction"&&fN.indexOf(t[n])===-1)return;e[n]=t[n]}}),e}function hN(t,r){return t=pN(t??{duration:"auto"}),dN(t)}function pN(t){return typeof t=="number"&&(isNaN(t)?t={duration:"auto"}:t={duration:t}),t}var vN=function(){function t(r,e,n){var i=this;Q(this,t),this.composite="replace",this.iterationComposite="replace",this.target=r,this.timing=hN(n),this.timing.effect=this,this.timing.activeDuration=qR(this.timing),this.timing.endTime=Math.max(0,this.timing.delay+this.timing.activeDuration+this.timing.endDelay),this.normalizedKeyframes=Mp(e,this.timing),this.interpolations=iN(this.normalizedKeyframes,this.timing,this.target);var a=K.globalThis.Proxy;this.computedTiming=a?new a(this.timing,{get:function(s,l){return l==="duration"?s.duration==="auto"?0:s.duration:l==="fill"?s.fill==="auto"?"none":s.fill:l==="localTime"?i.animation&&i.animation.currentTime||null:l==="currentIteration"?!i.animation||i.animation.playState!=="running"?null:s.currentIteration||0:l==="progress"?!i.animation||i.animation.playState!=="running"?null:s.progress||0:s[l]},set:function(){return!0}}):this.timing}return Z(t,[{key:"applyInterpolations",value:function(){this.interpolations(this.target,Number(this.timeFraction))}},{key:"update",value:function(e){return e===null?!1:(this.timeFraction=rN(this.timing.activeDuration,e,this.timing),this.timeFraction!==null)}},{key:"getKeyframes",value:function(){return this.normalizedKeyframes}},{key:"setKeyframes",value:function(e){this.normalizedKeyframes=Mp(e)}},{key:"getComputedTiming",value:function(){return this.computedTiming}},{key:"getTiming",value:function(){return this.timing}},{key:"updateTiming",value:function(e){var n=this;Object.keys(e||{}).forEach(function(i){n.timing[i]=e[i]})}}])}();function Pp(t,r){return Number(t.id)-Number(r.id)}var gN=function(){function t(r){var e=this;Q(this,t),this.animations=[],this.ticking=!1,this.timelineTicking=!1,this.hasRestartedThisFrame=!1,this.animationsWithPromises=[],this.inTick=!1,this.pendingEffects=[],this.currentTime=null,this.rafId=0,this.rafCallbacks=[],this.webAnimationsNextTick=function(n){e.currentTime=n,e.discardAnimations(),e.animations.length===0?e.timelineTicking=!1:e.requestAnimationFrame(e.webAnimationsNextTick)},this.processRafCallbacks=function(n){var i=e.rafCallbacks;e.rafCallbacks=[],n<Number(e.currentTime)&&(n=Number(e.currentTime)),e.animations.sort(Pp),e.animations=e.tick(n,!0,e.animations)[0],i.forEach(function(a){a[1](n)}),e.applyPendingEffects()},this.document=r}return Z(t,[{key:"getAnimations",value:function(){return this.discardAnimations(),this.animations.slice()}},{key:"isTicking",value:function(){return this.inTick}},{key:"play",value:function(e,n,i){var a=new vN(e,n,i),o=new LR(a,this);return this.animations.push(o),this.restartWebAnimationsNextTick(),o.updatePromises(),o.play(),o.updatePromises(),o}},{key:"applyDirtiedAnimation",value:function(e){var n=this;if(!this.inTick){e.markTarget();var i=e.targetAnimations();i.sort(Pp);var a=this.tick(Number(this.currentTime),!1,i.slice())[1];a.forEach(function(o){var s=n.animations.indexOf(o);s!==-1&&n.animations.splice(s,1)}),this.applyPendingEffects()}}},{key:"restart",value:function(){return this.ticking||(this.ticking=!0,this.requestAnimationFrame(function(){}),this.hasRestartedThisFrame=!0),this.hasRestartedThisFrame}},{key:"destroy",value:function(){this.document.defaultView.cancelAnimationFrame(this.frameId)}},{key:"applyPendingEffects",value:function(){this.pendingEffects.forEach(function(e){e==null||e.applyInterpolations()}),this.pendingEffects=[]}},{key:"updateAnimationsPromises",value:function(){this.animationsWithPromises=this.animationsWithPromises.filter(function(e){return e.updatePromises()})}},{key:"discardAnimations",value:function(){this.updateAnimationsPromises(),this.animations=this.animations.filter(function(e){return e.playState!=="finished"&&e.playState!=="idle"})}},{key:"restartWebAnimationsNextTick",value:function(){this.timelineTicking||(this.timelineTicking=!0,this.requestAnimationFrame(this.webAnimationsNextTick))}},{key:"rAF",value:function(e){var n=this.rafId++;return this.rafCallbacks.length===0&&(this.frameId=this.document.defaultView.requestAnimationFrame(this.processRafCallbacks)),this.rafCallbacks.push([n,e]),n}},{key:"requestAnimationFrame",value:function(e){var n=this;return this.rAF(function(i){n.updateAnimationsPromises(),e(i),n.updateAnimationsPromises()})}},{key:"tick",value:function(e,n,i){var a=this,o,s;this.inTick=!0,this.hasRestartedThisFrame=!1,this.currentTime=e,this.ticking=!1;var l=[],c=[],u=[],f=[];return i.forEach(function(d){d.tick(e,n),d._inEffect?(c.push(d.effect),d.markTarget()):(l.push(d.effect),d.unmarkTarget()),d._needsTick&&(a.ticking=!0);var h=d._inEffect||d._needsTick;d._inTimeline=h,h?u.push(d):f.push(d)}),(o=this.pendingEffects).push.apply(o,l),(s=this.pendingEffects).push.apply(s,c),this.ticking&&this.requestAnimationFrame(function(){}),this.inTick=!1,[u,f]}}])}();K.EasingFunction=qf;K.AnimationTimeline=gN;function ht(t){return new tl([t],null,t,t.ownerDocument)}let tl=class De{constructor(r=null,e=null,n=null,i=null,a=[null,null,null,null,null],o=[],s=[]){this._elements=Array.from(r),this._data=e,this._parent=n,this._document=i,this._enter=a[0],this._update=a[1],this._exit=a[2],this._merge=a[3],this._split=a[4],this._transitions=o,this._facetElements=s}selectAll(r){const e=typeof r=="string"?this._parent.querySelectorAll(r):r;return new De(e,null,this._elements[0],this._document)}selectFacetAll(r){const e=typeof r=="string"?this._parent.querySelectorAll(r):r;return new De(this._elements,null,this._parent,this._document,void 0,void 0,e)}select(r){const e=typeof r=="string"?this._parent.querySelectorAll(r)[0]||null:r;return new De([e],null,e,this._document)}append(r){const e=typeof r=="function"?r:()=>this.createElement(r),n=[];if(this._data!==null){for(let i=0;i<this._data.length;i++){const a=this._data[i],[o,s]=Array.isArray(a)?a:[a,null],l=e(o,i);l.__data__=o,s!==null&&(l.__fromElements__=s),this._parent.appendChild(l),n.push(l)}return new De(n,null,this._parent,this._document)}else{for(let i=0;i<this._elements.length;i++){const a=this._elements[i],o=a.__data__,s=e(o,i);a.appendChild(s),n.push(s)}return new De(n,null,n[0],this._document)}}maybeAppend(r,e,n){const i=this._elements[0],a=i.getElementById(r);if(a)return new De([a],null,this._parent,this._document);const o=typeof e=="string"?this.createElement(e):e();return o.id=r,n&&(o.className=n),i.appendChild(o),new De([o],null,this._parent,this._document)}data(r,e=i=>i,n=()=>null){const i=[],a=[],o=new Set(this._elements),s=[],l=new Set,c=new Map(this._elements.map((h,p)=>[e(h.__data__,p),h])),u=new Map(this._facetElements.map((h,p)=>[e(h.__data__,p),h])),f=Kt(this._elements,h=>n(h.__data__));for(let h=0;h<r.length;h++){const p=r[h],v=e(p,h),g=n(p,h);if(c.has(v)){const m=c.get(v);m.__data__=p,m.__facet__=!1,a.push(m),o.delete(m),c.delete(v)}else if(u.has(v)){const m=u.get(v);m.__data__=p,m.__facet__=!0,a.push(m),u.delete(v)}else if(f.has(v)){const m=f.get(v);s.push([p,m]);for(const y of m)o.delete(y);f.delete(v)}else if(c.has(g)){const m=c.get(g);m.__toData__?m.__toData__.push(p):m.__toData__=[p],l.add(m),o.delete(m)}else i.push(p)}const d=[new De([],i,this._parent,this._document),new De(a,null,this._parent,this._document),new De(o,null,this._parent,this._document),new De([],s,this._parent,this._document),new De(l,null,this._parent,this._document)];return new De(this._elements,null,this._parent,this._document,d)}merge(r){const e=[...this._elements,...r._elements],n=[...this._transitions,...r._transitions];return new De(e,null,this._parent,this._document,void 0,n)}createElement(r){if(this._document)return this._document.createElement(r,{});const e=De.registry[r];return e?new e:Qi(`Unknown node type: ${r}`)}join(r=o=>o,e=o=>o,n=o=>o.remove(),i=o=>o,a=o=>o.remove()){const o=r(this._enter),s=e(this._update),l=n(this._exit),c=i(this._merge),u=a(this._split);return s.merge(o).merge(l).merge(c).merge(u)}remove(){for(let r=0;r<this._elements.length;r++){const e=this._transitions[r];if(e){const n=Array.isArray(e)?e:[e];Promise.all(n.map(i=>i.finished)).then(()=>{this._elements[r].remove()})}else this._elements[r].remove()}return new De([],null,this._parent,this._document,void 0,this._transitions)}each(r){for(let e=0;e<this._elements.length;e++){const n=this._elements[e],i=n.__data__;r(i,e,n)}return this}attr(r,e){const n=typeof e!="function"?()=>e:e;return this.each(function(i,a,o){e!==void 0&&(o[r]=n(i,a,o))})}style(r,e){const n=typeof e!="function"?()=>e:e;return this.each(function(i,a,o){e!==void 0&&(o.style[r]=n(i,a,o))})}transition(r){const e=typeof r!="function"?()=>r:r,{_transitions:n}=this;return this.each(function(i,a,o){n[a]=e(i,a,o)})}on(r,e){return this.each(function(n,i,a){a.addEventListener(r,e)}),this}call(r,...e){return r(this,...e),this}node(){return this._elements[0]}nodes(){return this._elements}transitions(){return this._transitions}parent(){return this._parent}};tl.registry={g:Re,rect:Br,circle:gr,path:Qe,text:Pn,ellipse:Yl,image:Hl,line:ki,polygon:ha,polyline:Vl,html:Eo};function fs(t,r,e){return Math.max(r,Math.min(t,e))}function el(t,r=10){return typeof t!="number"||Math.abs(t)<1e-15?t:parseFloat(t.toFixed(r))}function ct(t,r){for(const[e,n]of Object.entries(r))t.style(e,n)}function mN(t,r){return r.forEach((e,n)=>n===0?t.moveTo(e[0],e[1]):t.lineTo(e[0],e[1])),t.closePath(),t}function yN(t,r,e){const{arrowSize:n}=e,i=typeof n=="string"?+parseFloat(n)/100*ue(t,r):n,a=Math.PI/6,o=Math.atan2(r[1]-t[1],r[0]-t[0]),s=Math.PI/2-o-a,l=[r[0]-i*Math.sin(s),r[1]-i*Math.cos(s)],c=o-a,u=[r[0]-i*Math.cos(c),r[1]-i*Math.sin(c)];return[l,u]}function Ja(t,r,e,n,i){const a=xn(ye(n,r))+Math.PI,o=xn(ye(n,e))+Math.PI;return t.arc(n[0],n[1],i,a,o,o-a<0),t}function nb(t,r,e,n="y",i="between",a=!1){const o=(g,m)=>g==="y"||g===!0?m?180:90:m?90:0,s=n==="y"||n===!0?e:r,l=o(n,a),c=Oi(s),[u,f]=ua(c,g=>s[g]),d=new Zt({domain:[u,f],range:[0,100]}),h=g=>re(s[g])&&!Number.isNaN(s[g])?d.map(s[g]):0,p={between:g=>`${t[g]} ${h(g)}%`,start:g=>g===0?`${t[g]} ${h(g)}%`:`${t[g-1]} ${h(g)}%, ${t[g]} ${h(g)}%`,end:g=>g===t.length-1?`${t[g]} ${h(g)}%`:`${t[g]} ${h(g)}%, ${t[g+1]} ${h(g)}%`},v=c.sort((g,m)=>h(g)-h(m)).map(p[i]||p.between).join(",");return`linear-gradient(${l}deg, ${v})`}function Ul(t){const[r,e,n,i]=t;return[i,r,e,n]}function Ei(t,r,e){const[n,i,,a]=Qt(t)?Ul(r):r,[o,s]=e,l=t.getCenter(),c=ta(ye(n,l)),u=ta(ye(i,l)),f=u===c&&o!==s?u+Math.PI*2:u,d=1e-4;return{startAngle:c+d,endAngle:(f-c>=0?f:Math.PI*2+f)-d,innerRadius:ue(a,l),outerRadius:ue(n,l)}}function Zf(t){const{colorAttribute:r,opacityAttribute:e=r}=t;return`${e}Opacity`}function rb(t,r){if(!$t(t))return"";const e=t.getCenter(),{transform:n}=r;return`translate(${e[0]}, ${e[1]}) ${n||""}`}function Qf(t){if(t.length===1)return t[0];const[[r,e,n=0],[i,a,o=0]]=t;return[(r+i)/2,(e+a)/2,(n+o)/2]}var Ts=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function ib(t,r,e,n,i={}){const{inset:a=0,radius:o=0,insetLeft:s=a,insetTop:l=a,insetRight:c=a,insetBottom:u=a,radiusBottomLeft:f=o,radiusBottomRight:d=o,radiusTopLeft:h=o,radiusTopRight:p=o,minWidth:v=-1/0,maxWidth:g=1/0,minHeight:m=-1/0}=i,y=Ts(i,["inset","radius","insetLeft","insetTop","insetRight","insetBottom","radiusBottomLeft","radiusBottomRight","radiusTopLeft","radiusTopRight","minWidth","maxWidth","minHeight"]);if(!$t(n)&&!o0(n)){const k=!!Qt(n),[E,,_]=k?Ul(r):r,[A,M]=E,[T,C]=ye(_,E),I=T>0?A:A+T,R=C>0?M:M+C,L=Math.abs(T),P=Math.abs(C),N=I+s,j=R+l,B=L-(s+c),F=P-(l+u),$=k?fs(B,m,1/0):fs(B,v,g),W=k?fs(F,v,g):fs(F,m,1/0),G=k?N:N-($-B)/2,Y=k?j-(W-F)/2:j-(W-F);return ht(t.createElement("rect",{})).style("x",G).style("y",Y).style("width",$).style("height",W).style("radius",[h,p,d,f]).call(ct,y).node()}const{y:b,y1:x}=e,O=n.getCenter(),w=Ei(n,r,[b,x]),S=gf().cornerRadius(o).padAngle(a*Math.PI/180);return ht(t.createElement("path",{})).style("d",S(w)).style("transform",`translate(${O[0]}, ${O[1]})`).style("radius",o).style("inset",a).call(ct,y).node()}const _o=(t,r)=>{const{colorAttribute:e,opacityAttribute:n="fill",first:i=!0,last:a=!0}=t,o=Ts(t,["colorAttribute","opacityAttribute","first","last"]),{coordinate:s,document:l}=r;return(c,u,f)=>{const{color:d,radius:h=0}=f,p=Ts(f,["color","radius"]),v=p.lineWidth||1,{stroke:g,radius:m=h,radiusTopLeft:y=m,radiusTopRight:b=m,radiusBottomRight:x=m,radiusBottomLeft:O=m,innerRadius:w=0,innerRadiusTopLeft:S=w,innerRadiusTopRight:k=w,innerRadiusBottomRight:E=w,innerRadiusBottomLeft:_=w,lineWidth:A=e==="stroke"||g?v:0,inset:M=0,insetLeft:T=M,insetRight:C=M,insetBottom:I=M,insetTop:R=M,minWidth:L,maxWidth:P,minHeight:N}=o,j=Ts(o,["stroke","radius","radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft","innerRadius","innerRadiusTopLeft","innerRadiusTopRight","innerRadiusBottomRight","innerRadiusBottomLeft","lineWidth","inset","insetLeft","insetRight","insetBottom","insetTop","minWidth","maxWidth","minHeight"]),{color:B=d,opacity:F}=u,$=[i?y:S,i?b:k,a?x:E,a?O:_],W=["radiusTopLeft","radiusTopRight","radiusBottomRight","radiusBottomLeft"];Qt(s)&&W.push(W.shift());const G=Object.assign(Object.assign({radius:m},Object.fromEntries(W.map((Y,V)=>[Y,$[V]]))),{inset:M,insetLeft:T,insetRight:C,insetBottom:I,insetTop:R,minWidth:L,maxWidth:P,minHeight:N});return ht(ib(l,c,u,s,G)).call(ct,p).style("fill","transparent").style(e,B).style(Zf(t),F).style("lineWidth",A).style("stroke",g===void 0?B:g).call(ct,j).node()}};_o.props={defaultEnterAnimation:"scaleInY",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const _i=(t,r)=>_o(Object.assign({colorAttribute:"fill"},t),r);_i.props=Object.assign(Object.assign({},_o.props),{defaultMarker:"square"});const ql=(t,r)=>_o(Object.assign({colorAttribute:"stroke"},t),r);ql.props=Object.assign(Object.assign({},_o.props),{defaultMarker:"hollowSquare"});var Cp=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function bN(t,r,e){const[n,i,a,o]=t;if(Qt(e)){const c=[r?r[0][0]:i[0],i[1]],u=[r?r[3][0]:a[0],a[1]];return[n,c,u,o]}const s=[i[0],r?r[0][1]:i[1]],l=[a[0],r?r[3][1]:a[1]];return[n,s,l,o]}const Jf=(t,r)=>{const{adjustPoints:e=bN}=t,n=Cp(t,["adjustPoints"]),{coordinate:i,document:a}=r;return(o,s,l,c)=>{const{index:u}=s,{color:f}=l,d=Cp(l,["color"]),h=c[u+1],p=e(o,h,i),v=!!Qt(i),[g,m,y,b]=v?Ul(p):p,{color:x=f,opacity:O}=s,w=po().curve(mf)([g,m,y,b]);return ht(a.createElement("path",{})).call(ct,d).style("d",w).style("fill",x).style("fillOpacity",O).call(ct,n).node()}};Jf.props={defaultMarker:"square"};function xN(t,r,e){const[n,i,a,o]=t;if(Qt(e)){const c=[r?r[0][0]:(i[0]+a[0])/2,i[1]],u=[r?r[3][0]:(i[0]+a[0])/2,a[1]];return[n,c,u,o]}const s=[i[0],r?r[0][1]:(i[1]+a[1])/2],l=[a[0],r?r[3][1]:(i[1]+a[1])/2];return[n,s,l,o]}const ab=(t,r)=>Jf(Object.assign({adjustPoints:xN},t),r);ab.props={defaultMarker:"square"};function ra(t){const r=typeof t=="function"?t:t.render;return class extends Wl{connectedCallback(){this.draw()}attributeChangedCallback(){this.draw()}draw(){r(this)}}}var Lp=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const ON=ra(t=>{const{d1:r,d2:e,style1:n,style2:i}=t.attributes,a=t.ownerDocument;ht(t).maybeAppend("line",()=>a.createElement("path",{})).style("d",r).call(ct,n),ht(t).maybeAppend("line1",()=>a.createElement("path",{})).style("d",e).call(ct,i)});function wN(t,r){const e=[],n=[];let i=!1,a=null;for(const o of t)!r(o[0])||!r(o[1])?i=!0:(e.push(o),i&&(i=!1,n.push([a,o])),a=o);return[e,n]}const wn=(t,r)=>{const{curve:e,gradient:n=!1,gradientColor:i="between",defined:a=u=>!Number.isNaN(u)&&u!==void 0&&u!==null,connect:o=!1}=t,s=Lp(t,["curve","gradient","gradientColor","defined","connect"]),{coordinate:l,document:c}=r;return(u,f,d)=>{const{color:h,lineWidth:p}=d,v=Lp(d,["color","lineWidth"]),{color:g=h,size:m=p,seriesColor:y,seriesX:b,seriesY:x}=f,O=rb(l,f),w=Qt(l),S=n&&y?nb(y,b,x,n,i,w):g,k=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},v),S&&{stroke:S}),m&&{lineWidth:m}),O&&{transform:O}),s);let E;if($t(l)){const I=l.getCenter();E=R=>aE().angle((L,P)=>ta(ye(R[P],I))).radius((L,P)=>ue(R[P],I)).defined(([L,P])=>a(L)&&a(P)).curve(e)(R)}else E=po().x(I=>I[0]).y(I=>I[1]).defined(([I,R])=>a(I)&&a(R)).curve(e);const[_,A]=wN(u,a),M=et(k,"connect"),T=!!A.length;if(!T||o&&!Object.keys(M).length)return ht(c.createElement("path",{})).style("d",E(_)||[]).call(ct,k).node();if(T&&!o)return ht(c.createElement("path",{})).style("d",E(u)).call(ct,k).node();const C=I=>I.map(E).join(",");return ht(new ON).style("style1",Object.assign(Object.assign({},k),M)).style("style2",k).style("d1",C(A)).style("d2",E(u)).node()}};wn.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const ob=(t,r)=>{const{coordinate:e}=r;return(...n)=>{const i=$t(e)?mf:lm;return wn(Object.assign({curve:i},t),r)(...n)}};ob.props=Object.assign(Object.assign({},wn.props),{defaultMarker:"line"});var SN=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const sb=(t,r)=>{const e=SN(t,[]),{coordinate:n}=r;return(...i)=>{const a=$t(n)?cm:Qt(n)?um:fm;return wn(Object.assign({curve:a},e),r)(...i)}};sb.props=Object.assign(Object.assign({},wn.props),{defaultMarker:"smooth"});const lb=(t,r)=>wn(Object.assign({curve:dm},t),r);lb.props=Object.assign(Object.assign({},wn.props),{defaultMarker:"hv"});const cb=(t,r)=>wn(Object.assign({curve:hm},t),r);cb.props=Object.assign(Object.assign({},wn.props),{defaultMarker:"vh"});const ub=(t,r)=>wn(Object.assign({curve:pm},t),r);ub.props=Object.assign(Object.assign({},wn.props),{defaultMarker:"hvh"});var kN=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function EN(t,r,e,n,i){const a=ye(e,r),o=xn(a),s=o+Math.PI/2,l=[n/2*Math.cos(s),n/2*Math.sin(s)],c=[i/2*Math.cos(s),i/2*Math.sin(s)],u=[i/2*Math.cos(o),i/2*Math.sin(o)],f=[n/2*Math.cos(o),n/2*Math.sin(o)],d=$o(r,l),h=$o(e,c),p=$o(h,u),v=$o(e,u),g=ye(v,c),m=ye(e,c),y=ye(r,l),b=ye(y,f),x=ye(r,f),O=ye(d,f);t.moveTo(...d),t.lineTo(...h),t.arcTo(...p,...v,i/2),t.arcTo(...g,...m,i/2),t.lineTo(...y),t.arcTo(...b,...x,n/2),t.arcTo(...O,...d,n/2),t.closePath()}const fb=(t,r)=>{const{document:e}=r;return(n,i,a)=>{const{seriesSize:o,color:s}=i,{color:l}=a,c=kN(a,["color"]),u=Nn();for(let f=0;f<n.length-1;f++){const d=n[f],h=n[f+1],p=o[f],v=o[f+1];[...d,...h].every(qt)&&EN(u,d,h,p,v)}return ht(e.createElement("path",{})).call(ct,c).style("fill",s||l).style("d",u.toString()).call(ct,t).node()}};fb.props=Object.assign(Object.assign({},wn.props),{defaultMarker:"line"});var _N=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const td=(t,r,e)=>[["M",t-e,r],["A",e,e,0,1,0,t+e,r],["A",e,e,0,1,0,t-e,r],["Z"]];td.style=["fill"];const db=td.bind(void 0);db.style=["stroke","lineWidth"];const Kl=(t,r,e)=>[["M",t-e,r-e],["L",t+e,r-e],["L",t+e,r+e],["L",t-e,r+e],["Z"]];Kl.style=["fill"];const hb=Kl.bind(void 0);hb.style=["fill"];const pb=Kl.bind(void 0);pb.style=["stroke","lineWidth"];const ed=(t,r,e)=>{const n=e*.618;return[["M",t-n,r],["L",t,r-e],["L",t+n,r],["L",t,r+e],["Z"]]};ed.style=["fill"];const vb=ed.bind(void 0);vb.style=["stroke","lineWidth"];const nd=(t,r,e)=>{const n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r+n],["L",t,r-n],["L",t+e,r+n],["Z"]]};nd.style=["fill"];const gb=nd.bind(void 0);gb.style=["stroke","lineWidth"];const rd=(t,r,e)=>{const n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r-n],["L",t+e,r-n],["L",t,r+n],["Z"]]};rd.style=["fill"];const mb=rd.bind(void 0);mb.style=["stroke","lineWidth"];const id=(t,r,e)=>{const n=e/2*Math.sqrt(3);return[["M",t,r-e],["L",t+n,r-e/2],["L",t+n,r+e/2],["L",t,r+e],["L",t-n,r+e/2],["L",t-n,r-e/2],["Z"]]};id.style=["fill"];const yb=id.bind(void 0);yb.style=["stroke","lineWidth"];const ad=(t,r,e)=>{const n=e-1.5;return[["M",t-e,r-n],["L",t+e,r+n],["L",t+e,r-n],["L",t-e,r+n],["Z"]]};ad.style=["fill"];const bb=ad.bind(void 0);bb.style=["stroke","lineWidth"];const xb=(t,r,e)=>[["M",t,r+e],["L",t,r-e]];xb.style=["stroke","lineWidth"];const Ob=(t,r,e)=>[["M",t-e,r-e],["L",t+e,r+e],["M",t+e,r-e],["L",t-e,r+e]];Ob.style=["stroke","lineWidth"];const wb=(t,r,e)=>[["M",t-e/2,r-e],["L",t+e/2,r-e],["M",t,r-e],["L",t,r+e],["M",t-e/2,r+e],["L",t+e/2,r+e]];wb.style=["stroke","lineWidth"];const Sb=(t,r,e)=>[["M",t-e,r],["L",t+e,r],["M",t,r-e],["L",t,r+e]];Sb.style=["stroke","lineWidth"];const kb=(t,r,e)=>[["M",t-e,r],["L",t+e,r]];kb.style=["stroke","lineWidth"];const od=(t,r,e)=>[["M",t-e,r],["L",t+e,r]];od.style=["stroke","lineWidth"];const Eb=od.bind(void 0);Eb.style=["stroke","lineWidth"];const _b=(t,r,e)=>[["M",t-e,r],["A",e/2,e/2,0,1,1,t,r],["A",e/2,e/2,0,1,0,t+e,r]];_b.style=["stroke","lineWidth"];const Ab=(t,r,e)=>[["M",t-e-1,r-2.5],["L",t,r-2.5],["L",t,r+2.5],["L",t+e+1,r+2.5]];Ab.style=["stroke","lineWidth"];const Tb=(t,r,e)=>[["M",t-e-1,r+2.5],["L",t,r+2.5],["L",t,r-2.5],["L",t+e+1,r-2.5]];Tb.style=["stroke","lineWidth"];const Mb=(t,r,e)=>[["M",t-(e+1),r+2.5],["L",t-e/2,r+2.5],["L",t-e/2,r-2.5],["L",t+e/2,r-2.5],["L",t+e/2,r+2.5],["L",t+e+1,r+2.5]];Mb.style=["stroke","lineWidth"];const Pb=(t,r,e)=>[["M",t-5,r+2.5],["L",t-5,r],["L",t,r],["L",t,r-3],["L",t,r+3],["L",t+6.5,r+3]];Pb.style=["stroke","lineWidth"];const nl=new Map([["bowtie",ad],["cross",Ob],["dash",Eb],["diamond",ed],["dot",od],["hexagon",id],["hollowBowtie",bb],["hollowDiamond",vb],["hollowHexagon",yb],["hollowPoint",db],["hollowSquare",pb],["hollowTriangle",gb],["hollowTriangleDown",mb],["hv",Ab],["hvh",Mb],["hyphen",kb],["line",xb],["plus",Sb],["point",td],["rect",hb],["smooth",_b],["square",Kl],["tick",wb],["triangleDown",rd],["triangle",nd],["vh",Tb],["vhv",Pb]]);function AN(t,r){var{d:e,fill:n,lineWidth:i,path:a,stroke:o,color:s}=r,l=_N(r,["d","fill","lineWidth","path","stroke","color"]);const c=nl.get(t)||nl.get("point");return(...u)=>new Qe({style:Object.assign(Object.assign({},l),{d:c(...u),stroke:c.style.includes("stroke")?s||o:"",fill:c.style.includes("fill")?s||n:"",lineWidth:c.style.includes("lineWidth")?i||i||2:0})})}function sd(t){return t.replace(/-(\w)/g,function(r,e){return e.toUpperCase()})}function TN(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase()}var MN=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Cb(t,r,e,n){if(r.length===1)return;const{size:i}=e;if(t==="fixed")return i;if(t==="normal"||s0(n)){const[[a,o],[s,l]]=r,c=Math.abs((s-a)/2),u=Math.abs((l-o)/2);return Math.max(0,(c+u)/2)}return i}const Mt=(t,r)=>{const{colorAttribute:e,symbol:n,mode:i="auto"}=t,a=MN(t,["colorAttribute","symbol","mode"]),o=nl.get(sd(n))||nl.get("point"),{coordinate:s,document:l}=r;return(c,u,f)=>{const{lineWidth:d,color:h}=f,p=a.stroke?d||1:d,{color:v=h,transform:g,opacity:m}=u,[y,b]=Qf(c),O=Cb(i,c,u,s)||a.r||f.r;return ht(l.createElement("path",{})).call(ct,f).style("fill","transparent").style("d",o(y,b,O)).style("lineWidth",p).style("transform",g).style("transformOrigin",`${y-O} ${b-O}`).style("stroke",v).style(Zf(t),m).style(e,v).call(ct,a).node()}};Mt.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const Lb=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"bowtie"},t),r);Lb.props=Object.assign({defaultMarker:"hollowBowtie"},Mt.props);const Rb=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"diamond"},t),r);Rb.props=Object.assign({defaultMarker:"hollowDiamond"},Mt.props);const Nb=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"hexagon"},t),r);Nb.props=Object.assign({defaultMarker:"hollowHexagon"},Mt.props);const Ib=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"point"},t),r);Ib.props=Object.assign({defaultMarker:"hollowPoint"},Mt.props);const jb=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"square"},t),r);jb.props=Object.assign({defaultMarker:"hollowSquare"},Mt.props);const Db=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"triangle"},t),r);Db.props=Object.assign({defaultMarker:"hollowTriangle"},Mt.props);const Bb=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"triangle-down"},t),r);Bb.props=Object.assign({defaultMarker:"hollowTriangleDown"},Mt.props);var PN=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Fb=(t,r)=>{const{colorAttribute:e,mode:n="auto"}=t,i=PN(t,["colorAttribute","mode"]),{coordinate:a,document:o}=r;return(s,l,c)=>{const{lineWidth:u,color:f}=c,d=i.stroke?u||1:u,{color:h=f,transform:p,opacity:v}=l,[g,m]=Qf(s),b=Cb(n,s,l,a)||i.r||c.r;return ht(o.createElement("circle",{})).call(ct,c).style("fill","transparent").style("cx",g).style("cy",m).style("r",b).style("lineWidth",d).style("transform",p).style("transformOrigin",`${g} ${m}`).style("stroke",h).style(Zf(t),v).style(e,h).call(ct,i).node()}},ld=(t,r)=>Fb(Object.assign({colorAttribute:"fill"},t),r);ld.props={defaultMarker:"circle",defaultEnterAnimation:"fadeIn",defaultExitAnimation:"fadeOut"};const $b=(t,r)=>Fb(Object.assign({colorAttribute:"stroke"},t),r);$b.props=Object.assign({defaultMarker:"hollowPoint"},ld.props);const zb=(t,r)=>Mt(Object.assign({colorAttribute:"fill",symbol:"bowtie"},t),r);zb.props=Object.assign({defaultMarker:"bowtie"},Mt.props);const Gb=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"cross"},t),r);Gb.props=Object.assign({defaultMarker:"cross"},Mt.props);const Wb=(t,r)=>Mt(Object.assign({colorAttribute:"fill",symbol:"diamond"},t),r);Wb.props=Object.assign({defaultMarker:"diamond"},Mt.props);const Yb=(t,r)=>Mt(Object.assign({colorAttribute:"fill",symbol:"hexagon"},t),r);Yb.props=Object.assign({defaultMarker:"hexagon"},Mt.props);const Hb=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"hyphen"},t),r);Hb.props=Object.assign({defaultMarker:"hyphen"},Mt.props);const Vb=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"line"},t),r);Vb.props=Object.assign({defaultMarker:"line"},Mt.props);const Xb=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"plus"},t),r);Xb.props=Object.assign({defaultMarker:"plus"},Mt.props);const Ub=(t,r)=>Mt(Object.assign({colorAttribute:"fill",symbol:"point"},t),r);Ub.props=Object.assign({defaultMarker:"point"},Mt.props);const qb=(t,r)=>Mt(Object.assign({colorAttribute:"fill",symbol:"square"},t),r);qb.props=Object.assign({defaultMarker:"square"},Mt.props);const Kb=(t,r)=>Mt(Object.assign({colorAttribute:"stroke",symbol:"tick"},t),r);Kb.props=Object.assign({defaultMarker:"tick"},Mt.props);const Zb=(t,r)=>Mt(Object.assign({colorAttribute:"fill",symbol:"triangle"},t),r);Zb.props=Object.assign({defaultMarker:"triangle"},Mt.props);const Qb=(t,r)=>Mt(Object.assign({colorAttribute:"fill",symbol:"triangle-down"},t),r);Qb.props=Object.assign({defaultMarker:"triangleDown"},Mt.props);var Rp=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const cd=(t,r)=>{const{arrow:e=!0,arrowSize:n="40%"}=t,i=Rp(t,["arrow","arrowSize"]),{document:a}=r;return(o,s,l)=>{const{defaultColor:c}=l,u=Rp(l,["defaultColor"]),{color:f=c,transform:d}=s,[h,p]=o,v=Nn();if(v.moveTo(...h),v.lineTo(...p),e){const[g,m]=yN(h,p,{arrowSize:n});v.moveTo(...g),v.lineTo(...p),v.lineTo(...m)}return ht(a.createElement("path",{})).call(ct,u).style("d",v.toString()).style("stroke",f).style("transform",d).call(ct,i).node()}};cd.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function Jb(t,r){r(t),t.children&&t.children.forEach(function(e){e&&Jb(e,r)})}function Ao(t){Zl(t,!0)}function Fr(t){Zl(t,!1)}function Zl(t,r){var e=r?"visible":"hidden";Jb(t,function(n){n.attr("visibility",e)})}var CN=function(t){oe(r,t);function r(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=t.apply(this,ut([],D(e),!1))||this;return i.isMutationObserved=!0,i.addEventListener(Et.INSERTED,function(){Fr(i)}),i}return r}(Re);function t1(t){var r=t.appendChild(new CN({class:"offscreen"}));return Fr(r),r}function LN(t){for(var r=t;r;){if(r.className==="offscreen")return!0;r=r.parent}return!1}var ud=function(t){oe(r,t);function r(e){e===void 0&&(e={});var n=e.style,i=Pe(e,["style"]);return t.call(this,J({style:J({text:"",fill:"black",fontFamily:"sans-serif",fontSize:16,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",lineWidth:1,textAlign:"start",textBaseline:"middle"},n)},i))||this}return Object.defineProperty(r.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=t1(this)),this._offscreen},enumerable:!1,configurable:!0}),r.prototype.disconnectedCallback=function(){var e;(e=this._offscreen)===null||e===void 0||e.destroy()},r}(Pn);function ia(t){return t*Math.PI/180}function e1(t){return Number((t*180/Math.PI).toPrecision(5))}var ie=function(){function t(r,e,n,i){r===void 0&&(r=0),e===void 0&&(e=0),n===void 0&&(n=0),i===void 0&&(i=0),this.x=0,this.y=0,this.width=0,this.height=0,this.x=r,this.y=e,this.width=n,this.height=i}return Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y+this.height},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){return this.x},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x+this.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y},enumerable:!1,configurable:!0}),t.fromRect=function(r){return new t(r.x,r.y,r.width,r.height)},t.prototype.toJSON=function(){return{x:this.x,y:this.y,width:this.width,height:this.height,top:this.top,right:this.right,bottom:this.bottom,left:this.left}},t.prototype.isPointIn=function(r,e){return r>=this.left&&r<=this.right&&e>=this.top&&e<=this.bottom},t}();function cn(t,r){return Le(t)?t.apply(void 0,ut([],D(r),!1)):t}var Sn=function(t,r){var e=function(i){return"".concat(r,"-").concat(i)},n=Object.fromEntries(Object.entries(t).map(function(i){var a=D(i,2),o=a[0],s=a[1],l=e(s);return[o,{name:l,class:".".concat(l),id:"#".concat(l),toString:function(){return l}}]}));return Object.assign(n,{prefix:e}),n},RN=5,n1=function(t,r,e,n){e===void 0&&(e=0),n===void 0&&(n=RN),Object.entries(r).forEach(function(i){var a=D(i,2),o=a[0],s=a[1],l=t;Object.prototype.hasOwnProperty.call(r,o)&&(s?pr(s)?(pr(t[o])||(l[o]={}),e<n?n1(t[o],s,e+1,n):l[o]=r[o]):Ge(s)?(l[o]=[],l[o]=l[o].concat(s)):l[o]=s:l[o]=s)})},Cn=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var n=0;n<r.length;n+=1)n1(t,r[n]);return t},NN=function(t){return t!==void 0&&t!=null&&!Number.isNaN(t)},ds,IN=GA(function(t,r){var e=r.fontSize,n=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;return ds||(ds=K.offscreenCanvasCreator.getOrCreateContext(void 0)),ds.font=[a,o,i,"".concat(e,"px"),n].join(" "),ds.measureText(t).width},function(t,r){return[t,Object.values(r||r1(t)).join()].join("")},4096),r1=function(t){var r=t.style.fontFamily||"sans-serif",e=t.style.fontWeight||"normal",n=t.style.fontStyle||"normal",i=t.style.fontVariant,a=t.style.fontSize;return a=typeof a=="object"?a.value:a,{fontSize:a,fontFamily:r,fontWeight:e,fontStyle:n,fontVariant:i}};function i1(t){return t.nodeName==="text"?t:t.nodeName==="g"&&t.children.length===1&&t.children[0].nodeName==="text"?t.children[0]:null}function a1(t,r){var e=i1(t);e&&e.attr(r)}function Iu(t,r,e){e===void 0&&(e="..."),a1(t,{wordWrap:!0,wordWrapWidth:r,maxLines:1,textOverflow:e})}function jN(t,r,e,n){e===void 0&&(e=2),n===void 0&&(n="top"),a1(t,{wordWrap:!0,wordWrapWidth:r,maxLines:e,textBaseline:n})}function rl(t){var r=t.canvas,e=t.touches,n=t.offsetX,i=t.offsetY;if(r){var a=r.x,o=r.y;return[a,o]}if(e){var s=e[0],l=s.clientX,c=s.clientY;return[l,c]}return n&&i?[n,i]:[0,0]}function vi(t){return typeof t=="function"?t():ce(t)||re(t)?new ud({style:{text:String(t)}}):t}function DN(t,r){return t.reduce(function(e,n){return(e[n[r]]=e[n[r]]||[]).push(n),e},{})}function on(t,r,e,n,i){return n===void 0&&(n=!0),i===void 0&&(i=function(a){a.node().removeChildren()}),t?e(r):(n&&i(r),null)}function Be(t,r,e,n,i){return n===void 0&&(n=!0),i===void 0&&(i=!1),n&&t===r||i&&t===e?!0:t>r&&t<e}var BN=function(t,r){return function(e){return t*(1-e)+r*e}};function FN(t,r){var e=r?r.length:0,n=t?Math.min(e,t.length):0;return function(i){var a=new Array(n),o=new Array(e),s=0;for(s=0;s<n;++s)a[s]=fd(t[s],r[s]);for(;s<e;++s)o[s]=r[s];for(s=0;s<n;++s)o[s]=a[s](i);return o}}function $N(t,r){t===void 0&&(t={}),r===void 0&&(r={});var e={},n={};return Object.entries(r).forEach(function(i){var a=D(i,2),o=a[0],s=a[1];o in t?e[o]=fd(t[o],s):n[o]=s}),function(i){return Object.entries(e).forEach(function(a){var o=D(a,2),s=o[0],l=o[1];return n[s]=l(i)}),n}}function fd(t,r){return typeof t=="number"&&typeof r=="number"?BN(t,r):Array.isArray(t)&&Array.isArray(r)?FN(t,r):typeof t=="object"&&typeof r=="object"?$N(t,r):function(e){return t}}function zN(t,r,e,n){if(!n)return t.attr("__keyframe_data__",e),null;var i=n.duration,a=i===void 0?0:i,o=fd(r,e),s=Math.ceil(+a/16),l=new Array(s).fill(0).map(function(c,u,f){return{__keyframe_data__:o(u/(f.length-1))}});return t.animate(l,J({fill:"both"},n))}function Np(t){for(var r=1/0,e=1/0,n=-1/0,i=-1/0,a=0;a<t.length;a++){var o=t[a],s=o.x,l=o.y,c=o.width,u=o.height,f=D([s+c,l+u],2),d=f[0],h=f[1];s<r&&(r=s),l<e&&(e=l),d>n&&(n=d),h>i&&(i=h)}return new ie(r,e,n-r,i-e)}var GN=function(t,r,e){var n=t.width,i=t.height,a=e.flexDirection,o=a===void 0?"row":a;e.flexWrap;var s=e.justifyContent,l=s===void 0?"flex-start":s;e.alignContent;var c=e.alignItems,u=c===void 0?"flex-start":c,f=o==="row",d=o==="row"||o==="column",h=f?d?[1,0]:[-1,0]:d?[0,1]:[0,-1],p=D([0,0],2),v=p[0],g=p[1],m=r.map(function(k){var E,_=k.width,A=k.height,M=D([v,g],2),T=M[0],C=M[1];return E=D([v+_*h[0],g+A*h[1]],2),v=E[0],g=E[1],new ie(T,C,_,A)}),y=Np(m),b={"flex-start":0,"flex-end":f?n-y.width:i-y.height,center:f?(n-y.width)/2:(i-y.height)/2},x=m.map(function(k){var E=k.x,_=k.y,A=ie.fromRect(k);return A.x=f?E+b[l]:E,A.y=f?_:_+b[l],A});Np(x);var O=function(k){var E=D(f?["height",i]:["width",n],2),_=E[0],A=E[1];switch(u){case"flex-start":return 0;case"flex-end":return A-k[_];case"center":return A/2-k[_]/2;default:return 0}},w=x.map(function(k){var E=k.x,_=k.y,A=ie.fromRect(k);return A.x=f?E:E+O(A),A.y=f?_+O(A):_,A}),S=w.map(function(k){var E,_,A=ie.fromRect(k);return A.x+=(E=t.x)!==null&&E!==void 0?E:0,A.y+=(_=t.y)!==null&&_!==void 0?_:0,A});return S},WN=function(t,r,e){return[]};const YN=function(t,r,e){if(r.length===0)return[];var n={flex:GN,grid:WN},i=e.display in n?n[e.display]:null;return(i==null?void 0:i.call(null,t,r,e))||[]};function sr(t,r){return[t[0]*r,t[1]*r]}function Pa(t,r){return[t[0]+r[0],t[1]+r[1]]}function Dc(t,r){return[t[0]-r[0],t[1]-r[1]]}function Kr(t,r){return[Math.min(t[0],r[0]),Math.min(t[1],r[1])]}function Zr(t,r){return[Math.max(t[0],r[0]),Math.max(t[1],r[1])]}function to(t,r){return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}function o1(t){if(t[0]===0&&t[1]===0)return[0,0];var r=Math.sqrt(Math.pow(t[0],2)+Math.pow(t[1],2));return[t[0]/r,t[1]/r]}function HN(t,r){return r?[t[1],-t[0]]:[-t[1],t[0]]}function ju(t,r){return+t.toPrecision(r)}function Ip(t,r){var e={},n=Array.isArray(r)?r:[r];for(var i in t)n.includes(i)||(e[i]=t[i]);return e}function VN(t,r,e,n){var i,a=[],o=!!n,s,l,c=[1/0,1/0],u=[-1/0,-1/0],f,d,h;if(o){i=D(n,2),c=i[0],u=i[1];for(var p=0,v=t.length;p<v;p+=1){var g=t[p];c=Kr(c,g),u=Zr(u,g)}}for(var p=0,m=t.length;p<m;p+=1){var g=t[p];if(p===0)h=g;else if(p===m-1)d=g,a.push(h),a.push(d);else{var y=[p?p-1:m-1,p-1][1];s=t[y],l=t[p+1];var b=[0,0];b=Dc(l,s),b=sr(b,r);var x=to(g,s),O=to(g,l),w=x+O;w!==0&&(x/=w,O/=w);var S=sr(b,-x),k=sr(b,O);d=Pa(g,S),f=Pa(g,k),f=Kr(f,Zr(l,g)),f=Zr(f,Kr(l,g)),S=Dc(f,g),S=sr(S,-x/O),d=Pa(g,S),d=Kr(d,Zr(s,g)),d=Zr(d,Kr(s,g)),k=Dc(g,d),k=sr(k,O/x),f=Pa(g,k),o&&(d=Zr(d,c),d=Kr(d,u),f=Zr(f,c),f=Kr(f,u)),a.push(h),a.push(d),h=f}}return a}function XN(t,r,e){e===void 0&&(e=[[0,0],[1,1]]);for(var n=!1,i=[],a=0,o=t.length;a<o;a+=2)i.push([t[a],t[a+1]]);for(var s=VN(i,.4,n,e),l=i.length,c=[],u,f,d,a=0;a<l-1;a+=1)u=s[a*2],f=s[a*2+1],d=i[a+1],c.push(["C",u[0],u[1],f[0],f[1],d[0],d[1]]);return c}var UN=["$el","cx","cy","d","dx","dy","fill","fillOpacity","filter","fontFamily","fontSize","fontStyle","fontVariant","fontWeight","height","img","increasedLineWidthForHitTesting","innerHTML","isBillboard","billboardRotation","isSizeAttenuation","isClosed","isOverflowing","leading","letterSpacing","lineDash","lineHeight","lineWidth","markerEnd","markerEndOffset","markerMid","markerStart","markerStartOffset","maxLines","metrics","miterLimit","offsetX","offsetY","opacity","path","points","r","radius","rx","ry","shadowColor","src","stroke","strokeOpacity","text","textAlign","textBaseline","textDecorationColor","textDecorationLine","textDecorationStyle","textOverflow","textPath","textPathSide","textPathStartOffset","transform","transformOrigin","visibility","width","wordWrap","wordWrapWidth","x","x1","x2","y","y1","y2","z1","z2","zIndex"];function qN(t){return UN.includes(t)}function jp(t){var r={};for(var e in t)qN(e)&&(r[e]=t[e]);return r}function KN(t,r){if(t.length<=r)return t;for(var e=Math.floor(t.length/r),n=[],i=0;i<t.length;i+=e)n.push(t[i]);return n}function dd(t,r,e){var n=t.getBBox(),i=n.width,a=n.height,o=r/Math.max(i,a);return t.style.transform="scale(".concat(o,")"),o}function ZN(t,r){var e=new Map;return t.forEach(function(n){var i=r(n);e.has(i)||e.set(i,[]),e.get(i).push(n)}),e}function QN(t){throw new Error(t)}var JN=function(){function t(i,a,o,s,l,c,u){i===void 0&&(i=null),a===void 0&&(a=null),o===void 0&&(o=null),s===void 0&&(s=null),l===void 0&&(l=[null,null,null,null,null]),c===void 0&&(c=[]),u===void 0&&(u=[]),r.add(this),this._elements=Array.from(i),this._data=a,this._parent=o,this._document=s,this._enter=l[0],this._update=l[1],this._exit=l[2],this._merge=l[3],this._split=l[4],this._transitions=c,this._facetElements=u}t.prototype.selectAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new e(a,null,this._elements[0],this._document)},t.prototype.selectFacetAll=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i):i;return new e(this._elements,null,this._parent,this._document,void 0,void 0,a)},t.prototype.select=function(i){var a=typeof i=="string"?this._parent.querySelectorAll(i)[0]||null:i;return new e([a],null,a,this._document)},t.prototype.append=function(i){var a=this,o=typeof i=="function"?i:function(){return a.createElement(i)},s=[];if(this._data!==null){for(var l=0;l<this._data.length;l++){var c=this._data[l],u=D(Array.isArray(c)?c:[c,null],2),f=u[0],d=u[1],h=o(f,l);h.__data__=f,d!==null&&(h.__fromElements__=d),this._parent.appendChild(h),s.push(h)}return new e(s,null,this._parent,this._document)}for(var l=0;l<this._elements.length;l++){var p=this._elements[l],f=p.__data__,h=o(f,l);p.appendChild(h),s.push(h)}return new e(s,null,s[0],this._document)},t.prototype.maybeAppend=function(i,a){var o=gc(this,r,"m",n).call(this,i[0]==="#"?i:"#".concat(i),a);return o.attr("id",i),o},t.prototype.maybeAppendByClassName=function(i,a){var o=i.toString(),s=gc(this,r,"m",n).call(this,o[0]==="."?o:".".concat(o),a);return s.attr("className",o),s},t.prototype.maybeAppendByName=function(i,a){var o=gc(this,r,"m",n).call(this,'[name="'.concat(i,'"]'),a);return o.attr("name",i),o},t.prototype.data=function(i,a,o){var s,l;a===void 0&&(a=function(_){return _}),o===void 0&&(o=function(){return null});for(var c=[],u=[],f=new Set(this._elements),d=[],h=new Set,p=new Map(this._elements.map(function(_,A){return[a(_.__data__,A),_]})),v=new Map(this._facetElements.map(function(_,A){return[a(_.__data__,A),_]})),g=ZN(this._elements,function(_){return o(_.__data__)}),m=0;m<i.length;m++){var y=i[m],b=a(y,m),x=o(y,m);if(p.has(b)){var O=p.get(b);O.__data__=y,O.__facet__=!1,u.push(O),f.delete(O),p.delete(b)}else if(v.has(b)){var O=v.get(b);O.__data__=y,O.__facet__=!0,u.push(O),v.delete(b)}else if(g.has(b)){var w=g.get(b);d.push([y,w]);try{for(var S=(s=void 0,fo(w)),k=S.next();!k.done;k=S.next()){var O=k.value;f.delete(O)}}catch(_){s={error:_}}finally{try{k&&!k.done&&(l=S.return)&&l.call(S)}finally{if(s)throw s.error}}g.delete(b)}else if(p.has(x)){var O=p.get(x);O.__toData__?O.__toData__.push(y):O.__toData__=[y],h.add(O),f.delete(O)}else c.push(y)}var E=[new e([],c,this._parent,this._document),new e(u,null,this._parent,this._document),new e(f,null,this._parent,this._document),new e([],d,this._parent,this._document),new e(h,null,this._parent,this._document)];return new e(this._elements,null,this._parent,this._document,E)},t.prototype.merge=function(i){var a=ut(ut([],D(this._elements),!1),D(i._elements),!1),o=ut(ut([],D(this._transitions),!1),D(i._transitions),!1);return new e(a,null,this._parent,this._document,void 0,o)},t.prototype.createElement=function(i){if(this._document)return this._document.createElement(i,{});var a=e.registry[i];return a?new a:QN("Unknown node type: ".concat(i))},t.prototype.join=function(i,a,o,s,l){i===void 0&&(i=function(p){return p}),a===void 0&&(a=function(p){return p}),o===void 0&&(o=function(p){return p.remove()}),s===void 0&&(s=function(p){return p}),l===void 0&&(l=function(p){return p.remove()});var c=i(this._enter),u=a(this._update),f=o(this._exit),d=s(this._merge),h=l(this._split);return u.merge(c).merge(f).merge(d).merge(h)},t.prototype.remove=function(){for(var i=function(s){var l=a._elements[s],c=a._transitions[s];c?c.then(function(){return l.remove()}):l.remove()},a=this,o=0;o<this._elements.length;o++)i(o);return new e([],null,this._parent,this._document,void 0,this._transitions)},t.prototype.each=function(i){for(var a=0;a<this._elements.length;a++){var o=this._elements[a],s=o.__data__;i.call(o,s,a)}return this},t.prototype.attr=function(i,a){var o=typeof a!="function"?function(){return a}:a;return this.each(function(s,l){a!==void 0&&(this[i]=o.call(this,s,l))})},t.prototype.style=function(i,a,o){o===void 0&&(o=!0);var s=typeof a!="function"||!o?function(){return a}:a;return this.each(function(l,c){a!==void 0&&(this.style[i]=s.call(this,l,c))})},t.prototype.styles=function(i,a){return i===void 0&&(i={}),a===void 0&&(a=!0),this.each(function(o,s){var l=this;Object.entries(i).forEach(function(c){var u=D(c,2),f=u[0],d=u[1],h=typeof d!="function"||!a?function(){return d}:d;d!==void 0&&l.attr(f,h.call(l,o,s))})})},t.prototype.update=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},t.prototype.maybeUpdate=function(i,a){a===void 0&&(a=!0);var o=typeof i!="function"||!a?function(){return i}:i;return this.each(function(s,l){i&&this.update&&this.update(o.call(this,s,l))})},t.prototype.transition=function(i){this._transitions;var a=new Array(this._elements.length);return this.each(function(o,s){a[s]=i.call(this,o,s)}),this._transitions=LA(a),this},t.prototype.on=function(i,a){return this.each(function(){this.addEventListener(i,a)}),this},t.prototype.call=function(i){for(var a=[],o=1;o<arguments.length;o++)a[o-1]=arguments[o];return i.call.apply(i,ut([this._parent,this],D(a),!1)),this},t.prototype.node=function(){return this._elements[0]},t.prototype.nodes=function(){return this._elements},t.prototype.transitions=function(){return this._transitions.filter(function(i){return!!i})},t.prototype.parent=function(){return this._parent};var r,e,n;return e=t,r=new WeakSet,n=function(a,o){var s=this._elements[0],l=s.querySelector(a);if(l)return new e([l],null,this._parent,this._document);var c=typeof o=="string"?this.createElement(o):o();return s.appendChild(c),new e([c],null,this._parent,this._document)},t.registry={g:Re,rect:Br,circle:gr,path:Qe,text:ud,ellipse:Yl,image:Hl,line:ki,polygon:ha,polyline:Vl,html:Eo},t}();function yt(t){return new JN([t],null,t,t.ownerDocument)}function tI(t,r,e){return t.querySelector(r)?yt(t).select(r):yt(t).append(e)}function ze(t){if(re(t))return[t,t,t,t];if(Ge(t)){var r=t.length;if(r===1)return[t[0],t[0],t[0],t[0]];if(r===2)return[t[0],t[1],t[0],t[1]];if(r===3)return[t[0],t[1],t[2],t[1]];if(r===4)return t}return[0,0,0,0]}function Dp(t){var r=t.getLocalBounds(),e=r.min,n=r.max,i=D([e,n],2),a=D(i[0],2),o=a[0],s=a[1],l=D(i[1],2),c=l[0],u=l[1];return{x:o,y:s,width:c-o,height:u-s,left:o,bottom:u,top:s,right:c}}function eI(t,r){var e=D(t,2),n=e[0],i=e[1],a=D(r,2),o=a[0],s=a[1];return n!==o&&i===s}function nI(t,r){var e,n,i=r.attributes;try{for(var a=fo(Object.entries(i)),o=a.next();!o.done;o=a.next()){var s=D(o.value,2),l=s[0],c=s[1];l!=="id"&&l!=="className"&&t.attr(l,c)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}}function hd(t){return t.toString().charAt(0).toUpperCase()+t.toString().slice(1)}function rI(t){return t.toString().charAt(0).toLowerCase()+t.toString().slice(1)}function iI(t,r){return"".concat(r).concat(hd(t))}function Bp(t,r,e){var n;e===void 0&&(e=!0);var i=r||((n=t.match(/^([a-z][a-z0-9]+)/))===null||n===void 0?void 0:n[0])||"",a=t.replace(new RegExp("^(".concat(i,")")),"");return e?rI(a):a}function aI(t,r){Object.entries(r).forEach(function(e){var n=D(e,2),i=n[0],a=n[1];ut([t],D(t.querySelectorAll(i)),!1).filter(function(o){return o.matches(i)}).forEach(function(o){if(o){var s=o;s.style.cssText+=Object.entries(a).reduce(function(l,c){return"".concat(l).concat(c.join(":"),";")},"")}})})}var hs=function(t,r){if(!(t!=null&&t.startsWith(r)))return!1;var e=t[r.length];return e>="A"&&e<="Z"};function At(t,r,e){e===void 0&&(e=!1);var n={};return Object.entries(t).forEach(function(i){var a=D(i,2),o=a[0],s=a[1];if(!(o==="className"||o==="class")){if(hs(o,"show")&&hs(Bp(o,"show"),r)!==e)o===iI(r,"show")?n[o]=s:n[o.replace(new RegExp(hd(r)),"")]=s;else if(!hs(o,"show")&&hs(o,r)!==e){var l=Bp(o,r);l==="filter"&&typeof s=="function"||(n[l]=s)}}}),n}function Wn(t,r){return Object.entries(t).reduce(function(e,n){var i=D(n,2),a=i[0],o=i[1];return a.startsWith("show")?e["show".concat(r).concat(a.slice(4))]=o:e["".concat(r).concat(hd(a))]=o,e},{})}function mr(t,r){r===void 0&&(r=["x","y","class","className"]);var e=["transform","transformOrigin","anchor","visibility","pointerEvents","zIndex","cursor","clipPath","clipPathTargets","offsetPath","offsetPathTargets","offsetDistance","draggable","droppable"],n={},i={};return Object.entries(t).forEach(function(a){var o=D(a,2),s=o[0],l=o[1];r.includes(s)||(e.indexOf(s)!==-1?i[s]=l:n[s]=l)}),[n,i]}function oI(t,r,e){var n=t.getBBox(),i=n.width,a=n.height,o=D([r,e].map(function(c,u){var f;return c.includes("%")?parseFloat(((f=c.match(/[+-]?([0-9]*[.])?[0-9]+/))===null||f===void 0?void 0:f[0])||"0")/100*(u===0?i:a):c}),2),s=o[0],l=o[1];return[s,l]}function s1(t,r){if(r)try{var e=/translate\(([+-]*[\d]+[%]*),[ ]*([+-]*[\d]+[%]*)\)/g,n=r.replace(e,function(i,a,o){return"translate(".concat(oI(t,a,o),")")});t.attr("transform",n)}catch{}}function sI(t){var r;return((r=t[0])===null||r===void 0?void 0:r.map(function(e,n){return t.map(function(i){return i[n]})}))||[]}var Fp=function(t,r){if(r==null){t.innerHTML="";return}t.replaceChildren?Array.isArray(r)?t.replaceChildren.apply(t,ut([],D(r),!1)):t.replaceChildren(r):(t.innerHTML="",Array.isArray(r)?r.forEach(function(e){return t.appendChild(e)}):t.appendChild(r))};function lI(){Zl(this,this.attributes.visibility!=="hidden")}var Ne=function(t){oe(r,t);function r(e,n){n===void 0&&(n={});var i=t.call(this,Cn({},{style:n},e))||this;return i.initialized=!1,i._defaultOptions=n,i}return Object.defineProperty(r.prototype,"offscreenGroup",{get:function(){return this._offscreen||(this._offscreen=t1(this)),this._offscreen},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"defaultOptions",{get:function(){return this._defaultOptions},enumerable:!1,configurable:!0}),r.prototype.connectedCallback=function(){this.render(this.attributes,this),this.bindEvents(this.attributes,this),this.initialized=!0},r.prototype.disconnectedCallback=function(){var e;(e=this._offscreen)===null||e===void 0||e.destroy()},r.prototype.attributeChangedCallback=function(e){e==="visibility"&&lI.call(this)},r.prototype.update=function(e,n){var i;return this.attr(Cn({},this.attributes,e||{})),(i=this.render)===null||i===void 0?void 0:i.call(this,this.attributes,this,n)},r.prototype.clear=function(){this.removeChildren()},r.prototype.bindEvents=function(e,n){},r.prototype.getSubShapeStyle=function(e){e.x,e.y,e.transform,e.transformOrigin,e.class,e.className,e.zIndex;var n=Pe(e,["x","y","transform","transformOrigin","class","className","zIndex"]);return n},r}(Wl),l1=function(t,r,e){return[["M",t-e,r],["A",e,e,0,1,0,t+e,r],["A",e,e,0,1,0,t-e,r],["Z"]]},cI=l1,uI=function(t,r,e){return[["M",t-e,r-e],["L",t+e,r-e],["L",t+e,r+e],["L",t-e,r+e],["Z"]]},fI=function(t,r,e){return[["M",t-e,r],["L",t,r-e],["L",t+e,r],["L",t,r+e],["Z"]]},dI=function(t,r,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r+n],["L",t,r-n],["L",t+e,r+n],["Z"]]},hI=function(t,r,e){var n=e*Math.sin(.3333333333333333*Math.PI);return[["M",t-e,r-n],["L",t+e,r-n],["L",t,r+n],["Z"]]},pI=function(t,r,e){var n=e/2*Math.sqrt(3);return[["M",t,r-e],["L",t+n,r-e/2],["L",t+n,r+e/2],["L",t,r+e],["L",t-n,r+e/2],["L",t-n,r-e/2],["Z"]]},vI=function(t,r,e){var n=e-1.5;return[["M",t-e,r-n],["L",t+e,r+n],["L",t+e,r-n],["L",t-e,r+n],["Z"]]},c1=function(t,r,e){return[["M",t,r+e],["L",t,r-e]]},gI=function(t,r,e){return[["M",t-e,r-e],["L",t+e,r+e],["M",t+e,r-e],["L",t-e,r+e]]},mI=function(t,r,e){return[["M",t-e/2,r-e],["L",t+e/2,r-e],["M",t,r-e],["L",t,r+e],["M",t-e/2,r+e],["L",t+e/2,r+e]]},yI=function(t,r,e){return[["M",t-e,r],["L",t+e,r],["M",t,r-e],["L",t,r+e]]},bI=function(t,r,e){return[["M",t-e,r],["L",t+e,r]]},u1=function(t,r,e){return[["M",t-e,r],["L",t+e,r]]},xI=u1,OI=function(t,r,e){return[["M",t-e,r],["A",e/2,e/2,0,1,1,t,r],["A",e/2,e/2,0,1,0,t+e,r]]},wI=function(t,r,e){return[["M",t-e-1,r-2.5],["L",t,r-2.5],["L",t,r+2.5],["L",t+e+1,r+2.5]]},SI=function(t,r,e){return[["M",t-e-1,r+2.5],["L",t,r+2.5],["L",t,r-2.5],["L",t+e+1,r-2.5]]},kI=function(t,r,e){return[["M",t-(e+1),r+2.5],["L",t-e/2,r+2.5],["L",t-e/2,r-2.5],["L",t+e/2,r-2.5],["L",t+e/2,r+2.5],["L",t+e+1,r+2.5]]};function EI(t,r){return[["M",t-5,r+2.5],["L",t-5,r],["L",t,r],["L",t,r-3],["L",t,r+3],["L",t+6.5,r+3]]}var _I=function(t,r,e){return[["M",t-e,r-e],["L",t+e,r],["L",t-e,r+e],["Z"]]};function AI(t){var r="default";if(go(t)&&t instanceof Image)r="image";else if(Le(t))r="symbol";else if(ce(t)){var e=new RegExp("data:(image|text)");t.match(e)?r="base64":/^(https?:\/\/(([a-zA-Z0-9]+-?)+[a-zA-Z0-9]+\.)+[a-zA-Z]+)(:\d+)?(\/.*)?(\?.*)?(#.*)?$/.test(t)?r="url":r="symbol"}return r}function TI(t){var r=AI(t);return["base64","url","image"].includes(r)?"image":t&&r==="symbol"?"path":null}var Nt=function(t){oe(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.render=function(e,n){var i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o,l=this.getSubShapeStyle(e),c=l.symbol,u=l.size,f=u===void 0?16:u,d=Pe(l,["symbol","size"]),h=TI(c);on(!!h,yt(n),function(p){p.maybeAppendByClassName("marker",h).attr("className","marker ".concat(h,"-marker")).call(function(v){if(h==="image"){var g=f*2;v.styles({img:c,width:g,height:g,x:a-f,y:s-f})}else{var g=f/2,m=Le(c)?c:r.getSymbol(c);v.styles(J({d:m==null?void 0:m(a,s,g)},d))}})})},r.MARKER_SYMBOL_MAP=new Map,r.registerSymbol=function(e,n){r.MARKER_SYMBOL_MAP.set(e,n)},r.getSymbol=function(e){return r.MARKER_SYMBOL_MAP.get(e)},r.getSymbols=function(){return Array.from(r.MARKER_SYMBOL_MAP.keys())},r}(Ne);Nt.registerSymbol("cross",gI);Nt.registerSymbol("hyphen",bI);Nt.registerSymbol("line",c1);Nt.registerSymbol("plus",yI);Nt.registerSymbol("tick",mI);Nt.registerSymbol("circle",l1);Nt.registerSymbol("point",cI);Nt.registerSymbol("bowtie",vI);Nt.registerSymbol("hexagon",pI);Nt.registerSymbol("square",uI);Nt.registerSymbol("diamond",fI);Nt.registerSymbol("triangle",dI);Nt.registerSymbol("triangle-down",hI);Nt.registerSymbol("line",c1);Nt.registerSymbol("dot",u1);Nt.registerSymbol("dash",xI);Nt.registerSymbol("smooth",OI);Nt.registerSymbol("hv",wI);Nt.registerSymbol("vh",SI);Nt.registerSymbol("hvh",kI);Nt.registerSymbol("vhv",EI);var MI=function(t){oe(r,t);function r(e){var n=this,i=e.style,a=Pe(e,["style"]);return n=t.call(this,X({},{type:"column"},J({style:i},a)))||this,n.columnsGroup=new Re({name:"columns"}),n.appendChild(n.columnsGroup),n.render(),n}return r.prototype.render=function(){var e=this.attributes,n=e.columns,i=e.x,a=e.y;this.columnsGroup.style.transform="translate(".concat(i,", ").concat(a,")"),yt(this.columnsGroup).selectAll(".column").data(n.flat()).join(function(o){return o.append("rect").attr("className","column").each(function(s){this.attr(s)})},function(o){return o.each(function(s){this.attr(s)})},function(o){return o.remove()})},r.prototype.update=function(e){this.attr(Cn({},this.attributes,e)),this.render()},r.prototype.clear=function(){this.removeChildren()},r}(Jt),PI=function(t){oe(r,t);function r(e){var n=this,i=e.style,a=Pe(e,["style"]);return n=t.call(this,X({},{type:"lines"},J({style:i},a)))||this,n.linesGroup=n.appendChild(new Re),n.areasGroup=n.appendChild(new Re),n.render(),n}return r.prototype.render=function(){var e=this.attributes,n=e.lines,i=e.areas,a=e.x,o=e.y;this.style.transform="translate(".concat(a,", ").concat(o,")"),n&&this.renderLines(n),i&&this.renderAreas(i)},r.prototype.clear=function(){this.linesGroup.removeChildren(),this.areasGroup.removeChildren()},r.prototype.update=function(e){this.attr(Cn({},this.attributes,e)),this.render()},r.prototype.renderLines=function(e){yt(this.linesGroup).selectAll(".line").data(e).join(function(n){return n.append("path").attr("className","line").each(function(i){this.attr(i)})},function(n){return n.each(function(i){this.attr(i)})},function(n){return n.remove()})},r.prototype.renderAreas=function(e){yt(this.linesGroup).selectAll(".area").data(e).join(function(n){return n.append("path").attr("className","area").each(function(i){this.attr(i)})},function(n){return n.each(function(i){this.style(i)})},function(n){return n.remove()})},r}(Jt);function CI(t,r){var e,n=r.x,i=r.y,a=D(i.getOptions().range||[0,0],2),o=a[0],s=a[1];return s>o&&(e=D([o,s],2),s=e[0],o=e[1]),t.map(function(l){var c=l.map(function(u,f){return[n.map(f),be(i.map(u),s,o)]});return c})}function eo(t,r){r===void 0&&(r=!1);var e=r?t.length-1:0,n=t.map(function(i,a){return ut([a===e?"M":"L"],D(i),!1)});return r?n.reverse():n}function il(t,r){if(r===void 0&&(r=!1),t.length<=2)return eo(t);for(var e=[],n=t.length,i=0;i<n;i+=1){var a=r?t[n-i-1]:t[i];Ds(a,e.slice(-2))||e.push.apply(e,ut([],D(a),!1))}var o=XN(e);return r?o.unshift(ut(["M"],D(t[n-1]),!1)):o.unshift(ut(["M"],D(t[0]),!1)),o}function pd(t,r,e){var n=Ha(t);return n.push(["L",r,e],["L",0,e],["Z"]),n}function LI(t,r,e,n){return t.map(function(i){return pd(r?il(i):eo(i),e,n)})}function RI(t,r,e){for(var n=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=eo(a),s=void 0;if(i===0)s=pd(o,r,e);else{var l=t[i-1],c=eo(l,!0);c[0][0]="L",s=ut(ut(ut([],D(o),!1),D(c),!1),[["Z"]],!1)}n.push(s)}return n}function NI(t,r,e){for(var n=[],i=t.length-1;i>=0;i-=1){var a=t[i],o=il(a),s=void 0;if(i===0)s=pd(o,r,e);else{var l=t[i-1],c=il(l,!0),u=a[0];c[0][0]="L",s=ut(ut(ut([],D(o),!1),D(c),!1),[ut(["M"],D(u),!1),["Z"]],!1)}n.push(s)}return n}function $p(t){return t.length===0?[0,0]:[js(jA(t,function(r){return js(r)||0})),Is(IA(t,function(r){return Is(r)||0}))]}function zp(t){for(var r=Ha(t),e=r[0].length,n=D([Array(e).fill(0),Array(e).fill(0)],2),i=n[0],a=n[1],o=0;o<r.length;o+=1)for(var s=r[o],l=0;l<e;l+=1)s[l]>=0?(s[l]+=i[l],i[l]=s[l]):(s[l]+=a[l],a[l]=s[l]);return r}var II=function(t){oe(r,t);function r(e){return t.call(this,e,{type:"line",x:0,y:0,width:200,height:20,isStack:!1,color:["#83daad","#edbf45","#d2cef9","#e290b3","#6f63f4"],smooth:!0,lineLineWidth:1,areaOpacity:0,isGroup:!1,columnLineWidth:1,columnStroke:"#fff",scale:1,spacing:0})||this}return Object.defineProperty(r.prototype,"rawData",{get:function(){var e=this.attributes.data;if(!e||(e==null?void 0:e.length)===0)return[[]];var n=Ha(e);return re(n[0])?[n]:n},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"data",{get:function(){return this.attributes.isStack?zp(this.rawData):this.rawData},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scales",{get:function(){return this.createScales(this.data)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"baseline",{get:function(){var e=this.scales.y,n=D(e.getOptions().domain||[0,0],2),i=n[0],a=n[1];return a<0?e.map(a):e.map(i<0?0:i)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"containerShape",{get:function(){var e=this.attributes,n=e.width,i=e.height;return{width:n,height:i}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"linesStyle",{get:function(){var e=this,n=this.attributes,i=n.type,a=n.isStack,o=n.smooth;if(i!=="line")throw new Error("linesStyle can only be used in line type");var s=At(this.attributes,"area"),l=At(this.attributes,"line"),c=this.containerShape.width,u=this.data;if(u[0].length===0)return{lines:[],areas:[]};var f=this.scales,d=f.x,h=f.y,p=CI(u,{x:d,y:h}),v=[];if(s){var g=this.baseline;a?v=o?NI(p,c,g):RI(p,c,g):v=LI(p,o,c,g)}return{lines:p.map(function(m,y){return J({stroke:e.getColor(y),d:o?il(m):eo(m)},l)}),areas:v.map(function(m,y){return J({d:m,fill:e.getColor(y)},s)})}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"columnsStyle",{get:function(){var e=this,n=At(this.attributes,"column"),i=this.attributes,a=i.isStack,o=i.type,s=i.scale;if(o!=="column")throw new Error("columnsStyle can only be used in column type");var l=this.containerShape.height,c=this.rawData;if(!c)return{columns:[]};a&&(c=zp(c));var u=this.createScales(c),f=u.x,d=u.y,h=D($p(c),2),p=h[0],v=h[1],g=new Zt({domain:[0,v-(p>0?0:p)],range:[0,l*s]}),m=f.getBandWidth(),y=this.rawData;return{columns:c.map(function(b,x){return b.map(function(O,w){var S=m/c.length,k=function(){return{x:f.map(w)+S*x,y:O>=0?d.map(O):d.map(0),width:S,height:g.map(Math.abs(O))}},E=function(){return{x:f.map(w),y:d.map(O),width:m,height:g.map(y[x][w])}};return J(J({fill:e.getColor(x)},n),a?E():k())})})}},enumerable:!1,configurable:!0}),r.prototype.render=function(e,n){tI(n,".container","rect").attr("className","container").node();var i=e.type,a=e.x,o=e.y,s="spark".concat(i),l=J({x:a,y:o},i==="line"?this.linesStyle:this.columnsStyle);yt(n).selectAll(".spark").data([i]).join(function(c){return c.append(function(u){return u==="line"?new PI({className:s,style:l}):new MI({className:s,style:l})}).attr("className","spark ".concat(s))},function(c){return c.update(l)},function(c){return c.remove()})},r.prototype.getColor=function(e){var n=this.attributes.color;return Ge(n)?n[e%n.length]:Le(n)?n.call(null,e):n},r.prototype.createScales=function(e){var n,i,a=this.attributes,o=a.type,s=a.scale,l=a.range,c=l===void 0?[]:l,u=a.spacing,f=this.containerShape,d=f.width,h=f.height,p=D($p(e),2),v=p[0],g=p[1],m=new Zt({domain:[(n=c[0])!==null&&n!==void 0?n:v,(i=c[1])!==null&&i!==void 0?i:g],range:[h,h*(1-s)]});return o==="line"?{type:o,x:new Zt({domain:[0,e[0].length-1],range:[0,d]}),y:m}:{type:o,x:new Zi({domain:e[0].map(function(y,b){return b}),range:[0,d],paddingInner:u,paddingOuter:u/2,align:.5}),y:m}},r.tag="sparkline",r}(Ne);function jI(t){return typeof t=="boolean"?!1:"enter"in t&&"update"in t&&"exit"in t}function Gp(t){if(!t)return{enter:!1,update:!1,exit:!1};var r=["enter","update","exit"],e=Object.fromEntries(Object.entries(t).filter(function(n){var i=D(n,1),a=i[0];return!r.includes(a)}));return Object.fromEntries(r.map(function(n){return jI(t)?t[n]===!1?[n,!1]:[n,J(J({},t[n]),e)]:[n,e]}))}function pa(t,r){t?t.finished.then(r):r()}function DI(t,r){t.length===0?r():Promise.all(t.map(function(e){return e==null?void 0:e.finished})).then(r)}function f1(t,r){"update"in t?t.update(r):t.attr(r)}function d1(t,r,e){if(r.length===0)return null;if(!e){var n=r.slice(-1)[0];return f1(t,{style:n}),null}return t.animate(r,e)}function BI(t,r){return!(t.nodeName!=="text"||r.nodeName!=="text"||t.attributes.text!==r.attributes.text)}function FI(t,r,e,n){if(n===void 0&&(n="destroy"),BI(t,r))return t.remove(),[null];var i=function(){n==="destroy"?t.destroy():n==="hide"&&Fr(t),r.isVisible()&&Ao(r)};if(!e)return i(),[null];var a=e.duration,o=a===void 0?0:a,s=e.delay,l=s===void 0?0:s,c=Math.ceil(+o/2),u=+o/4,f=D(t.getGeometryBounds().center,2),d=f[0],h=f[1],p=D(r.getGeometryBounds().center,2),v=p[0],g=p[1],m=D([(d+v)/2-d,(h+g)/2-h],2),y=m[0],b=m[1],x=t.style.opacity,O=x===void 0?1:x,w=r.style.opacity,S=w===void 0?1:w,k=t.style.transform||"",E=r.style.transform||"",_=t.animate([{opacity:O,transform:"translate(0, 0) ".concat(k)},{opacity:0,transform:"translate(".concat(y,", ").concat(b,") ").concat(k)}],J(J({fill:"both"},e),{duration:l+c+u})),A=r.animate([{opacity:0,transform:"translate(".concat(-y,", ").concat(-b,") ").concat(E),offset:.01},{opacity:S,transform:"translate(0, 0) ".concat(E)}],J(J({fill:"both"},e),{duration:c+u,delay:l+c-u}));return pa(A,i),[_,A]}function Mn(t,r,e){var n={},i={};return Object.entries(r).forEach(function(a){var o=D(a,2),s=o[0],l=o[1];if(!pt(l)){var c=t.style[s]||t.parsedStyle[s]||0;c!==l&&(n[s]=c,i[s]=l)}}),e?d1(t,[n,i],J({fill:"both"},e)):(f1(t,i),null)}function Ql(t,r){return t.style.opacity||(t.style.opacity=1),Mn(t,{opacity:0},r)}var h1={fill:"#fff",lineWidth:1,radius:2,size:10,stroke:"#bfbfbf",strokeOpacity:1,zIndex:0},p1={fill:"#000",fillOpacity:.45,fontSize:12,textAlign:"center",textBaseline:"middle",zIndex:1},v1={x:0,y:0,orientation:"horizontal",showLabel:!0,type:"start"},Fn=Sn({foreground:"foreground",handle:"handle",selection:"selection",sparkline:"sparkline",sparklineGroup:"sparkline-group",track:"track",brushArea:"brush-area"},"slider"),wr=Sn({labelGroup:"label-group",label:"label",iconGroup:"icon-group",icon:"icon",iconRect:"icon-rect",iconLine:"icon-line"},"handle"),$I=function(t){oe(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.render=function(e,n){var i=e.x,a=e.y,o=e.size,s=o===void 0?10:o,l=e.radius,c=l===void 0?s/4:l,u=e.orientation,f=Pe(e,["x","y","size","radius","orientation"]),d=s,h=d*2.4,p=yt(n).maybeAppendByClassName(wr.iconRect,"rect").styles(J(J({},f),{width:d,height:h,radius:c,x:i-d/2,y:a-h/2,transformOrigin:"center"})),v=i+1/3*d-d/2,g=i+2/3*d-d/2,m=a+1/4*h-h/2,y=a+3/4*h-h/2;p.maybeAppendByClassName("".concat(wr.iconLine,"-1"),"line").styles(J({x1:v,x2:v,y1:m,y2:y},f)),p.maybeAppendByClassName("".concat(wr.iconLine,"-2"),"line").styles(J({x1:g,x2:g,y1:m,y2:y},f)),u==="vertical"&&(p.node().style.transform="rotate(90)")},r}(Ne),g1=function(t){oe(r,t);function r(e){return t.call(this,e,v1)||this}return r.prototype.renderLabel=function(e){var n=this,i=this.attributes,a=i.x,o=i.y,s=i.showLabel,l=At(this.attributes,"label"),c=l.x,u=c===void 0?0:c,f=l.y,d=f===void 0?0:f,h=l.transform,p=l.transformOrigin,v=Pe(l,["x","y","transform","transformOrigin"]),g=D(mr(v,[]),2),m=g[0],y=g[1],b=yt(e).maybeAppendByClassName(wr.labelGroup,"g").styles(y),x=J(J({},p1),m),O=x.text,w=Pe(x,["text"]);on(!!s,b,function(S){n.label=S.maybeAppendByClassName(wr.label,"text").styles(J(J({},w),{x:a+u,y:o+d,transform:h,transformOrigin:p,text:"".concat(O)})),n.label.on("mousedown",function(k){k.stopPropagation()}),n.label.on("touchstart",function(k){k.stopPropagation()})})},r.prototype.renderIcon=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.orientation,s=n.type,l=J(J({x:i,y:a,orientation:o},h1),At(this.attributes,"icon")),c=this.attributes.iconShape,u=c===void 0?function(){return new $I({style:l})}:c,f=yt(e).maybeAppendByClassName(wr.iconGroup,"g");f.selectAll(wr.icon.class).data([u]).join(function(d){return d.append(typeof u=="string"?u:function(){return u(s)}).attr("className",wr.icon.name)},function(d){return d.update(l)},function(d){return d.remove()})},r.prototype.render=function(e,n){this.renderIcon(n),this.renderLabel(n)},r}(Ne),m1=function(t){oe(r,t);function r(e){var n=t.call(this,e,J(J(J({x:0,y:0,animate:{duration:100,fill:"both"},brushable:!0,formatter:function(i){return i.toString()},handleSpacing:2,orientation:"horizontal",padding:0,autoFitLabel:!0,scrollable:!0,selectionFill:"#5B8FF9",selectionFillOpacity:.45,selectionZIndex:2,showHandle:!0,showLabel:!0,slidable:!0,trackFill:"#416180",trackLength:200,trackOpacity:.05,trackSize:20,trackZIndex:-1,values:[0,1],type:"range",selectionType:"select",handleIconOffset:0},Wn(v1,"handle")),Wn(h1,"handleIcon")),Wn(p1,"handleLabel")))||this;return n.range=[0,1],n.onDragStart=function(i){return function(a){a.stopPropagation(),n.target=i,n.prevPos=n.getOrientVal(rl(a));var o=n.availableSpace,s=o.x,l=o.y,c=n.getBBox(),u=c.x,f=c.y;n.selectionStartPos=n.getRatio(n.prevPos-n.getOrientVal([s,l])-n.getOrientVal([+u,+f])),n.selectionWidth=0,document.addEventListener("pointermove",n.onDragging),document.addEventListener("pointerup",n.onDragEnd)}},n.onDragging=function(i){var a=n.attributes,o=a.slidable,s=a.brushable,l=a.type;i.stopPropagation();var c=n.getOrientVal(rl(i)),u=c-n.prevPos;if(u){var f=n.getRatio(u);switch(n.target){case"start":o&&n.setValuesOffset(f);break;case"end":o&&n.setValuesOffset(0,f);break;case"selection":o&&n.setValuesOffset(f,f);break;case"track":if(!s)return;n.selectionWidth+=f,l==="range"?n.innerSetValues([n.selectionStartPos,n.selectionStartPos+n.selectionWidth].sort(),!0):n.innerSetValues([0,n.selectionStartPos+n.selectionWidth],!0);break}n.prevPos=c}},n.onDragEnd=function(){document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointermove",n.onDragging),document.removeEventListener("pointerup",n.onDragEnd),n.target="",n.updateHandlesPosition(!1)},n.onValueChange=function(i){var a=n.attributes,o=a.onChange,s=a.type,l=s==="range"?i:i[1],c=s==="range"?n.getValues():n.getValues()[1],u=new Ht("valuechange",{detail:{oldValue:l,value:c}});n.dispatchEvent(u),o==null||o(c)},n.selectionStartPos=0,n.selectionWidth=0,n.prevPos=0,n.target="",n}return Object.defineProperty(r.prototype,"values",{get:function(){return this.attributes.values},set:function(e){this.attributes.values=this.clampValues(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"sparklineStyle",{get:function(){var e=this.attributes.orientation;if(e!=="horizontal")return null;var n=At(this.attributes,"sparkline");return J(J({zIndex:0},this.availableSpace),n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shape",{get:function(){var e=this.attributes,n=e.trackLength,i=e.trackSize,a=D(this.getOrientVal([[n,i],[i,n]]),2),o=a[0],s=a[1];return{width:o,height:s}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableSpace",{get:function(){var e=this.attributes;e.x,e.y;var n=e.padding,i=D(ze(n),4),a=i[0],o=i[1],s=i[2],l=i[3],c=this.shape,u=c.width,f=c.height;return{x:l,y:a,width:u-(l+o),height:f-(a+s)}},enumerable:!1,configurable:!0}),r.prototype.getValues=function(){return this.values},r.prototype.setValues=function(e,n){e===void 0&&(e=[0,0]),n===void 0&&(n=!1),this.attributes.values=e;var i=n===!1?!1:this.attributes.animate;this.updateSelectionArea(i),this.updateHandlesPosition(i)},r.prototype.updateSelectionArea=function(e){var n=this.calcSelectionArea();this.foregroundGroup.selectAll(Fn.selection.class).each(function(i,a){Mn(this,n[a],e)})},r.prototype.updateHandlesPosition=function(e){this.attributes.showHandle&&(this.startHandle&&Mn(this.startHandle,this.getHandleStyle("start"),e),this.endHandle&&Mn(this.endHandle,this.getHandleStyle("end"),e))},r.prototype.innerSetValues=function(e,n){e===void 0&&(e=[0,0]),n===void 0&&(n=!1);var i=this.values,a=this.clampValues(e);this.attributes.values=a,this.setValues(a),n&&this.onValueChange(i)},r.prototype.renderTrack=function(e){var n=this.attributes,i=n.x,a=n.y,o=At(this.attributes,"track");this.trackShape=yt(e).maybeAppendByClassName(Fn.track,"rect").styles(J(J({x:i,y:a},this.shape),o))},r.prototype.renderBrushArea=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.brushable;this.brushArea=yt(e).maybeAppendByClassName(Fn.brushArea,"rect").styles(J({x:i,y:a,fill:"transparent",cursor:o?"crosshair":"default"},this.shape))},r.prototype.renderSparkline=function(e){var n=this,i=this.attributes,a=i.x,o=i.y,s=i.orientation,l=yt(e).maybeAppendByClassName(Fn.sparklineGroup,"g");on(s==="horizontal",l,function(c){var u=J(J({},n.sparklineStyle),{x:a,y:o});c.maybeAppendByClassName(Fn.sparkline,function(){return new II({style:u})}).update(u)})},r.prototype.renderHandles=function(){var e=this,n,i=this.attributes,a=i.showHandle,o=i.type,s=o==="range"?["start","end"]:["end"],l=a?s:[],c=this;(n=this.foregroundGroup)===null||n===void 0||n.selectAll(Fn.handle.class).data(l.map(function(u){return{type:u}}),function(u){return u.type}).join(function(u){return u.append(function(f){var d=f.type;return new g1({style:e.getHandleStyle(d)})}).each(function(f){var d=f.type;this.attr("class","".concat(Fn.handle.name," ").concat(d,"-handle"));var h="".concat(d,"Handle");c[h]=this,this.addEventListener("pointerdown",c.onDragStart(d))})},function(u){return u.each(function(f){var d=f.type;this.update(c.getHandleStyle(d))})},function(u){return u.each(function(f){var d=f.type,h="".concat(d,"Handle");c[h]=void 0}).remove()})},r.prototype.renderSelection=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.type,s=n.selectionType;this.foregroundGroup=yt(e).maybeAppendByClassName(Fn.foreground,"g");var l=At(this.attributes,"selection"),c=function(f){return f.style("visibility",function(d){return d.show?"visible":"hidden"}).style("cursor",function(d){return s==="select"?"grab":s==="invert"?"crosshair":"default"}).styles(J(J({},l),{transform:"translate(".concat(i,", ").concat(a,")")}))},u=this;this.foregroundGroup.selectAll(Fn.selection.class).data(o==="value"?[]:this.calcSelectionArea().map(function(f,d){return{style:J({},f),index:d,show:s==="select"?d===1:d!==1}}),function(f){return f.index}).join(function(f){return f.append("rect").attr("className",Fn.selection.name).call(c).each(function(d,h){var p=this;h===1?(u.selectionShape=yt(this),this.on("pointerdown",function(v){p.attr("cursor","grabbing"),u.onDragStart("selection")(v)}),u.dispatchCustomEvent(this,"pointerenter","selectionMouseenter"),u.dispatchCustomEvent(this,"pointerleave","selectionMouseleave"),u.dispatchCustomEvent(this,"click","selectionClick"),this.addEventListener("pointerdown",function(){p.attr("cursor","grabbing")}),this.addEventListener("pointerup",function(){p.attr("cursor","pointer")}),this.addEventListener("pointerover",function(){p.attr("cursor","pointer")})):this.on("pointerdown",u.onDragStart("track"))})},function(f){return f.call(c)},function(f){return f.remove()}),this.updateSelectionArea(!1),this.renderHandles()},r.prototype.render=function(e,n){this.renderTrack(n),this.renderSparkline(n),this.renderBrushArea(n),this.renderSelection(n)},r.prototype.clampValues=function(e,n){var i;n===void 0&&(n=4);var a=D(this.range,2),o=a[0],s=a[1],l=D(this.getValues().map(function(g){return ju(g,n)}),2),c=l[0],u=l[1],f=Array.isArray(e)?e:[c,e??u],d=D((f||[c,u]).map(function(g){return ju(g,n)}),2),h=d[0],p=d[1];if(this.attributes.type==="value")return[0,be(p,o,s)];h>p&&(i=D([p,h],2),h=i[0],p=i[1]);var v=p-h;return v>s-o?[o,s]:h<o?c===o&&u===p?[o,p]:[o,v+o]:p>s?u===s&&c===h?[h,s]:[s-v,s]:[h,p]},r.prototype.calcSelectionArea=function(e){var n=D(this.clampValues(e),2),i=n[0],a=n[1],o=this.availableSpace,s=o.x,l=o.y,c=o.width,u=o.height;return this.getOrientVal([[{y:l,height:u,x:s,width:i*c},{y:l,height:u,x:i*c+s,width:(a-i)*c},{y:l,height:u,x:a*c,width:(1-a)*c}],[{x:s,width:c,y:l,height:i*u},{x:s,width:c,y:i*u+l,height:(a-i)*u},{x:s,width:c,y:a*u,height:(1-a)*u}]])},r.prototype.calcHandlePosition=function(e){var n=this.attributes.handleIconOffset,i=this.availableSpace,a=i.x,o=i.y,s=i.width,l=i.height,c=D(this.clampValues(),2),u=c[0],f=c[1],d=e==="start"?-n:n,h=(e==="start"?u:f)*this.getOrientVal([s,l])+d;return{x:a+this.getOrientVal([h,s/2]),y:o+this.getOrientVal([l/2,h])}},r.prototype.inferTextStyle=function(e){var n=this.attributes.orientation;return n==="horizontal"?{}:e==="start"?{transformOrigin:"left center",transform:"rotate(90)",textAlign:"start"}:e==="end"?{transformOrigin:"right center",transform:"rotate(90)",textAlign:"end"}:{}},r.prototype.calcHandleText=function(e){var n,i=this.attributes,a=i.type,o=i.orientation,s=i.formatter,l=i.autoFitLabel,c=At(this.attributes,"handle"),u=At(c,"label"),f=c.spacing,d=this.getHandleSize(),h=this.clampValues(),p=e==="start"?h[0]:h[1],v=s(p),g=new ud({style:J(J(J({},u),this.inferTextStyle(e)),{text:v})}),m=g.getBBox(),y=m.width,b=m.height;if(g.destroy(),!l){if(a==="value")return{text:v,x:0,y:-b-f};var x=f+d+(o==="horizontal"?y/2:0);return n={text:v},n[o==="horizontal"?"x":"y"]=e==="start"?-x:x,n}var O=0,w=0,S=this.availableSpace,k=S.width,E=S.height,_=this.calcSelectionArea()[1],A=_.x,M=_.y,T=_.width,C=_.height,I=f+d;if(o==="horizontal"){var R=I+y/2;if(e==="start"){var L=A-I-y;O=L>0?-R:R}else{var P=k-A-T-I>y;O=P?R:-R}}else{var N=I,j=b+I;e==="start"?w=M-d>b?-j:N:w=E-(M+C)-d>b?j:-N}return{x:O,y:w,text:v}},r.prototype.getHandleLabelStyle=function(e){var n=At(this.attributes,"handleLabel");return J(J(J({},n),this.calcHandleText(e)),this.inferTextStyle(e))},r.prototype.getHandleIconStyle=function(){var e=this.attributes.handleIconShape,n=At(this.attributes,"handleIcon"),i=this.getOrientVal(["ew-resize","ns-resize"]),a=this.getHandleSize();return J({cursor:i,shape:e,size:a},n)},r.prototype.getHandleStyle=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.showLabel,s=n.showLabelOnInteraction,l=n.orientation,c=this.calcHandlePosition(e),u=c.x,f=c.y,d=this.calcHandleText(e),h=o;return!o&&s&&(this.target?h=!0:h=!1),J(J(J({},Wn(this.getHandleIconStyle(),"icon")),Wn(J(J({},this.getHandleLabelStyle(e)),d),"label")),{transform:"translate(".concat(u+i,", ").concat(f+a,")"),orientation:l,showLabel:h,type:e,zIndex:3})},r.prototype.getHandleSize=function(){var e=this.attributes,n=e.handleIconSize,i=e.width,a=e.height;return n||Math.floor((this.getOrientVal([+a,+i])+4)/2.4)},r.prototype.getOrientVal=function(e){var n=D(e,2),i=n[0],a=n[1],o=this.attributes.orientation;return o==="horizontal"?i:a},r.prototype.setValuesOffset=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=!1);var a=this.attributes.type,o=D(this.getValues(),2),s=o[0],l=o[1],c=a==="range"?e:0,u=[s+c,l+n].sort();i?this.setValues(u):this.innerSetValues(u,!0)},r.prototype.getRatio=function(e){var n=this.availableSpace,i=n.width,a=n.height;return e/this.getOrientVal([i,a])},r.prototype.dispatchCustomEvent=function(e,n,i){var a=this;e.on(n,function(o){o.stopPropagation(),a.dispatchEvent(new Ht(i,{detail:o}))})},r.prototype.bindEvents=function(){this.addEventListener("wheel",this.onScroll);var e=this.brushArea;this.dispatchCustomEvent(e,"click","trackClick"),this.dispatchCustomEvent(e,"pointerenter","trackMouseenter"),this.dispatchCustomEvent(e,"pointerleave","trackMouseleave"),e.on("pointerdown",this.onDragStart("track"))},r.prototype.onScroll=function(e){var n=this.attributes.scrollable;if(n){var i=e.deltaX,a=e.deltaY,o=a||i,s=this.getRatio(o);this.setValuesOffset(s,s,!0)}},r.tag="slider",r}(Ne),zI=function(t){oe(r,t);function r(e){var n=t.call(this,e,{x:0,y:0,isRound:!0,orientation:"vertical",padding:[2,2,2,2],scrollable:!0,slidable:!0,thumbCursor:"default",trackSize:10,value:0})||this;return n.range=[0,1],n.onValueChange=function(i){var a=n.attributes.value;if(i!==a){var o={detail:{oldValue:i,value:a}};n.dispatchEvent(new Ht("scroll",o)),n.dispatchEvent(new Ht("valuechange",o))}},n.onTrackClick=function(i){var a=n.attributes.slidable;if(a){var o=D(n.getLocalPosition(),2),s=o[0],l=o[1],c=D(n.padding,4),u=c[0],f=c[3],d=n.getOrientVal([s+f,l+u]),h=n.getOrientVal(rl(i)),p=(h-d)/n.trackLength;n.setValue(p,!0)}},n.onThumbMouseenter=function(i){n.dispatchEvent(new Ht("thumbMouseenter",{detail:i.detail}))},n.onTrackMouseenter=function(i){n.dispatchEvent(new Ht("trackMouseenter",{detail:i.detail}))},n.onThumbMouseleave=function(i){n.dispatchEvent(new Ht("thumbMouseleave",{detail:i.detail}))},n.onTrackMouseleave=function(i){n.dispatchEvent(new Ht("trackMouseleave",{detail:i.detail}))},n}return Object.defineProperty(r.prototype,"padding",{get:function(){var e=this.attributes.padding;return ze(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"value",{get:function(){var e=this.attributes.value,n=D(this.range,2),i=n[0],a=n[1];return be(e,i,a)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trackLength",{get:function(){var e=this.attributes,n=e.viewportLength,i=e.trackLength,a=i===void 0?n:i;return a},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"availableSpace",{get:function(){var e=this.attributes.trackSize,n=this.trackLength,i=D(this.padding,4),a=i[0],o=i[1],s=i[2],l=i[3],c=D(this.getOrientVal([[n,e],[e,n]]),2),u=c[0],f=c[1];return{x:l,y:a,width:+u-(l+o),height:+f-(a+s)}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"trackRadius",{get:function(){var e=this.attributes,n=e.isRound,i=e.trackSize;return n?i/2:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"thumbRadius",{get:function(){var e=this.attributes,n=e.isRound,i=e.thumbRadius;if(!n)return 0;var a=this.availableSpace,o=a.width,s=a.height;return i||this.getOrientVal([s,o])/2},enumerable:!1,configurable:!0}),r.prototype.getValues=function(e){e===void 0&&(e=this.value);var n=this.attributes,i=n.viewportLength,a=n.contentLength,o=i/a,s=D(this.range,2),l=s[0],c=s[1],u=e*(c-l-o);return[u,u+o]},r.prototype.getValue=function(){return this.value},r.prototype.renderSlider=function(e){var n=this.attributes,i=n.x,a=n.y,o=n.orientation,s=n.trackSize,l=n.padding,c=n.slidable,u=At(this.attributes,"track"),f=At(this.attributes,"thumb"),d=J(J({x:i,y:a,brushable:!1,orientation:o,padding:l,selectionRadius:this.thumbRadius,showHandle:!1,slidable:c,trackLength:this.trackLength,trackRadius:this.trackRadius,trackSize:s,values:this.getValues()},Wn(u,"track")),Wn(f,"selection"));this.slider=yt(e).maybeAppendByClassName("scrollbar",function(){return new m1({style:d})}).update(d).node()},r.prototype.render=function(e,n){this.renderSlider(n)},r.prototype.setValue=function(e,n){n===void 0&&(n=!1);var i=this.attributes.value,a=D(this.range,2),o=a[0],s=a[1];this.slider.setValues(this.getValues(be(e,o,s)),n),this.onValueChange(i)},r.prototype.bindEvents=function(){var e=this;this.slider.addEventListener("trackClick",function(n){n.stopPropagation(),e.onTrackClick(n.detail)}),this.onHover()},r.prototype.getOrientVal=function(e){var n=this.attributes.orientation;return n==="horizontal"?e[0]:e[1]},r.prototype.onHover=function(){this.slider.addEventListener("selectionMouseenter",this.onThumbMouseenter),this.slider.addEventListener("trackMouseenter",this.onTrackMouseenter),this.slider.addEventListener("selectionMouseleave",this.onThumbMouseleave),this.slider.addEventListener("trackMouseleave",this.onTrackMouseleave)},r.tag="scrollbar",r}(Ne),vd={data:[],animate:{enter:!1,update:{duration:100,easing:"ease-in-out-sine",fill:"both"},exit:{duration:100,fill:"both"}},showArrow:!0,showGrid:!0,showLabel:!0,showLine:!0,showTick:!0,showTitle:!0,showTrunc:!1,dataThreshold:100,lineLineWidth:1,lineStroke:"black",crossPadding:10,titleFill:"black",titleFontSize:12,titlePosition:"lb",titleSpacing:0,titleTextAlign:"center",titleTextBaseline:"middle",lineArrow:function(){return new Qe({style:{d:[["M",10,10],["L",-10,0],["L",10,-10],["L",0,0],["L",10,10],["Z"]],fill:"black",transformOrigin:"center"}})},labelAlign:"parallel",labelDirection:"positive",labelFontSize:12,labelSpacing:0,gridConnect:"line",gridControlAngles:[],gridDirection:"positive",gridLength:0,gridType:"segment",lineArrowOffset:15,lineArrowSize:10,tickDirection:"positive",tickLength:5,tickLineWidth:1,tickStroke:"black",labelOverlap:[]};X({},vd,{style:{type:"arc"}});X({},vd,{style:{}});var Ft=Sn({mainGroup:"main-group",gridGroup:"grid-group",grid:"grid",lineGroup:"line-group",line:"line",tickGroup:"tick-group",tick:"tick",tickItem:"tick-item",labelGroup:"label-group",label:"label",labelItem:"label-item",titleGroup:"title-group",title:"title",lineFirst:"line-first",lineSecond:"line-second"},"axis"),aa=Sn({lineGroup:"line-group",line:"line",regionGroup:"region-group",region:"region"},"grid");function y1(t){return t.reduce(function(r,e,n){return r.push(ut([n===0?"M":"L"],D(e),!1)),r},[])}function GI(t,r,e){var n=r.connect,i=n===void 0?"line":n,a=r.center;if(i==="line")return y1(t);if(!a)return[];var o=to(t[0],a),s=e?0:1;return t.reduce(function(l,c,u){return u===0?l.push(ut(["M"],D(c),!1)):l.push(ut(["A",o,o,0,0,s],D(c),!1)),l},[])}function Du(t,r,e){return r.type==="surround"?GI(t,r,e):y1(t)}function WI(t,r,e){var n=e.type,i=e.connect,a=e.center,o=e.closed,s=o?[["Z"]]:[],l=D([Du(t,e),Du(r.slice().reverse(),e,!0)],2),c=l[0],u=l[1],f=D([t[0],r.slice(-1)[0]],2),d=f[0],h=f[1],p=function(y,b){return[c,y,u,b,s].flat()};if(i==="line"||n==="surround")return p([ut(["L"],D(h),!1)],[ut(["L"],D(d),!1)]);if(!a)throw new Error("Arc grid need to specified center");var v=D([to(h,a),to(d,a)],2),g=v[0],m=v[1];return p([ut(["A",g,g,0,0,1],D(h),!1),ut(["L"],D(h),!1)],[ut(["A",m,m,0,0,0],D(d),!1),ut(["L"],D(d),!1)])}function YI(t,r,e,n){var i=e.animate,a=e.isBillboard,o=r.map(function(s,l){return{id:s.id||"grid-line-".concat(l),d:Du(s.points,e)}});return t.selectAll(aa.line.class).data(o,function(s){return s.id}).join(function(s){return s.append("path").each(function(l,c){var u=cn(jp(J({d:l.d},n)),[l,c,o]);this.attr(J({class:aa.line.name,stroke:"#D9D9D9",lineWidth:1,lineDash:[4,4],isBillboard:a},u))})},function(s){return s.transition(function(l,c){var u=cn(jp(J({d:l.d},n)),[l,c,o]);return Mn(this,u,i.update)})},function(s){return s.transition(function(){var l=this,c=Ql(this,i.exit);return pa(c,function(){return l.remove()}),c})}).transitions()}function HI(t,r,e){var n=e.animate,i=e.connect,a=e.areaFill;if(r.length<2||!a||!i)return[];for(var o=Array.isArray(a)?a:[a,"transparent"],s=function(p){return o[p%o.length]},l=[],c=0;c<r.length-1;c++){var u=D([r[c].points,r[c+1].points],2),f=u[0],d=u[1],h=WI(f,d,e);l.push({d:h,fill:s(c)})}return t.selectAll(aa.region.class).data(l,function(p,v){return v}).join(function(p){return p.append("path").each(function(v,g){var m=cn(v,[v,g,l]);this.attr(m)}).attr("className",aa.region.name)},function(p){return p.transition(function(v,g){var m=cn(v,[v,g,l]);return Mn(this,m,n.update)})},function(p){return p.transition(function(){var v=this,g=Ql(this,n.exit);return pa(g,function(){return v.remove()}),g})}).transitions()}function VI(t){var r=t.data,e=r===void 0?[]:r,n=t.closed;return n?e.map(function(i){var a=i.points,o=D(a,1),s=o[0];return J(J({},i),{points:ut(ut([],D(a),!1),[s],!1)})}):e}var XI=function(t){oe(r,t);function r(){return t!==null&&t.apply(this,arguments)||this}return r.prototype.render=function(e,n){e.type,e.center,e.areaFill,e.closed;var i=Pe(e,["type","center","areaFill","closed"]),a=VI(e),o=yt(n).maybeAppendByClassName(aa.lineGroup,"g"),s=yt(n).maybeAppendByClassName(aa.regionGroup,"g"),l=YI(o,a,e,i),c=HI(s,a,e);return ut(ut([],D(l),!1),D(c),!1)},r}(Ne);function b1(t,r){return Object.fromEntries(Object.entries(t).map(function(e){var n=D(e,2),i=n[0],a=n[1];return[i,cn(a,r)]}))}function gd(t,r){return r&&Le(r)?t.filter(r):t}function x1(t,r){var e=r.startAngle,n=r.endAngle;return(n-e)*t+e}function Jl(t,r){if(r.type==="linear"){var e=D(r.startPos,2),n=e[0],i=e[1],a=D(r.endPos,2),o=a[0],s=a[1],l=D([o-n,s-i],2),c=l[0],u=l[1];return o1([c,u])}var f=ia(x1(t,r));return[-Math.sin(f),Math.cos(f)]}function md(t,r,e){var n=Jl(t,e);return HN(n,r!=="positive")}function To(t,r){return md(t,r.labelDirection,r)}function UI(t,r){var e=D(r.startPos,2),n=e[0],i=e[1],a=D(r.endPos,2),o=a[0],s=a[1],l=D([o-n,s-i],2),c=l[0],u=l[1];return[n+c*t,i+u*t]}function qI(t,r){var e=r.radius,n=D(r.center,2),i=n[0],a=n[1],o=ia(x1(t,r));return[i+e*Math.cos(o),a+e*Math.sin(o)]}function tc(t,r){return r.type==="linear"?UI(t,r):qI(t,r)}function yd(t){return Jl(0,t)[1]===0}function O1(t){return Jl(0,t)[0]===0}function w1(t,r){return r-t===360}function Wp(t,r,e,n,i){var a=r-t,o=D([i,i],2),s=o[0],l=o[1],c=D([ia(t),ia(r)],2),u=c[0],f=c[1],d=function(E){return[e+i*Math.cos(E),n+i*Math.sin(E)]},h=D(d(u),2),p=h[0],v=h[1],g=D(d(f),2),m=g[0],y=g[1];if(w1(t,r)){var b=(f+u)/2,x=D(d(b),2),O=x[0],w=x[1];return[["M",p,v],["A",s,l,0,1,0,O,w],["A",s,l,0,1,0,m,y]]}var S=a>180?1:0,k=t>r?0:1;return"M".concat(p,",").concat(v,",A").concat(s,",").concat(l,",0,").concat(S,",").concat(k,",").concat(m,",").concat(y)}function KI(t){var r=t.attributes,e=r.startAngle,n=r.endAngle,i=r.center,a=r.radius;return ut(ut([e,n],D(i),!1),[a],!1)}function ZI(t,r,e,n){var i=r.startAngle,a=r.endAngle,o=r.center,s=r.radius;return t.selectAll(Ft.line.class).data([{d:Wp.apply(void 0,ut(ut([i,a],D(o),!1),[s],!1))}],function(l,c){return c}).join(function(l){return l.append("path").attr("className",Ft.line.name).styles(r).styles({d:function(c){return c.d}})},function(l){return l.transition(function(){var c=this,u=zN(this,KI(this),ut(ut([i,a],D(o),!1),[s],!1),n.update);if(u){var f=function(){var d=Rt(c.attributes,"__keyframe_data__");c.style.d=Wp.apply(void 0,ut([],D(d),!1))};u.onframe=f,u.onfinish=f}return u}).styles(r)},function(l){return l.remove()}).styles(e).transitions()}function QI(t,r){r.truncRange,r.truncShape,r.lineExtension}function JI(t,r,e){e===void 0&&(e=[0,0]);var n=D([t,r,e],3),i=D(n[0],2),a=i[0],o=i[1],s=D(n[1],2),l=s[0],c=s[1],u=D(n[2],2),f=u[0],d=u[1],h=D([l-a,c-o],2),p=h[0],v=h[1],g=Math.sqrt(Math.pow(p,2)+Math.pow(v,2)),m=D([-f/g,d/g],2),y=m[0],b=m[1];return[y*p,y*v,b*p,b*v]}function Yp(t){var r=D(t,2),e=D(r[0],2),n=e[0],i=e[1],a=D(r[1],2),o=a[0],s=a[1];return{x1:n,y1:i,x2:o,y2:s}}function tj(t,r,e,n){var i=r.showTrunc,a=r.startPos,o=r.endPos,s=r.truncRange,l=r.lineExtension,c=D([a,o],2),u=D(c[0],2),f=u[0],d=u[1],h=D(c[1],2),p=h[0],v=h[1],g=D(l?JI(a,o,l):new Array(4).fill(0),4),m=g[0],y=g[1],b=g[2],x=g[3],O=function(P){return t.selectAll(Ft.line.class).data(P,function(N,j){return j}).join(function(N){return N.append("line").attr("className",function(j){return"".concat(Ft.line.name," ").concat(j.className)}).styles(e).transition(function(j){return Mn(this,Yp(j.line),!1)})},function(N){return N.styles(e).transition(function(j){var B=j.line;return Mn(this,Yp(B),n.update)})},function(N){return N.remove()}).transitions()};if(!i||!s)return O([{line:[[f+m,d+y],[p+b,v+x]],className:Ft.line.name}]);var w=D(s,2),S=w[0],k=w[1],E=p-f,_=v-d,A=D([f+E*S,d+_*S],2),M=A[0],T=A[1],C=D([f+E*k,d+_*k],2),I=C[0],R=C[1],L=O([{line:[[f+m,d+y],[M,T]],className:Ft.lineFirst.name},{line:[[I,R],[p+b,v+x]],className:Ft.lineSecond.name}]);return QI(t,r),L}function ej(t,r,e,n){var i=e.showArrow,a=e.showTrunc,o=e.lineArrow,s=e.lineArrowOffset,l=e.lineArrowSize,c;if(r==="arc"?c=t.select(Ft.line.class):a?c=t.select(Ft.lineSecond.class):c=t.select(Ft.line.class),!i||!o||e.type==="arc"&&w1(e.startAngle,e.endAngle)){var u=c.node();u&&(u.style.markerEnd=void 0);return}var f=vi(o);f.attr(n),dd(f,l),c.style("markerEnd",f).style("markerEndOffset",-s)}function nj(t,r,e){var n=r.type,i,a=At(r,"line");return n==="linear"?i=tj(t,r,Ip(a,"arrow"),e):i=ZI(t,r,Ip(a,"arrow"),e),ej(t,n,r,a),i}function rj(t,r){return md(t,r.gridDirection,r)}function S1(t){var r=t.type,e=t.gridCenter;return r==="linear"?e:e||t.center}function ij(t,r){var e=r.gridLength;return t.map(function(n,i){var a=n.value,o=D(tc(a,r),2),s=o[0],l=o[1],c=D(sr(rj(a,r),e),2),u=c[0],f=c[1];return{id:i,points:[[s,l],[s+u,l+f]]}})}function aj(t,r){var e=r.gridControlAngles,n=S1(r);if(!n)throw new Error("grid center is not provide");if(t.length<2)throw new Error("Invalid grid data");if(!e||e.length===0)throw new Error("Invalid gridControlAngles");var i=D(n,2),a=i[0],o=i[1];return t.map(function(s,l){var c=s.value,u=D(tc(c,r),2),f=u[0],d=u[1],h=D([f-a,d-o],2),p=h[0],v=h[1],g=[];return e.forEach(function(m){var y=ia(m),b=D([Math.cos(y),Math.sin(y)],2),x=b[0],O=b[1],w=p*x-v*O+a,S=p*O+v*x+o;g.push([w,S])}),{points:g,id:l}})}function oj(t,r,e,n){var i=At(e,"grid"),a=i.type,o=i.areaFill,s=S1(e),l=gd(r,e.gridFilter),c=a==="segment"?ij(l,e):aj(l,e),u=J(J({},i),{center:s,areaFill:Le(o)?l.map(function(f,d){return cn(o,[f,d,l])}):o,animate:n,data:c});return t.selectAll(Ft.grid.class).data([1]).join(function(f){return f.append(function(){return new XI({style:u})}).attr("className",Ft.grid.name)},function(f){return f.transition(function(){return this.update(u)})},function(f){return f.remove()}).transitions()}var Bu=function(){function t(r,e,n,i){this.set(r,e,n,i)}return Object.defineProperty(t.prototype,"left",{get:function(){return this.x1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"top",{get:function(){return this.y1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){return this.x2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bottom",{get:function(){return this.y2},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"width",{get:function(){return this.defined("x2")&&this.defined("x1")?this.x2-this.x1:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.defined("y2")&&this.defined("y1")?this.y2-this.y1:void 0},enumerable:!1,configurable:!0}),t.prototype.rotatedPoints=function(r,e,n){var i=this,a=i.x1,o=i.y1,s=i.x2,l=i.y2,c=Math.cos(r),u=Math.sin(r),f=e-e*c+n*u,d=n-e*u-n*c,h=[[c*a-u*l+f,u*a+c*l+d],[c*s-u*l+f,u*s+c*l+d],[c*a-u*o+f,u*a+c*o+d],[c*s-u*o+f,u*s+c*o+d]];return h},t.prototype.set=function(r,e,n,i){return n<r?(this.x2=r,this.x1=n):(this.x1=r,this.x2=n),i<e?(this.y2=e,this.y1=i):(this.y1=e,this.y2=i),this},t.prototype.defined=function(r){return this[r]!==Number.MAX_VALUE&&this[r]!==-Number.MAX_VALUE},t}();function Fu(t,r){var e=t.getEulerAngles()||0;t.setEulerAngles(0);var n=t.getBounds(),i=D(n.min,2),a=i[0],o=i[1],s=D(n.max,2),l=s[0],c=s[1],u=t.getBBox(),f=u.width,d=u.height,h=d,p=0,v=0,g=a,m=o,y=i1(t);if(y){h-=1.5;var b=y.style.textAlign,x=y.style.textBaseline;b==="center"?g=(a+l)/2:(b==="right"||b==="end")&&(g=l),x==="middle"?m=(o+c)/2:x==="bottom"&&(m=c)}var O=D(ze(r),4),w=O[0],S=w===void 0?0:w,k=O[1],E=k===void 0?0:k,_=O[2],A=_===void 0?S:_,M=O[3],T=M===void 0?E:M,C=new Bu((p+=a)-T,(v+=o)-S,p+f+E,v+h+A);return t.setEulerAngles(e),C.rotatedPoints(ia(e),g,m)}function Ca(t,r){return r[0]<=Math.max(t[0][0],t[1][0])&&r[0]<=Math.min(t[0][0],t[1][0])&&r[1]<=Math.max(t[0][1],t[1][1])&&r[1]<=Math.min(t[0][1],t[1][1])}function La(t,r,e){var n=(r[1]-t[1])*(e[0]-r[0])-(r[0]-t[0])*(e[1]-r[1]);return n===0?0:n<0?2:1}function sj(t,r){var e=La(t[0],t[1],r[0]),n=La(t[0],t[1],r[1]),i=La(r[0],r[1],t[0]),a=La(r[0],r[1],t[1]);return!!(e!==n&&i!==a||e===0&&Ca(t,r[0])||n===0&&Ca(t,r[1])||i===0&&Ca(r,t[0])||a===0&&Ca(r,t[1]))}function lj(t,r){var e=t.length;if(e<3)return!1;var n=[r,[9999,r[1]]],i=0,a=0;do{var o=[t[a],t[(a+1)%e]];if(sj(o,n)){if(La(o[0],r,o[1])===0)return Ca(o,r);i++}a=(a+1)%e}while(a!==0);return!!(i&1)}function cj(t,r){return r.every(function(e){return lj(t,e)})}function uj(t,r,e){var n=t.x1,i=t.x2,a=t.y1,o=t.y2,s=[[n,a],[i,a],[i,o],[n,o]],l=Fu(r,e);return cj(s,l)}function fj(t,r){var e=D(t,4),n=e[0],i=e[1],a=e[2],o=e[3],s=D(r,4),l=s[0],c=s[1],u=s[2],f=s[3],d=a-n,h=o-i,p=u-l,v=f-c,g=d*v-p*h;if(g===0)return!1;var m=g>0,y=n-l,b=i-c,x=d*b-h*y;if(x<0===m)return!1;var O=p*b-v*y;return!(O<0===m||x>g===m||O>g===m)}function dj(t,r){var e=[[t[0],t[1],t[2],t[3]],[t[2],t[3],t[4],t[5]],[t[4],t[5],t[6],t[7]],[t[6],t[7],t[0],t[1]]];return e.some(function(n){return fj(r,n)})}function hj(t,r,e){var n,i,a=Fu(t,e).flat(1),o=Fu(r,e).flat(1),s=[[a[0],a[1],a[2],a[3]],[a[0],a[1],a[4],a[5]],[a[4],a[5],a[6],a[7]],[a[2],a[3],a[6],a[7]]];try{for(var l=fo(s),c=l.next();!c.done;c=l.next()){var u=c.value;if(dj(o,u))return!0}}catch(f){n={error:f}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return!1}function pj(t,r){var e=t.type,n=t.labelDirection,i=t.crossSize;if(!i)return!1;if(e==="arc"){var a=t.center,o=t.radius,s=D(a,2),l=s[0],c=s[1],u=n==="negative"?0:i,f=-o-u,d=o+u,h=D(ze(r),4),p=h[0],v=h[1],g=h[2],m=h[3];return new Bu(l+f-m,c+f-p,l+d+v,c+d+g)}var y=D(t.startPos,2),b=y[0],x=y[1],O=D(t.endPos,2),w=O[0],S=O[1],k=D(O1(t)?[-r,0,r,0]:[0,r,0,-r],4),E=k[0],_=k[1],A=k[2],M=k[3],T=To(0,t),C=sr(T,i),I=new Bu(b,x,w,S);return I.x1+=M,I.y1+=E,I.x2+=_+C[0],I.y2+=A+C[1],I}function ec(t,r,e){var n,i,a=r.crossPadding,o=new Set,s=null,l=pj(r,a),c=function(p){return l?uj(l,p):!0},u=function(p,v){return!p||!p.firstChild?!0:!hj(p.firstChild,v.firstChild,ze(e))};try{for(var f=fo(t),d=f.next();!d.done;d=f.next()){var h=d.value;c(h)?!s||u(s,h)?s=h:(o.add(s),o.add(h)):o.add(h)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(i=f.return)&&i.call(f)}finally{if(n)throw n.error}}return Array.from(o)}function Bc(t,r){return r===void 0&&(r={}),pt(t)?0:typeof t=="number"?t:Math.floor(IN(t,r))}function vj(t,r,e,n){if(!(t.length<=0)){var i=r.suffix,a=i===void 0?"...":i,o=r.minLength,s=r.maxLength,l=s===void 0?1/0:s,c=r.step,u=c===void 0?" ":c,f=r.margin,d=f===void 0?[0,0,0,0]:f,h=r1(n.getTextShape(t[0])),p=Bc(u,h),v=o?Bc(o,h):p,g=Bc(l,h);(pt(g)||g===1/0)&&(g=Math.max.apply(null,t.map(function(w){return w.getBBox().width})));var m=t.slice(),y=D(d,4);y[0],y[1],y[2],y[3];for(var b=function(w){if(m.forEach(function(S){n.ellipsis(n.getTextShape(S),w,a)}),m=ec(t,e,d),m.length<1)return{value:void 0}},x=g;x>v+p;x-=p){var O=b(x);if(typeof O=="object")return O.value}}}var gj={parity:function(t,r){var e=r.seq,n=e===void 0?2:e;return t.filter(function(i,a){return a%n?(Fr(i),!1):!0})}},mj=function(t){return t.filter(NN)};function yj(t,r,e,n){var i=t.length,a=r.keepHeader,o=r.keepTail;if(!(i<=1||i===2&&a&&o)){var s=gj.parity,l=function(b){return b.forEach(n.show),b},c=2,u=t.slice(),f=t.slice(),d=Math.min.apply(Math,ut([1],D(t.map(function(b){return b.getBBox().width})),!1));if(e.type==="linear"&&(yd(e)||O1(e))){var h=Dp(t[0]).left,p=Dp(t[i-1]).right,v=Math.abs(p-h)||1;c=Math.max(Math.floor(i*d/v),c)}var g,m;for(a&&(g=u.splice(0,1)[0]),o&&(m=u.splice(-1,1)[0],u.reverse()),l(u);c<t.length&&ec(mj(m?ut(ut([m],D(f),!1),[g],!1):ut([g],D(f),!1)),e,r==null?void 0:r.margin).length;){if(m&&!g&&c%2===0){var y=u.splice(0,1);y.forEach(n.hide)}else if(m&&g){var y=u.splice(0,1);y.forEach(n.hide)}f=s(l(u),{seq:c}),c++}}}function bj(t,r,e,n){var i,a,o=r.optionalAngles,s=o===void 0?[0,45,90]:o,l=r.margin,c=r.recoverWhenFailed,u=c===void 0?!0:c,f=t.map(function(m){return m.getLocalEulerAngles()}),d=function(){return ec(t,e,l).length<1},h=function(m){return t.forEach(function(y,b){var x=Array.isArray(m)?m[b]:m;n.rotate(y,+x)})};try{for(var p=fo(s),v=p.next();!v.done;v=p.next()){var g=v.value;if(h(g),d())return}}catch(m){i={error:m}}finally{try{v&&!v.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}u&&h(f)}function xj(t){var r=t.type,e=t.labelDirection;return r==="linear"&&yd(t)?e==="negative"?"bottom":"top":"middle"}function Oj(t,r,e,n,i){var a,o=r.maxLines,s=o===void 0?3:o,l=r.recoverWhenFailed,c=l===void 0?!0:l,u=r.margin,f=u===void 0?[0,0,0,0]:u,d=cn((a=r.wordWrapWidth)!==null&&a!==void 0?a:50,[i]),h=t.map(function(b){return b.attr("maxLines")||1}),p=Math.min.apply(Math,ut([],D(h),!1)),v=function(){return ec(t,e,f).length<1},g=xj(e),m=function(b){return t.forEach(function(x,O){var w=Array.isArray(b)?b[O]:b;n.wrap(x,d,w,g)})};if(!(p>s)){if(e.type==="linear"&&yd(e)){if(m(s),v())return}else for(var y=p;y<=s;y++)if(m(y),v())return;c&&m(h)}}var wj=new Map([["hide",yj],["rotate",bj],["ellipsis",vj],["wrap",Oj]]);function Sj(t,r,e){return r.labelOverlap.length<1?!1:e==="hide"?!LN(t[0]):e==="rotate"?!t.some(function(n){var i;return!!(!((i=n.attr("transform"))===null||i===void 0)&&i.includes("rotate"))}):e==="ellipsis"||e==="wrap"?t.filter(function(n){return n.querySelector("text")}).length>=1:!0}function kj(t,r,e,n){var i=r.labelOverlap,a=i===void 0?[]:i;a.length&&a.forEach(function(o){var s=o.type,l=wj.get(s);Sj(t,r,s)&&(l==null||l(t,o,r,n,e))})}function Ej(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var e=function(n){return n==="positive"?-1:1};return t.reduce(function(n,i){return n*e(i)},1)}function Hp(t){for(var r=t;r<0;)r+=360;return Math.round(r%360)}function $u(t,r){var e=D(t,2),n=e[0],i=e[1],a=D(r,2),o=a[0],s=a[1],l=D([n*o+i*s,n*s-i*o],2),c=l[0],u=l[1];return Math.atan2(u,c)}function _j(t){var r=(t+360)%180;return Be(r,-90,90)||(r+=180),r}function Aj(t,r,e){var n,i=e.labelAlign,a=(n=r.style.transform)===null||n===void 0?void 0:n.includes("rotate");if(a)return r.getLocalEulerAngles();var o=0,s=To(t.value,e),l=Jl(t.value,e);return i==="horizontal"?0:(i==="perpendicular"?o=$u([1,0],s):o=$u([l[0]<0?-1:1,0],l),_j(e1(o)))}function k1(t,r,e){var n=e.type,i=e.labelAlign,a=To(t,e),o=Hp(r),s=Hp(e1($u([1,0],a))),l="center",c="middle";return n==="linear"?[90,270].includes(s)&&o===0?(l="center",c=a[1]===1?"top":"bottom"):!(s%180)&&[90,270].includes(o)?l="center":s===0?(Be(o,0,90,!1,!0)||Be(o,0,90)||Be(o,270,360))&&(l="start"):s===90?Be(o,0,90,!1,!0)?l="start":(Be(o,90,180)||Be(o,270,360))&&(l="end"):s===270?Be(o,0,90,!1,!0)?l="end":(Be(o,90,180)||Be(o,270,360))&&(l="start"):s===180&&(o===90?l="start":(Be(o,0,90)||Be(o,270,360))&&(l="end")):i==="parallel"?Be(s,0,180,!0)?c="top":c="bottom":i==="horizontal"?Be(s,90,270,!1)?l="end":(Be(s,270,360,!1)||Be(s,0,90))&&(l="start"):i==="perpendicular"&&(Be(s,90,270)?l="end":l="start"),{textAlign:l,textBaseline:c}}function Tj(t,r,e){r.setLocalEulerAngles(t);var n=r.__data__.value,i=k1(n,t,e),a=r.querySelector(Ft.labelItem.class);a&&E1(a,i)}function Vp(t,r,e){var n=e.showTick,i=e.tickLength,a=e.tickDirection,o=e.labelDirection,s=e.labelSpacing,l=r.indexOf(t),c=cn(s,[t,l,r]),u=D([To(t.value,e),Ej(o,a)],2),f=u[0],d=u[1],h=d===1?cn(n?i:0,[t,l,r]):0,p=D(Pa(sr(f,c+h),tc(t.value,e)),2),v=p[0],g=p[1];return{x:v,y:g}}function Mj(t,r,e,n){var i=n.labelFormatter,a=Le(i)?function(){return vi(cn(i,[t,r,e,To(t.value,n)]))}:function(){return vi(t.label||"")};return a}function E1(t,r){t.nodeName==="text"&&t.attr(r)}function Pj(t,r){kj(this.node().childNodes,t,r,{hide:Fr,show:Ao,rotate:function(e,n){Tj(+n,e,t)},ellipsis:function(e,n,i){e&&Iu(e,n||1/0,i)},wrap:function(e,n,i){e&&jN(e,n,i)},getTextShape:function(e){return e.querySelector("text")}})}function Xp(t,r,e,n,i){var a=e.indexOf(r),o=yt(t).append(Mj(r,a,e,i)).attr("className",Ft.labelItem.name).node(),s=D(mr(b1(n,[r,a,e])),2),l=s[0],c=s[1],u=c.transform,f=Pe(c,["transform"]);s1(o,u);var d=Aj(r,o,i);return o.getLocalEulerAngles()||o.setLocalEulerAngles(d),E1(o,J(J({},k1(r.value,d,i)),l)),t.attr(f),o}function Cj(t,r,e,n,i){var a=gd(r,e.labelFilter),o=At(e,"label"),s,l=t.selectAll(Ft.label.class).data(a,function(c,u){return u}).join(function(c){return c.append("g").attr("className",Ft.label.name).transition(function(u){Xp(this,u,r,o,e);var f=Vp(u,r,e),d=f.x,h=f.y;return this.style.transform="translate(".concat(d,", ").concat(h,")"),null})},function(c){return c.transition(function(u){var f=this.querySelector(Ft.labelItem.class),d=Xp(this,u,r,o,e),h=FI(f,d,n.update),p=Vp(u,r,e),v=p.x,g=p.y,m=Mn(this,{transform:"translate(".concat(v,", ").concat(g,")")},n.update);return ut(ut([],D(h),!1),[m],!1)})},function(c){return s=c,c.transition(function(){var u=this,f=Ql(this.childNodes[0],n.exit);return pa(f,function(){return yt(u).remove()}),f}),s}).transitions();return DI(l,function(){Pj.call(t,e,i)}),l}function _1(t,r){return md(t,r.tickDirection,r)}function Lj(t,r){var e=D(t,2),n=e[0],i=e[1];return[[0,0],[n*r,i*r]]}function Rj(t,r,e,n,i){var a=i.tickLength,o=D(Lj(n,cn(a,[t,r,e])),2),s=D(o[0],2),l=s[0],c=s[1],u=D(o[1],2),f=u[0],d=u[1];return{x1:l,x2:f,y1:c,y2:d}}function Nj(t,r,e,n,i){var a=i.tickFormatter,o=_1(r.value,i),s="line";return Le(a)&&(s=function(){return cn(a,[r,e,n,o])}),t.append(s).attr("className",Ft.tickItem.name)}function Ij(t,r,e,n,i,a,o){var s=_1(t.value,a),l=Rj(t,r,e,s,a),c=l.x1,u=l.x2,f=l.y1,d=l.y2,h=D(mr(b1(o,[t,r,e,s])),2),p=h[0],v=h[1];n.node().nodeName==="line"&&n.styles(J({x1:c,x2:u,y1:f,y2:d},p)),i.attr(v),n.styles(p)}function Up(t,r,e,n,i,a){var o=Nj(yt(this),t,r,e,n);Ij(t,r,e,o,this,n,i);var s=D(tc(t.value,n),2),l=s[0],c=s[1];return Mn(this,{transform:"translate(".concat(l,", ").concat(c,")")},a)}function jj(t,r,e,n){var i=gd(r,e.tickFilter),a=At(e,"tick");return t.selectAll(Ft.tick.class).data(i,function(o){return o.id||o.label}).join(function(o){return o.append("g").attr("className",Ft.tick.name).transition(function(s,l){return Up.call(this,s,l,i,e,a,!1)})},function(o){return o.transition(function(s,l){return this.removeChildren(),Up.call(this,s,l,i,e,a,n.update)})},function(o){return o.transition(function(){var s=this,l=Ql(this.childNodes[0],n.exit);return pa(l,function(){return s.remove()}),l})}).transitions()}var qp=Sn({text:"text"},"title");function nc(t){return/\S+-\S+/g.test(t)?t.split("-").map(function(r){return r[0]}):t.length>2?[t[0]]:t.split("")}function Dj(t,r){var e=t.attributes,n=e.position,i=e.spacing,a=e.inset,o=e.text,s=t.getBBox(),l=r.getBBox(),c=nc(n),u=D(ze(o?i:0),4),f=u[0],d=u[1],h=u[2],p=u[3],v=D(ze(a),4),g=v[0],m=v[1],y=v[2],b=v[3],x=D([p+d,f+h],2),O=x[0],w=x[1],S=D([b+m,g+y],2),k=S[0],E=S[1];if(c[0]==="l")return new ie(s.x,s.y,l.width+s.width+O+k,Math.max(l.height+E,s.height));if(c[0]==="t")return new ie(s.x,s.y,Math.max(l.width+k,s.width),l.height+s.height+w+E);var _=D([r.attributes.width||l.width,r.attributes.height||l.height],2),A=_[0],M=_[1];return new ie(l.x,l.y,A+s.width+O+k,M+s.height+w+E)}function Bj(t,r){var e=Object.entries(r).reduce(function(n,i){var a=D(i,2),o=a[0],s=a[1],l=t.node().attr(o);return l||(n[o]=s),n},{});t.styles(e)}function Fj(t){var r,e,n,i,a=t,o=a.width,s=a.height,l=a.position,c=D([+o/2,+s/2],2),u=c[0],f=c[1],d=D([+u,+f,"center","middle"],4),h=d[0],p=d[1],v=d[2],g=d[3],m=nc(l);return m.includes("l")&&(r=D([0,"start"],2),h=r[0],v=r[1]),m.includes("r")&&(e=D([+o,"end"],2),h=e[0],v=e[1]),m.includes("t")&&(n=D([0,"top"],2),p=n[0],g=n[1]),m.includes("b")&&(i=D([+s,"bottom"],2),p=i[0],g=i[1]),{x:h,y:p,textAlign:v,textBaseline:g}}var A1=function(t){oe(r,t);function r(e){return t.call(this,e,{text:"",width:0,height:0,fill:"#4a505a",fontWeight:"bold",fontSize:12,fontFamily:"sans-serif",inset:0,spacing:0,position:"top-left"})||this}return r.prototype.getAvailableSpace=function(){var e=this,n=this.attributes,i=n.width,a=n.height,o=n.position,s=n.spacing,l=n.inset,c=e.querySelector(qp.text.class);if(!c)return new ie(0,0,+i,+a);var u=c.getBBox(),f=u.width,d=u.height,h=D(ze(s),4),p=h[0],v=h[1],g=h[2],m=h[3],y=D([0,0,+i,+a],4),b=y[0],x=y[1],O=y[2],w=y[3],S=nc(o);if(S.includes("i"))return new ie(b,x,O,w);S.forEach(function(R,L){var P,N,j,B;R==="t"&&(P=D(L===0?[d+g,+a-d-g]:[0,+a],2),x=P[0],w=P[1]),R==="r"&&(N=D([+i-f-m],1),O=N[0]),R==="b"&&(j=D([+a-d-p],1),w=j[0]),R==="l"&&(B=D(L===0?[f+v,+i-f-v]:[0,+i],2),b=B[0],O=B[1])});var k=D(ze(l),4),E=k[0],_=k[1],A=k[2],M=k[3],T=D([M+_,E+A],2),C=T[0],I=T[1];return new ie(b+M,x+E,O-C,w-I)},r.prototype.getBBox=function(){return this.title?this.title.getBBox():new ie(0,0,0,0)},r.prototype.render=function(e,n){var i=this;e.width,e.height,e.position,e.spacing;var a=Pe(e,["width","height","position","spacing"]),o=D(mr(a),1),s=o[0],l=Fj(e),c=l.x,u=l.y,f=l.textAlign,d=l.textBaseline;on(!!a.text,yt(n),function(h){i.title=h.maybeAppendByClassName(qp.text,"text").styles(s).call(Bj,{x:c,y:u,textAlign:f,textBaseline:d}).node()})},r}(Ne);function $j(t,r,e){var n=e.titlePosition,i=n===void 0?"lb":n,a=e.titleSpacing,o=nc(i),s=t.node().getLocalBounds(),l=D(s.min,2),c=l[0],u=l[1],f=D(s.halfExtents,2),d=f[0],h=f[1],p=D(r.node().getLocalBounds().halfExtents,2),v=p[0],g=p[1],m=D([c+d,u+h],2),y=m[0],b=m[1],x=D(ze(a),4),O=x[0],w=x[1],S=x[2],k=x[3];if(["start","end"].includes(i)&&e.type==="linear"){var E=e.startPos,_=e.endPos,A=D(i==="start"?[E,_]:[_,E],2),M=A[0],T=A[1],C=o1([-T[0]+M[0],-T[1]+M[1]]),I=D(sr(C,O),2),R=I[0],L=I[1];return{x:M[0]+R,y:M[1]+L}}return o.includes("t")&&(b-=h+g+O),o.includes("r")&&(y+=d+v+w),o.includes("l")&&(y-=d+v+k),o.includes("b")&&(b+=h+g+S),{x:y,y:b}}function zj(t,r,e){var n=t.getGeometryBounds().halfExtents,i=n[1]*2;if(r==="vertical"){if(e==="left")return"rotate(-90) translate(0, ".concat(i/2,")");if(e==="right")return"rotate(-90) translate(0, -".concat(i/2,")")}return""}function Kp(t,r,e,n,i){var a=At(n,"title"),o=D(mr(a),2),s=o[0],l=o[1],c=l.transform,u=l.transformOrigin,f=Pe(l,["transform","transformOrigin"]);r.styles(f);var d=c||zj(t.node(),s.direction,s.position);t.styles(J(J({},s),{transformOrigin:u})),s1(t.node(),d);var h=$j(yt(e._offscreen||e.querySelector(Ft.mainGroup.class)),r,n),p=h.x,v=h.y,g=Mn(r.node(),{transform:"translate(".concat(p,", ").concat(v,")")},i);return g}function Gj(t,r,e,n){var i=e.titleText;return t.selectAll(Ft.title.class).data([{title:i}].filter(function(a){return!!a.title}),function(a,o){return a.title}).join(function(a){return a.append(function(){return vi(i)}).attr("className",Ft.title.name).transition(function(){return Kp(yt(this),t,r,e,n.enter)})},function(a){return a.transition(function(){return Kp(yt(this),t,r,e,n.update)})},function(a){return a.remove()}).transitions()}function Zp(t,r,e,n){var i=t.showLine,a=t.showTick,o=t.showLabel,s=r.maybeAppendByClassName(Ft.lineGroup,"g"),l=on(i,s,function(h){return nj(h,t,n)})||[],c=r.maybeAppendByClassName(Ft.tickGroup,"g"),u=on(a,c,function(h){return jj(h,e,t,n)})||[],f=r.maybeAppendByClassName(Ft.labelGroup,"g"),d=on(o,f,function(h){return Cj(h,e,t,n,r.node())})||[];return ut(ut(ut([],D(l),!1),D(u),!1),D(d),!1).filter(function(h){return!!h})}var bd=function(t){oe(r,t);function r(e){return t.call(this,e,vd)||this}return r.prototype.render=function(e,n,i){var a=this,o=e.titleText,s=e.data,l=e.animate,c=e.showTitle,u=e.showGrid,f=e.dataThreshold,d=e.truncRange,h=KN(s,f).filter(function(O){var w=O.value;return!(d&&w>d[0]&&w<d[1])}),p=Gp(i===void 0?l:i),v=yt(n).maybeAppendByClassName(Ft.gridGroup,"g"),g=on(u,v,function(O){return oj(O,h,e,p)})||[],m=yt(n).maybeAppendByClassName(Ft.mainGroup,"g");o&&(!this.initialized&&p.enter||this.initialized&&p.update)&&Zp(e,yt(this.offscreenGroup),h,Gp(!1));var y=Zp(e,yt(m.node()),h,p),b=yt(n).maybeAppendByClassName(Ft.titleGroup,"g"),x=on(c,b,function(O){return Gj(O,a,e,p)})||[];return ut(ut(ut([],D(g),!1),D(y),!1),D(x),!1).flat().filter(function(O){return!!O})},r}(Ne),hn=Sn({prevBtnGroup:"prev-btn-group",prevBtn:"prev-btn",nextBtnGroup:"next-btn-group",nextBtn:"next-btn",pageInfoGroup:"page-info-group",pageInfo:"page-info",playWindow:"play-window",contentGroup:"content-group",controller:"controller",clipPath:"clip-path"},"navigator"),Wj=function(t){oe(r,t);function r(e){var n=t.call(this,e,{x:0,y:0,animate:{easing:"linear",duration:200,fill:"both"},buttonCursor:"pointer",buttonFill:"black",buttonD:_I(0,0,6),buttonSize:12,controllerPadding:5,controllerSpacing:5,formatter:function(i,a){return"".concat(i,"/").concat(a)},defaultPage:0,loop:!1,orientation:"horizontal",pageNumFill:"black",pageNumFontSize:12,pageNumTextAlign:"start",pageNumTextBaseline:"middle"})||this;return n.playState="idle",n.contentGroup=n.appendChild(new Re({class:hn.contentGroup.name})),n.playWindow=n.contentGroup.appendChild(new Re({class:hn.playWindow.name})),n.innerCurrPage=n.defaultPage,n}return Object.defineProperty(r.prototype,"defaultPage",{get:function(){var e=this.attributes.defaultPage;return be(e,0,Math.max(this.pageViews.length-1,0))},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageViews",{get:function(){return this.playWindow.children},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"controllerShape",{get:function(){return this.totalPages>1?{width:55,height:0}:{width:0,height:0}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"pageShape",{get:function(){var e=this.pageViews,n=D(sI(e.map(function(f){var d=f.getBBox(),h=d.width,p=d.height;return[h,p]})).map(function(f){return Math.max.apply(Math,ut([],D(f),!1))}),2),i=n[0],a=n[1],o=this.attributes,s=o.pageWidth,l=s===void 0?i:s,c=o.pageHeight,u=c===void 0?a:c;return{pageWidth:l,pageHeight:u}},enumerable:!1,configurable:!0}),r.prototype.getContainer=function(){return this.playWindow},Object.defineProperty(r.prototype,"totalPages",{get:function(){return this.pageViews.length},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"currPage",{get:function(){return this.innerCurrPage},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var e=t.prototype.getBBox.call(this),n=e.x,i=e.y,a=this.controllerShape,o=this.pageShape,s=o.pageWidth,l=o.pageHeight;return new ie(n,i,s+a.width,l)},r.prototype.goTo=function(e){var n=this,i=this.attributes.animate,a=this,o=a.currPage,s=a.playState,l=a.playWindow,c=a.pageViews;if(s!=="idle"||e<0||c.length<=0||e>=c.length)return null;c[o].setLocalPosition(0,0),this.prepareFollowingPage(e);var u=D(this.getFollowingPageDiff(e),2),f=u[0],d=u[1];this.playState="running";var h=d1(l,[{transform:"translate(0, 0)"},{transform:"translate(".concat(-f,", ").concat(-d,")")}],i);return pa(h,function(){n.innerCurrPage=e,n.playState="idle",n.setVisiblePages([e]),n.updatePageInfo()}),h},r.prototype.prev=function(){var e=this.attributes.loop,n=this.pageViews.length,i=this.currPage;if(!e&&i<=0)return null;var a=e?(i-1+n)%n:be(i-1,0,n);return this.goTo(a)},r.prototype.next=function(){var e=this.attributes.loop,n=this.pageViews.length,i=this.currPage;if(!e&&i>=n-1)return null;var a=e?(i+1)%n:be(i+1,0,n);return this.goTo(a)},r.prototype.renderClipPath=function(e){var n=this.pageShape,i=n.pageWidth,a=n.pageHeight;if(!i||!a){this.contentGroup.style.clipPath=void 0;return}this.clipPath=e.maybeAppendByClassName(hn.clipPath,"rect").styles({width:i,height:a}),this.contentGroup.attr("clipPath",this.clipPath.node())},r.prototype.setVisiblePages=function(e){this.playWindow.children.forEach(function(n,i){e.includes(i)?Ao(n):Fr(n)})},r.prototype.adjustControllerLayout=function(){var e=this,n=e.prevBtnGroup,i=e.nextBtnGroup,a=e.pageInfoGroup,o=this.attributes,s=o.orientation,l=o.controllerPadding,c=a.getBBox(),u=c.width;c.height;var f=D(s==="horizontal"?[-180,0]:[-90,90],2),d=f[0],h=f[1];n.setLocalEulerAngles(d),i.setLocalEulerAngles(h);var p=n.getBBox(),v=p.width,g=p.height,m=i.getBBox(),y=m.width,b=m.height,x=Math.max(v,u,y),O=s==="horizontal"?{offset:[[0,0],[v/2+l,0],[v+u+l*2,0]],textAlign:"start"}:{offset:[[x/2,-g-l],[x/2,0],[x/2,b+l]],textAlign:"center"},w=D(O.offset,3),S=D(w[0],2),k=S[0],E=S[1],_=D(w[1],2),A=_[0],M=_[1],T=D(w[2],2),C=T[0],I=T[1],R=O.textAlign,L=a.querySelector("text");L&&(L.style.textAlign=R),n.setLocalPosition(k,E),a.setLocalPosition(A,M),i.setLocalPosition(C,I)},r.prototype.updatePageInfo=function(){var e,n=this,i=n.currPage,a=n.pageViews,o=n.attributes.formatter;a.length<2||((e=this.pageInfoGroup.querySelector(hn.pageInfo.class))===null||e===void 0||e.attr("text",o(i+1,a.length)),this.adjustControllerLayout())},r.prototype.getFollowingPageDiff=function(e){var n=this.currPage;if(n===e)return[0,0];var i=this.attributes.orientation,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=e<n?-1:1;return i==="horizontal"?[l*o,0]:[0,l*s]},r.prototype.prepareFollowingPage=function(e){var n=this,i=n.currPage,a=n.pageViews;if(this.setVisiblePages([e,i]),e!==i){var o=D(this.getFollowingPageDiff(e),2),s=o[0],l=o[1];a[e].setLocalPosition(s,l)}},r.prototype.renderController=function(e){var n=this,i=this.attributes.controllerSpacing,a=this.pageShape,o=a.pageWidth,s=a.pageHeight,l=this.pageViews.length>=2,c=e.maybeAppendByClassName(hn.controller,"g");if(Zl(c.node(),l),!!l){var u=At(this.attributes,"button"),f=At(this.attributes,"pageNum"),d=D(mr(u),2),h=d[0],p=d[1],v=h.size,g=Pe(h,["size"]),m=!c.select(hn.prevBtnGroup.class).node(),y=c.maybeAppendByClassName(hn.prevBtnGroup,"g").styles(p);this.prevBtnGroup=y.node();var b=y.maybeAppendByClassName(hn.prevBtn,"path"),x=c.maybeAppendByClassName(hn.nextBtnGroup,"g").styles(p);this.nextBtnGroup=x.node();var O=x.maybeAppendByClassName(hn.nextBtn,"path");[b,O].forEach(function(S){S.styles(J(J({},g),{transformOrigin:"center"})),dd(S.node(),v)});var w=c.maybeAppendByClassName(hn.pageInfoGroup,"g");this.pageInfoGroup=w.node(),w.maybeAppendByClassName(hn.pageInfo,"text").styles(f),this.updatePageInfo(),c.node().setLocalPosition(o+i,s/2),m&&(this.prevBtnGroup.addEventListener("click",function(){n.prev()}),this.nextBtnGroup.addEventListener("click",function(){n.next()}))}},r.prototype.render=function(e,n){var i=e.x,a=i===void 0?0:i,o=e.y,s=o===void 0?0:o;this.attr("transform","translate(".concat(a,", ").concat(s,")"));var l=yt(n);this.renderClipPath(l),this.renderController(l),this.setVisiblePages([this.defaultPage]),this.goTo(this.defaultPage)},r.prototype.bindEvents=function(){var e=this,n=Rm(function(){return e.render(e.attributes,e)},50);this.playWindow.addEventListener(Et.INSERTED,n),this.playWindow.addEventListener(Et.REMOVED,n)},r}(Ne);function Yj(t,r,e){var n=Math.round((t-e)/r);return e+n*r}function Hj(t,r,e){var n=1.4,i=n*e;return[["M",t-e,r-i],["L",t+e,r-i],["L",t+e,r+i],["L",t-e,r+i],["Z"]]}var T1=1.4,M1=.4;function Vj(t,r,e){var n=e,i=n*T1,a=n/2,o=n/6,s=t+i*M1;return[["M",t,r],["L",s,r+a],["L",t+i,r+a],["L",t+i,r-a],["L",s,r-a],["Z"],["M",s,r+o],["L",t+i-2,r+o],["M",s,r-o],["L",t+i-2,r-o]]}function Xj(t,r,e){var n=e,i=n*T1,a=n/2,o=n/6,s=r+i*M1;return[["M",t,r],["L",t-a,s],["L",t-a,r+i],["L",t+a,r+i],["L",t+a,s],["Z"],["M",t-o,s],["L",t-o,r+i-2],["M",t+o,s],["L",t+o,r+i-2]]}Nt.registerSymbol("hiddenHandle",Hj);Nt.registerSymbol("verticalHandle",Vj);Nt.registerSymbol("horizontalHandle",Xj);function Uj(t,r,e,n){var i,a=D(t,2),o=a[0],s=a[1],l=D(r,2),c=l[0],u=l[1],f=D(e,2),d=f[0],h=f[1],p=D([c,u],2),v=p[0],g=p[1],m=g-v;return v>g&&(i=D([g,v],2),v=i[0],g=i[1]),m>s-o?[o,s]:v<o?d===o&&h===g?[o,g]:[o,m+o]:g>s?h===s&&d===v?[v,s]:[s-m,s]:[v,g]}function Xn(t,r,e){return t===void 0&&(t="horizontal"),t==="horizontal"?r:e}var _t,qj="component-poptip",Ot={CONTAINER:"component-poptip",ARROW:"component-poptip-arrow",TEXT:"component-poptip-text"},Qp=(_t={},_t[".".concat(Ot.CONTAINER)]={visibility:"visible",position:"absolute","background-color":"rgba(0, 0, 0)","box-shadow":"0px 0px 10px #aeaeae","border-radius":"3px",color:"#fff",opacity:.8,"font-size":"12px",padding:"4px 6px",display:"flex","justify-content":"center","align-items":"center","z-index":8,transition:"visibility 50ms"},_t[".".concat(Ot.TEXT)]={"text-align":"center"},_t[".".concat(Ot.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, -100%)"},_t[".".concat(Ot.CONTAINER,"[data-position='left']")]={transform:"translate(-100%, -50%)"},_t[".".concat(Ot.CONTAINER,"[data-position='right']")]={transform:"translate(0, -50%)"},_t[".".concat(Ot.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 0)"},_t[".".concat(Ot.CONTAINER,"[data-position='top-left']")]={transform:"translate(0,-100%)"},_t[".".concat(Ot.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%,-100%)"},_t[".".concat(Ot.CONTAINER,"[data-position='left-top']")]={transform:"translate(-100%, 0)"},_t[".".concat(Ot.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(-100%, -100%)"},_t[".".concat(Ot.CONTAINER,"[data-position='right-top']")]={transform:"translate(0, 0)"},_t[".".concat(Ot.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(0, -100%)"},_t[".".concat(Ot.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 0)"},_t[".".concat(Ot.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 0)"},_t[".".concat(Ot.ARROW)]={width:"4px",height:"4px",transform:"rotate(45deg)","background-color":"rgba(0, 0, 0)",position:"absolute","z-index":-1},_t[".".concat(Ot.CONTAINER,"[data-position='top']")]={transform:"translate(-50%, calc(-100% - 5px))"},_t["[data-position='top'] .".concat(Ot.ARROW)]={bottom:"-2px"},_t[".".concat(Ot.CONTAINER,"[data-position='left']")]={transform:"translate(calc(-100% - 5px), -50%)"},_t["[data-position='left'] .".concat(Ot.ARROW)]={right:"-2px"},_t[".".concat(Ot.CONTAINER,"[data-position='right']")]={transform:"translate(5px, -50%)"},_t["[data-position='right'] .".concat(Ot.ARROW)]={left:"-2px"},_t[".".concat(Ot.CONTAINER,"[data-position='bottom']")]={transform:"translate(-50%, 5px)"},_t["[data-position='bottom'] .".concat(Ot.ARROW)]={top:"-2px"},_t[".".concat(Ot.CONTAINER,"[data-position='top-left']")]={transform:"translate(0, calc(-100% - 5px))"},_t["[data-position='top-left'] .".concat(Ot.ARROW)]={left:"10px",bottom:"-2px"},_t[".".concat(Ot.CONTAINER,"[data-position='top-right']")]={transform:"translate(-100%, calc(-100% - 5px))"},_t["[data-position='top-right'] .".concat(Ot.ARROW)]={right:"10px",bottom:"-2px"},_t[".".concat(Ot.CONTAINER,"[data-position='left-top']")]={transform:"translate(calc(-100% - 5px), 0)"},_t["[data-position='left-top'] .".concat(Ot.ARROW)]={right:"-2px",top:"8px"},_t[".".concat(Ot.CONTAINER,"[data-position='left-bottom']")]={transform:"translate(calc(-100% - 5px), -100%)"},_t["[data-position='left-bottom'] .".concat(Ot.ARROW)]={right:"-2px",bottom:"8px"},_t[".".concat(Ot.CONTAINER,"[data-position='right-top']")]={transform:"translate(5px, 0)"},_t["[data-position='right-top'] .".concat(Ot.ARROW)]={left:"-2px",top:"8px"},_t[".".concat(Ot.CONTAINER,"[data-position='right-bottom']")]={transform:"translate(5px, -100%)"},_t["[data-position='right-bottom'] .".concat(Ot.ARROW)]={left:"-2px",bottom:"8px"},_t[".".concat(Ot.CONTAINER,"[data-position='bottom-left']")]={transform:"translate(0, 5px)"},_t["[data-position='bottom-left'] .".concat(Ot.ARROW)]={top:"-2px",left:"8px"},_t[".".concat(Ot.CONTAINER,"[data-position='bottom-right']")]={transform:"translate(-100%, 5px)"},_t["[data-position='bottom-right'] .".concat(Ot.ARROW)]={top:"-2px",right:"8px"},_t),Kj=void 0;function Zj(t,r,e,n,i,a){if(i===void 0&&(i=!1),a===void 0&&(a=!1),a)return[t,r];var o=e.getBoundingClientRect(),s=o.x,l=o.y,c=o.width,u=o.height;switch(n){case"top":return i?[s+c/2,l]:[t,l];case"left":return i?[s,l+u/2]:[s,r];case"bottom":return i?[s+c/2,l+u]:[t,l+u];case"right":return i?[s+c,l+u/2]:[s+c,r];case"top-right":case"right-top":return[s+c,l];case"left-bottom":case"bottom-left":return[s,l+u];case"right-bottom":case"bottom-right":return[s+c,l+u];case"top-left":case"left-top":default:return[s,l]}}var Qj=function(t){var r;return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return r||(r=t.apply(Kj,e)),r}};function Jj(t){var r=t&&document.getElementById(t);return r||(r=document.createElement("div"),r.setAttribute("id",t),document.body.appendChild(r)),r}function tD(t){var r=Qj(Jj)(t);return r}var eD=function(t){oe(r,t);function r(e){var n=t.call(this,X({style:{id:qj}},r.defaultOptions,e))||this;return n.visibility="visible",n.map=new Map,n.domStyles="",n.initShape(),n.render(n.attributes,n),n}return Object.defineProperty(r.prototype,"visible",{get:function(){return this.visibility==="visible"},enumerable:!1,configurable:!0}),r.prototype.render=function(e,n){this.visibility=this.style.visibility,this.updatePoptipElement()},r.prototype.update=function(e){this.attr(X({},this.style,e)),this.render(this.attributes,this)},r.prototype.bind=function(e,n){var i=this;if(e){var a=this.style.text,o=function(l){var c=e,u=i.style,f=a;if(n){var d=typeof n=="function"?n.call(null,l):n,h=d.html,p=d.target,v=Pe(d,["html","target"]);u=$A({},i.style,v),(p||p===!1)&&(c=p),typeof h=="string"&&(f=h)}var g=u.position,m=u.arrowPointAtCenter,y=u.follow,b=u.offset;if(c){var x=l,O=x.clientX,w=x.clientY,S=D(Zj(O,w,c,g,m,y),2),k=S[0],E=S[1];i.showTip(k,E,{text:f,position:g,offset:b})}else i.hideTip()},s=function(){i.hideTip()};e.addEventListener("mousemove",o),e.addEventListener("mouseleave",s),this.map.set(e,[o,s])}},r.prototype.unbind=function(e){if(this.map.has(e)){var n=D(this.map.get(e)||[],2),i=n[0],a=n[1];i&&e.removeEventListener("mousemove",i),a&&e.removeEventListener("mouseleave",a),this.map.delete(e)}},r.prototype.clear=function(){this.container.innerHTML=""},r.prototype.destroy=function(){var e=this,n;ut([],D(this.map.keys()),!1).forEach(function(i){return e.unbind(i)}),(n=this.container)===null||n===void 0||n.remove(),t.prototype.destroy.call(this)},r.prototype.showTip=function(e,n,i){var a=Rt(i,"text");if(!(a&&typeof a!="string")&&(this.applyStyles(),e&&n&&i)){var o=i.offset,s=i.position;if(s&&this.container.setAttribute("data-position",s),this.setOffsetPosition(e,n,o),typeof a=="string"){var l=this.container.querySelector(".".concat(Ot.TEXT));l&&(l.innerHTML=a)}this.visibility="visible",this.container.style.visibility="visible"}},r.prototype.hideTip=function(){this.visibility="hidden",this.container.style.visibility="hidden"},r.prototype.getContainer=function(){return this.container},r.prototype.getClassName=function(){var e=this.style.containerClassName;return"".concat(Ot.CONTAINER).concat(e?" ".concat(e):"")},r.prototype.initShape=function(){var e=this,n=this.style.id;this.container=tD(n),this.container.className=this.getClassName(),this.container.addEventListener("mousemove",function(){return e.showTip()}),this.container.addEventListener("mouseleave",function(){return e.hideTip()})},r.prototype.updatePoptipElement=function(){var e=this.container;this.clear();var n=this.style,i=n.id,a=n.template,o=n.text;this.container.setAttribute("id",i),this.container.className=this.getClassName();var s='<span class="'.concat(Ot.ARROW,'"></span>');e.innerHTML=s,ce(a)?e.innerHTML+=a:a&&FA(a)&&e.appendChild(a),o&&(e.getElementsByClassName(Ot.TEXT)[0].textContent=o),this.applyStyles(),this.container.style.visibility=this.visibility},r.prototype.applyStyles=function(){var e=Cn({},Qp,this.style.domStyles),n=Object.entries(e).reduce(function(a,o){var s=D(o,2),l=s[0],c=s[1],u=Object.entries(c).reduce(function(f,d){var h=D(d,2),p=h[0],v=h[1];return"".concat(f).concat(p,": ").concat(v,";")},"");return"".concat(a).concat(l,"{").concat(u,"}")},"");if(this.domStyles!==n){this.domStyles=n;var i=this.container.querySelector("style");i&&this.container.removeChild(i),i=document.createElement("style"),i.innerHTML=n,this.container.appendChild(i)}},r.prototype.setOffsetPosition=function(e,n,i){i===void 0&&(i=this.style.offset);var a=D(i,2),o=a[0],s=o===void 0?0:o,l=a[1],c=l===void 0?0:l;this.container.style.left="".concat(e+s,"px"),this.container.style.top="".concat(n+c,"px")},r.tag="poptip",r.defaultOptions={style:{x:0,y:0,width:0,height:0,target:null,visibility:"hidden",text:"",position:"top",follow:!1,offset:[0,0],domStyles:Qp,template:'<div class="'.concat(Ot.TEXT,'"></div>')}},r}(Ne),Ke=Sn({layout:"flex",markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label",valueGroup:"value-group",value:"value",backgroundGroup:"background-group",background:"background"},"legend-category-item"),nD={offset:[0,20],domStyles:{".component-poptip":{opacity:"1",padding:"8px 12px",background:"#fff",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},".component-poptip-arrow":{display:"none"},".component-poptip-text":{color:"#000",lineHeight:"20px"}}};function rD(t){var r=t.querySelector(Ke.marker.class);return r?r.style:{}}var iD=function(t){oe(r,t);function r(e){return t.call(this,e,{span:[1,1],marker:function(){return new gr({style:{r:6}})},markerSize:10,labelFill:"#646464",valueFill:"#646464",labelFontSize:12,valueFontSize:12,labelTextBaseline:"middle",valueTextBaseline:"middle"})||this}return Object.defineProperty(r.prototype,"showValue",{get:function(){var e=this.attributes.valueText;return e?typeof e=="string"||typeof e=="number"?e!=="":typeof e=="function"?!0:e.attr("text")!=="":!1},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"actualSpace",{get:function(){var e=this.labelGroup,n=this.valueGroup,i=this.attributes.markerSize,a=e.node().getBBox(),o=a.width,s=a.height,l=n.node().getBBox(),c=l.width,u=l.height;return{markerWidth:i,labelWidth:o,valueWidth:c,height:Math.max(i,s,u)}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"span",{get:function(){var e=this.attributes.span;if(!e)return[1,1];var n=D(ze(e),2),i=n[0],a=n[1],o=this.showValue?a:0,s=i+o;return[i/s,o/s]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"shape",{get:function(){var e,n=this.attributes,i=n.markerSize,a=n.width,o=this.actualSpace,s=o.markerWidth,l=o.height,c=this.actualSpace,u=c.labelWidth,f=c.valueWidth,d=D(this.spacing,2),h=d[0],p=d[1];if(a){var v=a-i-h-p,g=D(this.span,2),m=g[0],y=g[1];e=D([m*v,y*v],2),u=e[0],f=e[1]}var b=s+u+f+h+p;return{width:b,height:l,markerWidth:s,labelWidth:u,valueWidth:f}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"spacing",{get:function(){var e=this.attributes.spacing;if(!e)return[0,0];var n=D(ze(e),2),i=n[0],a=n[1];return this.showValue?[i,a]:[i,0]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"layout",{get:function(){var e=this.shape,n=e.markerWidth,i=e.labelWidth,a=e.valueWidth,o=e.width,s=e.height,l=D(this.spacing,2),c=l[0],u=l[1];return{height:s,width:o,markerWidth:n,labelWidth:i,valueWidth:a,position:[n/2,n+c,n+i+c+u]}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"scaleSize",{get:function(){var e=rD(this.markerGroup.node()),n=this.attributes,i=n.markerSize,a=n.markerStrokeWidth,o=a===void 0?e.strokeWidth:a,s=n.markerLineWidth,l=s===void 0?e.lineWidth:s,c=n.markerStroke,u=c===void 0?e.stroke:c,f=+(o||l||(u?1:0))*Math.sqrt(2),d=this.markerGroup.node().getBBox(),h=d.width,p=d.height;return(1-f/Math.max(h,p))*i},enumerable:!1,configurable:!0}),r.prototype.renderMarker=function(e){var n=this,i=this.attributes.marker,a=At(this.attributes,"marker");this.markerGroup=e.maybeAppendByClassName(Ke.markerGroup,"g").style("zIndex",0),on(!!i,this.markerGroup,function(){var o,s=n.markerGroup.node(),l=(o=s.childNodes)===null||o===void 0?void 0:o[0],c=typeof i=="string"?new Nt({style:{symbol:i},className:Ke.marker.name}):i();l?c.nodeName===l.nodeName?l instanceof Nt?l.update(J(J({},a),{symbol:i})):(nI(l,c),yt(l).styles(a)):(l.remove(),yt(c).attr("className",Ke.marker.name).styles(a),s.appendChild(c)):(c instanceof Nt||yt(c).attr("className",Ke.marker.name).styles(a),s.appendChild(c)),n.markerGroup.node().scale(1/n.markerGroup.node().getScale()[0]);var u=dd(n.markerGroup.node(),n.scaleSize);n.markerGroup.node().style._transform="scale(".concat(u,")")})},r.prototype.renderLabel=function(e){var n=At(this.attributes,"label"),i=n.text,a=Pe(n,["text"]);this.labelGroup=e.maybeAppendByClassName(Ke.labelGroup,"g").style("zIndex",0),this.labelGroup.maybeAppendByClassName(Ke.label,function(){return vi(i)}).styles(a)},r.prototype.renderValue=function(e){var n=this,i=At(this.attributes,"value"),a=i.text,o=Pe(i,["text"]);this.valueGroup=e.maybeAppendByClassName(Ke.valueGroup,"g").style("zIndex",0),on(this.showValue,this.valueGroup,function(){n.valueGroup.maybeAppendByClassName(Ke.value,function(){return vi(a)}).styles(o)})},r.prototype.createPoptip=function(){var e=this.attributes.poptip,n=e||{};n.render;var i=Pe(n,["render"]),a=new eD({style:Cn(nD,i)});return this.poptipGroup=a,a},r.prototype.bindPoptip=function(e){var n=this,i=this.attributes.poptip;if(i){var a=this.poptipGroup||this.createPoptip();a.bind(e,function(){var o=n.attributes,s=o.labelText,l=o.valueText,c=o.markerFill,u=typeof s=="string"?s:s==null?void 0:s.attr("text"),f=typeof l=="string"?l:l==null?void 0:l.attr("text");if(typeof i.render=="function")return{html:i.render({label:u,value:f,color:c})};var d="";return(typeof u=="string"||typeof u=="number")&&(d+='<div class="component-poptip-label">'.concat(u,"</div>")),(typeof f=="string"||typeof f=="number")&&(d+='<div class="component-poptip-value">'.concat(f,"</div>")),{html:d}})}},r.prototype.renderPoptip=function(e){var n=this,i=this.attributes.poptip;if(i){var a=e.maybeAppendByClassName(Ke.value,"g").node(),o=e.maybeAppendByClassName(Ke.label,"g").node();[a,o].forEach(function(s){s&&n.bindPoptip(s)})}},r.prototype.renderBackground=function(e){var n=this.shape,i=n.width,a=n.height,o=At(this.attributes,"background");this.background=e.maybeAppendByClassName(Ke.backgroundGroup,"g").style("zIndex",-1),this.background.maybeAppendByClassName(Ke.background,"rect").styles(J({width:i,height:a},o))},r.prototype.adjustLayout=function(){var e=this.layout,n=e.labelWidth,i=e.valueWidth,a=e.height,o=D(e.position,3),s=o[0],l=o[1],c=o[2],u=a/2;this.markerGroup.styles({transform:"translate(".concat(s,", ").concat(u,")").concat(this.markerGroup.node().style._transform)}),this.labelGroup.styles({transform:"translate(".concat(l,", ").concat(u,")")}),Iu(this.labelGroup.select(Ke.label.class).node(),Math.ceil(n)),this.showValue&&(this.valueGroup.styles({transform:"translate(".concat(c,", ").concat(u,")")}),Iu(this.valueGroup.select(Ke.value.class).node(),Math.ceil(i)))},r.prototype.render=function(e,n){var i=yt(n),a=e.x,o=a===void 0?0:a,s=e.y,l=s===void 0?0:s;i.styles({transform:"translate(".concat(o,", ").concat(l,")")}),this.renderMarker(i),this.renderLabel(i),this.renderValue(i),this.renderBackground(i),this.renderPoptip(i),this.adjustLayout()},r}(Ne),Qr=Sn({page:"item-page",navigator:"navigator",item:"item"},"items"),Jp=function(t,r,e){return e===void 0&&(e=!0),t?r(t):e},aD=function(t){oe(r,t);function r(e){var n=t.call(this,e,{data:[],gridRow:1/0,gridCol:void 0,padding:0,width:1e3,height:100,rowPadding:0,colPadding:0,layout:"flex",orientation:"horizontal",click:yc,mouseenter:yc,mouseleave:yc})||this;return n.navigatorShape=[0,0],n}return Object.defineProperty(r.prototype,"pageViews",{get:function(){return this.navigator.getContainer()},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"grid",{get:function(){var e=this.attributes,n=e.gridRow,i=e.gridCol,a=e.data;if(!n&&!i)throw new Error("gridRow and gridCol can not be set null at the same time");return n&&i?[n,i]:n?[n,a.length]:[a.length,i]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"renderData",{get:function(){var e=this.attributes,n=e.data,i=e.layout,a=e.poptip,o=At(this.attributes,"item"),s=n.map(function(l,c){var u=l.id,f=u===void 0?c:u,d=l.label,h=l.value;return{id:"".concat(f),index:c,style:J({layout:i,labelText:d,valueText:h,poptip:a},Object.fromEntries(Object.entries(o).map(function(p){var v=D(p,2),g=v[0],m=v[1];return[g,cn(m,[l,c,n])]})))}});return s},enumerable:!1,configurable:!0}),r.prototype.getGridLayout=function(){var e=this,n=this.attributes,i=n.orientation,a=n.width,o=n.rowPadding,s=n.colPadding,l=D(this.navigatorShape,1),c=l[0],u=D(this.grid,2),f=u[0],d=u[1],h=d*f,p=0;return this.pageViews.children.map(function(v,g){var m,y,b=Math.floor(g/h),x=g%h,O=e.ifHorizontal(d,f),w=[Math.floor(x/O),x%O];i==="vertical"&&w.reverse();var S=D(w,2),k=S[0],E=S[1],_=(a-c-(d-1)*s)/d,A=v.getBBox().height,M=D([0,0],2),T=M[0],C=M[1];return i==="horizontal"?(m=D([p,k*(A+o)],2),T=m[0],C=m[1],p=E===d-1?0:p+_+s):(y=D([E*(_+s),p],2),T=y[0],C=y[1],p=k===f-1?0:p+A+o),{page:b,index:g,row:k,col:E,pageIndex:x,width:_,height:A,x:T,y:C}})},r.prototype.getFlexLayout=function(){var e=this.attributes,n=e.width,i=e.height,a=e.rowPadding,o=e.colPadding,s=D(this.navigatorShape,1),l=s[0],c=D(this.grid,2),u=c[0],f=c[1],d=D([n-l,i],2),h=d[0],p=d[1],v=D([0,0,0,0,0,0,0,0],8),g=v[0],m=v[1],y=v[2],b=v[3],x=v[4],O=v[5],w=v[6],S=v[7];return this.pageViews.children.map(function(k,E){var _,A,M,T,C=k.getBBox(),I=C.width,R=C.height,L=w===0?0:o,P=w+L+I;if(P<=h&&Jp(x,function(j){return j<f}))return _=D([w+L,S,P],3),g=_[0],m=_[1],w=_[2],{width:I,height:R,x:g,y:m,page:y,index:E,pageIndex:b++,row:O,col:x++};A=D([O+1,0,0,S+R+a],4),O=A[0],x=A[1],w=A[2],S=A[3];var N=S+R;return N<=p&&Jp(O,function(j){return j<u})?(M=D([w,S,I],3),g=M[0],m=M[1],w=M[2],{width:I,height:R,x:g,y:m,page:y,index:E,pageIndex:b++,row:O,col:x++}):(T=D([0,0,I,0,y+1,0,0,0],8),g=T[0],m=T[1],w=T[2],S=T[3],y=T[4],b=T[5],O=T[6],x=T[7],{width:I,height:R,x:g,y:m,page:y,index:E,pageIndex:b++,row:O,col:x++})})},Object.defineProperty(r.prototype,"itemsLayout",{get:function(){this.navigatorShape=[0,0];var e=this.attributes.layout==="grid"?this.getGridLayout:this.getFlexLayout,n=e.call(this);return n.slice(-1)[0].page>0?(this.navigatorShape=[55,0],e.call(this)):n},enumerable:!1,configurable:!0}),r.prototype.ifHorizontal=function(e,n){var i=this.attributes.orientation;return Xn(i,e,n)},r.prototype.flattenPage=function(e){e.querySelectorAll(Qr.item.class).forEach(function(n){e.appendChild(n)}),e.querySelectorAll(Qr.page.class).forEach(function(n){var i=e.removeChild(n);i.destroy()})},r.prototype.renderItems=function(e){var n=this.attributes,i=n.click,a=n.mouseenter,o=n.mouseleave;this.flattenPage(e);var s=this.dispatchCustomEvent.bind(this);yt(e).selectAll(Qr.item.class).data(this.renderData,function(l){return l.id}).join(function(l){return l.append(function(c){var u=c.style;return new iD({style:u})}).attr("className",Qr.item.name).on("click",function(){i==null||i(this),s("itemClick",{item:this})}).on("pointerenter",function(){a==null||a(this),s("itemMouseenter",{item:this})}).on("pointerleave",function(){o==null||o(this),s("itemMouseleave",{item:this})})},function(l){return l.each(function(c){var u=c.style;this.update(u)})},function(l){return l.remove()})},r.prototype.relayoutNavigator=function(){var e,n=this.attributes,i=n.layout,a=n.width,o=((e=this.pageViews.children[0])===null||e===void 0?void 0:e.getBBox().height)||0,s=D(this.navigatorShape,2),l=s[0],c=s[1];this.navigator.update(i==="grid"?{pageWidth:a-l,pageHeight:o-c}:{})},r.prototype.adjustLayout=function(){var e=this,n=Object.entries(DN(this.itemsLayout,"page")).map(function(a){var o=D(a,2),s=o[0],l=o[1];return{page:s,layouts:l}}),i=ut([],D(this.navigator.getContainer().children),!1);n.forEach(function(a){var o=a.layouts,s=e.pageViews.appendChild(new Re({className:Qr.page.name}));o.forEach(function(l){var c=l.x,u=l.y,f=l.index,d=l.width,h=l.height,p=i[f];s.appendChild(p),jm(p,"__layout__",l),p.update({x:c,y:u,width:d,height:h})})}),this.relayoutNavigator()},r.prototype.renderNavigator=function(e){var n=this.attributes.orientation,i=At(this.attributes,"nav"),a=Cn({orientation:n},i),o=this;return e.selectAll(Qr.navigator.class).data(["nav"]).join(function(s){return s.append(function(){return new Wj({style:a})}).attr("className",Qr.navigator.name).each(function(){o.navigator=this})},function(s){return s.each(function(){this.update(a)})},function(s){return s.remove()}),this.navigator},r.prototype.getBBox=function(){return this.navigator.getBBox()},r.prototype.render=function(e,n){var i=this.attributes.data;if(!(!i||i.length===0)){var a=this.renderNavigator(yt(n));this.renderItems(a.getContainer()),this.adjustLayout()}},r.prototype.dispatchCustomEvent=function(e,n){var i=new Ht(e,{detail:n});this.dispatchEvent(i)},r}(Ne),_a=Sn({markerGroup:"marker-group",marker:"marker",labelGroup:"label-group",label:"label"},"handle"),P1={showLabel:!0,formatter:function(t){return t.toString()},markerSize:25,markerStroke:"#c5c5c5",markerFill:"#fff",markerLineWidth:1,labelFontSize:12,labelFill:"#c5c5c5",labelText:"",orientation:"vertical",spacing:0},oD=function(t){oe(r,t);function r(e){return t.call(this,e,P1)||this}return r.prototype.render=function(e,n){var i=yt(n).maybeAppendByClassName(_a.markerGroup,"g");this.renderMarker(i);var a=yt(n).maybeAppendByClassName(_a.labelGroup,"g");this.renderLabel(a)},r.prototype.renderMarker=function(e){var n=this,i=this.attributes,a=i.orientation,o=i.markerSymbol,s=o===void 0?Xn(a,"horizontalHandle","verticalHandle"):o;on(!!s,e,function(l){var c=At(n.attributes,"marker"),u=J({symbol:s},c);n.marker=l.maybeAppendByClassName(_a.marker,function(){return new Nt({style:u})}).update(u)})},r.prototype.renderLabel=function(e){var n=this,i=this.attributes,a=i.showLabel,o=i.orientation,s=i.spacing,l=s===void 0?0:s,c=i.formatter;on(a,e,function(u){var f,d=At(n.attributes,"label"),h=d.text,p=Pe(d,["text"]),v=((f=u.select(_a.marker.class))===null||f===void 0?void 0:f.node().getBBox())||{},g=v.width,m=g===void 0?0:g,y=v.height,b=y===void 0?0:y,x=D(Xn(o,[0,b+l,"center","top"],[m+l,0,"start","middle"]),4),O=x[0],w=x[1],S=x[2],k=x[3];u.maybeAppendByClassName(_a.label,"text").styles(J(J({},p),{x:O,y:w,text:c(h).toString(),textAlign:S,textBaseline:k}))})},r}(Ne),C1={showTitle:!0,padding:0,orientation:"horizontal",backgroundFill:"transparent",titleText:"",titleSpacing:4,titlePosition:"top-left",titleFill:"#2C3542",titleFontWeight:"bold",titleFontFamily:"sans-serif",titleFontSize:12},sD=Cn({},C1,{}),lD=Cn({},C1,Wn(P1,"handle"),{color:["#d0e3fa","#acc7f6","#8daaf2","#6d8eea","#4d73cd","#325bb1","#5a3e75","#8c3c79","#e23455","#e7655b"],indicatorBackgroundFill:"#262626",indicatorLabelFill:"white",indicatorLabelFontSize:12,indicatorVisibility:"hidden",labelAlign:"value",labelDirection:"positive",labelSpacing:5,showHandle:!0,showIndicator:!0,showLabel:!0,slidable:!0,titleText:"",type:"continuous"}),cD=.01,Fe=Sn({title:"title",titleGroup:"title-group",items:"items",itemsGroup:"items-group",contentGroup:"content-group",ribbonGroup:"ribbon-group",ribbon:"ribbon",handlesGroup:"handles-group",handle:"handle",startHandle:"start-handle",endHandle:"end-handle",labelGroup:"label-group",label:"label",indicator:"indicator"},"legend"),uD=function(t){oe(r,t);function r(e){return t.call(this,e,sD)||this}return r.prototype.renderTitle=function(e,n,i){var a=this.attributes,o=a.showTitle,s=a.titleText,l=At(this.attributes,"title"),c=D(mr(l),2),u=c[0],f=c[1];this.titleGroup=e.maybeAppendByClassName(Fe.titleGroup,"g").styles(f);var d=J(J({width:n,height:i},u),{text:o?s:""});this.title=this.titleGroup.maybeAppendByClassName(Fe.title,function(){return new A1({style:d})}).update(d)},r.prototype.renderItems=function(e,n){var i=n.x,a=n.y,o=n.width,s=n.height,l=At(this.attributes,"title",!0),c=D(mr(l),2),u=c[0],f=c[1],d=J(J({},u),{width:o,height:s,x:0,y:0});this.itemsGroup=e.maybeAppendByClassName(Fe.itemsGroup,"g").styles(J(J({},f),{transform:"translate(".concat(i,", ").concat(a,")")}));var h=this;this.itemsGroup.selectAll(Fe.items.class).data(["items"]).join(function(p){return p.append(function(){return new aD({style:d})}).attr("className",Fe.items.name).each(function(){h.items=yt(this)})},function(p){return p.update(d)},function(p){return p.remove()})},r.prototype.adjustLayout=function(){var e=this.attributes.showTitle;if(e){var n=this.title.node().getAvailableSpace(),i=n.x,a=n.y;this.itemsGroup.node().style.transform="translate(".concat(i,", ").concat(a,")")}},Object.defineProperty(r.prototype,"availableSpace",{get:function(){var e=this.attributes,n=e.showTitle,i=e.width,a=e.height;return n?this.title.node().getAvailableSpace():new ie(0,0,i,a)},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var e,n,i=(e=this.title)===null||e===void 0?void 0:e.node(),a=(n=this.items)===null||n===void 0?void 0:n.node();return!i||!a?t.prototype.getBBox.call(this):Dj(i,a)},r.prototype.render=function(e,n){var i=this.attributes,a=i.width,o=i.height,s=i.x,l=s===void 0?0:s,c=i.y,u=c===void 0?0:c,f=yt(n);n.style.transform="translate(".concat(l,", ").concat(u,")"),this.renderTitle(f,a,o),this.renderItems(f,this.availableSpace),this.adjustLayout()},r}(Ne),fD={backgroundFill:"#262626",backgroundLineCap:"round",backgroundLineWidth:1,backgroundStroke:"#333",backgroundZIndex:-1,formatter:function(t){return t.toString()},labelFill:"#fff",labelFontSize:12,labelTextBaseline:"middle",padding:[2,4],position:"right",radius:0,zIndex:999},Fc=Sn({background:"background",labelGroup:"label-group",label:"label"},"indicator"),dD=function(t){oe(r,t);function r(e){var n=t.call(this,e,fD)||this;return n.point=[0,0],n.group=n.appendChild(new Re({})),n.isMutationObserved=!0,n}return r.prototype.renderBackground=function(){if(this.label){var e=this.attributes,n=e.position,i=e.padding,a=D(ze(i),4),o=a[0],s=a[1],l=a[2],c=a[3],u=this.label.node().getLocalBounds(),f=u.min,d=u.max,h=new ie(f[0]-c,f[1]-o,d[0]+s-f[0]+c,d[1]+l-f[1]+o),p=this.getPath(n,h),v=At(this.attributes,"background");this.background=yt(this.group).maybeAppendByClassName(Fc.background,"path").styles(J(J({},v),{d:p})),this.group.appendChild(this.label.node())}},r.prototype.renderLabel=function(){var e=this.attributes,n=e.formatter,i=e.labelText,a=At(this.attributes,"label"),o=D(mr(a),2),s=o[0],l=o[1];s.text;var c=Pe(s,["text"]);if(this.label=yt(this.group).maybeAppendByClassName(Fc.labelGroup,"g").styles(l),!!i){var u=this.label.maybeAppendByClassName(Fc.label,function(){return vi(n(i))}).style("text",n(i).toString());u.selectAll("text").styles(c)}},r.prototype.adjustLayout=function(){var e=D(this.point,2),n=e[0],i=e[1],a=this.attributes,o=a.x,s=a.y;this.group.attr("transform","translate(".concat(o-n,", ").concat(s-i,")"))},r.prototype.getPath=function(e,n){var i=this.attributes.radius,a=n.x,o=n.y,s=n.width,l=n.height,c=[["M",a+i,o],["L",a+s-i,o],["A",i,i,0,0,1,a+s,o+i],["L",a+s,o+l-i],["A",i,i,0,0,1,a+s-i,o+l],["L",a+i,o+l],["A",i,i,0,0,1,a,o+l-i],["L",a,o+i],["A",i,i,0,0,1,a+i,o],["Z"]],u={top:4,right:6,bottom:0,left:2},f=u[e],d=this.createCorner([c[f].slice(-2),c[f+1].slice(-2)]);return c.splice.apply(c,ut([f+1,1],D(d),!1)),c[0][0]="M",c},r.prototype.createCorner=function(e,n){n===void 0&&(n=10);var i=.8,a=eI.apply(void 0,ut([],D(e),!1)),o=D(e,2),s=D(o[0],2),l=s[0],c=s[1],u=D(o[1],2),f=u[0],d=u[1],h=D(a?[f-l,[l,f]]:[d-c,[c,d]],2),p=h[0],v=D(h[1],2),g=v[0],m=v[1],y=p/2,b=p/Math.abs(p),x=n*b,O=x/2,w=x*Math.sqrt(3)/2*i,S=D([g,g+y-O,g+y,g+y+O,m],5),k=S[0],E=S[1],_=S[2],A=S[3],M=S[4];return a?(this.point=[_,c-w],[["L",k,c],["L",E,c],["L",_,c-w],["L",A,c],["L",M,c]]):(this.point=[l+w,_],[["L",l,k],["L",l,E],["L",l+w,_],["L",l,A],["L",l,M]])},r.prototype.applyVisibility=function(){var e=this.attributes.visibility;e==="hidden"?Fr(this):Ao(this)},r.prototype.bindEvents=function(){this.label.on(Et.BOUNDS_CHANGED,this.renderBackground)},r.prototype.render=function(){this.renderLabel(),this.renderBackground(),this.adjustLayout(),this.applyVisibility()},r}(Ne);function hD(t,r){for(var e=1;e<t.length;e+=1){var n=t[e-1],i=t[e];if(r>=n&&r<=i)return[n,i]}return[r,r]}function pD(t,r,e){var n=Array.from(r),i=t.length;return new Array(i).fill(0).reduce(function(a,o,s){var l=n[s%n.length];return a+=" ".concat(t[s],":").concat(l).concat(s<i-1?" ".concat(t[s+1],":").concat(l):"")},"l(".concat(e==="horizontal"?"0":"270",")"))}function tv(t,r){var e=D(hD(t,r),2),n=e[0],i=e[1];return{tick:r>(n+i)/2?i:n,range:[n,i]}}var no=Sn({trackGroup:"background-group",track:"background",selectionGroup:"ribbon-group",selection:"ribbon",clipPath:"clip-path"},"ribbon");function L1(t){var r=t.orientation,e=t.size,n=t.length;return Xn(r,[n,e],[e,n])}function R1(t){var r=t.type,e=D(L1(t),2),n=e[0],i=e[1];return r==="size"?[["M",0,i],["L",0+n,0],["L",0+n,i],["Z"]]:[["M",0,i],["L",0,0],["L",0+n,0],["L",0+n,i],["Z"]]}function vD(t){return R1(t)}function gD(t){var r=t.orientation,e=t.color,n=t.block,i=t.partition,a;if(Le(e)){var o=20;a=new Array(o).fill(0).map(function(c,u,f){return e(u/(f.length-1))})}else a=e;var s=a.length,l=a.map(function(c){return Mr(c).toString()});return s?s===1?l[0]:n?pD(i,l,r):l.reduce(function(c,u,f){return c+=" ".concat(f/(s-1),":").concat(u)},"l(".concat(Xn(r,"0","270"),")")):""}function mD(t){var r=t.orientation,e=t.range;if(!e)return[];var n=D(L1(t),2),i=n[0],a=n[1],o=D(e,2),s=o[0],l=o[1],c=Xn(r,s*i,0),u=Xn(r,0,s*a),f=Xn(r,l*i,i),d=Xn(r,a,l*a);return[["M",c,u],["L",c,d],["L",f,d],["L",f,u],["Z"]]}function yD(t,r){var e=At(r,"track");t.maybeAppendByClassName(no.track,"path").styles(J({d:R1(r)},e))}function bD(t,r){var e=At(r,"selection"),n=gD(r),i=t.maybeAppendByClassName(no.selection,"path").styles(J({d:vD(r),fill:n},e)),a=i.maybeAppendByClassName(no.clipPath,"path").styles({d:mD(r)}).node();i.style("clipPath",a)}var xD=function(t){oe(r,t);function r(e){return t.call(this,e,{type:"color",orientation:"horizontal",size:30,range:[0,1],length:200,block:!1,partition:[],color:["#fff","#000"],trackFill:"#e5e5e5"})||this}return r.prototype.render=function(e,n){var i=yt(n).maybeAppendByClassName(no.trackGroup,"g");yD(i,e);var a=yt(n).maybeAppendByClassName(no.selectionGroup,"g");bD(a,e)},r}(Ne);function OD(t){return{min:Math.min.apply(Math,ut([],D(t.map(function(r){return r.value})),!1)),max:Math.max.apply(Math,ut([],D(t.map(function(r){return r.value})),!1))}}var wD=function(t){oe(r,t);function r(e){var n=t.call(this,e,lD)||this;return n.eventToOffsetScale=new Zt({}),n.innerRibbonScale=new Zt({}),n.cacheLabelBBox=null,n.cacheHandleBBox=null,n.onHovering=function(i){var a=n.attributes,o=a.data,s=a.block;i.stopPropagation();var l=n.getValueByCanvasPoint(i);if(s){var c=tv(o.map(function(d){var h=d.value;return h}),l).range,u=n.getRealSelection(c);n.showIndicator((c[0]+c[1])/2,"".concat(u[0],"-").concat(u[1])),n.dispatchIndicated(l,c)}else{var f=n.getTickValue(l);n.showIndicator(f,"".concat(n.getRealValue(f))),n.dispatchIndicated(f)}},n.onDragStart=function(i){return function(a){a.stopPropagation(),n.attributes.slidable&&(n.target=i,n.prevValue=n.getTickValue(n.getValueByCanvasPoint(a)),document.addEventListener("mousemove",n.onDragging),document.addEventListener("touchmove",n.onDragging),document.addEventListener("mouseleave",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("mouseup",n.onDragEnd),document.addEventListener("touchend",n.onDragEnd))}},n.onDragging=function(i){var a=n.target;n.updateMouse();var o=D(n.selection,2),s=o[0],l=o[1],c=n.getTickValue(n.getValueByCanvasPoint(i)),u=c-n.prevValue;a==="start"?s!==c&&n.updateSelection(c,l):a==="end"?l!==c&&n.updateSelection(s,c):a==="ribbon"&&u!==0&&(n.prevValue=c,n.updateSelection(u,u,!0))},n.onDragEnd=function(){n.style.cursor="pointer",document.removeEventListener("mousemove",n.onDragging),document.removeEventListener("touchmove",n.onDragging),document.removeEventListener("mouseup",n.onDragEnd),document.removeEventListener("touchend",n.onDragEnd)},n}return Object.defineProperty(r.prototype,"handleOffsetRatio",{get:function(){return this.ifHorizontal(.5,.5)},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var e=this.attributes,n=e.width,i=e.height;return new ie(0,0,n,i)},r.prototype.render=function(e,n){var i=this,a=e.showLabel;this.renderTitle(yt(n));var o=this.availableSpace,s=o.x,l=o.y,c=yt(n).maybeAppendByClassName(Fe.contentGroup,"g").styles({transform:"translate(".concat(s,", ").concat(l,")")}),u=c.maybeAppendByClassName(Fe.labelGroup,"g").styles({zIndex:1});on(!!a,u,function(d){i.renderLabel(d)});var f=c.maybeAppendByClassName(Fe.ribbonGroup,"g").styles({zIndex:0});this.handlesGroup=c.maybeAppendByClassName(Fe.handlesGroup,"g").styles({zIndex:2}),this.renderHandles(),this.renderRibbon(f),this.renderIndicator(c),this.adjustLabel(),this.adjustHandles()},Object.defineProperty(r.prototype,"range",{get:function(){var e=this.attributes,n=e.data,i=e.domain;return i?{min:i[0],max:i[1]}:OD(n)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonScale",{get:function(){var e=this.range,n=e.min,i=e.max;return this.innerRibbonScale.update({domain:[n,i],range:[0,1]}),this.innerRibbonScale},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonRange",{get:function(){var e=D(this.selection,2),n=e[0],i=e[1],a=this.ribbonScale;return[a.map(n),a.map(i)]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"selection",{get:function(){var e=this.range,n=e.min,i=e.max,a=this.attributes.defaultValue,o=a===void 0?[n,i]:a,s=D(o,2),l=s[0],c=s[1];return[l,c]},enumerable:!1,configurable:!0}),r.prototype.ifHorizontal=function(e,n){return Xn(this.attributes.orientation,typeof e=="function"?e():e,typeof n=="function"?n():n)},r.prototype.renderTitle=function(e){var n=this.attributes,i=n.showTitle,a=n.titleText,o=n.width,s=n.height,l=At(this.attributes,"title"),c=J(J({},l),{width:o,height:s,text:a}),u=this;e.selectAll(Fe.title.class).data(i?[a]:[]).join(function(f){return f.append(function(){return new A1({style:c})}).attr("className",Fe.title.name).each(function(){u.title=this})},function(f){return f.update(c)},function(f){return f.each(function(){u.title=void 0}).remove()})},Object.defineProperty(r.prototype,"availableSpace",{get:function(){if(this.title)return this.title.getAvailableSpace();var e=this.attributes,n=e.width,i=e.height;return new ie(0,0,n,i)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelFixedSpacing",{get:function(){var e=this.attributes.showTick;return e?5:0},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelPosition",{get:function(){var e=this.attributes,n=e.orientation,i=e.labelDirection,a={vertical:{positive:"right",negative:"left"},horizontal:{positive:"bottom",negative:"top"}};return a[n][i]},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelBBox",{get:function(){var e,n=this.attributes.showLabel;if(!n)return new ie(0,0,0,0);if(this.cacheLabelBBox)return this.cacheLabelBBox;var i=((e=this.label.querySelector(Ft.labelGroup.class))===null||e===void 0?void 0:e.children.slice(-1)[0]).getBBox(),a=i.width,o=i.height;return this.cacheLabelBBox=new ie(0,0,a,o),this.cacheLabelBBox},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelShape",{get:function(){var e=this.attributes,n=e.showLabel,i=e.labelSpacing,a=i===void 0?0:i;if(!n)return{width:0,height:0,size:0,length:0};var o=this.labelBBox,s=o.width,l=o.height,c=this.ifHorizontal(l,s)+a+this.labelFixedSpacing,u=this.ifHorizontal(s,l);return{width:s,height:l,size:c,length:u}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonBBox",{get:function(){var e=this.attributes,n=e.showHandle,i=e.ribbonSize,a=this.availableSpace,o=a.width,s=a.height,l=this.labelShape,c=l.size,u=l.length,f=D(this.ifHorizontal([s,o],[o,s]),2),d=f[0],h=f[1],p=n?this.handleShape:{size:0,length:0},v=p.size,g=p.length,m=this.handleOffsetRatio,y=0,b=this.labelPosition;i?y=i:["bottom","right"].includes(b)?y=Math.min(d-c,(d-v)/m):d*(1-m)>v?y=Math.max(d-c,0):y=Math.max((d-c-v)/m,0);var x=Math.max(g,u),O=h-x,w=D(this.ifHorizontal([O,y],[y,O]),2),S=w[0],k=w[1],E=["top","left"].includes(b)?c:0,_=D(this.ifHorizontal([x/2,E],[E,x/2]),2),A=_[0],M=_[1];return new ie(A,M,S,k)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"ribbonShape",{get:function(){var e=this.ribbonBBox,n=e.width,i=e.height;return this.ifHorizontal({size:i,length:n},{size:n,length:i})},enumerable:!1,configurable:!0}),r.prototype.renderRibbon=function(e){var n=this.attributes,i=n.data,a=n.type,o=n.orientation,s=n.color,l=n.block,c=At(this.attributes,"ribbon"),u=this.range,f=u.min,d=u.max,h=this.ribbonBBox,p=h.x,v=h.y,g=this.ribbonShape,m=g.length,y=g.size,b=Cn({transform:"translate(".concat(p,", ").concat(v,")"),length:m,size:y,type:a,orientation:o,color:s,block:l,partition:i.map(function(x){return(x.value-f)/(d-f)}),range:this.ribbonRange},c);this.ribbon=e.maybeAppendByClassName(Fe.ribbon,function(){return new xD({style:b})}).update(b)},r.prototype.getHandleClassName=function(e){return"".concat(Fe.prefix("".concat(e,"-handle")))},r.prototype.renderHandles=function(){var e=this.attributes,n=e.showHandle,i=e.orientation,a=At(this.attributes,"handle"),o=D(this.selection,2),s=o[0],l=o[1],c=J(J({},a),{orientation:i}),u=a.shape,f=u===void 0?"slider":u,d=f==="basic"?oD:g1,h=this;this.handlesGroup.selectAll(Fe.handle.class).data(n?[{value:s,type:"start"},{value:l,type:"end"}]:[],function(p){return p.type}).join(function(p){return p.append(function(){return new d({style:c})}).attr("className",function(v){var g=v.type;return"".concat(Fe.handle," ").concat(h.getHandleClassName(g))}).each(function(v){var g=v.type,m=v.value;this.update({labelText:m});var y="".concat(g,"Handle");h[y]=this,this.addEventListener("pointerdown",h.onDragStart(g))})},function(p){return p.update(c).each(function(v){var g=v.value;this.update({labelText:g})})},function(p){return p.each(function(v){var g=v.type,m="".concat(g,"Handle");h[m]=void 0}).remove()})},r.prototype.adjustHandles=function(){var e=D(this.selection,2),n=e[0],i=e[1];this.setHandlePosition("start",n),this.setHandlePosition("end",i)},Object.defineProperty(r.prototype,"handleBBox",{get:function(){if(this.cacheHandleBBox)return this.cacheHandleBBox;if(!this.attributes.showHandle)return new ie(0,0,0,0);var e=this.startHandle.getBBox(),n=e.width,i=e.height,a=this.endHandle.getBBox(),o=a.width,s=a.height,l=D([Math.max(n,o),Math.max(i,s)],2),c=l[0],u=l[1];return this.cacheHandleBBox=new ie(0,0,c,u),this.cacheHandleBBox},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"handleShape",{get:function(){var e=this.handleBBox,n=e.width,i=e.height,a=D(this.ifHorizontal([i,n],[n,i]),2),o=a[0],s=a[1];return{width:n,height:i,size:o,length:s}},enumerable:!1,configurable:!0}),r.prototype.setHandlePosition=function(e,n){var i=this.attributes.handleFormatter,a=this.ribbonBBox,o=a.x,s=a.y,l=this.ribbonShape.size,c=this.getOffset(n),u=D(this.ifHorizontal([o+c,s+l*this.handleOffsetRatio],[o+l*this.handleOffsetRatio,s+c]),2),f=u[0],d=u[1],h=this.handlesGroup.select(".".concat(this.getHandleClassName(e))).node();h==null||h.update({transform:"translate(".concat(f,", ").concat(d,")"),formatter:i})},r.prototype.renderIndicator=function(e){var n=At(this.attributes,"indicator");this.indicator=e.maybeAppendByClassName(Fe.indicator,function(){return new dD({})}).update(n)},Object.defineProperty(r.prototype,"labelData",{get:function(){var e=this,n=this.attributes.data;return n.reduce(function(i,a,o,s){var l,c,u=(l=a==null?void 0:a.id)!==null&&l!==void 0?l:o.toString();if(i.push(J(J({},a),{id:u,index:o,type:"value",label:(c=a==null?void 0:a.label)!==null&&c!==void 0?c:a.value.toString(),value:e.ribbonScale.map(a.value)})),o<s.length-1){var f=s[o+1],d=D([a.value,f.value],2),h=d[0],p=d[1],v=(h+p)/2;i.push(J(J({},a),{id:u,index:o,type:"range",range:[h,p],label:[h,p].join("~"),value:e.ribbonScale.map(v)}))}return i},[])},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"labelStyle",{get:function(){var e=D(["center","middle"],2),n=e[0],i=e[1],a=this.labelPosition;return a==="top"?i="bottom":a==="bottom"?i="top":a==="left"?n="end":a==="right"&&(n="start"),{labelTextAlign:n,labelTextBaseline:i}},enumerable:!1,configurable:!0}),r.prototype.renderLabel=function(e){var n=this.attributes,i=n.showTick,a=i===void 0?!1:i,o=n.labelFilter,s=n.labelFormatter,l=At(this.attributes,"tick"),c=At(this.attributes,"label"),u=c.align,f=Cn(J({showLine:!1,showGrid:!1,showTick:a,type:"linear",startPos:[0,0],endPos:[0,0],tickDirection:"negative",labelTransform:"rotate(0)"},this.labelStyle),Wn(l,"tick"),Wn(c,"label"),{data:this.labelData}),d={tickFilter:function(p,v,g){return(p==null?void 0:p.type)!=="value"?!1:o?o(p,p.index,g.filter(function(m){return m.type!=="value"})):!0},labelFilter:function(p,v,g){return(p==null?void 0:p.type)!==u?!1:o?o(p,p.index,g.filter(function(m){return m.type===u})):!0},labelFormatter:s},h=J(J(J({},f),d),{labelOverlap:[{type:"hide"}]});this.label=e.maybeAppendByClassName(Fe.label,function(){return new bd({style:h})}).node(),this.label.update(h,!1)},Object.defineProperty(r.prototype,"labelAxisStyle",{get:function(){var e=this.attributes,n=e.showTick,i=e.labelDirection,a=e.labelSpacing,o=e.tickLength,s=this.ribbonShape.size,l=this.labelPosition,c=this.labelFixedSpacing,u=D([0,0,0],3),f=u[0],d=u[1],h=u[2],p=o??s;return n?(h=p,d=c,i==="positive"?l==="right"?(f=p,h=p):l==="bottom"&&(f=h):i==="negative"&&(l==="top"||l==="left")&&(f=s)):i==="positive"?l==="right"?d=p:l==="bottom"&&(f=s+c,d=a):i==="negative"&&(l==="left"||l==="top")&&(d=a),{offset:f,spacing:d,tickLength:h}},enumerable:!1,configurable:!0}),r.prototype.adjustLabel=function(){var e=this.attributes.showLabel;if(e){var n=this.ribbonBBox,i=n.x,a=n.y,o=n.width,s=n.height,l=this.labelAxisStyle,c=l.offset,u=l.spacing,f=l.tickLength,d=D(this.ifHorizontal([[i,a+c],[i+o,a+c]],[[i+c,a+s],[i+c,a]]),2),h=d[0],p=d[1];this.label.update({startPos:h,endPos:p,tickLength:f,labelSpacing:u},!1)}},r.prototype.bindEvents=function(){this.style.cursor="pointer",this.ribbon.on("pointerdown",this.onDragStart("ribbon")),this.ribbon.on("pointermove",this.onHovering),this.addEventListener("pointerout",this.hideIndicator)},r.prototype.showIndicator=function(e,n){n===void 0&&(n="".concat(e));var i=this.attributes.showIndicator;if(!i||typeof e!="number"){this.hideIndicator();return}var a=this.range,o=a.min,s=a.max,l=this.ribbonBBox,c=l.x,u=l.y,f=be(e,o,s),d=this.getOffset(f),h=this.ifHorizontal([d+c,u],[c,d+u]);this.indicator.update({x:h[0],y:h[1],position:this.ifHorizontal("top","left"),labelText:n}),Ao(this.indicator.node())},r.prototype.hideIndicator=function(){Fr(this.indicator.node())},r.prototype.updateMouse=function(){this.attributes.slidable&&(this.style.cursor="grabbing")},r.prototype.setSelection=function(e,n){this.updateSelection(e,n)},r.prototype.updateSelection=function(e,n,i){var a;i===void 0&&(i=!1);var o=D(this.selection,2),s=o[0],l=o[1],c=D([e,n],2),u=c[0],f=c[1];i&&(u+=s,f+=l);var d=this.range,h=d.min,p=d.max;a=D(Uj([h,p],[u,f],this.selection),2),u=a[0],f=a[1],this.update({defaultValue:[u,f]}),this.dispatchSelection()},Object.defineProperty(r.prototype,"step",{get:function(){var e=this.attributes.step,n=e===void 0?1:e,i=this.range,a=i.min,o=i.max;return Ut(n)?ju((o-a)*cD,0):n},enumerable:!1,configurable:!0}),r.prototype.getTickValue=function(e){var n=this.attributes,i=n.data,a=n.block,o=this.range.min;return a?tv(i.map(function(s){var l=s.value;return l}),e).tick:Yj(e,this.step,o)},r.prototype.getValueByCanvasPoint=function(e){var n=this.range,i=n.min,a=n.max,o=D(this.ribbon.node().getPosition(),2),s=o[0],l=o[1],c=this.ifHorizontal(s,l),u=this.ifHorizontal.apply(this,ut([],D(rl(e)),!1)),f=u-c,d=be(this.getOffset(f,!0),i,a);return d},r.prototype.getOffset=function(e,n){n===void 0&&(n=!1);var i=this.range,a=i.min,o=i.max,s=this.ribbonShape.length,l=this.eventToOffsetScale;return l.update({domain:[a,o],range:[0,s]}),n?l.invert(e):l.map(e)},r.prototype.getRealSelection=function(e){var n=this.range.max,i=D(e,2),a=i[0],o=i[1];return this.ifHorizontal([a,o],[n-o,n-a])},r.prototype.getRealValue=function(e){var n=this.range.max;return this.ifHorizontal(e,n-e)},r.prototype.dispatchSelection=function(){var e=this.getRealSelection(this.selection),n=new Ht("valuechange",{detail:{value:e}});this.dispatchEvent(n)},r.prototype.dispatchIndicated=function(e,n){var i=this,a=this.range.max,o=this.ifHorizontal(function(){return{value:e,range:n}},function(){return{value:a-e,range:n?i.getRealSelection(n):void 0}}),s=new Ht("indicate",{detail:o});this.dispatchEvent(s)},r}(Ne);function zu(t){return t===void 0&&(t=""),{CONTAINER:"".concat(t,"tooltip"),TITLE:"".concat(t,"tooltip-title"),LIST:"".concat(t,"tooltip-list"),LIST_ITEM:"".concat(t,"tooltip-list-item"),NAME:"".concat(t,"tooltip-list-item-name"),MARKER:"".concat(t,"tooltip-list-item-marker"),NAME_LABEL:"".concat(t,"tooltip-list-item-name-label"),VALUE:"".concat(t,"tooltip-list-item-value"),CROSSHAIR_X:"".concat(t,"tooltip-crosshair-x"),CROSSHAIR_Y:"".concat(t,"tooltip-crosshair-y")}}var ev={overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"};function SD(t){var r;t===void 0&&(t="");var e=zu(t);return r={},r[".".concat(e.CONTAINER)]={position:"absolute",visibility:"visible","z-index":8,transition:"visibility 0.2s cubic-bezier(0.23, 1, 0.32, 1), left 0.4s cubic-bezier(0.23, 1, 0.32, 1), top 0.4s cubic-bezier(0.23, 1, 0.32, 1)","background-color":"rgba(255, 255, 255, 0.96)","box-shadow":"0 6px 12px 0 rgba(0, 0, 0, 0.12)","border-radius":"4px",color:"rgba(0, 0, 0, 0.65)","font-size":"12px","line-height":"20px",padding:"12px","min-width":"120px","max-width":"360px","font-family":"Roboto-Regular"},r[".".concat(e.TITLE)]={color:"rgba(0, 0, 0, 0.45)"},r[".".concat(e.LIST)]={margin:"0px","list-style-type":"none",padding:"0px"},r[".".concat(e.LIST_ITEM)]={"list-style-type":"none",display:"flex","line-height":"2em","align-items":"center","justify-content":"space-between","white-space":"nowrap"},r[".".concat(e.MARKER)]={width:"8px",height:"8px","border-radius":"50%",display:"inline-block","margin-right":"4px"},r[".".concat(e.NAME)]={display:"flex","align-items":"center","max-width":"216px"},r[".".concat(e.NAME_LABEL)]=J({flex:1},ev),r[".".concat(e.VALUE)]=J({display:"inline-block",float:"right",flex:1,"text-align":"right","min-width":"28px","margin-left":"30px",color:"rgba(0, 0, 0, 0.85)"},ev),r[".".concat(e.CROSSHAIR_X)]={position:"absolute",width:"1px","background-color":"rgba(0, 0, 0, 0.25)"},r[".".concat(e.CROSSHAIR_Y)]={position:"absolute",height:"1px","background-color":"rgba(0, 0, 0, 0.25)"},r}var kD=function(t){oe(r,t);function r(e){var n=this,i,a,o=(a=(i=e.style)===null||i===void 0?void 0:i.template)===null||a===void 0?void 0:a.prefixCls,s=zu(o);return n=t.call(this,e,{data:[],x:0,y:0,visibility:"visible",title:"",position:"bottom-right",offset:[5,5],enterable:!1,container:{x:0,y:0},bounding:null,template:{prefixCls:"",container:'<div class="'.concat(s.CONTAINER,'"></div>'),title:'<div class="'.concat(s.TITLE,'"></div>'),item:'<li class="'.concat(s.LIST_ITEM,`" data-index={index}>
        <span class="`).concat(s.NAME,`">
          <span class="`).concat(s.MARKER,`" style="background:{color}"></span>
          <span class="`).concat(s.NAME_LABEL,`" title="{name}">{name}</span>
        </span>
        <span class="`).concat(s.VALUE,`" title="{value}">{value}</span>
      </li>`)},style:SD(o)})||this,n.timestamp=-1,n.prevCustomContentKey=n.attributes.contentKey,n.initShape(),n.render(n.attributes,n),n}return Object.defineProperty(r.prototype,"HTMLTooltipElement",{get:function(){return this.element},enumerable:!1,configurable:!0}),r.prototype.getContainer=function(){return this.element},Object.defineProperty(r.prototype,"elementSize",{get:function(){var e=this.element.offsetWidth,n=this.element.offsetHeight;return{width:e,height:n}},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"HTMLTooltipItemsElements",{get:function(){var e=this.attributes,n=e.data,i=e.template;return n.map(function(a,o){var s=a.name,l=s===void 0?"":s,c=a.color,u=c===void 0?"black":c,f=a.index,d=Pe(a,["name","color","index"]),h=J({name:l,color:u,index:f??o},d);return Th(DA(i.item,h))})},enumerable:!1,configurable:!0}),r.prototype.render=function(e,n){this.renderHTMLTooltipElement(),this.updatePosition()},r.prototype.destroy=function(){var e;(e=this.element)===null||e===void 0||e.remove(),t.prototype.destroy.call(this)},r.prototype.show=function(e,n){var i=this;if(e!==void 0&&n!==void 0){var a=this.element.style.visibility==="hidden",o=function(){i.attributes.x=e??i.attributes.x,i.attributes.y=n??i.attributes.y,i.updatePosition()};a?this.closeTransition(o):o()}this.element.style.visibility="visible"},r.prototype.hide=function(e,n){e===void 0&&(e=0),n===void 0&&(n=0);var i=this.attributes.enterable;i&&this.isCursorEntered(e,n)||(this.element.style.visibility="hidden")},r.prototype.initShape=function(){var e=this.attributes.template;this.element=Th(e.container),this.id&&this.element.setAttribute("id",this.id)},r.prototype.renderCustomContent=function(){if(!(this.prevCustomContentKey!==void 0&&this.prevCustomContentKey===this.attributes.contentKey)){this.prevCustomContentKey=this.attributes.contentKey;var e=this.attributes.content;e&&(typeof e=="string"?this.element.innerHTML=e:Fp(this.element,e))}},r.prototype.renderHTMLTooltipElement=function(){var e,n,i=this.attributes,a=i.template,o=i.title,s=i.enterable,l=i.style,c=i.content,u=zu(a.prefixCls),f=this.element;if(this.element.style.pointerEvents=s?"auto":"none",c)this.renderCustomContent();else{o?(f.innerHTML=a.title,f.getElementsByClassName(u.TITLE)[0].innerHTML=o):(n=(e=f.getElementsByClassName(u.TITLE))===null||e===void 0?void 0:e[0])===null||n===void 0||n.remove();var d=this.HTMLTooltipItemsElements,h=document.createElement("ul");h.className=u.LIST,Fp(h,d);var p=this.element.querySelector(".".concat(u.LIST));p?p.replaceWith(h):f.appendChild(h)}aI(f,l)},r.prototype.getRelativeOffsetFromCursor=function(e){var n=this.attributes,i=n.position,a=n.offset,o=e||i,s=o.split("-"),l={left:[-1,0],right:[1,0],top:[0,-1],bottom:[0,1]},c=this.elementSize,u=c.width,f=c.height,d=[-u/2,-f/2];return s.forEach(function(h){var p=D(d,2),v=p[0],g=p[1],m=D(l[h],2),y=m[0],b=m[1];d=[v+(u/2+a[0])*y,g+(f/2+a[1])*b]}),d},r.prototype.setOffsetPosition=function(e){var n=D(e,2),i=n[0],a=n[1],o=this.attributes,s=o.x,l=s===void 0?0:s,c=o.y,u=c===void 0?0:c,f=o.container,d=f.x,h=f.y;this.element.style.left="".concat(+l+d+i,"px"),this.element.style.top="".concat(+u+h+a,"px")},r.prototype.updatePosition=function(){var e=this.attributes.showDelay,n=e===void 0?60:e,i=Date.now();this.timestamp>0&&i-this.timestamp<n||(this.timestamp=i,this.setOffsetPosition(this.autoPosition(this.getRelativeOffsetFromCursor())))},r.prototype.autoPosition=function(e){var n=D(e,2),i=n[0],a=n[1],o=this.attributes,s=o.x,l=o.y,c=o.bounding,u=o.position;if(!c)return[i,a];var f=this.element,d=f.offsetWidth,h=f.offsetHeight,p=D([+s+i,+l+a],2),v=p[0],g=p[1],m={left:"right",right:"left",top:"bottom",bottom:"top"},y=c.x,b=c.y,x=c.width,O=c.height,w={left:v<y,right:v+d>y+x,top:g<b,bottom:g+h>b+O},S=[];u.split("-").forEach(function(E){w[E]?S.push(m[E]):S.push(E)});var k=S.join("-");return this.getRelativeOffsetFromCursor(k)},r.prototype.isCursorEntered=function(e,n){if(this.element){var i=this.element.getBoundingClientRect(),a=i.x,o=i.y,s=i.width,l=i.height;return new ie(a,o,s,l).isPointIn(e,n)}return!1},r.prototype.closeTransition=function(e){var n=this,i=this.element.style.transition;this.element.style.transition="none",e(),setTimeout(function(){n.element.style.transition=i},10)},r.tag="tooltip",r}(Ne),ED=function(t){oe(r,t);function r(e){var n=t.call(this,e)||this;n.layoutEvents=[Et.BOUNDS_CHANGED,Et.INSERTED,Et.REMOVED],n.$margin=ze(0),n.$padding=ze(0);var i=e.style||{},a=i.margin,o=a===void 0?0:a,s=i.padding,l=s===void 0?0:s;return n.margin=o,n.padding=l,n.isMutationObserved=!0,n.bindEvents(),n}return Object.defineProperty(r.prototype,"margin",{get:function(){return this.$margin},set:function(e){this.$margin=ze(e)},enumerable:!1,configurable:!0}),Object.defineProperty(r.prototype,"padding",{get:function(){return this.$padding},set:function(e){this.$padding=ze(e)},enumerable:!1,configurable:!0}),r.prototype.getBBox=function(){var e=this.attributes,n=e.x,i=n===void 0?0:n,a=e.y,o=a===void 0?0:a,s=e.width,l=e.height,c=D(this.$margin,4),u=c[0],f=c[1],d=c[2],h=c[3];return new ie(i-h,o-u,s+h+f,l+u+d)},r.prototype.appendChild=function(e,n){return e.isMutationObserved=!0,t.prototype.appendChild.call(this,e,n),e},r.prototype.getAvailableSpace=function(){var e=this.attributes,n=e.width,i=e.height,a=D(this.$padding,4),o=a[0],s=a[1],l=a[2],c=a[3],u=D(this.$margin,4),f=u[0],d=u[3];return new ie(c+d,o+f,n-c-s,i-o-l)},r.prototype.layout=function(){if(!(!this.attributes.display||!this.isConnected)&&!this.children.some(function(o){return!o.isConnected}))try{var e=this.attributes,n=e.x,i=e.y;this.style.transform="translate(".concat(n,", ").concat(i,")");var a=YN(this.getAvailableSpace(),this.children.map(function(o){return o.getBBox()}),this.attributes);this.children.forEach(function(o,s){var l=a[s],c=l.x,u=l.y;o.style.transform="translate(".concat(c,", ").concat(u,")")})}catch{}},r.prototype.bindEvents=function(){var e=this;this.layoutEvents.forEach(function(n){e.addEventListener(n,function(i){i.target&&(i.target.isMutationObserved=!0,e.layout())})})},r.prototype.attributeChangedCallback=function(e,n,i){e==="margin"?this.margin=i:e==="padding"&&(this.padding=i),this.layout()},r}(Re),$c=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function _D(t){const{min:[r,e],max:[n,i]}=t.getLocalBounds();let a=0,o=0;return r>0&&(a=r),n<0&&(a=n),e>0&&(o=e),i<0&&(o=i),[a,o]}function AD(t,r=[]){const[e=0,n=0,i=e,a=n]=r,o=t.parentNode,s=o.getEulerAngles();o.setEulerAngles(0);const{min:l,halfExtents:c}=t.getLocalBounds(),[u,f]=l,[d,h]=c;return o.setEulerAngles(s),{x:u-a,y:f-e,width:d*2+a+n,height:h*2+e+i}}function TD(t,r,e,n,i=!0,a=!0){const o=f=>po()(f);if(!r[0]&&!r[1])return o([_D(t),r]);if(!e.length)return o([[0,0],r]);const[s,l]=e,c=[...l],u=[...s];if(l[0]!==s[0]){const f=i?-4:4;c[1]=l[1],a&&!i&&(c[0]=Math.max(s[0],l[0]-f),l[1]<s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.max(u[0],c[0]-f))),!a&&!i&&(c[0]=Math.max(s[0],l[0]-f),l[1]>s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.max(u[0],c[0]-f))),!a&&i&&(c[0]=Math.min(s[0],l[0]-f),l[1]>s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.min(u[0],c[0]-f))),a&&i&&(c[0]=Math.min(s[0],l[0]-f),l[1]<s[1]?u[1]=c[1]:(u[1]=s[1],u[0]=Math.min(u[0],c[0]-f)))}return o([l,c,u,s,r])}const N1=ra(t=>{const r=t.attributes,{className:e,class:n,transform:i,rotate:a,labelTransform:o,labelTransformOrigin:s,x:l,y:c,x0:u=l,y0:f=c,text:d,background:h,connector:p,startMarker:v,endMarker:g,coordCenter:m,innerHTML:y}=r,b=$c(r,["className","class","transform","rotate","labelTransform","labelTransformOrigin","x","y","x0","y0","text","background","connector","startMarker","endMarker","coordCenter","innerHTML"]);if(t.style.transform=`translate(${l}, ${c})`,[l,c,u,f].some(P=>!re(P))){t.children.forEach(P=>P.remove());return}const x=et(b,"background"),{padding:O}=x,w=$c(x,["padding"]),S=et(b,"connector"),{points:k=[]}=S,E=$c(S,["points"]);let _;y?_=ht(t).maybeAppend("html","html",e).style("zIndex",0).style("innerHTML",y).call(ct,Object.assign({transform:o,transformOrigin:s},b)).node():_=ht(t).maybeAppend("text","text").style("zIndex",0).style("text",d).call(ct,Object.assign({textBaseline:"middle",transform:o,transformOrigin:s},b)).node();const A=ht(t).maybeAppend("background","rect").style("zIndex",-1).call(ct,AD(_,O)).call(ct,h?w:{}).node(),M=+u<m[0],T=+f<m[1],C=[+u-+l,+f-+c],I=TD(A,C,k,m,M,T),R=v&&new Nt({id:"startMarker",style:Object.assign({x:0,y:0},et(b,"startMarker"))}),L=g&&new Nt({id:"endMarker",style:Object.assign({x:0,y:0},et(b,"endMarker"))});ht(t).maybeAppend("connector","path").style("zIndex",0).style("d",I).style("markerStart",R).style("markerEnd",L).call(ct,p?E:{})}),I1=(t,r)=>{const{coordinate:e}=r;return(n,i,a)=>{const{color:o,text:s="",fontSize:l,rotate:c=0,transform:u=""}=i,f={text:String(s),stroke:o,fill:o,fontSize:l},[[d,h]]=n;return ht(new N1).style("x",d).style("y",h).call(ct,a).style("transform",`${u}rotate(${+c})`).style("coordCenter",e.getCenter()).call(ct,f).call(ct,t).node()}};I1.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var Gu=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function MD(t){const r=t/Math.sqrt(2),e=t*Math.sqrt(2),[n,i]=[-r,r-e],[a,o]=[0,0],[s,l]=[r,r-e];return[["M",n,i],["A",t,t,0,1,1,s,l],["L",a,o],["Z"]]}function PD(t){const{min:r,max:e}=t.getLocalBounds();return[(r[0]+e[0])*.5,(r[1]+e[1])*.5]}const CD=ra(t=>{const r=t.attributes,{class:e,x:n,y:i,transform:a}=r,o=Gu(r,["class","x","y","transform"]),s=et(o,"marker"),{size:l=24}=s,c=()=>MD(l/2),u=ht(t).maybeAppend("marker",()=>new Nt({})).call(h=>h.node().update(Object.assign({symbol:c},s))).node(),[f,d]=PD(u);ht(t).maybeAppend("text","text").style("x",f).style("y",d).call(ct,o)}),j1=(t,r)=>{const e=Gu(t,[]);return(n,i,a)=>{const{color:o}=a,s=Gu(a,["color"]),{color:l=o,text:c=""}=i,u={text:String(c),stroke:l,fill:l},[[f,d]]=n;return ht(new CD).call(ct,s).style("transform",`translate(${f},${d})`).call(ct,u).call(ct,e).node()}};j1.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const D1=(t,r)=>{const{coordinate:e}=r;return(n,i,a)=>{const{color:o,text:s="",fontSize:l,rotate:c=0,transform:u=""}=i,f={text:String(s),stroke:o,fill:o,fontSize:l,textAlign:"center",textBaseline:"middle"},[[d,h]]=n;return ht(new Pn).style("x",d).style("y",h).call(ct,a).style("transformOrigin","center center").style("transform",`${u}rotate(${c}deg)`).style("coordCenter",e.getCenter()).call(ct,f).call(ct,t).node()}};D1.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var LD=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function RD(t,r){const e=[],n=[],i=[];let a=!1,o=null;const s=t.length/2;for(let l=0;l<s;l++){const c=t[l],u=t[l+s];if([...c,...u].some(f=>!r(f)))a=!0;else{if(e.push(c),n.push(u),a&&o){a=!1;const[f,d]=o;i.push([f,c,d,u])}o=[c,u]}}return[e.concat(n),i]}const nv=ra(t=>{const{areaPath:r,connectPath:e,areaStyle:n,connectStyle:i}=t.attributes,a=t.ownerDocument;ht(t).maybeAppend("connect-path",()=>a.createElement("path",{})).style("d",e).call(ct,i),ht(t).maybeAppend("area-path",()=>a.createElement("path",{})).style("d",r).call(ct,n)}),In=(t,r)=>{const{curve:e,gradient:n=!1,defined:i=c=>!Number.isNaN(c)&&c!==void 0&&c!==null,connect:a=!1}=t,o=LD(t,["curve","gradient","defined","connect"]),{coordinate:s,document:l}=r;return(c,u,f)=>{const{color:d}=f,{color:h=d,seriesColor:p,seriesX:v,seriesY:g}=u,m=Qt(s),y=rb(s,u),b=n&&p?nb(p,v,g,n,void 0,m):h,x=Object.assign(Object.assign(Object.assign(Object.assign({},f),{stroke:b,fill:b}),y&&{transform:y}),o),[O,w]=RD(c,i),S=et(x,"connect"),k=!!w.length,E=_=>ht(l.createElement("path",{})).style("d",_||"").call(ct,x).node();if($t(s)){const _=A=>{const M=s.getCenter(),T=A.slice(0,A.length/2),C=A.slice(A.length/2);return oE().angle((I,R)=>ta(ye(T[R],M))).outerRadius((I,R)=>ue(T[R],M)).innerRadius((I,R)=>ue(C[R],M)).defined((I,R)=>[...T[R],...C[R]].every(i)).curve(e)(C)};return!k||a&&!Object.keys(S).length?E(_(O)):k&&!a?E(_(c)):ht(new nv).style("areaStyle",x).style("connectStyle",Object.assign(Object.assign({},S),o)).style("areaPath",_(c)).style("connectPath",w.map(_).join("")).node()}else{const _=A=>{const M=A.slice(0,A.length/2),T=A.slice(A.length/2);return m?xh().y((C,I)=>M[I][1]).x1((C,I)=>M[I][0]).x0((C,I)=>T[I][0]).defined((C,I)=>[...M[I],...T[I]].every(i)).curve(e)(M):xh().x((C,I)=>M[I][0]).y1((C,I)=>M[I][1]).y0((C,I)=>T[I][1]).defined((C,I)=>[...M[I],...T[I]].every(i)).curve(e)(M)};return!k||a&&!Object.keys(S).length?E(_(O)):k&&!a?E(_(c)):ht(new nv).style("areaStyle",x).style("connectStyle",Object.assign(Object.assign({},S),o)).style("areaPath",_(c)).style("connectPath",w.map(_).join("")).node()}}};In.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const B1=(t,r)=>{const{coordinate:e}=r;return(...n)=>{const i=$t(e)?mf:lm;return In(Object.assign({curve:i},t),r)(...n)}};B1.props=Object.assign(Object.assign({},In.props),{defaultMarker:"square"});var ND=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const F1=(t,r)=>{const e=ND(t,[]),{coordinate:n}=r;return(...i)=>{const a=$t(n)?cm:Qt(n)?um:fm;return In(Object.assign({curve:a},e),r)(...i)}};F1.props=Object.assign(Object.assign({},In.props),{defaultMarker:"smooth"});const $1=(t,r)=>(...e)=>In(Object.assign({curve:pm},t),r)(...e);$1.props=Object.assign(Object.assign({},In.props),{defaultMarker:"hvh"});const z1=(t,r)=>(...e)=>In(Object.assign({curve:hm},t),r)(...e);z1.props=Object.assign(Object.assign({},In.props),{defaultMarker:"vh"});const G1=(t,r)=>(...e)=>In(Object.assign({curve:dm},t),r)(...e);G1.props=Object.assign(Object.assign({},In.props),{defaultMarker:"hv"});const W1=(t,r)=>{const{arrow:e=!1}=t;return(...n)=>cd(Object.assign(Object.assign({},t),{arrow:e}),r)(...n)};W1.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var rv=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Y1=(t,r)=>{const e=rv(t,[]),{document:n}=r;return(i,a,o)=>{const{color:s}=o,l=rv(o,["color"]),{color:c=s,transform:u}=a,[f,d]=i,h=Nn();return h.moveTo(f[0],f[1]),h.bezierCurveTo(f[0]/2+d[0]/2,f[1],f[0]/2+d[0]/2,d[1],d[0],d[1]),ht(n.createElement("path",{})).call(ct,l).style("d",h.toString()).style("stroke",c).style("transform",u).call(ct,e).node()}};Y1.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var iv=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function ID(t,r,e,n){const i=Nn();if($t(e)){const a=e.getCenter(),o=ue(t,a),l=(ue(r,a)-o)*n+o;return i.moveTo(t[0],t[1]),Ja(i,t,r,a,l),i.lineTo(r[0],r[1]),i}return Qt(e)?(i.moveTo(t[0],t[1]),i.lineTo(t[0]+(r[0]-t[0])*n,t[1]),i.lineTo(t[0]+(r[0]-t[0])*n,r[1]),i.lineTo(r[0],r[1]),i):(i.moveTo(t[0],t[1]),i.lineTo(t[0],t[1]+(r[1]-t[1])*n),i.lineTo(r[0],t[1]+(r[1]-t[1])*n),i.lineTo(r[0],r[1]),i)}const H1=(t,r)=>{const{cornerRatio:e=1/3}=t,n=iv(t,["cornerRatio"]),{coordinate:i,document:a}=r;return(o,s,l)=>{const{defaultColor:c}=l,u=iv(l,["defaultColor"]),{color:f=c,transform:d}=s,[h,p]=o,v=ID(h,p,i,e);return ht(a.createElement("path",{})).call(ct,u).style("d",v.toString()).style("stroke",f).style("transform",d).call(ct,n).node()}};H1.props={defaultMarker:"vhv",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var av=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const V1=(t,r)=>{const e=av(t,[]),{coordinate:n,document:i}=r;return(a,o,s)=>{const{color:l}=s,c=av(s,["color"]),{color:u=l,transform:f}=o,[d,h]=a,p=Nn();if(p.moveTo(d[0],d[1]),$t(n)){const v=n.getCenter();p.quadraticCurveTo(v[0],v[1],h[0],h[1])}else{const v=e0(d,h),g=ue(d,h)/2;Ja(p,d,h,v,g)}return ht(i.createElement("path",{})).call(ct,c).style("d",p.toString()).style("stroke",u).style("transform",f).call(ct,e).node()}};V1.props={defaultMarker:"smooth",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function X1(t={}){const{shapes:r}=t;return[{name:"color"},{name:"opacity"},{name:"shape",range:r},{name:"enterType"},{name:"enterDelay",scaleKey:"enter"},{name:"enterDuration",scaleKey:"enter"},{name:"enterEasing"},{name:"key",scale:"identity"},{name:"groupKey",scale:"identity"},{name:"label",scale:"identity"}]}function Je(t={}){return[...X1(t),{name:"title",scale:"identity"}]}function $r(){return[{type:Pl,channel:"color"},{type:Ll,channel:["x","y"]}]}function va(){return[{type:Pl,channel:"x"},{type:Ll,channel:["y"]}]}function jD(){return[{type:Pl,channel:"color"},{type:Ll,channel:["position"]}]}function ga(t={}){return X1(t)}function Se(){return[{type:Ty}]}function Ae(){return[]}function zc(t,r){return t.getBandWidth(t.invert(r))}function Ai(t,r,e={}){const{x:n,y:i,series:a}=r,{x:o,y:s,series:l}=t,{style:{bandOffset:c=l?0:.5,bandOffsetX:u=c,bandOffsetY:f=c}={}}=e,d=!!(o!=null&&o.getBandWidth),h=!!(s!=null&&s.getBandWidth),p=!!(l!=null&&l.getBandWidth);return!d&&!h?v=>v:(v,g)=>{const m=d?zc(o,n[g]):0,y=h?zc(s,i[g]):0,x=p&&a?(zc(l,a[g])/2+ +a[g])*m:0,[O,w]=v;return[O+u*m+x,w+f*y]}}function al(t){return parseFloat(t)/100}function xd(t,r,e,n){const{x:i,y:a}=e,{innerWidth:o,innerHeight:s}=n.getOptions(),l=Array.from(t,c=>{const u=i[c],f=a[c],d=typeof u=="string"?al(u)*o:+u,h=typeof f=="string"?al(f)*s:+f;return[[d,h]]});return[t,l]}function Zn(t){return typeof t=="function"?t:r=>r[t]}function Gc(t,r){return Array.from(t,Zn(r))}function Od(t,r){const{source:e=u=>u.source,target:n=u=>u.target,value:i=u=>u.value}=r,{links:a,nodes:o}=t,s=Gc(a,e),l=Gc(a,n),c=Gc(a,i);return{links:a.map((u,f)=>({target:l[f],source:s[f],value:c[f]})),nodes:o||Array.from(new Set([...s,...l]),u=>({key:u}))}}var DD=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const U1=(t,r)=>{const{coordinate:e,document:n}=r;return(i,a,o)=>{const{color:s}=o,l=DD(o,["color"]),{color:c=s,src:u="",size:f=32,transform:d=""}=a;let{width:h=f,height:p=f}=t;const[[v,g]]=i,[m,y]=e.getSize();h=typeof h=="string"?al(h)*m:h,p=typeof p=="string"?al(p)*y:p;const b=v-Number(h)/2,x=g-Number(p)/2;return ht(n.createElement("image",{})).call(ct,l).style("x",b).style("y",x).style("src",u).style("stroke",c).style("transform",d).call(ct,t).style("width",h).style("height",p).node()}};U1.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var BD=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function FD(t,r){const e=Nn();if($t(r)){const n=r.getCenter(),i=[...t,t[0]],a=i.map(o=>ue(o,n));return i.forEach((o,s)=>{if(s===0){e.moveTo(o[0],o[1]);return}const l=a[s],c=t[s-1],u=a[s-1];u!==void 0&&Math.abs(l-u)<1e-10?Ja(e,c,o,n,l):e.lineTo(o[0],o[1])}),e.closePath(),e}return mN(e,t)}const q1=(t,r)=>{const{coordinate:e,document:n}=r;return(i,a,o)=>{const{color:s}=o,l=BD(o,["color"]),{color:c=s,transform:u}=a,f=FD(i,e);return ht(n.createElement("path",{})).call(ct,l).style("d",f.toString()).style("stroke",c).style("fill",c).style("transform",u).call(ct,t).node()}};q1.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var ov=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function $D(t,r){const[e,n,i,a]=t,o=Nn();if($t(r)){const s=r.getCenter(),l=ue(s,e);return o.moveTo(e[0],e[1]),o.quadraticCurveTo(s[0],s[1],i[0],i[1]),Ja(o,i,a,s,l),o.quadraticCurveTo(s[0],s[1],n[0],n[1]),Ja(o,n,e,s,l),o.closePath(),o}return o.moveTo(e[0],e[1]),o.bezierCurveTo(e[0]/2+i[0]/2,e[1],e[0]/2+i[0]/2,i[1],i[0],i[1]),o.lineTo(a[0],a[1]),o.bezierCurveTo(a[0]/2+n[0]/2,a[1],a[0]/2+n[0]/2,n[1],n[0],n[1]),o.lineTo(e[0],e[1]),o.closePath(),o}const K1=(t,r)=>{const e=ov(t,[]),{coordinate:n,document:i}=r;return(a,o,s)=>{const{color:l}=s,c=ov(s,["color"]),{color:u=l,transform:f}=o,d=$D(a,n);return ht(i.createElement("path",{})).call(ct,c).style("d",d.toString()).style("fill",u||l).style("stroke",u||l).style("transform",f).call(ct,e).node()}};K1.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var zD=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function GD(t,r){const e=Nn();if(!$t(r))e.moveTo(...t[0]),e.lineTo(...t[1]),e.moveTo(...t[2]),e.lineTo(...t[3]),e.moveTo(...t[4]),e.lineTo(...t[5]),e.lineTo(...t[6]),e.lineTo(...t[7]),e.closePath(),e.moveTo(...t[8]),e.lineTo(...t[9]),e.moveTo(...t[10]),e.lineTo(...t[11]),e.moveTo(...t[12]),e.lineTo(...t[13]);else{const n=r.getCenter(),[i,a]=n,o=xn(ye(t[0],n)),s=xn(ye(t[1],n)),l=ue(n,t[2]),c=ue(n,t[3]),u=ue(n,t[8]),f=ue(n,t[10]),d=ue(n,t[11]);e.moveTo(...t[0]),e.arc(i,a,l,o,s),e.arc(i,a,l,s,o,!0),e.moveTo(...t[2]),e.lineTo(...t[3]),e.moveTo(...t[4]),e.arc(i,a,c,o,s),e.lineTo(...t[6]),e.arc(i,a,f,s,o,!0),e.closePath(),e.moveTo(...t[8]),e.arc(i,a,u,o,s),e.arc(i,a,u,s,o,!0),e.moveTo(...t[10]),e.lineTo(...t[11]),e.moveTo(...t[12]),e.arc(i,a,d,o,s),e.arc(i,a,d,s,o,!0)}return e}const Z1=(t,r)=>{const{coordinate:e,document:n}=r;return(i,a,o)=>{const{color:s,transform:l}=a,{color:c,fill:u=c,stroke:f=c}=o,d=zD(o,["color","fill","stroke"]),h=GD(i,e);return ht(n.createElement("path",{})).call(ct,d).style("d",h.toString()).style("stroke",f).style("fill",s||u).style("transform",l).call(ct,t).node()}};Z1.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var WD=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function YD(t,r,e=4){const n=Nn();if(!$t(r))return n.moveTo(...t[2]),n.lineTo(...t[3]),n.lineTo(t[3][0]-e,t[3][1]),n.lineTo(t[10][0]-e,t[10][1]),n.lineTo(t[10][0]+e,t[10][1]),n.lineTo(t[3][0]+e,t[3][1]),n.lineTo(...t[3]),n.closePath(),n.moveTo(...t[10]),n.lineTo(...t[11]),n.moveTo(t[3][0]+e/2,t[8][1]),n.arc(t[3][0],t[8][1],e/2,0,Math.PI*2),n.closePath(),n;const i=r.getCenter(),[a,o]=i,s=ue(i,t[3]),l=ue(i,t[8]),c=ue(i,t[10]),u=xn(ye(t[2],i)),f=Math.asin(e/l),d=u-f,h=u+f;n.moveTo(...t[2]),n.lineTo(...t[3]),n.moveTo(Math.cos(d)*s+a,Math.sin(d)*s+o),n.arc(a,o,s,d,h),n.lineTo(Math.cos(h)*c+a,Math.sin(h)*c+o),n.arc(a,o,c,h,d,!0),n.lineTo(Math.cos(d)*s+a,Math.sin(d)*s+o),n.closePath(),n.moveTo(...t[10]),n.lineTo(...t[11]);const p=(d+h)/2;return n.moveTo(Math.cos(p)*(l+e/2)+a,Math.sin(p)*(l+e/2)+o),n.arc(Math.cos(p)*l+a,Math.sin(p)*l+o,e/2,p,Math.PI*2+p),n.closePath(),n}const Q1=(t,r)=>{const{coordinate:e,document:n}=r;return(i,a,o)=>{const{color:s,transform:l}=a,c=4,{color:u,fill:f=u,stroke:d=u}=o,h=WD(o,["color","fill","stroke"]),p=YD(i,e,c);return ht(n.createElement("path",{})).call(ct,h).style("d",p.toString()).style("stroke",d).style("fill",s||f).style("transform",l).call(ct,t).node()}};Q1.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var sv=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function HD(t,r,e){return t.createElement("path",{style:Object.assign({d:`M ${r},${r} L -${r},0 L ${r},-${r} L 0,0 Z`,transformOrigin:"center"},e)})}function VD(t,r){if(!$t(r))return po().x(n=>n[0]).y(n=>n[1])(t);const e=r.getCenter();return gf()({startAngle:0,endAngle:Math.PI*2,outerRadius:ue(t[0],e),innerRadius:ue(t[1],e)})}function XD(t,r){if(!$t(t))return r;const[e,n]=t.getCenter();return`translate(${e}, ${n}) ${r||""}`}const wd=(t,r)=>{const{arrow:e,arrowSize:n=4}=t,i=sv(t,["arrow","arrowSize"]),{coordinate:a,document:o}=r;return(s,l,c)=>{const{color:u,lineWidth:f}=c,d=sv(c,["color","lineWidth"]),{color:h=u,size:p=f}=l,v=e?HD(o,n,Object.assign({fill:i.stroke||h,stroke:i.stroke||h},et(i,"arrow"))):null,g=VD(s,a),m=XD(a,l.transform);return ht(o.createElement("path",{})).call(ct,d).style("d",g).style("stroke",h).style("lineWidth",p).style("transform",m).style("markerEnd",v).call(ct,i).node()}};wd.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var lv=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function UD(t,r,e){return[["M",t,r],["L",t+2*e,r-e],["L",t+2*e,r+e],["Z"]]}function qD(t){return po().x(r=>r[0]).y(r=>r[1])(t)}function KD(t,r,e,n,i,a,o=0){const[[s,l],[c,u]]=r;if(Qt(t)){const g=s+e,m=c+n,y=g+o,b=l+i,x=u+a;return[[g,b],[y,b],[y,x],[m,x]]}const f=l-e,d=u-n,h=f-o,p=s-i,v=c-a;return[[p,f],[p,h],[v,h],[v,d]]}const J1=(t,r)=>{const{offsetX:e=0,sourceOffsetX:n=e,targetOffsetX:i=e,offsetY:a=0,sourceOffsetY:o=a,targetOffsetY:s=a,connectLength1:l,endMarker:c=!0}=t,u=lv(t,["offsetX","sourceOffsetX","targetOffsetX","offsetY","sourceOffsetY","targetOffsetY","connectLength1","endMarker"]),{coordinate:f}=r;return(d,h,p)=>{const{color:v,connectLength1:g}=p,m=lv(p,["color","connectLength1"]),{color:y,transform:b}=h,x=KD(f,d,o,s,n,i,l??g),O=et(Object.assign(Object.assign({},u),p),"endMarker");return ht(new Qe).call(ct,m).style("d",qD(x)).style("stroke",y||v).style("transform",b).style("markerEnd",c?new Nt({className:"marker",style:Object.assign(Object.assign({},O),{symbol:UD})}):null).call(ct,u).node()}};J1.props={defaultMarker:"line",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};function ZD(t,r,e,n){const i=r.length/2,a=r.slice(0,i),o=r.slice(i);let s=ho(a,(h,p)=>Math.abs(h[1]-o[p][1]));s=Math.max(Math.min(s,i-2),1);const l=h=>[a[h][0],(a[h][1]+o[h][1])/2],c=l(s),u=l(s-1),f=l(s+1),d=xn(ye(f,u))/Math.PI*180;return{x:c[0],y:c[1],transform:`rotate(${d})`,textAlign:"center",textBaseline:"middle"}}function tx(t,r,e,n){const{bounds:i}=e,[[a,o],[s,l]]=i,c=s-a,u=l-o,f=d=>{const{x:h,y:p}=d,v=Bh(e.x,c),g=Bh(e.y,u);return Object.assign(Object.assign({},d),{x:(v||h)+a,y:(g||p)+o})};return f(t==="left"?{x:0,y:u/2,textAlign:"start",textBaseline:"middle"}:t==="right"?{x:c,y:u/2,textAlign:"end",textBaseline:"middle"}:t==="top"?{x:c/2,y:0,textAlign:"center",textBaseline:"top"}:t==="bottom"?{x:c/2,y:u,textAlign:"center",textBaseline:"bottom"}:t==="top-left"?{x:0,y:0,textAlign:"start",textBaseline:"top"}:t==="top-right"?{x:c,y:0,textAlign:"end",textBaseline:"top"}:t==="bottom-left"?{x:0,y:u,textAlign:"start",textBaseline:"bottom"}:t==="bottom-right"?{x:c,y:u,textAlign:"end",textBaseline:"bottom"}:{x:c/2,y:u/2,textAlign:"center",textBaseline:"middle"})}function ex(t,r,e,n){const{y:i,y1:a,autoRotate:o,rotateToAlignArc:s}=e,l=n.getCenter(),c=Ei(n,r,[i,a]),{innerRadius:u,outerRadius:f,startAngle:d,endAngle:h}=c,p=t==="inside"?(d+h)/2:h,v=Sd(p,o,s),g=(()=>{const[m,y]=r,b=u+(f-u)*.5,[x,O]=t==="inside"?ro(l,p,b):e0(m,y);return{x,y:O}})();return Object.assign(Object.assign({},g),{textAlign:t==="inside"?"center":"start",textBaseline:"middle",rotate:v})}function ro(t,r,e){return[t[0]+Math.sin(r)*e,t[1]-Math.cos(r)*e]}function Sd(t,r,e){if(!r)return 0;const n=e?0:Math.sin(t)<0?90:-90;return t/Math.PI*180+n}function QD(t,r,e,n){const{y:i,y1:a,autoRotate:o,rotateToAlignArc:s,radius:l=.5,offset:c=0}=e,u=Ei(n,r,[i,a]),{startAngle:f,endAngle:d}=u,h=n.getCenter(),p=(f+d)/2,g={textAlign:"center",textBaseline:"middle",rotate:Sd(p,o,s)},{innerRadius:m,outerRadius:y}=u,x=m+(y-m)*l+c,[O,w]=ro(h,p,x);return Object.assign({x:O,y:w},g)}function cv(t){return t===void 0?null:t}function nx(t,r,e,n){const{bounds:i}=e,[a]=i;return{x:cv(a[0]),y:cv(a[1])}}function rr(t,r,e,n){const{bounds:i}=e;return i.length===1?nx(t,r,e):(Dl(n)?ex:da(n)?QD:tx)(t,r,e,n)}function JD(t,r,e,n,i){const[a,o]=ro(t,r,e),[s,l]=ro(t,r,n),c=Math.sin(r)>0?1:-1;return[[a,o],[s,l],[s+c*i,l]]}function rx(t,r,e){const n=Ei(e,t,[r.y,r.y1]),{innerRadius:i,outerRadius:a}=n;return i+(a-i)}function ix(t,r,e){const n=Ei(e,t,[r.y,r.y1]),{startAngle:i,endAngle:a}=n;return(i+a)/2}function kd(t,r,e,n){const{autoRotate:i,rotateToAlignArc:a,offset:o=0,connector:s=!0,connectorLength:l=o,connectorLength2:c=0,connectorDistance:u=0}=e,f=n.getCenter(),d=ix(r,e,n),h=Math.sin(d)>0?1:-1,p=Sd(d,i,a),v={textAlign:h>0||Dl(n)?"start":"end",textBaseline:"middle",rotate:p},g=rx(r,e,n),m=g+(s?l:o),[[y,b],[x,O],[w,S]]=JD(f,d,g,m,s?c:0),k=s?+u*h:0,E=w+k,_=S,A={connector:s,connectorPoints:[[x-E,O-_],[w-E,S-_]]};return Object.assign(Object.assign({x0:y,y0:b,x:w+k,y:S},v),A)}function tB(t,r,e,n){const{bounds:i}=e;return i.length===1?nx(t,r,e):(Dl(n)?ex:da(n)?kd:tx)(t,r,e,n)}function uv(t,r={}){const{labelHeight:e=14,height:n}=r,i=fr(t,c=>c.y),a=i.length,o=new Array(a);for(let c=0;c<a;c++){const u=i[c],{y:f}=u;o[c]={y:f,y1:f+e,labels:[f]}}let s=!0;for(;s;){s=!1;for(let c=o.length-1;c>0;c--){const u=o[c],f=o[c-1];if(f.y1>u.y){s=!0,f.labels.push(...u.labels),o.splice(c,1),f.y1+=u.y1-u.y;const d=f.y1-f.y;f.y1=Math.max(Math.min(f.y1,n),d),f.y=f.y1-d}}}let l=0;for(const c of o){const{y:u,labels:f}=c;let d=u-e;for(const h of f){const p=i[l++],g=d+e-h;p.connectorPoints[0][1]-=g,p.y=d+e,d+=e}}}function fv(t,r){const e=fr(t,s=>s.y),{height:n,labelHeight:i=14}=r,a=Math.ceil(n/i);if(e.length<=a)return uv(e,r);const o=[];for(let s=0;s<e.length;s++)s<e.length-a?(e[s].opacity=0,e[s].connector=!1):o.push(e[s]);uv(o,r)}var eB=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const ps=new WeakMap;function nB(t,r,e){const{connectorLength:n,connectorLength2:i,connectorDistance:a}=r,o=eB(kd("outside",t,r,e),[]),s=e.getCenter(),l=rx(t,r,e),c=ix(t,r,e),u=l+n+i,f=Math.sin(c)>0?1:-1,d=s[0]+(u+ +a)*f,{x:h}=o,p=d-h;return o.x+=p,o.connectorPoints[0][0]-=p,o}function rB(t,r,e,n,i,a){if(!da(n))return{};if(ps.has(r))return ps.get(r);const o=a.map(d=>nB(d,e,n)),{width:s,height:l}=n.getOptions(),c=o.filter(d=>d.x<s/2),u=o.filter(d=>d.x>=s/2),f=Object.assign(Object.assign({},i),{height:l});return fv(c,f),fv(u,f),o.forEach((d,h)=>ps.set(a[h],d)),ps.get(r)}var iB=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function aB(t,r,e,n){if(!da(n))return{};const{connectorLength:i,connectorLength2:a,connectorDistance:o}=e,s=iB(kd("outside",r,e,n),[]),{x0:l,y0:c}=s,u=n.getCenter(),d=PM(n)+i,h=ta([l-u[0],c-u[1]]),p=Math.sin(h)>0?1:-1,[v,g]=ro(u,h,d);return s.x=v+(a+o)*p,s.y=g,s}const oB=Object.freeze(Object.defineProperty({__proto__:null,area:ZD,bottom:rr,bottomLeft:rr,bottomRight:rr,inside:rr,left:rr,outside:tB,right:rr,spider:rB,surround:aB,top:rr,topLeft:rr,topRight:rr},Symbol.toStringTag,{value:"Module"}));var dv=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function sB(t,r){return t!==void 0?t:da(r)?"inside":Qt(r)?"right":"top"}function lB(t,r,e,n,i,a){const{position:o}=r,{render:s}=i,l=sB(o,e),u=n[s?"htmlLabel":l==="inside"?"innerLabel":"label"],f=Object.assign({},u,r),d=oB[sd(l)];if(!d)throw new Error(`Unknown position: ${l}`);return Object.assign(Object.assign({},u),d(l,t,f,e,i,a))}const ax=(t,r)=>{const{coordinate:e,theme:n}=r,{render:i}=t;return(a,o,s,l)=>{const{text:c,x:u,y:f,transform:d="",transformOrigin:h,className:p=""}=o,v=dv(o,["text","x","y","transform","transformOrigin","className"]),g=lB(a,o,e,n,t,l),{rotate:m=0,transform:y=""}=g,b=dv(g,["rotate","transform"]);return ht(new N1).call(ct,b).style("text",`${c}`).style("className",`${p} g2-label`).style("innerHTML",i?i(c,o.datum,o.index):void 0).style("labelTransform",`${y} rotate(${+m}) ${d}`.trim()).style("labelTransformOrigin",h).style("coordCenter",e.getCenter()).call(ct,v).node()}};ax.props={defaultMarker:"point"};var hv=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Ed=(t,r)=>{const{arrow:e,colorAttribute:n}=t,i=hv(t,["arrow","colorAttribute"]),{coordinate:a,document:o}=r;return(s,l,c)=>{const{color:u,stroke:f}=c,d=hv(c,["color","stroke"]),{d:h,color:p=u}=l,[v,g]=a.getSize();return ht(o.createElement("path",{})).call(ct,d).style("d",typeof h=="function"?h({width:v,height:g}):h).style(n,p).call(ct,i).node()}};Ed.props={defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const ox=(t,r)=>Ed(Object.assign({colorAttribute:"fill"},t),r);ox.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const sx=(t,r)=>Ed(Object.assign({fill:"none",colorAttribute:"stroke"},t),r);sx.props={defaultMarker:"hvh",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var cB=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const lx=(t,r)=>{const{document:e}=r;return(n,i,a)=>{const{transform:o}=i,{color:s}=a,l=cB(a,["color"]),{color:c=s}=i,[u,...f]=n,d=Nn();return d.moveTo(...u),f.forEach(([h,p])=>{d.lineTo(h,p)}),d.closePath(),ht(e.createElement("path",{})).call(ct,l).style("d",d.toString()).style("stroke",c||s).style("fill",c||s).style("fillOpacity",.4).style("transform",o).call(ct,t).node()}};lx.props={defaultMarker:"square",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};vm(3);function cx(t,r=(...n)=>`${n[0]}`,e=16){const n=vm(e);return(...i)=>{const a=r(...i);let o=n.get(a);return n.has(a)?n.get(a):(o=t(...i),n.set(a,o),o)}}function uB(t){return typeof t=="string"?t.split(" ").map(r=>{const[e,n]=r.split(":");return[+e,n]}):t}function ol(t,r,e){const n=t?t():document.createElement("canvas");return n.width=r,n.height=e,n}const fB=cx((t,r,e)=>{const n=ol(e,t*2,t*2),i=n.getContext("2d"),a=t,o=t;if(r===1)i.beginPath(),i.arc(a,o,t,0,2*Math.PI,!1),i.fillStyle="rgba(0,0,0,1)",i.fill();else{const s=i.createRadialGradient(a,o,t*r,a,o,t);s.addColorStop(0,"rgba(0,0,0,1)"),s.addColorStop(1,"rgba(0,0,0,0)"),i.fillStyle=s,i.fillRect(0,0,2*t,2*t)}return n},t=>`${t}`);function dB(t,r){const n=ol(r,256,1).getContext("2d"),i=n.createLinearGradient(0,0,256,1);return uB(t).forEach(([a,o])=>{i.addColorStop(a,o)}),n.fillStyle=i,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data}function hB(t,r,e,n,i,a){const{blur:o}=i;let s=n.length;for(;s--;){const{x:l,y:c,value:u,radius:f}=n[s],d=Math.min(u,e),h=l-f,p=c-f,v=fB(f,1-o,a),g=(d-r)/(e-r);t.globalAlpha=Math.max(g,.001),t.drawImage(v,h,p)}return t}function pB(t,r,e,n,i){const{minOpacity:a,opacity:o,maxOpacity:s,useGradientOpacity:l}=i,c=0,u=0,f=r,d=e,h=t.getImageData(c,u,f,d),p=h.data,v=p.length;for(let g=3;g<v;g+=4){const m=p[g],y=m*4;if(!y)continue;const b=o||Math.max(0,Math.min(s,Math.max(a,m)));p[g-3]=n[y],p[g-2]=n[y+1],p[g-1]=n[y+2],p[g]=l?n[y+3]:b}return h}function vB(t,r,e,n,i,a,o){const s=Object.assign({blur:.85,minOpacity:0,opacity:.6,maxOpacity:1,gradient:[[.25,"rgb(0,0,255)"],[.55,"rgb(0,255,0)"],[.85,"yellow"],[1,"rgb(255,0,0)"]]},a);s.minOpacity*=255,s.opacity*=255,s.maxOpacity*=255;const c=ol(o,t,r).getContext("2d"),u=dB(s.gradient,o);c.clearRect(0,0,t,r),hB(c,e,n,i,s,o);const f=pB(c,t,r,u,s),h=ol(o,t,r).getContext("2d");return h.putImageData(f,0,0),h}var gB=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function mB(t,r){return Object.keys(t).reduce((e,n)=>{const i=t[n];return r(i,n)||(e[n]=i),e},{})}const ux=(t,r)=>{const{gradient:e,opacity:n,maxOpacity:i,minOpacity:a,blur:o,useGradientOpacity:s}=t,l=gB(t,["gradient","opacity","maxOpacity","minOpacity","blur","useGradientOpacity"]),{coordinate:c,createCanvas:u,document:f}=r;return(d,h,p)=>{const{transform:v}=h,[g,m]=c.getSize(),y=d.map(S=>({x:S[0],y:S[1],value:S[2],radius:S[3]})),b=Rn(d,S=>S[2]),x=Vt(d,S=>S[2]),w=g&&m?vB(g,m,b,x,y,mB({gradient:e,opacity:n,minOpacity:a,maxOpacity:i,blur:o,useGradientOpacity:s},S=>S===void 0),u):{canvas:null};return ht(f.createElement("image",{})).call(ct,p).style("x",0).style("y",0).style("width",g).style("height",m).style("src",w.canvas.toDataURL()).style("transform",v).call(ct,l).node()}};ux.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};var yB=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const fx=(t,r)=>{const{render:e}=t,n=yB(t,["render"]);return i=>{const[[a,o]]=i;return e(Object.assign(Object.assign({},n),{x:a,y:o}),r)}};fx.props={defaultMarker:"point",defaultEnterAnimation:"fadeIn",defaultUpdateAnimation:"morphing",defaultExitAnimation:"fadeOut"};const pv=5e3;function vv(t,r,e){return t+(r-t)*e}function bB(t,r,e,n){return r===0?[[t+1/2*e/Math.PI/2,n/2],[t+1/2*e/Math.PI,n],[t+e/4,n]]:r===1?[[t+1/2*e/Math.PI/2*(Math.PI-2),n],[t+1/2*e/Math.PI/2*(Math.PI-1),n/2],[t+e/4,0]]:r===2?[[t+1/2*e/Math.PI/2,-n/2],[t+1/2*e/Math.PI,-n],[t+e/4,-n]]:[[t+1/2*e/Math.PI/2*(Math.PI-2),-n],[t+1/2*e/Math.PI/2*(Math.PI-1),-n/2],[t+e/4,0]]}function xB(t,r,e,n,i,a,o){const s=Math.ceil(2*t/e*4)*4,l=[];let c=n;for(;c<-Math.PI*2;)c+=Math.PI*2;for(;c>0;)c-=Math.PI*2;c=c/Math.PI/2*e;const u=a-t+c-t*2;l.push(["M",u,r]);let f=0;for(let d=0;d<s;++d){const h=d%4,p=bB(d*e/4,h,e,i);l.push(["C",p[0][0]+u,-p[0][1]+r,p[1][0]+u,-p[1][1]+r,p[2][0]+u,-p[2][1]+r]),d===s-1&&(f=p[2][0])}return l.push(["L",f+u,o+t]),l.push(["L",u,o+t]),l.push(["Z"]),l}function OB(t,r,e,n,i,a,o,s,l,c,u){const{fill:f,fillOpacity:d,opacity:h}=i;for(let p=0;p<n;p++){const v=n<=1?1:p/(n-1),g=xB(s,o+s*e,l,0,s/40,t,r),m=u.createElement("path",{style:{d:g,fill:f,opacity:vv(.2,.9,v)*Number(h||d)}});a.appendChild(m);try{const y=[{transform:"translate(0, 0)"},{transform:`translate(${l*2}, 0)`}];m.animate(y,{duration:vv(.5*pv,pv,v)*2,iterations:1/0})}catch{console.warn("off-screen group animate error!")}}}function wB(t,r,e){return`
      M ${t} ${r-e} 
      a ${e} ${e} 0 1 0 0 ${e*2}
      a ${e} ${e} 0 1 0 0 ${-e*2}
      Z
    `}function SB(t,r,e){const i=e*.618;return`
      M ${t-i} ${r-e}
      L ${t+i} ${r-e}
      L ${t+i} ${r+e}
      L ${t-i} ${r+e}
      Z
    `}function kB(t,r,e){return`
      M ${t} ${r-e}
      L ${t+e} ${r}
      L ${t} ${r+e}
      L ${t-e} ${r}
      Z
    `}function EB(t,r,e){return`
      M ${t} ${r-e}
      L ${t+e} ${r+e}
      L ${t-e} ${r+e}
      Z
    `}function _B(t,r,e){const n=e*4/3,i=Math.max(n,e*2),a=n/2,o=t,s=a+r-i/2,l=Math.asin(a/((i-a)*.85)),c=Math.sin(l)*a,u=Math.cos(l)*a,f=o-u,d=s+c,h=t,p=s+a/Math.sin(l);return`
      M ${f} ${d}
      A ${a} ${a} 0 1 1 ${f+u*2} ${d}
      Q ${h} ${p} ${t} ${r+i/2}
      Q ${h} ${p} ${f} ${d}
      Z 
    `}const gv={pin:_B,rect:SB,circle:wB,diamond:kB,triangle:EB};var mv=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const AB=(t="circle")=>gv[t]||gv.circle,dx=(t,r)=>{if(!r)return;const{coordinate:e}=r,{liquidOptions:n,styleOptions:i}=t,{liquidShape:a,percent:o}=n,{background:s,outline:l={},wave:c={}}=i,u=mv(i,["background","outline","wave"]),{border:f=2,distance:d=0}=l,h=mv(l,["border","distance"]),{length:p=192,count:v=3}=c;return(g,m,y)=>{const{document:b}=r.canvas,{color:x,fillOpacity:O}=y,w=Object.assign(Object.assign({fill:x},y),u),S=b.createElement("g",{}),[k,E]=e.getCenter(),_=e.getSize(),A=Math.min(..._)/2,M=Le(a)?a:AB(a),T=M(k,E,A,..._),C=M(k,E,A+f/2,..._);if(Object.keys(s).length){const L=b.createElement("path",{style:Object.assign({d:T,fill:"#fff"},s)});S.appendChild(L)}if(o>0){const L=b.createElement("path",{style:{d:C}});S.appendChild(L),S.style.clipPath=L,OB(k,E,1-o,v,w,S,L.getBBox().y,A*2,p,!0,b)}const I=b.createElement("path",{style:{d:T,fill:"transparent",lineWidth:f+2*d,stroke:"#fff"}}),R=b.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:T,stroke:x,strokeOpacity:O,lineWidth:f},w),h),{fill:"transparent"})});return S.appendChild(I),S.appendChild(R),S}};dx.props={};const yv=(t,r)=>Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))/2,TB=(t,r,e)=>{const n=Math.atan2(t[1]-e[1],t[0]-e[0]);let a=Math.atan2(r[1]-e[1],r[0]-e[0])-n;return a<0&&(a+=Math.PI*2),a},MB=(t,r)=>{if(!r)return;const{coordinate:e}=r;if(!(e!=null&&e.getCenter))return;const n=e.getCenter();return(i,a,o)=>{const{document:s}=r.canvas,{color:l,index:c}=a,u=s.createElement("g",{}),f=yv(i[0],i[1]),d=yv(i[0],n)*2,h=TB(i[3],i[0],n)>Math.PI,p=s.createElement("path",{style:Object.assign(Object.assign(Object.assign({d:[["M",...i[0]],["A",f,f,0,1,0,...i[1]],["A",d+f*2,d+f*2,0,h?1:0,0,...i[2]],["A",f,f,0,1,c===0?0:1,...i[3]],["A",d,d,0,h?1:0,1,...i[0]],["Z"]]},o),Sf(t,["shape","last","first"])),{fill:l||o.color})});return u.appendChild(p),u}};function bv(t,r){return t.getBandWidth(t.invert(r))}const xv={rect:_i,hollow:ql,funnel:Jf,pyramid:ab},hx=()=>(t,r,e,n)=>{const{x:i,y:a,y1:o,series:s,size:l}=e,c=r.x,u=r.series,[f]=n.getSize(),d=l?l.map(v=>+v/f):null,h=l?(v,g,m)=>{const y=v+g/2,b=d[m];return[y-b/2,y+b/2]}:(v,g,m)=>[v,v+g],p=Array.from(t,v=>{const g=bv(c,i[v]),m=u?bv(u,s==null?void 0:s[v]):1,y=g*m,b=(+(s==null?void 0:s[v])||0)*g,x=+i[v]+b,[O,w]=h(x,y,v),S=+a[v],k=+o[v];return[[O,S],[w,S],[w,k],[O,k]].map(T=>n.map(T))});return[t,p]};hx.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:xv,channels:[...Je({shapes:Object.keys(xv)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size"}],preInference:[...Se(),{type:yo},{type:wi}],postInference:[...Ae(),...va()],interaction:{shareTooltip:!0}};const Ov={rect:_i,hollow:ql},px=()=>(t,r,e,n)=>{const{x:i,x1:a,y:o,y1:s}=e,l=Array.from(t,c=>{const u=[+i[c],+o[c]],f=[+a[c],+o[c]],d=[+a[c],+s[c]],h=[+i[c],+s[c]];return[u,f,d,h].map(p=>n.map(p))});return[t,l]};px.props={defaultShape:"rect",defaultLabelShape:"label",composite:!1,shape:Ov,channels:[...Je({shapes:Object.keys(Ov)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Se(),{type:yo}],postInference:[...Ae(),...va()],interaction:{shareTooltip:!0}};const wv={line:ob,smooth:sb,hv:lb,vh:cb,hvh:ub,trail:fb},PB=(t,r,e,n)=>{var i,a;const{series:o,x:s,y:l}=e,{x:c,y:u}=r;if(s===void 0||l===void 0)throw new Error("Missing encode for x or y channel.");const f=o?Array.from(Kt(t,g=>o[g]).values()):[t],d=f.map(g=>g[0]).filter(g=>g!==void 0),h=(((i=c==null?void 0:c.getBandWidth)===null||i===void 0?void 0:i.call(c))||0)/2,p=(((a=u==null?void 0:u.getBandWidth)===null||a===void 0?void 0:a.call(u))||0)/2,v=Array.from(f,g=>g.map(m=>n.map([+s[m]+h,+l[m]+p])));return[d,v,f]},CB=(t,r,e,n)=>{const i=Object.entries(e).filter(([o])=>o.startsWith("position")).map(([,o])=>o);if(i.length===0)throw new Error("Missing encode for position channel.");$t(n)&&i.push(i[0]);const a=Array.from(t,o=>{const s=i.map(u=>+u[o]),l=n.map(s),c=[];for(let u=0;u<l.length;u+=2)c.push([l[u],l[u+1]]);return c});return[t,a]},vx=()=>(t,r,e,n)=>(Bl(n)?CB:PB)(t,r,e,n);vx.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:wv,channels:[...Je({shapes:Object.keys(wv)}),{name:"x"},{name:"y"},{name:"position",independent:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Se(),{type:jy},{type:Nf}],postInference:[...Ae(),...va(),...jD()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const Sv={hollow:Ib,hollowDiamond:Rb,hollowHexagon:Nb,hollowSquare:jb,hollowTriangleDown:Bb,hollowTriangle:Db,hollowBowtie:Lb,hollowCircle:$b,point:Ub,plus:Xb,diamond:Wb,square:qb,triangle:Zb,hexagon:Yb,cross:Gb,bowtie:zb,hyphen:Hb,line:Vb,tick:Kb,triangleDown:Qb,circle:ld},gx=t=>(r,e,n,i)=>{const{x:a,y:o,x1:s,y1:l,size:c,dx:u,dy:f}=n,[d,h]=i.getSize(),p=Ai(e,n,t),v=m=>{const y=+((u==null?void 0:u[m])||0),b=+((f==null?void 0:f[m])||0),x=s?(+a[m]+ +s[m])/2:+a[m],O=l?(+o[m]+ +l[m])/2:+o[m],w=x+y,S=O+b;return[w,S]},g=c?Array.from(r,m=>{const[y,b]=v(m),x=+c[m],O=x/d,w=x/h,S=[y-O,b-w],k=[y+O,b+w];return[i.map(p(S,m)),i.map(p(k,m))]}):Array.from(r,m=>[i.map(p(v(m),m))]);return[r,g]};gx.props={defaultShape:"hollow",defaultLabelShape:"label",composite:!1,shape:Sv,channels:[...Je({shapes:Object.keys(Sv)}),{name:"x",required:!0},{name:"y",required:!0},{name:"series",scale:"band"},{name:"size",quantitative:"sqrt"},{name:"dx",scale:"identity"},{name:"dy",scale:"identity"}],preInference:[...Se(),{type:wi},{type:Cl}],postInference:[...Ae(),{type:Ay},...$r()]};const kv={text:I1,badge:j1,tag:D1},mx=t=>{const{cartesian:r=!1}=t;return r?xd:(e,n,i,a)=>{const{x:o,y:s}=i,l=Ai(n,i,t),c=Array.from(e,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[e,c]}};mx.props={defaultShape:"text",defaultLabelShape:"label",composite:!1,shape:kv,channels:[...Je({shapes:Object.keys(kv)}),{name:"x",required:!0},{name:"y",required:!0},{name:"text",scale:"identity"},{name:"fontSize",scale:"identity"},{name:"rotate",scale:"identity"}],preInference:[...Se(),{type:Nl},{type:Rl}],postInference:[...Ae(),...$r()]};const Ev={cell:_i,hollow:ql},yx=()=>(t,r,e,n)=>{const{x:i,y:a}=e,o=r.x,s=r.y,l=Array.from(t,c=>{const u=o.getBandWidth(o.invert(+i[c])),f=s.getBandWidth(s.invert(+a[c])),d=+i[c],h=+a[c],p=[d,h],v=[d+u,h],g=[d+u,h+f],m=[d,h+f];return[p,v,g,m].map(y=>n.map(y))});return[t,l]};yx.props={defaultShape:"cell",defaultLabelShape:"label",shape:Ev,composite:!1,channels:[...Je({shapes:Object.keys(Ev)}),{name:"x",required:!0,scale:"band"},{name:"y",required:!0,scale:"band"}],preInference:[...Se(),{type:wi},{type:Cl},{type:If}],postInference:[...Ae(),...$r()]};const _v={area:B1,smooth:F1,hvh:$1,vh:z1,hv:G1},bx=()=>(t,r,e,n)=>{var i,a;const{x:o,y:s,y1:l,series:c}=e,{x:u,y:f}=r,d=c?Array.from(Kt(t,m=>c[m]).values()):[t],h=d.map(m=>m[0]).filter(m=>m!==void 0),p=(((i=u==null?void 0:u.getBandWidth)===null||i===void 0?void 0:i.call(u))||0)/2,v=(((a=f==null?void 0:f.getBandWidth)===null||a===void 0?void 0:a.call(f))||0)/2,g=Array.from(d,m=>{const y=m.length,b=new Array(y*2);for(let x=0;x<m.length;x++){const O=m[x];b[x]=n.map([+o[O]+p,+s[O]+v]),b[y+x]=n.map([+o[O]+p,+l[O]+v])}return b});return[h,g,d]};bx.props={defaultShape:"area",defaultLabelShape:"label",composite:!1,shape:_v,channels:[...Je({shapes:Object.keys(_v)}),{name:"x",required:!0},{name:"y",required:!0},{name:"size"},{name:"series",scale:"band"}],preInference:[...Se(),{type:Nf},{type:yo},{type:If}],postInference:[...Ae(),...va()],interaction:{shareTooltip:!0,seriesTooltip:!0,crosshairs:!0}};const Av={link:W1,arc:V1,smooth:Y1,vhv:H1},_d=t=>(r,e,n,i)=>{const{x:a,y:o,x1:s=a,y1:l=o}=n,c=Ai(e,n,t),u=r.map(f=>[i.map(c([+a[f],+o[f]],f)),i.map(c([+s[f],+l[f]],f))]);return[r,u]};_d.props={defaultShape:"link",defaultLabelShape:"label",composite:!1,shape:Av,channels:[...Je({shapes:Object.keys(Av)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Se(),{type:Cy},{type:Ly}],postInference:[...Ae(),...$r()]};const Tv={image:U1},xx=t=>{const{cartesian:r}=t;return r?xd:(e,n,i,a)=>{const{x:o,y:s}=i,l=Ai(n,i,t),c=Array.from(e,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[e,c]}};xx.props={defaultShape:"image",defaultLabelShape:"label",composite:!1,shape:Tv,channels:[...Je({shapes:Object.keys(Tv)}),{name:"x",required:!0},{name:"y",required:!0},{name:"src",scale:"identity"},{name:"size"}],preInference:[...Se(),{type:Nl},{type:Rl}],postInference:[...Ae(),...$r()]};const Mv={polygon:q1,ribbon:K1},Ox=()=>(t,r,e,n)=>{const i=Object.entries(e).filter(([s])=>s.startsWith("x")).map(([,s])=>s),a=Object.entries(e).filter(([s])=>s.startsWith("y")).map(([,s])=>s),o=t.map(s=>{const l=[];for(let c=0;c<i.length;c++){const u=i[c][s];if(u===void 0)break;const f=a[c][s];l.push(n.map([+u,+f]))}return l});return[t,o]};Ox.props={defaultShape:"polygon",defaultLabelShape:"label",composite:!1,shape:Mv,channels:[...Je({shapes:Object.keys(Mv)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Se()],postInference:[...Ae(),...$r()]};const Pv={box:Z1,violin:Q1},wx=()=>(t,r,e,n)=>{const{x:i,y:a,y1:o,y2:s,y3:l,y4:c,series:u}=e,f=r.x,d=r.series,h=Array.from(t,p=>{const v=f.getBandWidth(f.invert(+i[p])),g=d?d.getBandWidth(d.invert(+(u==null?void 0:u[p]))):1,m=v*g,y=(+(u==null?void 0:u[p])||0)*v,b=+i[p]+y+m/2,[x,O,w,S,k]=[+a[p],+o[p],+s[p],+l[p],+c[p]];return[[b-m/2,k],[b+m/2,k],[b,k],[b,S],[b-m/2,S],[b+m/2,S],[b+m/2,O],[b-m/2,O],[b-m/2,w],[b+m/2,w],[b,O],[b,x],[b-m/2,x],[b+m/2,x]].map(_=>n.map(_))});return[t,h]};wx.props={defaultShape:"box",defaultLabelShape:"label",composite:!1,shape:Pv,channels:[...Je({shapes:Object.keys(Pv)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"series",scale:"band"}],preInference:[...Se(),{type:wi}],postInference:[...Ae(),...va()],interaction:{shareTooltip:!0}};const Cv={vector:cd},Sx=()=>(t,r,e,n)=>{const{x:i,y:a,size:o,rotate:s}=e,[l,c]=n.getSize(),u=t.map(f=>{const d=+s[f]/180*Math.PI,h=+o[f],p=h/l,v=h/c,g=p*Math.cos(d),m=-v*Math.sin(d);return[n.map([+i[f]-g/2,+a[f]-m/2]),n.map([+i[f]+g/2,+a[f]+m/2])]});return[t,u]};Sx.props={defaultShape:"vector",defaultLabelShape:"label",composite:!1,shape:Cv,channels:[...Je({shapes:Object.keys(Cv)}),{name:"x",required:!0},{name:"y",required:!0},{name:"rotate",required:!0,scale:"identity"},{name:"size",required:!0}],preInference:[...Se()],postInference:[...Ae(),...$r()]};const Lv={line:wd},kx=t=>(r,e,n,i)=>{const{y:a}=n,o=Ai(e,n,X({style:{bandOffset:0}},t)),s=Array.from(r,l=>{const c=[0,a[l]],u=[1,a[l]];return[c,u].map(f=>i.map(o(f,l)))});return[r,s]};kx.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Lv,channels:[...ga({shapes:Object.keys(Lv)}),{name:"y",required:!0}],preInference:[...Se(),{type:My}],postInference:[...Ae()]};const Rv={line:wd},Ex=t=>(r,e,n,i)=>{const{x:a}=n,o=Ai(e,n,X({style:{bandOffset:0}},t)),s=Array.from(r,l=>{const c=[a[l],1],u=[a[l],0];return[c,u].map(f=>i.map(o(f,l)))});return[r,s]};Ex.props={defaultShape:"line",defaultLabelShape:"label",composite:!1,shape:Rv,channels:[...ga({shapes:Object.keys(Rv)}),{name:"x",required:!0}],preInference:[...Se(),{type:Py}],postInference:[...Ae()]};const Nv={connector:J1},_x=(...t)=>_d(...t);_x.props={defaultShape:"connector",defaultLabelShape:"label",composite:!1,shape:Nv,channels:[...ga({shapes:Object.keys(Nv)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Se()],postInference:[...Ae()]};function Iv(t,r,e,n){if(r)return()=>[0,1];const{[t]:i,[`${t}1`]:a}=e;return o=>{var s;const l=((s=n.getBandWidth)===null||s===void 0?void 0:s.call(n,n.invert(+a[o])))||0;return[i[o],a[o]+l]}}function Ad(t={}){const{extendX:r=!1,extendY:e=!1}=t;return(n,i,a,o)=>{const s=Iv("x",r,a,i.x),l=Iv("y",e,a,i.y),c=Array.from(n,u=>{const[f,d]=s(u),[h,p]=l(u);return[[f,h],[d,h],[d,p],[f,p]].map(b=>o.map(b))});return[n,c]}}const jv={range:_i},Ax=()=>Ad();Ax.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:jv,channels:[...ga({shapes:Object.keys(jv)}),{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Se()],postInference:[...Ae()]};const Dv={range:_i},Tx=()=>Ad({extendY:!0});Tx.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:Dv,channels:[...ga({shapes:Object.keys(Dv)}),{name:"x",required:!0}],preInference:[...Se(),{type:Ry}],postInference:[...Ae()]};const Bv={range:_i},Mx=()=>Ad({extendX:!0});Mx.props={defaultShape:"range",defaultLabelShape:"label",composite:!1,shape:Bv,channels:[...ga({shapes:Object.keys(Bv)}),{name:"y",required:!0}],preInference:[...Se(),{type:Ny}],postInference:[...Ae()]};function LB(t){return t.target.depth}function RB(t){return t.depth}function NB(t,r){return r-1-t.height}function sl(t,r){return t.sourceLinks.length?t.depth:r-1}function IB(t){return t.targetLinks.length?t.depth:t.sourceLinks.length?Rn(t.sourceLinks,LB)-1:0}function vs(t){return function(){return t}}function Fv(t,r){return ll(t.source,r.source)||t.index-r.index}function $v(t,r){return ll(t.target,r.target)||t.index-r.index}function ll(t,r){return t.y0-r.y0}function Wc(t){return t.value}function jB(t){return t.index}function DB(t){return t.nodes}function BB(t){return t.links}function zv(t,r){const e=t.get(r);if(!e)throw new Error("missing: "+r);return e}function Gv({nodes:t}){for(const r of t){let e=r.y0,n=e;for(const i of r.sourceLinks)i.y0=e+i.width/2,e+=i.width;for(const i of r.targetLinks)i.y1=n+i.width/2,n+=i.width}}function FB(){let t=0,r=0,e=1,n=1,i=24,a=8,o,s=jB,l=sl,c,u,f,d=DB,h=BB,p=6;function v(R){const L={nodes:d(R),links:h(R)};return g(L),m(L),y(L),b(L),w(L),Gv(L),L}v.update=function(R){return Gv(R),R},v.nodeId=function(R){return arguments.length?(s=typeof R=="function"?R:vs(R),v):s},v.nodeAlign=function(R){return arguments.length?(l=typeof R=="function"?R:vs(R),v):l},v.nodeDepth=function(R){return arguments.length?(c=R,v):c},v.nodeSort=function(R){return arguments.length?(u=R,v):u},v.nodeWidth=function(R){return arguments.length?(i=+R,v):i},v.nodePadding=function(R){return arguments.length?(a=o=+R,v):a},v.nodes=function(R){return arguments.length?(d=typeof R=="function"?R:vs(R),v):d},v.links=function(R){return arguments.length?(h=typeof R=="function"?R:vs(R),v):h},v.linkSort=function(R){return arguments.length?(f=R,v):f},v.size=function(R){return arguments.length?(t=r=0,e=+R[0],n=+R[1],v):[e-t,n-r]},v.extent=function(R){return arguments.length?(t=+R[0][0],e=+R[1][0],r=+R[0][1],n=+R[1][1],v):[[t,r],[e,n]]},v.iterations=function(R){return arguments.length?(p=+R,v):p};function g({nodes:R,links:L}){R.forEach((N,j)=>{N.index=j,N.sourceLinks=[],N.targetLinks=[]});const P=new Map(R.map(N=>[s(N),N]));if(L.forEach((N,j)=>{N.index=j;let{source:B,target:F}=N;typeof B!="object"&&(B=N.source=zv(P,B)),typeof F!="object"&&(F=N.target=zv(P,F)),B.sourceLinks.push(N),F.targetLinks.push(N)}),f!=null)for(const{sourceLinks:N,targetLinks:j}of R)N.sort(f),j.sort(f)}function m({nodes:R}){for(const L of R)L.value=L.fixedValue===void 0?Math.max(yn(L.sourceLinks,Wc),yn(L.targetLinks,Wc)):L.fixedValue}function y({nodes:R}){const L=R.length;let P=new Set(R),N=new Set,j=0;for(;P.size;){if(P.forEach(B=>{B.depth=j;for(const{target:F}of B.sourceLinks)N.add(F)}),++j>L)throw new Error("circular link");P=N,N=new Set}if(c){const B=Math.max(Vt(R,$=>$.depth)+1,0);let F;for(let $=0;$<R.length;$++)F=R[$],F.depth=c.call(null,F,B)}}function b({nodes:R}){const L=R.length;let P=new Set(R),N=new Set,j=0;for(;P.size;){if(P.forEach(B=>{B.height=j;for(const{source:F}of B.targetLinks)N.add(F)}),++j>L)throw new Error("circular link");P=N,N=new Set}}function x({nodes:R}){const L=Math.max(Vt(R,j=>j.depth)+1,0),P=(e-t-i)/(L-1),N=new Array(L).fill(0).map(()=>[]);for(const j of R){const B=Math.max(0,Math.min(L-1,Math.floor(l.call(null,j,L))));j.layer=B,j.x0=t+B*P,j.x1=j.x0+i,N[B]?N[B].push(j):N[B]=[j]}if(u)for(const j of N)j.sort(u);return N}function O(R){const L=Rn(R,P=>(n-r-(P.length-1)*o)/yn(P,Wc));for(const P of R){let N=r;for(const j of P){j.y0=N,j.y1=N+j.value*L,N=j.y1+o;for(const B of j.sourceLinks)B.width=B.value*L}N=(n-N+o)/(P.length+1);for(let j=0;j<P.length;++j){const B=P[j];B.y0+=N*(j+1),B.y1+=N*(j+1)}T(P)}}function w(R){const L=x(R);o=Math.min(a,(n-r)/(Vt(L,P=>P.length)-1)),O(L);for(let P=0;P<p;++P){const N=Math.pow(.99,P),j=Math.max(1-N,(P+1)/p);k(L,N,j),S(L,N,j)}}function S(R,L,P){for(let N=1,j=R.length;N<j;++N){const B=R[N];for(const F of B){let $=0,W=0;for(const{source:Y,value:V}of F.targetLinks){const z=V*(F.layer-Y.layer);$+=C(Y,F)*z,W+=z}if(!(W>0))continue;const G=($/W-F.y0)*L;F.y0+=G,F.y1+=G,M(F)}u===void 0&&B.sort(ll),B.length&&E(B,P)}}function k(R,L,P){for(let N=R.length,j=N-2;j>=0;--j){const B=R[j];for(const F of B){let $=0,W=0;for(const{target:Y,value:V}of F.sourceLinks){const z=V*(Y.layer-F.layer);$+=I(F,Y)*z,W+=z}if(!(W>0))continue;const G=($/W-F.y0)*L;F.y0+=G,F.y1+=G,M(F)}u===void 0&&B.sort(ll),B.length&&E(B,P)}}function E(R,L){const P=R.length>>1,N=R[P];A(R,N.y0-o,P-1,L),_(R,N.y1+o,P+1,L),A(R,n,R.length-1,L),_(R,r,0,L)}function _(R,L,P,N){for(;P<R.length;++P){const j=R[P],B=(L-j.y0)*N;B>1e-6&&(j.y0+=B,j.y1+=B),L=j.y1+o}}function A(R,L,P,N){for(;P>=0;--P){const j=R[P],B=(j.y1-L)*N;B>1e-6&&(j.y0-=B,j.y1-=B),L=j.y0-o}}function M({sourceLinks:R,targetLinks:L}){if(f===void 0){for(const{source:{sourceLinks:P}}of L)P.sort($v);for(const{target:{targetLinks:P}}of R)P.sort(Fv)}}function T(R){if(f===void 0)for(const{sourceLinks:L,targetLinks:P}of R)L.sort($v),P.sort(Fv)}function C(R,L){let P=R.y0-(R.sourceLinks.length-1)*o/2;for(const{target:N,width:j}of R.sourceLinks){if(N===L)break;P+=j+o}for(const{source:N,width:j}of L.targetLinks){if(N===R)break;P-=j}return P}function I(R,L){let P=L.y0-(L.targetLinks.length-1)*o/2;for(const{source:N,width:j}of L.targetLinks){if(N===R)break;P+=j+o}for(const{target:N,width:j}of R.sourceLinks){if(N===L)break;P-=j}return P}return v}const $B={nodeAlign:"justify",nodeWidth:.008,nodePadding:.03,nodes:t=>t.nodes,links:t=>t.links,nodeSort:void 0,linkSort:void 0,iterations:6},zB={left:RB,right:NB,center:IB,justify:sl};function GB(t){const r=typeof t;return r==="string"?zB[t]||sl:r==="function"?t:sl}const Px=t=>r=>{const{nodeId:e,nodeSort:n,nodeAlign:i,nodeWidth:a,nodePadding:o,nodeDepth:s,nodes:l,links:c,linkSort:u,iterations:f}=Object.assign({},$B,t),d=FB().nodeSort(n).linkSort(u).links(c).nodes(l).nodeWidth(a).nodePadding(o).nodeDepth(s).nodeAlign(GB(i)).iterations(f).extent([[0,0],[1,1]]);typeof e=="function"&&d.nodeId(e);const h=d(r),{nodes:p,links:v}=h,g=p.map(y=>{const{x0:b,x1:x,y0:O,y1:w}=y;return Object.assign(Object.assign({},y),{x:[b,x,x,b],y:[O,O,w,w]})}),m=v.map(y=>{const{source:b,target:x}=y,O=b.x1,w=x.x0,S=y.width/2;return Object.assign(Object.assign({},y),{x:[O,O,w,w],y:[y.y0+S,y.y0-S,y.y1+S,y.y1-S]})});return{nodes:g,links:m}};Px.props={};function er(t,r,e={},n=!1){if(vr(t)||Array.isArray(t)&&n)return t;const i=et(t,r);return X(e,i)}function cl(t,r={}){return vr(t)||Array.isArray(t)||!Cx(t)?t:X(r,t)}function Cx(t){if(Object.keys(t).length===0)return!0;const{title:r,items:e}=t;return r!==void 0||e!==void 0}function nr(t,r){return typeof t=="object"?et(t,r):t}var WB=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const YB={nodeId:t=>t.key,nodeWidth:.02,nodePadding:.02},HB={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{stroke:"#000"}},VB={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{fillOpacity:.5,stroke:void 0}},XB={textAlign:t=>t.x[0]<.5?"start":"end",position:t=>t.x[0]<.5?"right":"left",fontSize:10},Lx=t=>{const{data:r,encode:e={},scale:n,style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={},interaction:u,state:f={}}=t,{links:d,nodes:h}=Od(r,e),p=et(e,"node"),v=et(e,"link"),{key:g=T=>T.key,color:m=g}=p,{links:y,nodes:b}=Px(Object.assign(Object.assign(Object.assign({},YB),{nodeId:Zn(g)}),a))({links:d,nodes:h}),x=et(i,"label"),{text:O=g,spacing:w=5}=x,S=WB(x,["text","spacing"]),k=Zn(g),E=er(c,"node",{title:k,items:[{field:"value"}]},!0),_=er(c,"link",{title:"",items:[T=>({name:"source",value:k(T.source)}),T=>({name:"target",value:k(T.target)})]}),[A,M]=Object.entries(f).reduce((T,[C,I])=>{const R=_s(I,"node","link"),L=et(I,"node");T[0][C]=Object.assign(Object.assign({},R),L);const P=et(I,"link");return T[1][C]=Object.assign(Object.assign({},R),P),T},[{},{}]);return[X({},HB,{data:b,encode:Object.assign(Object.assign({},p),{color:m}),scale:n,style:et(i,"node"),labels:[Object.assign(Object.assign(Object.assign({},XB),{text:O,dx:T=>T.x[0]<.5?w:-w}),S),...o],tooltip:E,animate:nr(l,"node"),axis:!1,interaction:u,state:A}),X({},VB,{data:y,encode:v,labels:s,style:Object.assign({fill:v.color?void 0:"#aaa",lineWidth:0},et(i,"link")),tooltip:_,animate:nr(l,"link"),interaction:u,state:M})]};Lx.props={};function UB(t,r){return r.value-t.value}function qB(t,r){return r.frequency-t.frequency}function KB(t,r){return`${t.id}`.localeCompare(`${r.id}`)}function ZB(t,r){return`${t.name}`.localeCompare(`${r.name}`)}const QB=Object.freeze(Object.defineProperty({__proto__:null,frequency:qB,id:KB,name:ZB,weight:UB},Symbol.toStringTag,{value:"Module"})),JB={y:0,thickness:.05,weight:!1,marginRatio:.1,id:t=>t.id,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null};function tF(t){const{y:r,thickness:e,weight:n,marginRatio:i,id:a,source:o,target:s,sourceWeight:l,targetWeight:c,sortBy:u}=Object.assign(Object.assign({},JB),t);function f(g){const m=g.nodes.map(b=>Object.assign({},b)),y=g.edges.map(b=>Object.assign({},b));return d(m,y),h(m),p(m,y),v(m,y),{nodes:m,edges:y}}function d(g,m){m.forEach(x=>{x.source=o(x),x.target=s(x),x.sourceWeight=l(x),x.targetWeight=c(x)});const y=Kt(m,x=>x.source),b=Kt(m,x=>x.target);return g.forEach(x=>{x.id=a(x);const O=y.has(x.id)?y.get(x.id):[],w=b.has(x.id)?b.get(x.id):[];x.frequency=O.length+w.length,x.value=yn(O,S=>S.sourceWeight)+yn(w,S=>S.targetWeight)}),{nodes:g,edges:m}}function h(g,m){const y=typeof u=="function"?u:QB[u];y&&g.sort(y)}function p(g,m){const y=g.length;if(!y)throw Qi("Invalid nodes: it's empty!");if(!n){const O=1/y;return g.forEach((w,S)=>{w.x=(S+.5)*O,w.y=r}),{nodes:g,edges:m}}const b=i/(2*y),x=g.reduce((O,w)=>O+=w.value,0);return g.reduce((O,w)=>{w.weight=w.value/x,w.width=w.weight*(1-i),w.height=e;const S=b+O,k=S+w.width,E=r-e/2,_=E+e;return w.x=[S,k,k,S],w.y=[E,E,_,_],O+w.width+2*b},0),{nodes:g,edges:m}}function v(g,m){const y=new Map(g.map(O=>[O.id,O]));if(!n)return m.forEach(O=>{const w=o(O),S=s(O),k=y.get(w),E=y.get(S);k&&E&&(O.x=[k.x,E.x],O.y=[k.y,E.y])}),{nodes:g,edges:m};m.forEach(O=>{O.x=[0,0,0,0],O.y=[r,r,r,r]});const b=Kt(m,O=>O.source),x=Kt(m,O=>O.target);g.forEach(O=>{const{edges:w,width:S,x:k,y:E,value:_,id:A}=O,M=b.get(A)||[],T=x.get(A)||[];let C=0;M.map(I=>{const R=I.sourceWeight/_*S;I.x[0]=k[0]+C,I.x[1]=k[0]+C+R,C+=R}),T.forEach(I=>{const R=I.targetWeight/_*S;I.x[3]=k[0]+C,I.x[2]=k[0]+C+R,C+=R})})}return f}const Td=t=>r=>tF(t)(r);Td.props={};var Wv=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Yc={y:0,thickness:.05,marginRatio:.1,id:t=>t.key,source:t=>t.source,target:t=>t.target,sourceWeight:t=>t.value||1,targetWeight:t=>t.value||1,sortBy:null},eF={type:"polygon",axis:!1,legend:!1,encode:{shape:"polygon",x:"x",y:"y"},scale:{x:{type:"identity"},y:{type:"identity"}},style:{opacity:1,fillOpacity:1,lineWidth:1}},nF={type:"polygon",axis:!1,legend:!1,encode:{shape:"ribbon",x:"x",y:"y"},style:{opacity:.5,lineWidth:1}},rF={position:"outside",fontSize:10},Rx=(t,r)=>{const{data:e,encode:n={},scale:i,style:a={},layout:o={},nodeLabels:s=[],linkLabels:l=[],animate:c={},tooltip:u={}}=t,{nodes:f,links:d}=Od(e,n),h=et(n,"node"),p=et(n,"link"),{key:v=I=>I.key,color:g=v}=h,{linkEncodeColor:m=I=>I.source}=p,{nodeWidthRatio:y=Yc.thickness,nodePaddingRatio:b=Yc.marginRatio}=o,x=Wv(o,["nodeWidthRatio","nodePaddingRatio"]),{nodes:O,edges:w}=Td(Object.assign(Object.assign(Object.assign(Object.assign({},Yc),{id:Zn(v),thickness:y,marginRatio:b}),x),{weight:!0}))({nodes:f,edges:d}),S=et(a,"label"),{text:k=v}=S,E=Wv(S,["text"]),_=er(u,"node",{title:"",items:[I=>({name:I.key,value:I.value})]},!0),A=er(u,"link",{title:"",items:[I=>({name:`${I.source} -> ${I.target}`,value:I.value})]}),{height:M,width:T}=r,C=Math.min(M,T);return[X({},nF,{data:w,encode:Object.assign(Object.assign({},p),{color:m}),labels:l,style:Object.assign({fill:m?void 0:"#aaa"},et(a,"link")),tooltip:A,animate:nr(c,"link")}),X({},eF,{data:O,encode:Object.assign(Object.assign({},h),{color:g}),scale:i,style:et(a,"node"),coordinate:{type:"polar",outerRadius:(C-20)/C,startAngle:-Math.PI*2,endAngle:0},labels:[Object.assign(Object.assign(Object.assign({},rF),{text:k}),E),...s],tooltip:_,animate:nr(c,"node"),axis:!1})]};Rx.props={};const Yv={path:ox,hollow:sx},Nx=t=>(r,e,n,i)=>[r,r.map(()=>[[0,0]])];Nx.props={defaultShape:"path",defaultLabelShape:"label",shape:Yv,composite:!1,channels:[...Je({shapes:Object.keys(Yv)}),{name:"d",scale:"identity"}],preInference:[...Se()],postInference:[...Ae()]};function iF(t,r){return Array.isArray(t)?typeof r=="function"?fu().path(r)(t):fu()(t):yf(t)}function Ix(t,r=[t.data.name]){t.id=t.id||t.data.name,t.path=r,t.children&&t.children.forEach(e=>{e.id=`${t.id}/${e.data.name}`,e.path=[...r,e.data.name],Ix(e,e.path)})}function jx(t){const r=Rt(t,["data","name"]);r.replaceAll&&(t.path=r.replaceAll(".","/").split("/")),t.children&&t.children.forEach(e=>{jx(e)})}function aF(t,r){const e={treemapBinary:hE,treemapDice:dE,treemapSlice:fE,treemapSliceDice:uE,treemapSquarify:cE,treemapResquarify:lE},n=t==="treemapSquarify"?e[t].ratio(r):e[t];if(!n)throw new TypeError("Invalid tile method!");return n}function Dx(t,r,e){const{value:n}=e,i=aF(r.tile,r.ratio),a=iF(t,r.path);Ge(t)?jx(a):Ix(a),n?a.sum(l=>r.ignoreParentValue&&l.children?0:Zn(n)(l)).sort(r.sort):a.count(),sE().tile(i).size(r.size).round(r.round).paddingInner(r.paddingInner).paddingOuter(r.paddingOuter).paddingTop(r.paddingTop).paddingRight(r.paddingRight).paddingBottom(r.paddingBottom).paddingLeft(r.paddingLeft)(a);const o=a.descendants().map(l=>Object.assign(l,{id:l.id.replace(/^\//,""),x:[l.x0,l.x1],y:[l.y0,l.y1]}));return[o.filter(typeof r.layer=="function"?r.layer:l=>l.height===r.layer),o]}var oF=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const sF=(t,r)=>({tile:"treemapSquarify",ratio:.5*(1+Math.sqrt(5)),size:[t,r],round:!1,ignoreParentValue:!0,padding:0,paddingInner:0,paddingOuter:0,paddingTop:0,paddingRight:0,paddingBottom:0,paddingLeft:0,sort:(e,n)=>n.value-e.value,layer:0}),lF=(t,r)=>({type:"rect",axis:!1,encode:{x:"x",y:"y",key:"id",color:e=>e.path[1]},scale:{x:{domain:[0,t],range:[0,1]},y:{domain:[0,r],range:[0,1]}},style:{stroke:"#fff"},state:{active:{opacity:.6},inactive:{opacity:1}}}),cF={fontSize:10,text:t=>fa(t.path),position:"inside",fill:"#000",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.x1-t.x0,isTreemapLabel:!0},uF={title:t=>{var r,e;return(e=(r=t.path)===null||r===void 0?void 0:r.join)===null||e===void 0?void 0:e.call(r,".")},items:[{field:"value"}]},fF={title:t=>fa(t.path),items:[{field:"value"}]},Bx=(t,r)=>{const{width:e,height:n,options:i}=r,{data:a,encode:o={},scale:s,style:l={},layout:c={},labels:u=[],tooltip:f={}}=t,d=oF(t,["data","encode","scale","style","layout","labels","tooltip"]),h=Rt(i,["interaction","treemapDrillDown"])||Rt(i,["marks",0,"interaction","treemapDrillDown"]),p=X({},sF(e,n),c,{layer:h?y=>y.depth===1:c.layer}),[v,g]=Dx(a,p,o),m=et(l,"label");return X({},lF(e,n),Object.assign(Object.assign({data:v,scale:s,style:l,labels:[Object.assign(Object.assign(Object.assign({},cF),m),h&&{cursor:"pointer"}),...u]},d),{encode:o,tooltip:cl(f,uF),axis:!1}),h?{interaction:Object.assign(Object.assign({},d.interaction),{treemapDrillDown:h?Object.assign(Object.assign({},h),{originData:g,layout:p}):void 0}),encode:Object.assign({color:y=>fa(y.path)},o),tooltip:cl(f,fF)}:{})};Bx.props={};var dF=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const hF=(t,r)=>({size:[t,r],padding:0,sort:(e,n)=>n.value-e.value}),pF=(t,r,e)=>({type:"point",axis:!1,legend:!1,scale:{x:{domain:[0,t]},y:{domain:[0,r]},size:{type:"identity"}},encode:{x:"x",y:"y",size:"r",shape:"point"},style:{fill:e.color?void 0:n=>n.height===0?"#ddd":"#fff",stroke:e.color?void 0:n=>n.height===0?"":"#000"}}),vF={text:"",position:"inside",textOverflow:"clip",wordWrap:!0,maxLines:1,wordWrapWidth:t=>t.r*2},gF={title:t=>t.data.name,items:[{field:"value"}]},mF=(t,r,e)=>{const{value:n}=e,i=Ge(t)?fu().path(r.path)(t):yf(t);return n?i.sum(a=>Zn(n)(a)).sort(r.sort):i.count(),pE().size(r.size).padding(r.padding)(i),i.descendants()},Fx=(t,r)=>{const{width:e,height:n}=r,{data:i,encode:a={},scale:o={},style:s={},layout:l={},labels:c=[],tooltip:u={}}=t,f=dF(t,["data","encode","scale","style","layout","labels","tooltip"]),d=pF(e,n,a),h=mF(i,X({},hF(e,n),l),X({},d.encode,a)),p=et(s,"label");return X({},d,Object.assign(Object.assign({data:h,encode:a,scale:o,style:s,labels:[Object.assign(Object.assign({},vF),p),...c]},f),{tooltip:cl(u,gF),axis:!1}))};Fx.props={};var Hv=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function yF(t,r){return Rn(t,e=>r[e])}function bF(t,r){return Vt(t,e=>r[e])}function $x(t,r){const e=Md(t,r)*2.5-Pd(t,r)*1.5;return Rn(t,n=>r[n]>=e?r[n]:NaN)}function Md(t,r){return pf(t,.25,e=>r[e])}function xF(t,r){return pf(t,.5,e=>r[e])}function Pd(t,r){return pf(t,.75,e=>r[e])}function zx(t,r){const e=Pd(t,r)*2.5-Md(t,r)*1.5;return Vt(t,n=>r[n]<=e?r[n]:NaN)}function OF(){return(t,r)=>{const{encode:e}=r,{y:n,x:i}=e,{value:a}=n,{value:o}=i;return[Array.from(Kt(t,c=>o[+c]).values()).flatMap(c=>{const u=$x(c,a),f=zx(c,a);return c.filter(d=>a[d]<u||a[d]>f)}),r]}}const Gx=t=>{const{data:r,encode:e,style:n={},tooltip:i={},transform:a,animate:o}=t,s=Hv(t,["data","encode","style","tooltip","transform","animate"]),{point:l=!0}=n,c=Hv(n,["point"]),{y:u}=e,f={y:u,y1:u,y2:u,y3:u,y4:u},d={y1:Md,y2:xF,y3:Pd},h=er(i,"box",{items:[{channel:"y",name:"min"},{channel:"y1",name:"q1"},{channel:"y2",name:"q2"},{channel:"y3",name:"q3"},{channel:"y4",name:"max"}]},!0),p=er(i,"point",{title:{channel:"x"},items:[{name:"outlier",channel:"y"}]});if(!l)return Object.assign({type:"box",data:r,transform:[Object.assign(Object.assign({type:"groupX",y:yF},d),{y4:bF})],encode:Object.assign(Object.assign({},e),f),style:c,tooltip:h},s);const v=et(c,"box"),g=et(c,"point");return[Object.assign({type:"box",data:r,transform:[Object.assign(Object.assign({type:"groupX",y:$x},d),{y4:zx})],encode:Object.assign(Object.assign({},e),f),style:v,tooltip:h,animate:nr(o,"box")},s),{type:"point",data:r,transform:[{type:OF}],encode:e,style:Object.assign({},g),tooltip:p,animate:nr(o,"point")}]};Gx.props={};const wF={shape:fx},Wx=t=>{const{cartesian:r}=t;return r?xd:(e,n,i,a)=>{const{x:o,y:s}=i,l=Ai(n,i,t),c=Array.from(e,u=>{const f=[+o[u],+s[u]];return[a.map(l(f,u))]});return[e,c]}};Wx.props={defaultShape:"shape",defaultLabelShape:"label",composite:!1,shape:wF,channels:[{name:"x",required:!0},{name:"y",required:!0}],preInference:[...Se(),{type:Nl},{type:Rl},{type:Iy}]};var SF=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const kF={joint:!0},EF={type:"link",axis:!1,legend:!1,encode:{x:[t=>t.source.x,t=>t.target.x],y:[t=>t.source.y,t=>t.target.y]},style:{stroke:"#999",strokeOpacity:.6}},_F={type:"point",axis:!1,legend:!1,encode:{x:"x",y:"y",size:5,color:"group",shape:"point"},style:{stroke:"#fff"}},AF={text:""};function TF(t,r,e){const{nodes:n,links:i}=t,{joint:a,nodeStrength:o,linkStrength:s}=r,{nodeKey:l=p=>p.id,linkKey:c=p=>p.id}=e,u=OA(),f=wA(i).id(Zn(c));typeof o=="function"&&u.strength(o),typeof s=="function"&&f.strength(s);const d=SA(n).force("link",f).force("charge",u);a?d.force("center",kA()):d.force("x",EA()).force("y",_A()),d.stop();const h=Math.ceil(Math.log(d.alphaMin())/Math.log(1-d.alphaDecay()));for(let p=0;p<h;p++)d.tick();return{nodesData:n,linksData:i}}const Yx=t=>{const{data:r,encode:e={},scale:n,style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,{nodeKey:u=w=>w.id,linkKey:f=w=>w.id}=e,d=SF(e,["nodeKey","linkKey"]),h=Object.assign({nodeKey:u,linkKey:f},d),p=et(h,"node"),v=et(h,"link"),{links:g,nodes:m}=Od(r,h),{nodesData:y,linksData:b}=TF({links:g,nodes:m},X({},kF,a),h),x=er(c,"link",{items:[w=>({name:"source",value:Zn(f)(w.source)}),w=>({name:"target",value:Zn(f)(w.target)})]}),O=er(c,"node",{items:[w=>({name:"key",value:Zn(u)(w)})]},!0);return[X({},EF,{data:b,encode:v,labels:s,style:et(i,"link"),tooltip:x,animate:nr(l,"link")}),X({},_F,{data:y,encode:Object.assign({},p),scale:n,style:et(i,"node"),tooltip:O,labels:[Object.assign(Object.assign({},AF),et(i,"label")),...o],animate:nr(l,"link")})]};Yx.props={};const Hx=t=>r=>e=>{const{field:n="value",nodeSize:i,separation:a,sortBy:o,as:s=["x","y"]}=r,[l,c]=s,u=yf(e,p=>p.children).sum(p=>p[n]).sort(o),f=t();f.size([1,1]),i&&f.nodeSize(i),a&&f.separation(a),f(u);const d=[];u.each(p=>{p[l]=p.x,p[c]=p.y,p.name=p.data.name,d.push(p)});const h=u.links();return h.forEach(p=>{p[l]=[p.source[l],p.target[l]],p[c]=[p.source[c],p.target[c]]}),{nodes:d,edges:h}},Vx=t=>Hx(vE)(t);Vx.props={};const Xx=t=>Hx(gE)(t);Xx.props={};const MF={sortBy:(t,r)=>r.value-t.value},PF={axis:!1,legend:!1,type:"point",encode:{x:"x",y:"y",size:2,shape:"point"}},CF={type:"link",encode:{x:"x",y:"y",shape:"smooth"}},LF={text:"",fontSize:10},Ux=t=>{const{data:r,encode:e={},scale:n={},style:i={},layout:a={},nodeLabels:o=[],linkLabels:s=[],animate:l={},tooltip:c={}}=t,u=e==null?void 0:e.value,{nodes:f,edges:d}=Xx(Object.assign(Object.assign(Object.assign({},MF),a),{field:u}))(r),h=er(c,"node",{title:"name",items:["value"]},!0),p=er(c,"link",{title:"",items:[v=>({name:"source",value:v.source.name}),v=>({name:"target",value:v.target.name})]});return[X({},CF,{data:d,encode:et(e,"link"),scale:et(n,"link"),labels:s,style:Object.assign({stroke:"#999"},et(i,"link")),tooltip:p,animate:nr(l,"link")}),X({},PF,{data:f,scale:et(n,"node"),encode:et(e,"node"),labels:[Object.assign(Object.assign({},LF),et(i,"label")),...o],style:Object.assign({},et(i,"node")),tooltip:h,animate:nr(l,"node")})]};Ux.props={};var RF=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},NF=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function IF(t,r){const{text:e="text",value:n="value"}=r;return t.map(i=>Object.assign(Object.assign({},i),{text:i[e],value:i[n]}))}const jF=()=>({axis:!1,type:"text",encode:{x:"x",y:"y",text:"text",rotate:"rotate",fontSize:"size",shape:"tag"},scale:{x:{range:[0,1]},y:{range:[0,1]}},style:{fontFamily:t=>t.fontFamily},tooltip:{items:[t=>({name:t.text,value:t.value})]}}),Cd=(t,r)=>RF(void 0,void 0,void 0,function*(){const{width:e,height:n}=r,{data:i,encode:a={},scale:o,style:s={},layout:l={}}=t,c=NF(t,["data","encode","scale","style","layout"]),u=IF(i,a);return X({},jF(),Object.assign(Object.assign({data:{value:u,transform:[Object.assign({type:"wordCloud",size:[e,n]},l)]},encode:a,scale:o,style:s},c),{axis:!1}))});Cd.props={};var Fa=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const DF=(t,r)=>{const{shape:e,radius:n}=t,i=Fa(t,["shape","radius"]),a=et(i,"pointer"),o=et(i,"pin"),{shape:s}=a,l=Fa(a,["shape"]),{shape:c}=o,u=Fa(o,["shape"]),{coordinate:f,theme:d}=r;return(h,p)=>{const v=h.map(C=>f.invert(C)),[g,m,y]=CM(f,"polar"),b=f.clone(),{color:x}=p,O=xf({startAngle:g,endAngle:m,innerRadius:y,outerRadius:n});O.push(["cartesian"]),b.update({transformations:O});const w=v.map(C=>b.map(C)),[S,k]=Qf(w),[E,_]=f.getCenter(),A=Object.assign(Object.assign({x1:S,y1:k,x2:E,y2:_,stroke:x},l),i),M=Object.assign(Object.assign({cx:E,cy:_,stroke:x},u),i),T=ht(new Re);return vr(s)||(typeof s=="function"?T.append(()=>s(w,p,b,d)):T.append("line").call(ct,A).node()),vr(c)||(typeof c=="function"?T.append(()=>c(w,p,b,d)):T.append("circle").call(ct,M).node()),T.node()}},Vv={coordinate:{type:"radial",innerRadius:.9,outerRadius:1,startAngle:-11/10*Math.PI,endAngle:1/10*Math.PI},axis:{x:!1},legend:!1,tooltip:!1,encode:{x:"x",y:"y",color:"color"},scale:{color:{range:["#30BF78","#D0D0D0"]}}},BF={style:{shape:DF,lineWidth:4,pointerLineCap:"round",pinR:10,pinFill:"#fff",radius:.6}},FF={type:"text",style:{x:"50%",y:"60%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},tooltip:!1};function $F(t){if(re(t)){const r=Math.max(0,Math.min(t,1));return{percent:r,target:r,total:1}}return t}function zF(t,r){const{name:e="score",target:n,total:i,percent:a,thresholds:o=[]}=$F(t),s=a||n,l=a?1:i,c=Object.assign({y:{domain:[0,l]}},r);return o.length?{targetData:[{x:e,y:s,color:"target"}],totalData:o.map((u,f)=>({x:e,y:f>=1?u-o[f-1]:u,color:f})),target:s,total:l,scale:c}:{targetData:[{x:e,y:s,color:"target"}],totalData:[{x:e,y:s,color:"target"},{x:e,y:l-s,color:"total"}],target:s,total:l,scale:c}}function GF(t,{target:r,total:e}){const{content:n}=t;return n?n(r,e):r.toString()}const qx=t=>{const{data:r={},scale:e={},style:n={},animate:i={},transform:a=[]}=t,o=Fa(t,["data","scale","style","animate","transform"]),{targetData:s,totalData:l,target:c,total:u,scale:f}=zF(r,e),d=et(n,"text"),{tooltip:h}=d,p=Fa(d,["tooltip"]),v=j2(n,["pointer","pin"]),g=et(n,"arc"),m=g.shape;return[X({},Vv,Object.assign({type:"interval",transform:[{type:"stackY"}],data:l,scale:f,style:m==="round"?Object.assign(Object.assign({},g),{shape:MB}):g,animate:typeof i=="object"?et(i,"arc"):i},o)),X({},Vv,BF,Object.assign({type:"point",data:s,scale:f,style:v,animate:typeof i=="object"?et(i,"indicator"):i},o)),X({},FF,{style:Object.assign({text:GF(p,{target:c,total:u})},p),tooltip:h,animate:typeof i=="object"?et(i,"text"):i})]};qx.props={};const Xv={density:lx},Kx=()=>(t,r,e,n)=>{const{x:i,series:a}=e,o=Object.entries(e).filter(([f])=>f.startsWith("y")).map(([,f])=>f),s=Object.entries(e).filter(([f])=>f.startsWith("size")).map(([,f])=>f);if(i===void 0||o===void 0||s===void 0)throw new Error("Missing encode for x or y or size channel.");const l=r.x,c=r.series,u=Array.from(t,f=>{const d=l.getBandWidth(l.invert(+i[f])),h=c?c.getBandWidth(c.invert(+(a==null?void 0:a[f]))):1,p=d*h,v=(+(a==null?void 0:a[f])||0)*d,g=+i[f]+v+p/2;return[...o.map((y,b)=>[g+ +s[b][f]/t.length,+o[b][f]]),...o.map((y,b)=>[g-+s[b][f]/t.length,+o[b][f]]).reverse()].map(y=>n.map(y))});return[t,u]};Kx.props={defaultShape:"density",defaultLabelShape:"label",composite:!1,shape:Xv,channels:[...Je({shapes:Object.keys(Xv)}),{name:"x",scale:"band",required:!0},{name:"y",required:!0},{name:"size",required:!0},{name:"series",scale:"band"},{name:"size",required:!0,scale:"identity"}],preInference:[...Se(),{type:yo},{type:wi}],postInference:[...Ae(),...va()],interaction:{shareTooltip:!0}};const Uv={heatmap:ux},Zx=t=>(r,e,n,i)=>{const{x:a,y:o,size:s,color:l}=n,c=Array.from(r,u=>{const f=s?+s[u]:40;return[...i.map([+a[u],+o[u]]),l[u],f]});return[[0],[c]]};Zx.props={defaultShape:"heatmap",defaultLabelShape:"label",composite:!1,shape:Uv,channels:[...Je({shapes:Object.keys(Uv)}),{name:"x",required:!0},{name:"y",required:!0},{name:"color",scale:"identity",required:!0},{name:"size"}],preInference:[...Se(),{type:wi},{type:Cl}],postInference:[...Ae(),...$r()]};var WF=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const YF={axis:{x:!1,y:!1},legend:!1,tooltip:!1,encode:{x:"type",y:"percent"},scale:{y:{domain:[0,1]}},style:{shape:dx},animate:{enter:{type:"fadeIn"}}},HF={type:"text",style:{x:"50%",y:"50%",textAlign:"center",textBaseline:"middle",fontSize:20,fontWeight:800,fill:"#888"},animate:{enter:{type:"fadeIn"}}},Qx=t=>{const{data:r={},style:e={},animate:n}=t,i=WF(t,["data","style","animate"]),a=Math.max(0,re(r)?r:r==null?void 0:r.percent),o=[{percent:a,type:"liquid"}],s=Object.assign(Object.assign({},et(e,"text")),et(e,"content")),l=et(e,"outline"),c=et(e,"wave"),u=et(e,"background");return[X({},YF,Object.assign({type:"interval",data:o,style:{liquidOptions:{percent:a,liquidShape:e==null?void 0:e.shape},styleOptions:Object.assign(Object.assign({},e),{outline:l,wave:c,background:u})},animate:n},i)),X({},HF,{style:Object.assign({text:`${el(a*100)} %`},s),animate:n})]};Qx.props={};const Jx=()=>["#5B8FF9","#5AD8A6","#5D7092","#F6BD16","#6F5EF9","#6DC8EC","#945FB9","#FF9845","#1E9493","#FF99C3"];Jx.props={};const tO=()=>["#5B8FF9","#CDDDFD","#5AD8A6","#CDF3E4","#5D7092","#CED4DE","#F6BD16","#FCEBB9","#6F5EF9","#D3CEFD","#6DC8EC","#D3EEF9","#945FB9","#DECFEA","#FF9845","#FFE0C7","#1E9493","#BBDEDE","#FF99C3","#FFE0ED"];tO.props={};const eO=t=>new Zi(t);eO.props={};const nO=t=>new Zt(t);nO.props={};const rO=t=>new Jm(t);rO.props={};const iO=t=>new ry(t);iO.props={};const aO=t=>new oy(t);aO.props={};const oO=t=>new _2(t);oO.props={};const sO=t=>new O2(t);sO.props={};const lO=t=>new ly(t);lO.props={};const cO=t=>new Tl(t);cO.props={};const uO=t=>new vy(t);uO.props={};const fO=t=>new hy(t);fO.props={};const dO=t=>new b2(t);dO.props={};const hO=t=>new bu(t);hO.props={};const pO=t=>new Tf(t);pO.props={};function Ld({colorDefault:t,colorBlack:r,colorWhite:e,colorStroke:n,colorBackground:i,padding1:a,padding2:o,padding3:s,alpha90:l,alpha65:c,alpha45:u,alpha25:f,alpha10:d,category10:h,category20:p,sizeDefault:v=1,padding:g="auto",margin:m=16}){return{padding:g,margin:m,size:v,color:t,category10:h,category20:p,enter:{duration:300,fill:"both",delay:0},update:{duration:300,fill:"both",delay:0},exit:{duration:300,fill:"both",delay:0},view:{viewFill:i,plotFill:"transparent",mainFill:"transparent",contentFill:"transparent"},line:{line:{fill:"",strokeOpacity:1,lineWidth:1,lineCap:"round"}},point:{point:{r:3,fillOpacity:.95,lineWidth:0},hollow:{r:3,strokeOpacity:.95,lineWidth:1},plus:{r:3,strokeOpacity:.95,lineWidth:3},diamond:{r:3,strokeOpacity:.95,lineWidth:1}},interval:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},area:{area:{fillOpacity:.85,lineWidth:0}},polygon:{polygon:{fillOpacity:.95}},cell:{cell:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},rect:{rect:{fillOpacity:.95},hollow:{fill:"",strokeOpacity:1,lineWidth:2}},link:{link:{fill:"",strokeOpacity:1}},vector:{vector:{fillOpacity:1}},box:{box:{fillOpacity:.95,stroke:r,lineWidth:1}},text:{text:{fill:"#1D2129",fontSize:12,lineWidth:0,connectorStroke:n,connectorStrokeOpacity:.45,connectorLineWidth:1,backgroundFill:n,backgroundFillOpacity:.15,backgroundPadding:[2,4],startMarkerSymbol:"circle",startMarkerSize:4,endMarkerSymbol:"circle",endMarkerSize:4},badge:{fill:"#1D2129",fillOpacity:.65,lineWidth:0,fontSize:10,textAlign:"center",textBaseline:"middle",markerFill:n,markerFillOpacity:.25,markerStrokeOpacity:0}},lineX:{line:{stroke:n,strokeOpacity:.45,lineWidth:1}},lineY:{line:{stroke:n,strokeOpacity:.45,lineWidth:1}},rangeX:{range:{fill:n,fillOpacity:.15,lineWidth:0}},rangeY:{range:{fill:n,fillOpacity:.15,lineWidth:0}},connector:{connector:{stroke:n,strokeOpacity:.45,lineWidth:1,connectLength1:12,endMarker:!0,endMarkerSize:6,endMarkerFill:n,endMarkerFillOpacity:.95}},axis:{arrow:!1,gridLineDash:[3,4],gridLineWidth:.5,gridStroke:r,gridStrokeOpacity:d,labelAlign:"horizontal",labelFill:r,labelOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:a,line:!1,lineLineWidth:.5,lineStroke:r,lineStrokeOpacity:u,tickLength:4,tickLineWidth:1,tickStroke:r,tickOpacity:u,titleFill:r,titleOpacity:l,titleFontSize:12,titleFontWeight:"normal",titleSpacing:12,titleTransformOrigin:"center",lineArrowOffset:6,lineArrowSize:6},axisTop:{gridDirection:"positive",labelDirection:"negative",tickDirection:"negative",titlePosition:"top",titleSpacing:12,labelSpacing:4,titleTextBaseline:"middle"},axisBottom:{gridDirection:"negative",labelDirection:"positive",tickDirection:"positive",titlePosition:"bottom",titleSpacing:12,labelSpacing:4,titleTextBaseline:"bottom",titleTransform:"translate(0, 8)"},axisLeft:{gridDirection:"positive",labelDirection:"negative",labelSpacing:4,tickDirection:"negative",titlePosition:"left",titleSpacing:12,titleTextBaseline:"middle",titleDirection:"vertical",titleTransform:"rotate(-90) translate(0, -8)",titleTransformOrigin:"center"},axisRight:{gridDirection:"negative",labelDirection:"positive",labelSpacing:4,tickDirection:"positive",titlePosition:"right",titleSpacing:12,titleTextBaseline:"top",titleDirection:"vertical",titleTransformOrigin:"center"},axisLinear:{girdClosed:!0,gridConnect:"arc",gridDirection:"negative",gridType:"surround",titlePosition:"top",titleSpacing:0},axisArc:{title:!1,titlePosition:"inner",line:!1,tick:!0,labelSpacing:4},axisRadar:{girdClosed:!0,gridStrokeOpacity:.3,gridType:"surround",tick:!1,titlePosition:"start"},legendCategory:{backgroundFill:"transparent",itemBackgroundFill:"transparent",itemLabelFill:r,itemLabelFillOpacity:l,itemLabelFontSize:12,itemLabelFontWeight:"normal",itemMarkerFillOpacity:1,itemMarkerSize:8,itemSpacing:[a,a],itemValueFill:r,itemValueFillOpacity:.65,itemValueFontSize:12,itemValueFontWeight:"normal",navButtonFill:r,navButtonFillOpacity:.65,navPageNumFill:r,navPageNumFillOpacity:.45,navPageNumFontSize:12,padding:8,title:!1,titleFill:r,titleFillOpacity:.65,titleFontSize:12,titleFontWeight:"normal",titleSpacing:4,tickStroke:r,tickStrokeOpacity:.25,rowPadding:a,colPadding:o,maxRows:3,maxCols:3},legendContinuous:{handleHeight:12,handleLabelFill:r,handleLabelFillOpacity:u,handleLabelFontSize:12,handleLabelFontWeight:"normal",handleMarkerFill:r,handleMarkerFillOpacity:.6,handleMarkerLineWidth:1,handleMarkerStroke:r,handleMarkerStrokeOpacity:.25,handleWidth:10,labelFill:r,labelFillOpacity:u,labelFontSize:12,labelFontWeight:"normal",labelSpacing:3,tick:!0,tickLength:12,ribbonSize:12,ribbonFill:"#aaa",handle:!0,handleLabel:!1,handleShape:"slider",handleIconSize:12/1.8,indicator:!1,titleFontSize:12,titleSpacing:4,titleFontWeight:"normal",titleFillOpacity:l,tickStroke:r,tickStrokeOpacity:u},label:{fill:r,fillOpacity:.65,fontSize:12,fontWeight:"normal",stroke:void 0,offset:12,connectorStroke:r,connectorStrokeOpacity:.45,connectorLineWidth:1,connectorLength:12,connectorLength2:8,connectorDistance:4},innerLabel:{fill:e,fontSize:12,fillOpacity:.85,fontWeight:"normal",stroke:void 0,offset:0},htmlLabel:{fontSize:12,opacity:.65,color:r,fontWeight:"normal"},slider:{trackSize:16,trackFill:n,trackFillOpacity:1,selectionFill:t,selectionFillOpacity:.15,handleIconSize:10,handleIconFill:"#f7f7f7",handleIconFillOpacity:1,handleIconStroke:r,handleIconStrokeOpacity:.25,handleIconLineWidth:1,handleIconRadius:2,handleLabelFill:r,handleLabelFillOpacity:.45,handleLabelFontSize:12,handleLabelFontWeight:"normal"},scrollbar:{padding:[0,0,0,0],trackSize:6,isRound:!0,slidable:!0,scrollable:!0,trackFill:"#e5e5e5",trackFillOpacity:0,thumbFill:"#000",thumbFillOpacity:.15,thumbHighlightedFillOpacity:.2},title:{spacing:8,titleFill:r,titleFillOpacity:l,titleFontSize:16,titleFontWeight:"bold",titleTextBaseline:"top",subtitleFill:r,subtitleFillOpacity:c,subtitleFontSize:12,subtitleFontWeight:"normal",subtitleTextBaseline:"top"},tooltip:{css:{".g2-tooltip":{"font-family":"sans-serif"}}}}}const VF={colorBlack:"#1D2129",colorWhite:"#ffffff",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},XF=Ld(VF),Rd=t=>X({},XF,t);Rd.props={};const vO=t=>X({},Rd(),{category10:"category10",category20:"category20"},t);vO.props={};const UF={colorBlack:"#fff",colorWhite:"#000",colorStroke:"#416180",colorDefault:"#1783FF",colorBackground:"transparent",category10:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F"],category20:["#1783FF","#00C9C9","#F0884D","#D580FF","#7863FF","#60C42D","#BD8F24","#FF80CA","#2491B3","#17C76F","#AABA01","#BC7CFC","#237CBC","#2DE379","#CE8032","#FF7AF4","#545FD3","#AFE410","#D8C608","#FFA1E0"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.25},qF=Ld(UF),gO=t=>X({},qF,{tooltip:{crosshairsStroke:"#fff",crosshairsLineWidth:1,crosshairsStrokeOpacity:.25,css:{".g2-tooltip":{background:"#1f1f1f",opacity:.95},".g2-tooltip-title":{color:"#A6A6A6"},".g2-tooltip-list-item-name-label":{color:"#A6A6A6"},".g2-tooltip-list-item-value":{color:"#A6A6A6"}}}},t),mO=t=>Object.assign({},gO(),{category10:"category10",category20:"category20"},t);mO.props={};const KF={colorBlack:"#000",colorWhite:"#fff",colorStroke:"#888",colorDefault:"#4e79a7",colorBackground:"transparent",category10:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],category20:["#4e79a7","#f28e2c","#e15759","#76b7b2","#59a14f","#edc949","#af7aa1","#ff9da7","#9c755f","#bab0ab"],padding1:8,padding2:12,padding3:20,alpha90:.9,alpha65:.65,alpha45:.45,alpha25:.25,alpha10:.1},ZF=Ld(KF),yO=t=>X({},ZF,{text:{text:{fontSize:10}},axis:{gridLineDash:[0,0],gridLineWidth:1,gridStroke:"#ddd",gridStrokeOpacity:1,labelOpacity:1,labelStrokeOpacity:1,labelFontSize:10,line:!0,lineLineWidth:1,lineStroke:"#888",lineStrokeOpacity:1,tickLength:5,tickStrokeOpacity:1,titleOpacity:1,titleStrokeOpacity:1,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},axisLeft:{gridFilter:(r,e)=>e!==0},axisRight:{gridFilter:(r,e)=>e!==0},legendCategory:{itemLabelFillOpacity:1,itemLabelFontSize:10,itemValueFillOpacity:1,itemValueFontSize:10,titleFillOpacity:1,titleFontSize:11,titleFontWeight:"bold"},legendContinuous:{handleLabelFontSize:10,labelFillOpacity:.45,labelFontSize:10},label:{fontSize:10},innerLabel:{fontSize:10},htmlLabel:{fontSize:10},slider:{handleLabelFontSize:10,trackFillOpacity:.05}},t);yO.props={};var QF=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function JF(t){return class extends Wl{constructor(r){super(r),this.descriptor=t}connectedCallback(){var r,e;(e=(r=this.descriptor).render)===null||e===void 0||e.call(r,this.attributes,this)}update(r={}){var e,n;this.attr(X({},this.attributes,r)),(n=(e=this.descriptor).render)===null||n===void 0||n.call(e,this.attributes,this)}}}function qv(t,r,e){return t.querySelector(r)?ht(t).select(r):ht(t).append(e)}function rc(t){return Array.isArray(t)?t.join(", "):`${t||""}`}function bO(t,r){const e={flexDirection:"row",justifyContent:"flex-start",alignItems:"center"};let{flexDirection:n,justifyContent:i,alignItems:a}=e;const o={top:["row","flex-start","center"],bottom:["row","flex-start","center"],left:["column","flex-start","center"],right:["column","flex-start","center"],center:["column","center","center"]};return t in o&&([n,i,a]=o[t]),Object.assign({display:"flex",flexDirection:n,justifyContent:i,alignItems:a},r)}class xO extends ED{get child(){var r;return(r=this.children)===null||r===void 0?void 0:r[0]}update(r){var e;this.attr(r);const{subOptions:n}=r;(e=this.child)===null||e===void 0||e.update(n)}}class t$ extends xO{update(r){var e;const{subOptions:n}=r;this.attr(r),(e=this.child)===null||e===void 0||e.update(n)}}function Qn(t,r){var e;return(e=t.filter(n=>n.getOptions().name===r))===null||e===void 0?void 0:e[0]}function e$(t){return t==="horizontal"||t===0}function n$(t){return t==="vertical"||t===-Math.PI/2}function OO(t,r,e){const{bbox:n}=t,{position:i="top",size:a,length:o}=r,s=["top","bottom","center"].includes(i),[l,c]=s?[n.height,n.width]:[n.width,n.height],{defaultSize:u,defaultLength:f}=e.props,d=a||u||l,h=o||f||c,p=s?"horizontal":"vertical",[v,g]=s?[h,d]:[d,h];return{orientation:p,width:v,height:g,size:d,length:h}}function r$(t){return t.find(r=>r.getOptions().domain.length>0).getOptions().domain}function ic(t){const r=["arrow","crosshairs","grid","handle","handleLabel","indicator","label","line","tick","tip","title","trunc"],{style:e}=t,n=QF(t,["style"]),i={};return Object.entries(n).forEach(([a,o])=>{r.includes(a)?i[`show${Nr(a)}`]=o:i[a]=o}),Object.assign(Object.assign({},i),e)}var wO=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function SO(t,r){const{eulerAngles:e,origin:n}=r;n&&t.setOrigin(n),e&&t.rotate(e[0],e[1],e[2])}function kO(t){const{innerWidth:r,innerHeight:e,depth:n}=t.getOptions();return[r,e,n]}function i$(t,r){const{width:e,height:n}=r.getOptions();return i=>{if(!s0(r))return i;const a=t==="bottom"?[i,1]:[0,i],o=r.map(a);if(t==="bottom"){const s=o[0];return new Zt({domain:[0,e],range:[0,1]}).map(s)}else if(t==="left"){const s=o[1];return new Zt({domain:[0,n],range:[0,1]}).map(s)}return i}}function a$(t,r,e){if(t.getTicks)return t.getTicks();if(!e)return r;const[n,i]=ua(r,o=>+o),{tickCount:a}=t.getOptions();return e(n,i,a)}function o$(t,r){if($t(r))return h=>h;const e=r.getOptions(),{innerWidth:n,innerHeight:i,insetTop:a,insetBottom:o,insetLeft:s,insetRight:l}=e,[c,u,f]=t==="left"||t==="right"?[a,o,i]:[s,l,n],d=new Zt({domain:[0,1],range:[c/f,1-u/f]});return h=>d.map(h)}function EO(t,r,e,n,i,a,o,s){var l;(e!==void 0||a!==void 0)&&t.update(Object.assign(Object.assign({},e&&{tickCount:e}),a&&{tickMethod:a}));const c=a$(t,r,a),u=i?c.filter(i):c,f=m=>m instanceof Date?String(m):typeof m=="object"&&m?m:String(m),d=n||((l=t.getFormatter)===null||l===void 0?void 0:l.call(t))||f,h=o$(o,s),p=i$(o,s),v=m=>["top","bottom","center","outer"].includes(m),g=m=>["left","right"].includes(m);return $t(s)||Qt(s)?u.map((m,y,b)=>{var x,O;const w=((x=t.getBandWidth)===null||x===void 0?void 0:x.call(t,m))/2||0,S=h(t.map(m)+w);return{value:Dl(s)&&o==="center"||Qt(s)&&((O=t.getTicks)===null||O===void 0?void 0:O.call(t))&&v(o)||Qt(s)&&g(o)?1-S:S,label:f(d(el(m),y,b)),id:String(y)}}):u.map((m,y,b)=>{var x;const O=((x=t.getBandWidth)===null||x===void 0?void 0:x.call(t,m))/2||0,w=p(h(t.map(m)+O));return{value:g(o)?1-w:w,label:f(d(el(m),y,b)),id:String(y)}})}function s$(t,r,e="xy"){const[n,i,a]=kO(r);return e==="xy"?t.includes("bottom")||t.includes("top")?i:n:e==="xz"?t.includes("bottom")||t.includes("top")?a:n:t.includes("bottom")||t.includes("top")?i:a}function l$(t=[],r){if(t.length>0)return t;const{labelAutoRotate:e,labelAutoHide:n,labelAutoEllipsis:i,labelAutoWrap:a}=r,o=[],s=(l,c)=>{c&&o.push(Object.assign(Object.assign({},l),c))};return s({type:"rotate",optionalAngles:[0,15,30,45,60,90]},e),s({type:"ellipsis",minLength:20},i),s({type:"hide"},n),s({type:"wrap",wordWrapWidth:100,maxLines:3,recoveryWhenFail:!0},a),o}function c$(t,r,e,n,i){const{x:a,y:o,width:s,height:l}=r,c=[a+s/2,o+l/2],u=Math.min(s,l)/2,[f,d]=Ff(i),[h,p]=kO(i),v=Math.min(h,p)/2,g={center:c,radius:u,startAngle:f,endAngle:d,gridLength:(n-e)*v};if(t==="inner"){const{insetLeft:m,insetTop:y}=i.getOptions();return Object.assign(Object.assign({},g),{center:[c[0]-m,c[1]-y],labelAlign:"perpendicular",labelDirection:"positive",tickDirection:"positive",gridDirection:"negative"})}return Object.assign(Object.assign({},g),{labelAlign:"parallel",labelDirection:"negative",tickDirection:"negative",gridDirection:"positive"})}function u$(t,r,e){return MM(r)||Bl(r)?!1:t===void 0?!!e.getTicks:t}function f$(t){const{depth:r}=t.getOptions();return r?{tickIsBillboard:!0,lineIsBillboard:!0,labelIsBillboard:!0,titleIsBillboard:!0,gridIsBillboard:!0}:{}}function d$(t,r,e,n,i){const{x:a,y:o,width:s,height:l}=e;if(t==="bottom")return{startPos:[a,o],endPos:[a+s,o]};if(t==="left")return{startPos:[a+s,o+l],endPos:[a+s,o]};if(t==="right")return{startPos:[a,o+l],endPos:[a,o]};if(t==="top")return{startPos:[a,o+l],endPos:[a+s,o+l]};if(t==="center"){if(r==="vertical")return{startPos:[a,o],endPos:[a,o+l]};if(r==="horizontal")return{startPos:[a,o],endPos:[a+s,o]};if(typeof r=="number"){const[c,u]=n.getCenter(),[f,d]=Fl(n),[h,p]=Ff(n),v=Math.min(s,l)/2,{insetLeft:g,insetTop:m}=n.getOptions(),y=f*v,b=d*v,[x,O]=[c+a-g,u+o-m],[w,S]=[Math.cos(r),Math.sin(r)],k=[x+b*w,O+b*S],E=[x+y*w,O+y*S],_=()=>{const{domain:M}=i.getOptions();return M.length},A=$t(n)&&i?_():3;return{startPos:k,endPos:E,gridClosed:Math.abs(p-h-360)<1e-6,gridCenter:[x,O],gridControlAngles:new Array(A).fill(0).map((M,T,C)=>(p-h)/A*T)}}}return{}}const h$=t=>{const{order:r,size:e,position:n,orientation:i,labelFormatter:a,tickFilter:o,tickCount:s,tickMethod:l,important:c={},style:u={},indexBBox:f,title:d,grid:h=!1}=t,p=wO(t,["order","size","position","orientation","labelFormatter","tickFilter","tickCount","tickMethod","important","style","indexBBox","title","grid"]);return({scales:[v],value:g,coordinate:m,theme:y})=>{const{bbox:b}=g,{domain:x}=v.getOptions(),O=EO(v,x,s,a,o,l,n,m),w=f?O.map((T,C)=>{const I=f.get(C);return!I||I[0]!==T.label?T:Object.assign(Object.assign({},T),{bbox:I[1]})}):O,[S,k]=Fl(m),E=c$(n,b,S,k,m),{axis:_,axisArc:A={}}=y,M=ic(X({},_,A,E,Object.assign(Object.assign({type:"arc",data:w,titleText:rc(d),grid:h},p),c)));return new bd({style:Sf(M,["transform"])})}};function p$(t,r,e,n,i,a){const o=e.axis,s=["top","right","bottom","left"].includes(i)?e[`axis${Lf(i)}`]:e.axisLinear,l=t.getOptions().name,c=e[`axis${Nr(l)}`]||{};return Object.assign({},o,s,c)}function v$(t,r,e,n,i,a){const o=p$(t,r,e,n,i);return i==="center"?Object.assign(Object.assign(Object.assign(Object.assign({},o),{labelDirection:n==="right"?"negative":"positive"}),n==="center"?{labelTransform:"translate(50%,0)"}:null),{tickDirection:n==="right"?"negative":"positive",labelSpacing:n==="center"?0:4,titleSpacing:n$(a)?10:0,tick:n==="center"?!1:void 0}):o}const g$=t=>{const{direction:r="left",important:e={},labelFormatter:n,order:i,orientation:a,actualPosition:o,position:s,size:l,style:c={},title:u,tickCount:f,tickFilter:d,tickMethod:h,transform:p,indexBBox:v}=t,g=wO(t,["direction","important","labelFormatter","order","orientation","actualPosition","position","size","style","title","tickCount","tickFilter","tickMethod","transform","indexBBox"]);return({scales:m,value:y,coordinate:b,theme:x})=>{const{bbox:O}=y,[w]=m,{domain:S,xScale:k}=w.getOptions(),E=v$(w,b,x,r,s,a),_=Object.assign(Object.assign(Object.assign({},E),c),g),A=s$(o||s,b,t.plane),M=d$(s,a,O,b,k),T=f$(b),C=EO(w,S,f,n,d,h,s,b),I=v?C.map((P,N)=>{const j=v.get(N);return!j||j[0]!==P.label?P:Object.assign(Object.assign({},P),{bbox:j[1]})}):C,R=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},_),{type:"linear",data:I,crossSize:l,titleText:rc(u),labelOverlap:l$(p,_),grid:u$(_.grid,b,w),gridLength:A,line:!0,indexBBox:v}),_.line?null:{lineOpacity:0}),M),T),e);return R.labelOverlap.find(P=>P.type==="hide")&&(R.crossSize=!1),new bd({className:"axis",style:ic(R)})}},_O=t=>r=>{const{labelFormatter:e,labelFilter:n=()=>!0}=r;return i=>{var a;const{scales:[o]}=i,s=((a=o.getTicks)===null||a===void 0?void 0:a.call(o))||o.getOptions().domain,l=typeof e=="string"?xi(e):e,c=(f,d,h)=>n(s[d],d,s),u=Object.assign(Object.assign({},r),{labelFormatter:l,labelFilter:c,scale:o});return t(u)(i)}},zr=_O(g$),AO=_O(h$);zr.props={defaultPosition:"center",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};AO.props={defaultPosition:"outer",defaultOrientation:"vertical",defaultSize:45,defaultOrder:0,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const TO=t=>(...r)=>{const e=zr(Object.assign({},{crossPadding:50},t))(...r);return SO(e,t),e};TO.props=Object.assign(Object.assign({},zr.props),{defaultPosition:"bottom"});const MO=t=>(...r)=>{const e=zr(Object.assign({},{crossPadding:10},t))(...r);return SO(e,t),e};MO.props=Object.assign(Object.assign({},zr.props),{defaultPosition:"left"});var m$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function y$(t){const r=t%(Math.PI*2);return r===Math.PI/2?{titleTransform:"translate(0, 50%)"}:r>-Math.PI/2&&r<Math.PI/2?{titleTransform:"translate(50%, 0)"}:r>Math.PI/2&&r<Math.PI*3/2?{titleTransform:"translate(-50%, 0)"}:{}}function b$(t,r,e,n){const{radar:i}=t,[a]=n,o=a.getOptions().name,[s,l]=Ff(e),{axisRadar:c={}}=r;return Object.assign(Object.assign({},c),{grid:o==="position",gridConnect:"line",gridControlAngles:new Array(i.count).fill(0).map((u,f)=>(l-s)/i.count*f)})}const PO=t=>{const{important:r={}}=t,e=m$(t,["important"]);return n=>{const{theme:i,coordinate:a,scales:o}=n;return zr(Object.assign(Object.assign(Object.assign({},e),y$(t.orientation)),{important:Object.assign(Object.assign({},b$(t,i,a,o)),r)}))(n)}};PO.props=Object.assign(Object.assign({},zr.props),{defaultPosition:"center"});var x$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function CO(t,r){const e=Qn(t,"shape"),n=Qn(t,"color"),i=e?e.clone():null,a=[];for(const[s,l]of r){const c=s.type,f=((n==null?void 0:n.getOptions().domain.length)>0?n==null?void 0:n.getOptions().domain:l.data).map((d,h)=>{var p;return i?i.map(d||"point"):((p=s==null?void 0:s.style)===null||p===void 0?void 0:p.shape)||l.defaultShape||"point"});typeof c=="string"&&a.push([c,f])}if(a.length===0)return["point",["point"]];if(a.length===1||!e)return a[0];const{range:o}=e.getOptions();return a.map(([s,l])=>{let c=0;for(let u=0;u<a.length;u++){const f=o[u%o.length];l[u]===f&&c++}return[c/l.length,[s,l]]}).sort((s,l)=>l[0]-s[0])[0][1]}function O$(t,r){const{scales:e,library:n,markState:i}=r,[a,o]=CO(e,i),{itemMarker:s,itemMarkerSize:l}=t,c=(d,h)=>{var p,v,g;const m=((g=(v=(p=n[`mark.${a}`])===null||p===void 0?void 0:p.props)===null||v===void 0?void 0:v.shape[d])===null||g===void 0?void 0:g.props.defaultMarker)||fa(d.split(".")),y=typeof l=="function"?l(h):l;return()=>AN(m,{color:h.color})(0,0,y)},u=d=>`${o[d]}`;return Qn(e,"shape")&&!s?(d,h)=>c(u(h),d):typeof s=="function"?(d,h)=>{const p=s(d.id,h);return typeof p=="string"?c(p,d):p}:(d,h)=>c(s||u(h),d)}function w$(t){const r=Qn(t,"opacity");if(r){const{range:e}=r.getOptions();return(n,i)=>e[i]}}function S$(t,r){const e=Qn(t,"size");return e instanceof ry?e.map(NaN)*2:r}function k$(t,r){const{scales:e,markState:n}=r,[i,a]=CO(e,n),{itemMarker:o,itemMarkerLineWidth:s}=t;if(s!==void 0)return s;const l=["line","hyphen","dash","smooth","hv","hvh","vh","vhv"];if(typeof o=="string"&&l.includes(o))return 4;if(typeof o=="function")return(f,d)=>{const h=o(f.id,d);if(typeof h=="string"&&l.includes(h))return 4};if((Array.isArray(a)?a:[a]).some(f=>l.includes(f)))return 4}function E$(t,r){const{labelFormatter:e=d=>`${d}`}=t,{scales:n,theme:i}=r,a=i.legendCategory.itemMarkerSize,o=S$(n,a),s={itemMarker:O$(Object.assign(Object.assign({},t),{itemMarkerSize:o}),r),itemMarkerSize:o,itemMarkerOpacity:w$(n),itemMarkerLineWidth:k$(t,r)},l=typeof e=="string"?xi(e):e,c=Qn(n,"color"),u=r$(n),f=c?d=>c.map(d):()=>r.theme.color;return Object.assign(Object.assign({},s),{data:u.map(d=>({id:d,label:l(d),color:f(d)}))})}function _$(t,r,e){const{position:n}=r;if(n==="center"){const{bbox:o}=t,{width:s,height:l}=o;return{width:s,height:l}}const{width:i,height:a}=OO(t,r,e);return{width:i,height:a}}function A$(t){return Object.assign(Object.assign({},t),{data:(t==null?void 0:t.data.filter(r=>r.id!==""))||[]})}const Nd=t=>{const{labelFormatter:r,layout:e,order:n,orientation:i,position:a,size:o,title:s,cols:l,itemMarker:c}=t,u=x$(t,["labelFormatter","layout","order","orientation","position","size","title","cols","itemMarker"]),{gridRow:f}=u;return d=>{const{value:h,theme:p}=d,{bbox:v}=h,{width:g,height:m}=_$(h,t,Nd),y=bO(a,e),b=Object.assign(Object.assign(Object.assign(Object.assign({orientation:["right","left","center"].includes(a)?"vertical":"horizontal",width:g,height:m,layout:l!==void 0?"grid":"flex"},l!==void 0&&{gridCol:l}),f!==void 0&&{gridRow:f}),{titleText:rc(s)}),E$(t,d)),{legendCategory:x={}}=p,O=ic(Object.assign({},x,A$(b),u)),w=new t$({style:Object.assign(Object.assign({x:v.x,y:v.y,width:v.width,height:v.height},y),{subOptions:O})});return w.appendChild(new uD({className:"legend-category",style:O})),w}};Nd.props={defaultPosition:"top",defaultOrder:1,defaultSize:40,defaultCrossPadding:[12,12],defaultPadding:[12,12]};var T$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function M$(t,r,e){return t.size=r,e$(e)?t.height=r:t.width=r,t}function P$(t,r,e){const{size:n}=r,i=OO(t,r,e);return M$(i,n,i.orientation)}function C$(t){return r=>({value:r/t,label:String(r)})}function L$(t,r,e,n,i){const a=r.thresholds,o=C$(n);return Object.assign(Object.assign({},t),{color:i,data:[e,...a,n].map(o)})}function R$(t,r,e){const i=[-1/0,...r.thresholds,1/0].map((a,o)=>({value:o,label:a}));return Object.assign(Object.assign({},t),{data:i,color:e,labelFilter:(a,o)=>o>0&&o<i.length-1})}function Wu(t){const{domain:r}=t.getOptions(),[e,n]=[r[0],xy(r)];return[e,n]}function N$(t,r){const e=t.getOptions(),n=t.clone();return n.update(Object.assign(Object.assign({},e),{range:[Mr(r).toString()]})),n}function I$(t,r,e,n,i,a){const{length:o}=t,s=e||n,l=i.color?a.legendContinuous.ribbonFill||"black":a.color,c=r||N$(s,l),[u,f]=Wu(c),[d,h]=Wu([r,e,n].filter(p=>p!==void 0).find(p=>!(p instanceof Tf)));return Object.assign(Object.assign({},t),{domain:[d,h],data:c.getTicks().map(p=>({value:p})),color:new Array(Math.floor(o)).fill(0).map((p,v)=>{const g=(f-u)/(o-1)*v+u,m=c.map(g)||l,y=n?n.map(g):1;return m.replace(/rgb[a]*\(([\d]{1,3}) *, *([\d]{1,3}) *, *([\d]{1,3})[\S\s]*\)/,(b,x,O,w)=>`rgba(${x}, ${O}, ${w}, ${y})`)})})}function j$(t,r,e,n,i,a){const o=Qn(t,"color"),s=P$(e,n,i);if(o instanceof Tl){const{range:u}=o.getOptions(),[f,d]=Wu(o);return o instanceof hy||o instanceof vy?L$(s,o,f,d,u):R$(s,o,u)}const l=Qn(t,"size"),c=Qn(t,"opacity");return I$(s,o,l,c,r,a)}const Gr=t=>{const{labelFormatter:r,layout:e,order:n,orientation:i,position:a,size:o,title:s,style:l,crossPadding:c,padding:u}=t,f=T$(t,["labelFormatter","layout","order","orientation","position","size","title","style","crossPadding","padding"]);return({scales:d,value:h,theme:p,scale:v})=>{const{bbox:g}=h,{x:m,y,width:b,height:x}=g,O=bO(a,e),{legendContinuous:w={}}=p,S=ic(Object.assign({},w,Object.assign(Object.assign({titleText:rc(s),labelAlign:"value",labelFormatter:typeof r=="string"?E=>xi(r)(E.label):r},j$(d,v,h,t,Gr,p)),l),f)),k=new xO({style:Object.assign(Object.assign({x:m,y,width:b,height:x},O),{subOptions:S})});return k.appendChild(new wD({className:"legend-continuous",style:S})),k}};Gr.props={defaultPosition:"top",defaultOrientation:"vertical",defaultOrder:1,defaultSize:60,defaultLength:200,defaultLegendSize:60,defaultPadding:[20,10],defaultCrossPadding:[12,12]};const LO=t=>(...r)=>Gr(Object.assign({},{block:!0},t))(...r);LO.props=Object.assign(Object.assign({},Gr.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const Id=t=>r=>{const{scales:e}=r,n=Qn(e,"size");return Gr(Object.assign({},{type:"size",data:n.getTicks().map((i,a)=>({value:i,label:String(i)}))},t))(r)};Id.props=Object.assign(Object.assign({},Gr.props),{defaultPosition:"top",defaultOrientation:"horizontal"});const RO=t=>Id(Object.assign({},{block:!0},t));RO.props=Object.assign(Object.assign({},Gr.props),{defaultPosition:"top",defaultOrientation:"horizontal"});var D$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Kv(t,r,e,n){switch(n){case"center":return{x:t+e/2,y:r,textAlign:"middle"};case"right":return{x:t+e,y:r,textAlign:"right"};default:return{x:t,y:r,textAlign:"left"}}}const B$=JF({render(t,r){const{width:e,title:n,subtitle:i,spacing:a=2,align:o="left",x:s,y:l}=t,c=D$(t,["width","title","subtitle","spacing","align","x","y"]);r.style.transform=`translate(${s}, ${l})`;const u=et(c,"title"),f=et(c,"subtitle"),h=qv(r,".title","text").attr("className","title").call(ct,Object.assign(Object.assign(Object.assign({},Kv(0,0,e,o)),{fontSize:14,textBaseline:"top",text:n}),u)).node().getLocalBounds();qv(r,".sub-title","text").attr("className","sub-title").call(p=>{if(!i)return p.node().remove();p.node().attr(Object.assign(Object.assign(Object.assign({},Kv(0,h.max[1]+a,e,o)),{fontSize:12,textBaseline:"top",text:i}),f))})}}),NO=t=>({value:r,theme:e})=>{const{x:n,y:i,width:a,height:o}=r.bbox;return new B$({style:X({},e.title,Object.assign({x:n,y:i,width:a,height:o},t))})};NO.props={defaultPosition:"top",defaultOrder:2,defaultSize:36,defaultCrossPadding:[20,20],defaultPadding:[12,12]};function F$(t,r,e){return Math.min(e,Math.max(r,t))}function $a(t){return!!t.getBandWidth}function oa(t,r,e){if(!$a(t))return t.invert(r);const{adjustedRange:n}=t,{domain:i}=t.getOptions(),a=e?-1:0,o=t.getStep(),s=e?n:n.map(u=>u+o),l=nE(s,r),c=F$(l+a,0,i.length-1);return i[c]}function Er(t,r,e){if(!r)return t.getOptions().domain;if(!$a(t)){const l=fr(r);if(!e)return l;const[c]=l,{range:u}=t.getOptions(),[f,d]=u,h=f>d?-1:1,p=t.invert(t.map(c)+h*e);return[c,p]}const{domain:n}=t.getOptions(),i=r[0],a=n.indexOf(i);if(e){const l=a+Math.round(n.length*e);return n.slice(a,l)}const o=r[r.length-1],s=n.indexOf(o);return n.slice(a,s+1)}function Ms(t,r,e,n,i,a){const{x:o,y:s}=i,l=(h,p)=>{const[v,g]=a.invert(h);return[oa(o,v,p),oa(s,g,p)]},c=l([t,r],!0),u=l([e,n],!1),f=Er(o,[c[0],u[0]]),d=Er(s,[c[1],u[1]]);return[f,d]}function ul(t,r){const[e,n]=t,i=a=>a.getStep?a.getStep():0;return[r.map(e),r.map(n)+i(r)]}function $$(t,r,e){const{x:n,y:i}=r,[a,o]=t,s=ul(a,n),l=ul(o,i),c=[s[0],l[0]],u=[s[1],l[1]],[f,d]=e.map(c),[h,p]=e.map(u);return[f,d,h,p]}var z$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function G$(t,r,e){const{x:n,y:i,width:a,height:o}=t;if(r==="left")return[n+a-e,i];if(r==="right")return[n,i];if(r==="bottom")return[n,i];if(r==="top")return[n,i+o-e]}const Mo=t=>{const{orientation:r,labelFormatter:e,size:n,style:i={},position:a}=t,o=z$(t,["orientation","labelFormatter","size","style","position"]);return s=>{var l;const{scales:[c],value:u,theme:f,coordinate:d}=s,{bbox:h}=u,{width:p,height:v}=h,{slider:g={}}=f,m=((l=c.getFormatter)===null||l===void 0?void 0:l.call(c))||(k=>k+""),y=typeof e=="string"?xi(e):e,b=r==="horizontal",x=Qt(d)&&b,{trackSize:O=g.trackSize}=i,[w,S]=G$(h,a,O);return new m1({className:"slider",style:Object.assign({},g,Object.assign(Object.assign({x:w,y:S,trackLength:b?p:v,orientation:r,formatter:k=>{const E=y||m,_=x?1-k:k,A=oa(c,_,!0);return E(A)},sparklineData:Y$(t,s)},i),o))})}};function W$(t,r){const[e]=Array.from(t.entries()).filter(([i])=>i.type==="line"||i.type==="area").filter(([i])=>i.slider).map(([i])=>{const{encode:a,slider:o}=i;if(o!=null&&o.x){const s=l=>{const c=a[l];return[l,c?c.value:void 0]};return Object.fromEntries(r.map(s))}});if(!(e!=null&&e.series))return e==null?void 0:e.y;const n=e.series.reduce((i,a,o)=>(i[a]=i[a]||[],i[a].push(e.y[o]),i),{});return Object.values(n)}function Y$(t,r){const{markState:e}=r;return Ge(t.sparklineData)?t.sparklineData:W$(e,["y","series"])}Mo.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const IO=t=>Mo(Object.assign(Object.assign({},t),{orientation:"horizontal"}));IO.props=Object.assign(Object.assign({},Mo.props),{defaultPosition:"bottom"});const jO=t=>Mo(Object.assign(Object.assign({},t),{orientation:"vertical"}));jO.props=Object.assign(Object.assign({},Mo.props),{defaultPosition:"left"});var H$=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Po=t=>{const{orientation:r,labelFormatter:e,style:n}=t,i=H$(t,["orientation","labelFormatter","style"]);return({scales:[a],value:o,theme:s})=>{const{bbox:l}=o,{x:c,y:u,width:f,height:d}=l,{scrollbar:h={}}=s,{ratio:p,range:v}=a.getOptions(),g=r==="horizontal"?f:d,m=g/p,[y,b]=v,x=b>y?0:1;return new zI({className:"g2-scrollbar",style:Object.assign({},h,Object.assign(Object.assign(Object.assign(Object.assign({},n),{x:c,y:u,trackLength:g,value:x}),i),{orientation:r,contentLength:m,viewportLength:g}))})}};Po.props={defaultPosition:"bottom",defaultSize:24,defaultOrder:1,defaultCrossPadding:[12,12],defaultPadding:[12,12]};const DO=t=>Po(Object.assign(Object.assign({},t),{orientation:"horizontal"}));DO.props=Object.assign(Object.assign({},Po.props),{defaultPosition:"bottom"});const BO=t=>Po(Object.assign(Object.assign({},t),{orientation:"vertical"}));BO.props=Object.assign(Object.assign({},Po.props),{defaultPosition:"left"});const FO=t=>()=>new Re;FO.props={};const jd=(t,r)=>{const{coordinate:n}=r;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,h]=Qt(n)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.01},{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f}];return s.animate(p,Object.assign(Object.assign({},o),t))}},V$=(t,r)=>{const{coordinate:n}=r;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,h]=Qt(n)?["left bottom",`scale(1, ${1e-4})`]:["left top",`scale(${1e-4}, 1)`],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),t))}},$O=(t,r)=>{const{coordinate:n}=r;return W0.registerProperty({name:"scaleInYRadius",inherits:!1,initialValue:"",interpolable:!0,syntax:nt.NUMBER}),(i,a,o)=>{const[s]=i,l=u=>{const{__data__:f,style:d}=u,{fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=d,{points:g,y:m,y1:y}=f,b=Ei(n,g,[m,y]),{innerRadius:x,outerRadius:O}=b,w=[{scaleInYRadius:x+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{scaleInYRadius:x+1e-4,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.01},{scaleInYRadius:O,fillOpacity:h,strokeOpacity:p,opacity:v}];return u.animate(w,Object.assign(Object.assign({},o),t))},c=u=>{const{style:f}=u,{transform:d="",fillOpacity:h=1,strokeOpacity:p=1,opacity:v=1}=f,[g,m]=Qt(n)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],y=[{transform:`${d} ${m}`.trimStart(),transformOrigin:g,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${d} ${m}`.trimStart(),transformOrigin:g,fillOpacity:h,strokeOpacity:p,opacity:v,offset:.01},{transform:`${d} scale(1, 1)`.trimStart(),transformOrigin:g,fillOpacity:h,strokeOpacity:p,opacity:v}];return u.animate(y,Object.assign(Object.assign({},o),t))};return $t(n)?l(s):c(s)}},X$=(t,r)=>{const{coordinate:n}=r;return(i,a,o)=>{const[s]=i,{transform:l="",fillOpacity:c=1,strokeOpacity:u=1,opacity:f=1}=s.style,[d,h]=Qt(n)?["left top",`scale(${1e-4}, 1)`]:["left bottom",`scale(1, ${1e-4})`],p=[{transform:`${l} scale(1, 1)`.trimStart(),transformOrigin:d},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:c,strokeOpacity:u,opacity:f,offset:.99},{transform:`${l} ${h}`.trimStart(),transformOrigin:d,fillOpacity:0,strokeOpacity:0,opacity:0}];return s.animate(p,Object.assign(Object.assign({},o),t))}},zO=t=>(r,e,n)=>{const[i]=r,{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=i.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:a,strokeOpacity:o,opacity:s}];return i.animate(l,Object.assign(Object.assign({},n),t))};zO.props={};const GO=t=>(r,e,n)=>{const[i]=r,{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=i.style,l=[{fillOpacity:a,strokeOpacity:o,opacity:s},{fillOpacity:0,strokeOpacity:0,opacity:0}];return i.animate(l,Object.assign(Object.assign({},n),t))};GO.props={};const U$={opacity:1,strokeOpacity:1,fillOpacity:1,lineWidth:0,x:0,y:0,cx:0,cy:0,r:0,rx:0,ry:0,width:0,height:0},q$={[H.CIRCLE]:["cx","cy","r"],[H.ELLIPSE]:["cx","cy","rx","ry"],[H.RECT]:["x","y","width","height"],[H.IMAGE]:["x","y","width","height"],[H.LINE]:["x1","y1","x2","y2"],[H.POLYLINE]:["points"],[H.POLYGON]:["points"]};function sa(t,r,e=!1){const n={};for(const i of r){const a=t.style[i];a?n[i]=a:e&&(n[i]=U$[i])}return n}const io=["fill","stroke","fillOpacity","strokeOpacity","opacity","lineWidth"];function Yu(t){const{min:r,max:e}=t.getLocalBounds(),[n,i]=r,[a,o]=e,s=o-i,l=a-n;return[n,i,l,s]}function K$(t){const[r,e,n,i]=t;return`
    M ${r} ${e}
    L ${r+n} ${e}
    L ${r+n} ${e+i}
    L ${r} ${e+i}
    Z
  `}function Z$(t,r){const[e,n,i,a]=Yu(t),o=a/i,s=Math.ceil(Math.sqrt(r/o)),l=Math.ceil(r/s),c=[],u=a/l;let f=0,d=r;for(;d>0;){const h=Math.min(d,s),p=i/h;for(let v=0;v<h;v++){const g=e+v*p,m=n+f*u;c.push(K$([g,m,p,u]))}d-=h,f+=1}return c}function Q$(t="pack"){return typeof t=="function"?t:Z$}function J$(t,r,e){let{transform:n}=t.style;const{transform:i}=r.style;WO(r,t);let a=io;if(t.nodeName===H.GROUP){const[l,c,u,f]=Yu(t),[d,h,p,v]=Yu(r),g=l-d,m=c-h,y=u/p,b=f/v;n=`translate(${g}, ${m}) scale(${y}, ${b})`}else a=a.concat(q$[t.nodeName]||[]);const o=[Object.assign({transform:n??"none"},sa(t,a,!0)),Object.assign({transform:i??"none"},sa(r,a,!0))];return r.animate(o,e)}function WO(t,r){t.__data__=r.__data__,t.className=r.className,t.markType=r.markType,r.parentNode.replaceChild(t,r)}function tz(t,r){const{nodeName:e}=t;if(e==="path")return t;const n=new Qe({style:Object.assign(Object.assign({},sa(t,io)),{d:r})});return WO(n,t),n}function Zv(t,r){const e=t.indexOf(r),n=t.lastIndexOf(r);return e===n}function ez(t){return!Zv(t,"m")||!Zv(t,"M")}function Qv(t){const r=bC(t);if(r&&!ez(r))return r}function Jv(t){const{nodeName:r}=t;if(r==="path"){const e=Rt(t,"attributes");return e.markerEnd||e.markerStart}return!1}function Dd(t,r,e,n){const{nodeName:i}=r,{nodeName:a}=e,o=Qv(r),s=Qv(e),l=i===a&&i!=="path",c=o===void 0||s===void 0,u=Jv(r)||Jv(e);if(l||c||u)return J$(r,e,n);const f=tz(t,o),d=[Object.assign({},sa(r,io)),Object.assign({},sa(e,io))];if(o!==s){d[0].d=o,d[1].d=s;const h=f.animate(d,n);return h.onfinish=()=>{Rf(f,e),f.style.d=s,f.style.transform="none"},f.style.transform="none",h}return null}function nz(t,r,e,n){t.style.visibility="hidden";const i=n(t,r.length);return r.map((a,o)=>{const s=new Qe({style:Object.assign({d:i[o]},sa(t,io))});return Dd(a,s,a,e)})}function rz(t,r,e,n){const i=n(r,t.length),{fillOpacity:a=1,strokeOpacity:o=1,opacity:s=1}=r.style,l=[{fillOpacity:0,strokeOpacity:0,opacity:0},{fillOpacity:0,strokeOpacity:0,opacity:0,offset:.99},{fillOpacity:a,strokeOpacity:o,opacity:s}],c=r.animate(l,e);return[...t.map((f,d)=>{const h=new Qe({style:{d:i[d],fill:r.style.fill}});return Dd(f,f,h,e)}),c]}const YO=t=>(r,e,n)=>{const i=Q$(t.split),a=Object.assign(Object.assign({},n),t),{length:o}=r,{length:s}=e;if(o===1&&s===1||o>1&&s>1){const[l]=r,[c]=e;return Dd(l,l,c,a)}if(o===1&&s>1){const[l]=r;return nz(l,e,a,i)}if(o>1&&s===1){const[l]=e;return rz(r,l,a,i)}return null};YO.props={};const HO=(t,r)=>{W0.registerProperty({name:"waveInArcAngle",inherits:!1,initialValue:"",interpolable:!0,syntax:nt.NUMBER});const{coordinate:n}=r;return(i,a,o)=>{const[s]=i;if(!$t(n))return jd(t,r)(i,a,o);const{__data__:l,style:c}=s,{radius:u=0,inset:f=0,fillOpacity:d=1,strokeOpacity:h=1,opacity:p=1}=c,{points:v,y:g,y1:m}=l,y=gf().cornerRadius(u).padAngle(f*Math.PI/180),b=Ei(n,v,[g,m]),{startAngle:x,endAngle:O}=b,w=[{waveInArcAngle:x+1e-4,fillOpacity:0,strokeOpacity:0,opacity:0},{waveInArcAngle:x+1e-4,fillOpacity:d,strokeOpacity:h,opacity:p,offset:.01},{waveInArcAngle:O,fillOpacity:d,strokeOpacity:h,opacity:p}],S=s.animate(w,Object.assign(Object.assign({},o),t));return S.onframe=function(){s.style.d=y(Object.assign(Object.assign({},b),{endAngle:Number(s.style.waveInArcAngle)}))},S.onfinish=function(){s.style.d=y(Object.assign(Object.assign({},b),{endAngle:O}))},S}};HO.props={};const iz=t=>(e,n,i)=>{const[a]=e,{transform:o="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=a.style,u="center center",f=[{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.01},{transform:`${o} scale(1)`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c}];return a.animate(f,Object.assign(Object.assign({},i),t))},az=t=>(e,n,i)=>{const[a]=e,{transform:o="",fillOpacity:s=1,strokeOpacity:l=1,opacity:c=1}=a.style,u="center center",f=[{transform:`${o} scale(1)`.trimStart(),transformOrigin:u},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:s,strokeOpacity:l,opacity:c,offset:.99},{transform:`${o} scale(${1e-4})`.trimStart(),transformOrigin:u,fillOpacity:0,strokeOpacity:0,opacity:0}];return a.animate(f,Object.assign(Object.assign({},i),t))},VO=t=>(r,e,n)=>{var i,a;const[o]=r,s=((a=(i=o).getTotalLength)===null||a===void 0?void 0:a.call(i))||0,l=[{lineDash:[0,s]},{lineDash:[s,0]}];return o.animate(l,Object.assign(Object.assign({},n),t))};VO.props={};const XO=(t,r)=>(e,n,i)=>{const[a]=e,{min:[o,s],halfExtents:l}=a.getLocalBounds(),c=l[0]*2,u=l[1]*2,f=new Qe({style:{d:`M${o},${s}L${o+c},${s}L${o+c},${s+u}L${o},${s+u}Z`}});return a.appendChild(f),a.style.clipPath=f,jd(t,r)([f],n,i)};XO.props={};const UO=(t,r)=>(e,n,i)=>{const[a]=e,{min:[o,s],halfExtents:l}=a.getLocalBounds(),c=l[0]*2,u=l[1]*2,f=new Qe({style:{d:`M${o},${s}L${o+c},${s}L${o+c},${s+u}L${o},${s+u}Z`}});return a.appendChild(f),a.style.clipPath=f,$O(t,r)([f],n,i)};UO.props={};const tg="main-layer",Hu="label-layer",Gn="element",fl="view",dl="plot",eg="component",Vu="label",ng="area";/*!
 * @antv/g-plugin-canvas-path-generator
 * @description A G plugin of path generator with Canvas2D API
 * @version 2.1.21
 * @date 7/18/2025, 7:13:47 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */function oz(t,r){var e=r.cx,n=e===void 0?0:e,i=r.cy,a=i===void 0?0:i,o=r.r;t.arc(n,a,o,0,Math.PI*2,!1)}function sz(t,r){var e=r.cx,n=e===void 0?0:e,i=r.cy,a=i===void 0?0:i,o=r.rx,s=r.ry;if(t.ellipse)t.ellipse(n,a,o,s,0,0,Math.PI*2,!1);else{var l=o>s?o:s,c=o>s?1:o/s,u=o>s?s/o:1;t.save(),t.scale(c,u),t.arc(n,a,l,0,Math.PI*2)}}function lz(t,r){var e=r.x1,n=r.y1,i=r.x2,a=r.y2,o=r.markerStart,s=r.markerEnd,l=r.markerStartOffset,c=r.markerEndOffset,u=0,f=0,d=0,h=0,p=0,v,g;o&&Lt(o)&&l&&(v=i-e,g=a-n,p=Math.atan2(g,v),u=Math.cos(p)*(l||0),f=Math.sin(p)*(l||0)),s&&Lt(s)&&c&&(v=e-i,g=n-a,p=Math.atan2(g,v),d=Math.cos(p)*(c||0),h=Math.sin(p)*(c||0)),t.moveTo(e+u,n+f),t.lineTo(i+d,a+h)}function cz(t,r){var e=r.markerStart,n=r.markerEnd,i=r.markerStartOffset,a=r.markerEndOffset,o=r.d,s=o.absolutePath,l=o.segments,c=0,u=0,f=0,d=0,h=0,p,v;if(e&&Lt(e)&&i){var g=e.parentNode.getStartTangent(),m=bt(g,2),y=m[0],b=m[1];p=y[0]-b[0],v=y[1]-b[1],h=Math.atan2(v,p),c=Math.cos(h)*(i||0),u=Math.sin(h)*(i||0)}if(n&&Lt(n)&&a){var x=n.parentNode.getEndTangent(),O=bt(x,2),w=O[0],S=O[1];p=w[0]-S[0],v=w[1]-S[1],h=Math.atan2(v,p),f=Math.cos(h)*(a||0),d=Math.sin(h)*(a||0)}for(var k=0;k<s.length;k++){var E=s[k],_=E[0],A=s[k+1],M=k===0&&(c!==0||u!==0),T=(k===s.length-1||A&&(A[0]==="M"||A[0]==="Z"))&&f!==0&&d!==0,C=M?[c,u]:[0,0],I=bt(C,2),R=I[0],L=I[1],P=T?[f,d]:[0,0],N=bt(P,2),j=N[0],B=N[1];switch(_){case"M":t.moveTo(E[1]+R,E[2]+L);break;case"L":t.lineTo(E[1]+j,E[2]+B);break;case"Q":t.quadraticCurveTo(E[1],E[2],E[3]+j,E[4]+B);break;case"C":t.bezierCurveTo(E[1],E[2],E[3],E[4],E[5]+j,E[6]+B);break;case"A":{var F=l[k].arcParams,$=F.cx,W=F.cy,G=F.rx,Y=F.ry,V=F.startAngle,z=F.endAngle,U=F.xRotation,q=F.sweepFlag;if(t.ellipse)t.ellipse($,W,G,Y,U,V,z,!!(1-q));else{var rt=G>Y?G:Y,tt=G>Y?1:G/Y,at=G>Y?Y/G:1;t.translate($,W),t.rotate(U),t.scale(tt,at),t.arc(0,0,rt,V,z,!!(1-q)),t.scale(1/tt,1/at),t.rotate(-U),t.translate(-$,-W)}T&&t.lineTo(E[6]+f,E[7]+d);break}case"Z":t.closePath();break}}}function uz(t,r){var e=r.markerStart,n=r.markerEnd,i=r.markerStartOffset,a=r.markerEndOffset,o=r.points.points,s=o.length,l=o[0][0],c=o[0][1],u=o[s-1][0],f=o[s-1][1],d=0,h=0,p=0,v=0,g=0,m,y;e&&Lt(e)&&i&&(m=o[1][0]-o[0][0],y=o[1][1]-o[0][1],g=Math.atan2(y,m),d=Math.cos(g)*(i||0),h=Math.sin(g)*(i||0)),n&&Lt(n)&&a&&(m=o[s-1][0]-o[0][0],y=o[s-1][1]-o[0][1],g=Math.atan2(y,m),p=Math.cos(g)*(a||0),v=Math.sin(g)*(a||0)),t.moveTo(l+(d||p),c+(h||v));for(var b=1;b<s-1;b++){var x=o[b];t.lineTo(x[0],x[1])}t.lineTo(u,f)}function fz(t,r){var e=r.markerStart,n=r.markerEnd,i=r.markerStartOffset,a=r.markerEndOffset,o=r.points.points,s=o.length,l=o[0][0],c=o[0][1],u=o[s-1][0],f=o[s-1][1],d=0,h=0,p=0,v=0,g=0,m,y;e&&Lt(e)&&i&&(m=o[1][0]-o[0][0],y=o[1][1]-o[0][1],g=Math.atan2(y,m),d=Math.cos(g)*(i||0),h=Math.sin(g)*(i||0)),n&&Lt(n)&&a&&(m=o[s-2][0]-o[s-1][0],y=o[s-2][1]-o[s-1][1],g=Math.atan2(y,m),p=Math.cos(g)*(a||0),v=Math.sin(g)*(a||0)),t.moveTo(l+d,c+h);for(var b=1;b<s-1;b++){var x=o[b];t.lineTo(x[0],x[1])}t.lineTo(u+p,f+v)}function dz(t,r){var e=r.x,n=e===void 0?0:e,i=r.y,a=i===void 0?0:i,o=r.radius,s=r.width,l=r.height,c=s,u=l,f=o&&o.some(function(O){return O!==0});if(!f)t.rect(n,a,c,u);else{var d=s>0?1:-1,h=l>0?1:-1,p=d+h===0,v=o.map(function(O){return be(O,0,Math.min(Math.abs(c)/2,Math.abs(u)/2))}),g=bt(v,4),m=g[0],y=g[1],b=g[2],x=g[3];t.moveTo(d*m+n,a),t.lineTo(c-d*y+n,a),y!==0&&t.arc(c-d*y+n,h*y+a,y,-h*Math.PI/2,d>0?0:Math.PI,p),t.lineTo(c+n,u-h*b+a),b!==0&&t.arc(c-d*b+n,u-h*b+a,b,d>0?0:Math.PI,h>0?Math.PI/2:1.5*Math.PI,p),t.lineTo(d*x+n,u+a),x!==0&&t.arc(d*x+n,u-h*x+a,x,h>0?Math.PI/2:-Math.PI/2,d>0?Math.PI:0,p),t.lineTo(n,h*m+a),m!==0&&t.arc(d*m+n,h*m+a,m,d>0?Math.PI:0,h>0?Math.PI*1.5:Math.PI/2,p)}}var hz=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.name="canvas-path-generator",e}return St(r,t),Z(r,[{key:"init",value:function(){var n,i=(n={},st(st(st(st(st(st(st(st(st(st(n,H.CIRCLE,oz),H.ELLIPSE,sz),H.RECT,dz),H.LINE,lz),H.POLYLINE,fz),H.POLYGON,uz),H.PATH,cz),H.TEXT,void 0),H.GROUP,void 0),H.IMAGE,void 0),st(st(st(n,H.HTML,void 0),H.MESH,void 0),H.FRAGMENT,void 0));this.context.pathGeneratorFactory=i}},{key:"destroy",value:function(){delete this.context.pathGeneratorFactory}}])}(Dr);/*!
 * @antv/g-plugin-canvas-picker
 * @description A G plugin for picking in canvas
 * @version 2.1.26
 * @date 7/18/2025, 7:15:53 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var pz=Pt(),vz=Pt(),gz=Pt(),mz=Bt(),qO=function(){function t(){var r=this;Q(this,t),this.isHit=function(e,n,i,a){var o=r.context.pointInPathPickerFactory[e.nodeName];if(o){var s=Hn(mz,i),l=me(vz,Ye(gz,n[0],n[1],0),s);if(o(e,new $e(l[0],l[1]),a,r.isPointInPath,r.context,r.runtime))return!0}return!1},this.isPointInPath=function(e,n){var i=r.runtime.offscreenCanvasCreator.getOrCreateContext(r.context.config.offscreenCanvas),a=r.context.pathGeneratorFactory[e.nodeName];return a&&(i.beginPath(),a(i,e.parsedStyle),i.closePath()),i.isPointInPath(n.x,n.y)}}return Z(t,[{key:"apply",value:function(e,n){var i,a=this,o=e.renderingService,s=e.renderingContext;this.context=e,this.runtime=n;var l=(i=s.root)===null||i===void 0?void 0:i.ownerDocument;o.hooks.pick.tapPromise(t.tag,function(){var c=Cr(He().mark(function u(f){return He().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",a.pick(l,f));case 1:case"end":return d.stop()}},u)}));return function(u){return c.apply(this,arguments)}}()),o.hooks.pickSync.tap(t.tag,function(c){return a.pick(l,c)})}},{key:"pick",value:function(e,n){var i=n.topmost,a=n.position,o=a.x,s=a.y,l=Ye(pz,o,s,0),c=e.elementsFromBBox(l[0],l[1],l[0],l[1]),u=[],f=Jr(c),d;try{for(f.s();!(d=f.n()).done;){var h=d.value,p=h.getWorldTransform(),v=this.isHit(h,l,p,!1);if(v){var g=N0(h);if(g){var m=g.parsedStyle.clipPath,y=this.isHit(m,l,m.getWorldTransform(),!0);if(y){if(i)return n.picked=[h],n;u.push(h)}}else{if(i)return n.picked=[h],n;u.push(h)}}}}catch(b){f.e(b)}finally{f.f()}return n.picked=u,n}}])}();qO.tag="CanvasPicker";function yz(t,r,e){var n=t.parsedStyle,i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.r,c=n.fill,u=n.stroke,f=n.lineWidth,d=f===void 0?1:f,h=n.increasedLineWidthForHitTesting,p=h===void 0?0:h,v=n.pointerEvents,g=v===void 0?"auto":v,m=(d+p)/2,y=dr(a,s,r.x,r.y),b=Si(g,c,u),x=bt(b,2),O=x[0],w=x[1];return O&&w||e?y<=l+m:O?y<=l:w?y>=l-m&&y<=l+m:!1}function gs(t,r,e,n){return t/(e*e)+r/(n*n)}function bz(t,r,e){var n=t.parsedStyle,i=n.cx,a=i===void 0?0:i,o=n.cy,s=o===void 0?0:o,l=n.rx,c=n.ry,u=n.fill,f=n.stroke,d=n.lineWidth,h=d===void 0?1:d,p=n.increasedLineWidthForHitTesting,v=p===void 0?0:p,g=n.pointerEvents,m=g===void 0?"auto":g,y=r.x,b=r.y,x=Si(m,u,f),O=bt(x,2),w=O[0],S=O[1],k=(h+v)/2,E=(y-a)*(y-a),_=(b-s)*(b-s);return w&&S||e?gs(E,_,l+k,c+k)<=1:w?gs(E,_,l,c)<=1:S?gs(E,_,l-k,c-k)>=1&&gs(E,_,l+k,c+k)<=1:!1}function ri(t,r,e,n,i,a){return i>=t&&i<=t+e&&a>=r&&a<=r+n}function xz(t,r,e,n,i,a,o){var s=i/2;return ri(t-s,r-s,e,i,a,o)||ri(t+e-s,r-s,i,n,a,o)||ri(t+s,r+n-s,e,i,a,o)||ri(t-s,r+s,i,n,a,o)}function ms(t,r,e,n,i,a,o,s){var l=(Math.atan2(s-r,o-t)+Math.PI*2)%(Math.PI*2),c={x:t+e*Math.cos(l),y:r+e*Math.sin(l)};return dr(c.x,c.y,o,s)<=a/2}function _r(t,r,e,n,i,a,o){var s=Math.min(t,e),l=Math.max(t,e),c=Math.min(r,n),u=Math.max(r,n),f=i/2;return a>=s-f&&a<=l+f&&o>=c-f&&o<=u+f?BM(t,r,e,n,a,o)<=i/2:!1}function KO(t,r,e,n,i){var a=t.length;if(a<2)return!1;for(var o=0;o<a-1;o++){var s=t[o][0],l=t[o][1],c=t[o+1][0],u=t[o+1][1];if(_r(s,l,c,u,r,e,n))return!0}if(i){var f=t[0],d=t[a-1];if(_r(f[0],f[1],d[0],d[1],r,e,n))return!0}return!1}var Oz=1e-6;function Hc(t){return Math.abs(t)<Oz?0:t<0?-1:1}function wz(t,r,e){return(e[0]-t[0])*(r[1]-t[1])===(r[0]-t[0])*(e[1]-t[1])&&Math.min(t[0],r[0])<=e[0]&&e[0]<=Math.max(t[0],r[0])&&Math.min(t[1],r[1])<=e[1]&&e[1]<=Math.max(t[1],r[1])}function ZO(t,r,e){var n=!1,i=t.length;if(i<=2)return!1;for(var a=0;a<i;a++){var o=t[a],s=t[(a+1)%i];if(wz(o,s,[r,e]))return!0;Hc(o[1]-e)>0!=Hc(s[1]-e)>0&&Hc(r-(e-o[1])*(o[0]-s[0])/(o[1]-s[1])-o[0])<0&&(n=!n)}return n}function rg(t,r,e){for(var n=!1,i=0;i<t.length;i++){var a=t[i];if(n=ZO(a,r,e),n)break}return n}function Sz(t,r,e){var n=t.parsedStyle,i=n.x1,a=n.y1,o=n.x2,s=n.y2,l=n.lineWidth,c=l===void 0?1:l,u=n.increasedLineWidthForHitTesting,f=u===void 0?0:u,d=n.pointerEvents,h=d===void 0?"auto":d,p=n.fill,v=n.stroke,g=Si(h,p,v),m=bt(g,2),y=m[1];return!y&&!e||!c?!1:_r(i,a,o,s,c+f,r.x,r.y)}function kz(t,r,e,n,i){for(var a=!1,o=r/2,s=0;s<t.length;s++){var l=t[s],c=l.currentPoint,u=l.params,f=l.prePoint,d=l.box;if(!(d&&!ri(d.x-o,d.y-o,d.width+r,d.height+r,e,n)))switch(l.command){case"L":case"Z":if(a=_r(f[0],f[1],c[0],c[1],r,e,n),a)return!0;break;case"Q":var h=HM(f[0],f[1],u[1],u[2],u[3],u[4],e,n);if(a=h<=r/2,a)return!0;break;case"C":var p=Wh(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],e,n,i);if(a=p<=r/2,a)return!0;break;case"A":l.cubicParams||(l.cubicParams=kf(f[0],f[1],u[1],u[2],u[3],u[4],u[5],u[6],u[7],void 0));for(var v=l.cubicParams,g=f,m=0;m<v.length;m+=6){var y=Wh(g[0],g[1],v[m],v[m+1],v[m+2],v[m+3],v[m+4],v[m+5],e,n,i);if(g=[v[m+4],v[m+5]],a=y<=r/2,a)return!0}break}}return a}function Ez(t,r,e,n,i,a){var o=t.parsedStyle,s=o.lineWidth,l=s===void 0?1:s,c=o.increasedLineWidthForHitTesting,u=c===void 0?0:c,f=o.stroke,d=o.fill,h=o.d,p=o.pointerEvents,v=p===void 0?"auto":p,g=h.segments,m=h.hasArc,y=h.polylines,b=h.polygons,x=Si(v,(b==null?void 0:b.length)&&d,f),O=bt(x,2),w=O[0],S=O[1],k=Au(t),E=!1;return w||e?(m?E=n(t,r):E=rg(b,r.x,r.y)||rg(y,r.x,r.y),E):((S||e)&&(E=kz(g,l+u,r.x,r.y,k)),E)}function _z(t,r,e){var n=t.parsedStyle,i=n.stroke,a=n.fill,o=n.lineWidth,s=o===void 0?1:o,l=n.increasedLineWidthForHitTesting,c=l===void 0?0:l,u=n.points,f=n.pointerEvents,d=f===void 0?"auto":f,h=Si(d,a,i),p=bt(h,2),v=p[0],g=p[1],m=!1;return(g||e)&&(m=KO(u.points,s+c,r.x,r.y,!0)),!m&&(v||e)&&(m=ZO(u.points,r.x,r.y)),m}function Az(t,r,e){var n=t.parsedStyle,i=n.lineWidth,a=i===void 0?1:i,o=n.increasedLineWidthForHitTesting,s=o===void 0?0:o,l=n.points,c=n.pointerEvents,u=c===void 0?"auto":c,f=n.fill,d=n.stroke,h=Si(u,f,d),p=bt(h,2),v=p[1];return!v&&!e||!a?!1:KO(l.points,a+s,r.x,r.y,!1)}function Tz(t,r,e,n,i){var a=t.parsedStyle,o=a.radius,s=a.fill,l=a.stroke,c=a.lineWidth,u=c===void 0?1:c,f=a.increasedLineWidthForHitTesting,d=f===void 0?0:f,h=a.x,p=h===void 0?0:h,v=a.y,g=v===void 0?0:v,m=a.width,y=a.height,b=a.pointerEvents,x=b===void 0?"auto":b,O=Si(x,s,l),w=bt(O,2),S=w[0],k=w[1],E=o&&o.some(function(T){return T!==0}),_=u+d;if(E){var M=!1;return(k||e)&&(M=Mz(p,g,m,y,o.map(function(T){return be(T,0,Math.min(Math.abs(m)/2,Math.abs(y)/2))}),_,r.x,r.y)),!M&&(S||e)&&(M=n(t,r)),M}else{var A=_/2;if(S&&k||e)return ri(p-A,g-A,m+A,y+A,r.x,r.y);if(S)return ri(p,g,m,y,r.x,r.y);if(k)return xz(p,g,m,y,_,r.x,r.y)}return!1}function Mz(t,r,e,n,i,a,o,s){var l=bt(i,4),c=l[0],u=l[1],f=l[2],d=l[3];return _r(t+c,r,t+e-u,r,a,o,s)||_r(t+e,r+u,t+e,r+n-f,a,o,s)||_r(t+e-f,r+n,t+d,r+n,a,o,s)||_r(t,r+n-d,t,r+c,a,o,s)||ms(t+e-u,r+u,u,1.5*Math.PI,2*Math.PI,a,o,s)||ms(t+e-f,r+n-f,f,0,.5*Math.PI,a,o,s)||ms(t+d,r+n-d,d,.5*Math.PI,Math.PI,a,o,s)||ms(t+c,r+c,c,Math.PI,1.5*Math.PI,a,o,s)}function Pz(t,r,e,n,i,a){var o=t.parsedStyle,s=o.pointerEvents,l=s===void 0?"auto":s,c=o.x,u=c===void 0?0:c,f=o.y,d=f===void 0?0:f,h=o.width,p=o.height;if(l==="non-transparent-pixel"){var v=i.config.offscreenCanvas,g=a.offscreenCanvasCreator.getOrCreateCanvas(v),m=a.offscreenCanvasCreator.getOrCreateContext(v,{willReadFrequently:!0});g.width=h,g.height=p,i.defaultStyleRendererFactory[H.IMAGE].render(m,wt(wt({},t.parsedStyle),{},{x:0,y:0}),t,void 0,void 0,void 0);var y=m.getImageData(r.x-u,r.y-d,1,1).data;return y.every(function(b){return b!==0})}return!0}function Cz(t,r,e,n){var i=t.getGeometryBounds();return r.x>=i.min[0]&&r.y>=i.min[1]&&r.x<=i.max[0]&&r.y<=i.max[1]}var Lz=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.name="canvas-picker",e}return St(r,t),Z(r,[{key:"init",value:function(){var n,i=(n={},st(st(st(st(st(st(st(st(st(st(n,H.CIRCLE,yz),H.ELLIPSE,bz),H.RECT,Tz),H.LINE,Sz),H.POLYLINE,Az),H.POLYGON,_z),H.PATH,Ez),H.TEXT,Cz),H.GROUP,null),H.IMAGE,Pz),st(st(n,H.HTML,null),H.MESH,null));this.context.pointInPathPickerFactory=i,this.addRenderingPlugin(new qO)}},{key:"destroy",value:function(){delete this.context.pointInPathPickerFactory,this.removeAllRenderingPlugins()}}])}(Dr);/*!
 * @antv/g-plugin-image-loader
 * @description A G plugin for loading image
 * @version 2.1.25
 * @date 7/18/2025, 7:14:14 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Rz=function(){function t(){Q(this,t),this.cacheStore=new Map}return Z(t,[{key:"onRefAdded",value:function(e){}},{key:"has",value:function(e){return this.cacheStore.has(e)}},{key:"put",value:function(e,n,i){return this.cacheStore.has(e)?!1:(this.cacheStore.set(e,{value:n,counter:new Set([i.entity])}),this.onRefAdded(i),!0)}},{key:"get",value:function(e,n){var i=this.cacheStore.get(e);return i?(i.counter.has(n.entity)||(i.counter.add(n.entity),this.onRefAdded(n)),i.value):null}},{key:"update",value:function(e,n,i){var a=this.cacheStore.get(e);return a?(a.value=wt(wt({},a.value),n),a.counter.has(i.entity)||(a.counter.add(i.entity),this.onRefAdded(i)),!0):!1}},{key:"release",value:function(e,n){var i=this.cacheStore.get(e);return i?(i.counter.delete(n.entity),i.counter.size<=0&&this.cacheStore.delete(e),!0):!1}},{key:"releaseRef",value:function(e){var n=this;Array.from(this.cacheStore.keys()).forEach(function(i){n.release(i,e)})}},{key:"getSize",value:function(){return this.cacheStore.size}},{key:"clear",value:function(){this.cacheStore.clear()}}])}(),Vc=[],Xc=[],Xu=function(){function t(){Q(this,t)}return Z(t,null,[{key:"stop",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;t.rafId&&(e.cancelAnimationFrame(t.rafId),t.rafId=null)}},{key:"executeTask",value:function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:t.api;Vc.length<=0&&Xc.length<=0||(Xc.forEach(function(n){return n()}),Xc=Vc.splice(0,t.TASK_NUM_PER_FRAME),t.rafId=e.requestAnimationFrame(function(){t.executeTask(e)}))}},{key:"sliceImage",value:function(e,n,i,a){for(var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:t.api,l=e.naturalWidth||e.width,c=e.naturalHeight||e.height,u=n-o,f=i-o,d=Math.ceil(l/u),h=Math.ceil(c/f),p={tileSize:[n,i],gridSize:[h,d],tiles:Array(h).fill(null).map(function(){return Array(d).fill(null)})},v=function(y){for(var b=function(w){Vc.push(function(){var S=w*u,k=y*f,E=[Math.min(n,l-S),Math.min(i,c-k)],_=E[0],A=E[1],M=s.createCanvas();M.width=n,M.height=i;var T=M.getContext("2d");T.drawImage(e,S,k,_,A,0,0,_,A),p.tiles[y][w]={x:S,y:k,tileX:w,tileY:y,data:M},a()})},x=0;x<d;x++)b(x)},g=0;g<h;g++)v(g);return t.stop(),t.executeTask(),p}}])}();Xu.TASK_NUM_PER_FRAME=10;var sn=new Rz;sn.onRefAdded=function(r){var e=this;r.addEventListener(Et.DESTROY,function(){e.releaseRef(r)},{once:!0})};var Bd=function(){function t(r,e){Q(this,t),this.gradientCache={},this.patternCache={},this.context=r,this.runtime=e}return Z(t,[{key:"getImageSync",value:function(e,n,i){var a=ce(e)?e:e.src;if(sn.has(a)){var o=sn.get(a,n);if(o.img.complete)return i==null||i(o),o}return this.getOrCreateImage(e,n).then(function(s){i==null||i(s)}).catch(function(s){console.error(s)}),null}},{key:"getOrCreateImage",value:function(e,n){var i=this,a=ce(e)?e:e.src;if(!ce(e)&&!sn.has(a)){var o={img:e,size:[e.naturalWidth||e.width,e.naturalHeight||e.height],tileSize:ys(e)};sn.put(a,o,n)}if(sn.has(a)){var s=sn.get(a,n);return s.img.complete?Promise.resolve(s):new Promise(function(l,c){s.img.addEventListener("load",function(){s.size=[s.img.naturalWidth||s.img.width,s.img.naturalHeight||s.img.height],s.tileSize=ys(s.img),l(s)}),s.img.addEventListener("error",function(u){c(u)})})}return new Promise(function(l,c){var u=i.context.config.createImage();if(u){var f={img:u,size:[0,0],tileSize:ys(u)};sn.put(a,f,n),u.onload=function(){f.size=[u.naturalWidth||u.width,u.naturalHeight||u.height],f.tileSize=ys(f.img),l(f)},u.onerror=function(d){c(d)},u.crossOrigin="Anonymous",u.src=a}})}},{key:"createDownSampledImage",value:function(){var r=Cr(He().mark(function n(i,a){var o,s,l,c,u,f,d,h,p,v,g,m,y,b;return He().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=1,this.getOrCreateImage(i,a);case 1:if(o=x.sent,!(typeof o.downSamplingRate<"u")){x.next=2;break}return x.abrupt("return",o);case 2:if(s=this.context.config.enableLargeImageOptimization,l=typeof s=="boolean"?{}:s,c=l.maxDownSampledImageSize,u=c===void 0?2048:c,f=l.downSamplingRateThreshold,d=f===void 0?.5:f,h=this.runtime.globalThis.createImageBitmap,p=bt(o.size,2),v=p[0],g=p[1],m=o.img,y=Math.min((u+u)/(v+g),Math.max(.01,Math.min(d,.5))),b=wt(wt({},o),{},{downSamplingRate:y}),sn.update(o.img.src,b,a),!h){x.next=7;break}return x.prev=3,x.next=4,h(o.img,{resizeWidth:v*y,resizeHeight:g*y});case 4:m=x.sent,x.next=6;break;case 5:x.prev=5,x.catch(3),y=1;case 6:x.next=8;break;case 7:y=1;case 8:return b=wt(wt({},this.getImageSync(i,a)),{},{downSampled:m,downSamplingRate:y}),sn.update(o.img.src,b,a),x.abrupt("return",b);case 9:case"end":return x.stop()}},n,this,[[3,5]])}));function e(n,i){return r.apply(this,arguments)}return e}()},{key:"createImageTiles",value:function(){var r=Cr(He().mark(function n(i,a,o,s){var l,c,u,f,d;return He().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=1,this.getOrCreateImage(i,s);case 1:return l=h.sent,c=s.ownerDocument.defaultView,u=c.requestAnimationFrame,f=c.cancelAnimationFrame,Xu.api={requestAnimationFrame:u,cancelAnimationFrame:f,createCanvas:function(){return Xf.createCanvas()}},d=wt(wt({},l),Xu.sliceImage(l.img,l.tileSize[0],l.tileSize[0],o)),sn.update(l.img.src,d,s),h.abrupt("return",d);case 2:case"end":return h.stop()}},n,this)}));function e(n,i,a,o){return r.apply(this,arguments)}return e}()},{key:"releaseImage",value:function(e,n){sn.release(ce(e)?e:e.src,n)}},{key:"releaseImageRef",value:function(e){sn.releaseRef(e)}},{key:"getOrCreatePatternSync",value:function(e,n,i,a,o,s,l){var c=this.generatePatternKey(n);if(c&&this.patternCache[c])return this.patternCache[c];var u=n.image,f=n.repetition,d=n.transform,h,p=!1;if(ce(u)){var v=this.getImageSync(u,e,l);h=v==null?void 0:v.img}else a?(h=a,p=!0):h=u;var g=h&&i.createPattern(h,f);if(g){var m;d?m=F0(P0(d),new Jt({})):m=Vi(Bt()),p&&Gk(m,m,[1/o,1/o,1]),g.setTransform({a:m[0],b:m[1],c:m[4],d:m[5],e:m[12]+s[0],f:m[13]+s[1]})}return c&&g&&(this.patternCache[c]=g),g}},{key:"getOrCreateGradient",value:function(e,n){var i=this.generateGradientKey(e),a=e.type,o=e.steps,s=e.min,l=e.width,c=e.height,u=e.angle,f=e.cx,d=e.cy,h=e.size;if(this.gradientCache[i])return this.gradientCache[i];var p=null;if(a===kr.LinearGradient){var v=GP(s,l,c,u),g=v.x1,m=v.y1,y=v.x2,b=v.y2;p=n.createLinearGradient(g,m,y,b)}else if(a===kr.RadialGradient){var x=WP(s,l,c,f,d,h),O=x.x,w=x.y,S=x.r;p=n.createRadialGradient(O,w,0,O,w,S)}return p&&(o.forEach(function(k){var E=k.offset,_=k.color;if(E.unit===it.kPercentage){var A;(A=p)===null||A===void 0||A.addColorStop(E.value/100,_.toString())}}),this.gradientCache[i]=p),this.gradientCache[i]}},{key:"generateGradientKey",value:function(e){var n=e.type,i=e.min,a=e.width,o=e.height,s=e.steps,l=e.angle,c=e.cx,u=e.cy,f=e.size;return"gradient-".concat(n,"-").concat((l==null?void 0:l.toString())||0,"-").concat((c==null?void 0:c.toString())||0,"-").concat((u==null?void 0:u.toString())||0,"-").concat((f==null?void 0:f.toString())||0,"-").concat(i[0],"-").concat(i[1],"-").concat(a,"-").concat(o,"-").concat(s.map(function(d){var h=d.offset,p=d.color;return"".concat(h).concat(p)}).join("-"))}},{key:"generatePatternKey",value:function(e){var n=e.image,i=e.repetition;if(ce(n))return"pattern-".concat(n,"-").concat(i);if(n.nodeName==="rect")return"pattern-".concat(n.entity,"-").concat(i)}}])}();Bd.isSupportTile=!!Xf.createCanvas();function ys(t){if(!t.complete)return[0,0];var r=t.naturalWidth||t.width,e=t.naturalHeight||t.height,n=256;return[256,512].forEach(function(i){var a=Math.ceil(e/i),o=Math.ceil(r/i);a*o<1e3&&(n=i)}),[n,n]}var QO=function(){function t(){Q(this,t)}return Z(t,[{key:"apply",value:function(e){var n=e.renderingService,i=e.renderingContext,a=e.imagePool,o=i.root.ownerDocument.defaultView,s=function(f,d,h){var p=f.parsedStyle,v=p.width,g=p.height;v&&!g?f.setAttribute("height",h/d*v):!v&&g&&f.setAttribute("width",d/h*g)},l=function(f){var d=f.target,h=d.nodeName,p=d.attributes;if(h===H.IMAGE){var v=p.src,g=p.keepAspectRatio;a.getImageSync(v,d,function(m){var y=m.img,b=y.width,x=y.height;g&&s(d,b,x),d.renderable.dirty=!0,n.dirtify()})}},c=function(f){var d=f.target,h=f.attrName,p=f.prevValue,v=f.newValue;d.nodeName!==H.IMAGE||h!=="src"||(p!==v&&a.releaseImage(p,d),ce(v)&&a.getOrCreateImage(v,d).then(function(g){var m=g.img,y=m.width,b=m.height;d.attributes.keepAspectRatio&&s(d,y,b),d.renderable.dirty=!0,n.dirtify()}).catch(function(){}))};n.hooks.init.tap(t.tag,function(){o.addEventListener(Et.MOUNTED,l),o.addEventListener(Et.ATTR_MODIFIED,c)}),n.hooks.destroy.tap(t.tag,function(){o.removeEventListener(Et.MOUNTED,l),o.removeEventListener(Et.ATTR_MODIFIED,c)})}}])}();QO.tag="LoadImage";var Nz=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.name="image-loader",e}return St(r,t),Z(r,[{key:"init",value:function(n){this.context.imagePool=new Bd(this.context,n),this.addRenderingPlugin(new QO)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Dr);/*!
 * @antv/g-plugin-canvas-renderer
 * @description A G plugin of renderer implementation with Canvas2D API
 * @version 2.3.2
 * @date 7/18/2025, 7:15:00 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var ke=vk("renderState"),JO=function(){function t(r){Q(this,t),this.removedRBushNodeAABBs=[],this.renderQueue=[],Object.defineProperty(this,ke,{writable:!0,value:{restoreStack:[],prevObject:null,currentContext:new Map}}),this.clearFullScreenLastFrame=!1,this.clearFullScreen=!1,this.vpMatrix=Bt(),this.dprMatrix=Bt(),this.tmpMat4=Bt(),this.vec3a=Pt(),this.vec3b=Pt(),this.vec3c=Pt(),this.vec3d=Pt(),this.canvasRendererPluginOptions=r}return Z(t,[{key:"apply",value:function(e,n){var i=this;this.context=e;var a=this.context,o=a.config,s=a.camera,l=a.renderingService,c=a.renderingContext,u=a.rBushRoot,f=a.pathGeneratorFactory,d=o.renderer.getConfig().enableRenderingOptimization;o.renderer.getConfig().enableDirtyCheck=!1,o.renderer.getConfig().enableDirtyRectangleRendering=!1,this.rBush=u,this.pathGeneratorFactory=f;var h=e.contextService,p=c.root.ownerDocument.defaultView,v=function(x){var O=x.target,w=O.rBushNode;w!=null&&w.aabb&&i.removedRBushNodeAABBs.push(w.aabb)},g=function(x){var O=x.target,w=O.rBushNode;w.aabb&&i.removedRBushNodeAABBs.push(w.aabb)};l.hooks.init.tap(t.tag,function(){p.addEventListener(Et.UNMOUNTED,v),p.addEventListener(Et.CULLED,g);var b=h.getDPR(),x=o.width,O=o.height,w=h.getContext();i.clearRect(w,0,0,x*b,O*b,o.background)}),l.hooks.destroy.tap(t.tag,function(){p.removeEventListener(Et.UNMOUNTED,v),p.removeEventListener(Et.CULLED,g),i.renderQueue=[],i.removedRBushNodeAABBs=[],Dn(i,ke)[ke]={restoreStack:[],prevObject:null,currentContext:null}});var m=function(){var x,O=h.getContext(),w=h.getDPR(),S=o.width,k=o.height,E=i.canvasRendererPluginOptions,_=E.dirtyObjectNumThreshold,A=E.dirtyObjectRatioThreshold,M=l.getStats(),T=M.total,C=M.rendered,I=C/T;i.clearFullScreen=i.clearFullScreenLastFrame||!((x=p.context.renderingPlugins[1])!==null&&x!==void 0&&x.isFirstTimeRenderingFinished)||l.disableDirtyRectangleRendering()||C>_&&I>A,O&&(typeof O.resetTransform=="function"?O.resetTransform():O.setTransform(1,0,0,1,0,0),i.clearFullScreen&&i.clearRect(O,0,0,S*w,k*w,o.background))},y=function(x,O){for(var w=[x];w.length>0;){var S,k=w.pop();k.isVisible()&&!k.isCulled()&&(d?i.renderDisplayObjectOptimized(k,O,i.context,Dn(i,ke)[ke],n):i.renderDisplayObject(k,O,i.context,Dn(i,ke)[ke],n));for(var E=((S=k.sortable)===null||S===void 0||(S=S.sorted)===null||S===void 0?void 0:S.length)>0?k.sortable.sorted:k.childNodes,_=E.length-1;_>=0;_--)w.push(E[_])}};l.hooks.endFrame.tap(t.tag,function(){if(m(),c.root.childNodes.length===0){i.clearFullScreenLastFrame=!0;return}d=o.renderer.getConfig().enableRenderingOptimization,Dn(i,ke)[ke]={restoreStack:[],prevObject:null,currentContext:Dn(i,ke)[ke].currentContext},Dn(i,ke)[ke].currentContext.clear(),i.clearFullScreenLastFrame=!1;var b=h.getContext(),x=h.getDPR();if(ti(i.dprMatrix,[x,x,1]),rn(i.vpMatrix,i.dprMatrix,s.getOrthoMatrix()),i.clearFullScreen)d?(b.save(),y(c.root,b),b.restore()):y(c.root,b),i.removedRBushNodeAABBs=[];else{var O=i.safeMergeAABB.apply(i,[i.mergeDirtyAABBs(i.renderQueue)].concat(Tt(i.removedRBushNodeAABBs.map(function(Y){var V=Y.minX,z=Y.minY,U=Y.maxX,q=Y.maxY,rt=new _e;return rt.setMinMax([V,z,0],[U,q,0]),rt}))));if(i.removedRBushNodeAABBs=[],_e.isEmpty(O)){i.renderQueue=[];return}var w=i.convertAABB2Rect(O),S=w.x,k=w.y,E=w.width,_=w.height,A=me(i.vec3a,[S,k,0],i.vpMatrix),M=me(i.vec3b,[S+E,k,0],i.vpMatrix),T=me(i.vec3c,[S,k+_,0],i.vpMatrix),C=me(i.vec3d,[S+E,k+_,0],i.vpMatrix),I=Math.min(A[0],M[0],C[0],T[0]),R=Math.min(A[1],M[1],C[1],T[1]),L=Math.max(A[0],M[0],C[0],T[0]),P=Math.max(A[1],M[1],C[1],T[1]),N=Math.floor(I),j=Math.floor(R),B=Math.ceil(L-I),F=Math.ceil(P-R);b.save(),i.clearRect(b,N,j,B,F,o.background),b.beginPath(),b.rect(N,j,B,F),b.clip(),b.setTransform(i.vpMatrix[0],i.vpMatrix[1],i.vpMatrix[4],i.vpMatrix[5],i.vpMatrix[12],i.vpMatrix[13]);var $=o.renderer.getConfig(),W=$.enableDirtyRectangleRenderingDebug;W&&p.dispatchEvent(new Ht(mn.DIRTY_RECTANGLE,{dirtyRect:{x:N,y:j,width:B,height:F}}));var G=i.searchDirtyObjects(O);G.sort(function(Y,V){return Y.sortable.renderOrder-V.sortable.renderOrder}).forEach(function(Y){Y&&Y.isVisible()&&!Y.isCulled()&&i.renderDisplayObject(Y,b,i.context,Dn(i,ke)[ke],n)}),b.restore(),i.renderQueue.forEach(function(Y){i.saveDirtyAABB(Y)}),i.renderQueue=[]}Dn(i,ke)[ke].restoreStack.forEach(function(){b.restore()}),Dn(i,ke)[ke].restoreStack=[]}),l.hooks.render.tap(t.tag,function(b){i.clearFullScreen||i.renderQueue.push(b)})}},{key:"clearRect",value:function(e,n,i,a,o,s){e.clearRect(n,i,a,o),s&&(e.fillStyle=s,e.fillRect(n,i,a,o))}},{key:"renderDisplayObjectOptimized",value:function(e,n,i,a,o){var s=e.nodeName,l=!1,c=!1,u=this.context.styleRendererFactory[s],f=this.pathGeneratorFactory[s],d=e.parsedStyle.clipPath;if(d){l=!a.prevObject||!bh(d.getWorldTransform(),a.prevObject.getWorldTransform()),l&&(this.applyWorldTransform(n,d),a.prevObject=null);var h=this.pathGeneratorFactory[d.nodeName];h&&(n.save(),c=!0,n.beginPath(),h(n,d.parsedStyle),n.closePath(),n.clip())}if(u){l=!a.prevObject||!bh(e.getWorldTransform(),a.prevObject.getWorldTransform()),l&&this.applyWorldTransform(n,e);var p=!a.prevObject;if(!p){var v=a.prevObject.nodeName;s===H.TEXT?p=v!==H.TEXT:s===H.IMAGE?p=v!==H.IMAGE:p=v===H.TEXT||v===H.IMAGE}u.applyStyleToContext(n,e,p,a),a.prevObject=e}f&&(n.beginPath(),f(n,e.parsedStyle),s!==H.LINE&&s!==H.PATH&&s!==H.POLYLINE&&n.closePath()),u&&u.drawToContext(n,e,Dn(this,ke)[ke],this,o),c&&n.restore(),e.dirty(!1)}},{key:"renderDisplayObject",value:function(e,n,i,a,o){var s=e.nodeName,l=a.restoreStack[a.restoreStack.length-1];l&&!(e.compareDocumentPosition(l)&le.DOCUMENT_POSITION_CONTAINS)&&(n.restore(),a.restoreStack.pop());var c=this.context.styleRendererFactory[s],u=this.pathGeneratorFactory[s],f=e.parsedStyle.clipPath;if(f){this.applyWorldTransform(n,f);var d=this.pathGeneratorFactory[f.nodeName];d&&(n.save(),a.restoreStack.push(e),n.beginPath(),d(n,f.parsedStyle),n.closePath(),n.clip())}c&&(this.applyWorldTransform(n,e),n.save(),this.applyAttributesToContext(n,e)),u&&(n.beginPath(),u(n,e.parsedStyle),s!==H.LINE&&s!==H.PATH&&s!==H.POLYLINE&&n.closePath()),c&&(c.render(n,e.parsedStyle,e,i,this,o),n.restore()),e.dirty(!1)}},{key:"applyAttributesToContext",value:function(e,n){var i=n.parsedStyle,a=i.stroke,o=i.fill,s=i.opacity,l=i.lineDash,c=i.lineDashOffset;l&&e.setLineDash(l),pt(c)||(e.lineDashOffset=c),pt(s)||(e.globalAlpha*=s),!pt(a)&&!Array.isArray(a)&&!a.isNone&&(e.strokeStyle=n.attributes.stroke),!pt(o)&&!Array.isArray(o)&&!o.isNone&&(e.fillStyle=n.attributes.fill)}},{key:"convertAABB2Rect",value:function(e){var n=e.getMin(),i=e.getMax(),a=Math.floor(n[0]),o=Math.floor(n[1]),s=Math.ceil(i[0]),l=Math.ceil(i[1]),c=s-a,u=l-o;return{x:a,y:o,width:c,height:u}}},{key:"mergeDirtyAABBs",value:function(e){var n=new _e;return e.forEach(function(i){var a=i.getRenderBounds();n.add(a);var o=i.renderable.dirtyRenderBounds;o&&n.add(o)}),n}},{key:"searchDirtyObjects",value:function(e){var n=e.getMin(),i=bt(n,2),a=i[0],o=i[1],s=e.getMax(),l=bt(s,2),c=l[0],u=l[1],f=this.rBush.search({minX:a,minY:o,maxX:c,maxY:u});return f.map(function(d){var h=d.displayObject;return h})}},{key:"saveDirtyAABB",value:function(e){var n=e.renderable;n.dirtyRenderBounds||(n.dirtyRenderBounds=new _e);var i=e.getRenderBounds();i&&n.dirtyRenderBounds.update(i.center,i.halfExtents)}},{key:"applyWorldTransform",value:function(e,n,i){i?(Wa(this.tmpMat4,n.getLocalTransform()),rn(this.tmpMat4,i,this.tmpMat4),rn(this.tmpMat4,this.vpMatrix,this.tmpMat4)):(Wa(this.tmpMat4,n.getWorldTransform()),rn(this.tmpMat4,this.vpMatrix,this.tmpMat4)),e.setTransform(this.tmpMat4[0],this.tmpMat4[1],this.tmpMat4[4],this.tmpMat4[5],this.tmpMat4[12],this.tmpMat4[13])}},{key:"safeMergeAABB",value:function(){for(var e=new _e,n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return i.forEach(function(o){e.add(o)}),e}}])}();JO.tag="CanvasRenderer";function hl(t,r,e,n,i,a,o){var s,l;if(t.image.nodeName==="rect"){var c=t.image.parsedStyle,u=c.width,f=c.height;l=n.contextService.getDPR();var d=n.config.offscreenCanvas;s=a.offscreenCanvasCreator.getOrCreateCanvas(d),s.width=u*l,s.height=f*l;var h=a.offscreenCanvasCreator.getOrCreateContext(d),p={restoreStack:[],prevObject:null,currentContext:new Map};t.image.forEach(function(g){i.renderDisplayObject(g,h,n,p,a)}),p.restoreStack.forEach(function(){h.restore()})}var v=o.getOrCreatePatternSync(r,t,e,s,l,r.getGeometryBounds().min,function(){r.dirty(),n.renderingService.dirtify()});return v}function pl(t,r,e,n){var i;if(t.type===kr.LinearGradient||t.type===kr.RadialGradient){var a=r.getGeometryBounds(),o=a&&a.halfExtents[0]*2||1,s=a&&a.halfExtents[1]*2||1,l=a&&a.min||[0,0];i=n.getOrCreateGradient(wt(wt({type:t.type},t.value),{},{min:l,width:o,height:s}),e)}return i}var bs=["shadowBlur","shadowOffsetX","shadowOffsetY"],ig=["lineCap","lineJoin","miterLimit"],Te={globalAlpha:1,shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",filter:"none",globalCompositeOperation:"source-over",strokeStyle:"#000",strokeOpacity:1,lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,fillStyle:"#000",fillOpacity:1},ag={};function pe(t,r,e,n){var i=n.has(r)?n.get(r):Te[r];return i!==e&&(r==="lineDash"?t.setLineDash(e):t[r]=e,n.set(r,e)),i}var Iz=function(){function t(r){Q(this,t),this.imagePool=r}return Z(t,[{key:"applyAttributesToContext",value:function(e,n){}},{key:"render",value:function(e,n,i,a,o,s){}},{key:"applyCommonStyleToContext",value:function(e,n,i,a){var o=i?ag:a.prevObject.parsedStyle,s=n.parsedStyle;(i||s.opacity!==o.opacity)&&pe(e,"globalAlpha",pt(s.opacity)?Te.globalAlpha:s.opacity,a.currentContext),(i||s.blend!==o.blend)&&pe(e,"globalCompositeOperation",pt(s.blend)?Te.globalCompositeOperation:s.blend,a.currentContext)}},{key:"applyStrokeFillStyleToContext",value:function(e,n,i,a){var o=i?ag:a.prevObject.parsedStyle,s=n.parsedStyle,l=s.lineWidth,c=l===void 0?Te.lineWidth:l,u=s.fill&&!s.fill.isNone,f=s.stroke&&!s.stroke.isNone&&c>0;if(f){if(i||n.attributes.stroke!==a.prevObject.attributes.stroke){var d=!pt(s.stroke)&&!Array.isArray(s.stroke)&&!s.stroke.isNone?n.attributes.stroke:Te.strokeStyle;pe(e,"strokeStyle",d,a.currentContext)}(i||s.lineWidth!==o.lineWidth)&&pe(e,"lineWidth",pt(s.lineWidth)?Te.lineWidth:s.lineWidth,a.currentContext),(i||s.lineDash!==o.lineDash)&&pe(e,"lineDash",s.lineDash||Te.lineDash,a.currentContext),(i||s.lineDashOffset!==o.lineDashOffset)&&pe(e,"lineDashOffset",pt(s.lineDashOffset)?Te.lineDashOffset:s.lineDashOffset,a.currentContext);for(var h=0;h<ig.length;h++){var p=ig[h];(i||s[p]!==o[p])&&pe(e,p,pt(s[p])?Te[p]:s[p],a.currentContext)}}if(u&&(i||n.attributes.fill!==a.prevObject.attributes.fill)){var v=!pt(s.fill)&&!Array.isArray(s.fill)&&!s.fill.isNone?n.attributes.fill:Te.fillStyle;pe(e,"fillStyle",v,a.currentContext)}}},{key:"applyStyleToContext",value:function(e,n,i,a){var o=n.nodeName;this.applyCommonStyleToContext(e,n,i,a),o===H.IMAGE||this.applyStrokeFillStyleToContext(e,n,i,a)}},{key:"applyShadowAndFilterStyleToContext",value:function(e,n,i,a){var o=n.parsedStyle;if(i){pe(e,"shadowColor",o.shadowColor.toString(),a.currentContext);for(var s=0;s<bs.length;s++){var l=bs[s];pe(e,l,o[l]||Te[l],a.currentContext)}}o.filter&&o.filter.length&&pe(e,"filter",n.attributes.filter,a.currentContext)}},{key:"clearShadowAndFilterStyleForContext",value:function(e,n,i,a){var o=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(n){pe(e,"shadowColor",Te.shadowColor,a.currentContext);for(var s=0;s<bs.length;s++){var l=bs[s];pe(e,l,Te[l],a.currentContext)}}if(i)if(n&&o){var c=e.filter;!pt(c)&&c.indexOf("drop-shadow")>-1&&pe(e,"filter",c.replace(/drop-shadow\([^)]*\)/,"").trim()||Te.filter,a.currentContext)}else pe(e,"filter",Te.filter,a.currentContext)}},{key:"fillToContext",value:function(e,n,i,a,o){var s=this,l=n.parsedStyle,c=l.fill,u=l.fillRule,f=null;if(Array.isArray(c)&&c.length>0)c.forEach(function(h){var p=pe(e,"fillStyle",pl(h,n,e,s.imagePool),i.currentContext);f=f??p,u?e.fill(u):e.fill()});else{if(pi(c)){var d=hl(c,n,e,n.ownerDocument.defaultView.context,a,o,this.imagePool);d&&(e.fillStyle=d,f=!0)}u?e.fill(u):e.fill()}f!==null&&pe(e,"fillStyle",f,i.currentContext)}},{key:"strokeToContext",value:function(e,n,i,a,o){var s=this,l=n.parsedStyle.stroke,c=null;if(Array.isArray(l)&&l.length>0)l.forEach(function(d){var h=pe(e,"strokeStyle",pl(d,n,e,s.imagePool),i.currentContext);c=c??h,e.stroke()});else{if(pi(l)){var u=hl(l,n,e,n.ownerDocument.defaultView.context,a,o,this.imagePool);if(u){var f=pe(e,"strokeStyle",u,i.currentContext);c=c??f}}e.stroke()}c!==null&&pe(e,"strokeStyle",c,i.currentContext)}},{key:"drawToContext",value:function(e,n,i,a,o){var s,l=n.nodeName,c=n.parsedStyle,u=c.opacity,f=u===void 0?Te.globalAlpha:u,d=c.fillOpacity,h=d===void 0?Te.fillOpacity:d,p=c.strokeOpacity,v=p===void 0?Te.strokeOpacity:p,g=c.lineWidth,m=g===void 0?Te.lineWidth:g,y=c.fill&&!c.fill.isNone,b=c.stroke&&!c.stroke.isNone&&m>0;if(!(!y&&!b)){var x=!pt(c.shadowColor)&&c.shadowBlur>0,O=c.shadowType==="inner",w=((s=c.fill)===null||s===void 0?void 0:s.alpha)===0,S=!!(c.filter&&c.filter.length),k=x&&b&&(l===H.PATH||l===H.LINE||l===H.POLYLINE||w||O),E=null;if(y){k||this.applyShadowAndFilterStyleToContext(e,n,x,i);var _=f*h;E=pe(e,"globalAlpha",_,i.currentContext),this.fillToContext(e,n,i,a,o),k||this.clearShadowAndFilterStyleForContext(e,x,S,i)}if(b){var A=!1,M=f*v,T=pe(e,"globalAlpha",M,i.currentContext);if(E=y?E:T,k&&(this.applyShadowAndFilterStyleToContext(e,n,x,i),A=!0,O)){var C=e.globalCompositeOperation;e.globalCompositeOperation="source-atop",this.strokeToContext(e,n,i,a,o),e.globalCompositeOperation=C,this.clearShadowAndFilterStyleForContext(e,x,S,i,!0)}this.strokeToContext(e,n,i,a,o),A&&this.clearShadowAndFilterStyleForContext(e,x,S,i)}E!==null&&pe(e,"globalAlpha",E,i.currentContext)}}}])}(),Fd=function(t){function r(){return Q(this,r),kt(this,r,arguments)}return St(r,t),Z(r,[{key:"render",value:function(n,i,a,o,s,l){var c=i.fill,u=i.fillRule,f=i.opacity,d=f===void 0?1:f,h=i.fillOpacity,p=h===void 0?1:h,v=i.stroke,g=i.strokeOpacity,m=g===void 0?1:g,y=i.lineWidth,b=y===void 0?1:y,x=i.lineCap,O=i.lineJoin,w=i.shadowType,S=i.shadowColor,k=i.shadowBlur,E=i.filter,_=i.miterLimit,A=c&&!c.isNone,M=v&&!v.isNone&&b>0,T=(c==null?void 0:c.alpha)===0,C=!!(E&&E.length),I=!pt(S)&&k>0,R=a.nodeName,L=w==="inner",P=M&&I&&(R===H.PATH||R===H.LINE||R===H.POLYLINE||T||L);A&&(n.globalAlpha=d*p,P||vl(a,n,I),tw(n,a,c,u,o,s,l,this.imagePool),P||this.clearShadowAndFilter(n,C,I)),M&&(n.globalAlpha=d*m,n.lineWidth=b,pt(_)||(n.miterLimit=_),pt(x)||(n.lineCap=x),pt(O)||(n.lineJoin=O),P&&(L&&(n.globalCompositeOperation="source-atop"),vl(a,n,!0),L&&(Uu(n,a,v,o,s,l,this.imagePool),n.globalCompositeOperation=Te.globalCompositeOperation,this.clearShadowAndFilter(n,C,!0))),Uu(n,a,v,o,s,l,this.imagePool))}},{key:"clearShadowAndFilter",value:function(n,i,a){if(a&&(n.shadowColor="transparent",n.shadowBlur=0),i){var o=n.filter;!pt(o)&&o.indexOf("drop-shadow")>-1&&(n.filter=o.replace(/drop-shadow\([^)]*\)/,"").trim()||"none")}}}])}(Iz);function vl(t,r,e){var n=t.parsedStyle,i=n.filter,a=n.shadowColor,o=n.shadowBlur,s=n.shadowOffsetX,l=n.shadowOffsetY;i&&i.length&&(r.filter=t.style.filter),e&&(r.shadowColor=a.toString(),r.shadowBlur=o||0,r.shadowOffsetX=s||0,r.shadowOffsetY=l||0)}function tw(t,r,e,n,i,a,o,s){var l=arguments.length>8&&arguments[8]!==void 0?arguments[8]:!1;Array.isArray(e)?e.forEach(function(c){t.fillStyle=pl(c,r,t,s),l||(n?t.fill(n):t.fill())}):(pi(e)&&(t.fillStyle=hl(e,r,t,i,a,o,s)),l||(n?t.fill(n):t.fill()))}function Uu(t,r,e,n,i,a,o){var s=arguments.length>7&&arguments[7]!==void 0?arguments[7]:!1;Array.isArray(e)?e.forEach(function(l){t.strokeStyle=pl(l,r,t,o),s||t.stroke()}):(pi(e)&&(t.strokeStyle=hl(e,r,t,n,i,a,o)),s||t.stroke())}function jz(t,r){var e=bt(t,4),n=e[0],i=e[1],a=e[2],o=e[3],s=bt(r,4),l=s[0],c=s[1],u=s[2],f=s[3],d=Math.max(n,l),h=Math.max(i,c),p=Math.min(n+a,l+u),v=Math.min(i+o,c+f);return p<=d||v<=h?null:[d,h,p-d,v-h]}function Dz(t,r){var e=me(Pt(),[t[0],t[1],0],r),n=me(Pt(),[t[0]+t[2],t[1],0],r),i=me(Pt(),[t[0],t[1]+t[3],0],r),a=me(Pt(),[t[0]+t[2],t[1]+t[3],0],r);return[Math.min(e[0],n[0],i[0],a[0]),Math.min(e[1],n[1],i[1],a[1]),Math.max(e[0],n[0],i[0],a[0])-Math.min(e[0],n[0],i[0],a[0]),Math.max(e[1],n[1],i[1],a[1])-Math.min(e[1],n[1],i[1],a[1])]}var Bz=function(t){function r(){return Q(this,r),kt(this,r,arguments)}return St(r,t),Z(r,[{key:"renderDownSampled",value:function(n,i,a,o){var s=o.src,l=o.imageCache;if(!l.downSampled){this.imagePool.createDownSampledImage(s,a).then(function(){a.ownerDocument&&(a.dirty(),a.ownerDocument.defaultView.context.renderingService.dirtify())}).catch(function(c){console.error(c)});return}n.drawImage(l.downSampled,Math.floor(o.drawRect[0]),Math.floor(o.drawRect[1]),Math.ceil(o.drawRect[2]),Math.ceil(o.drawRect[3]))}},{key:"renderTile",value:function(n,i,a,o){var s=o.src,l=o.imageCache,c=o.imageRect,u=o.drawRect,f=l.size,d=n.getTransform(),h=d.a,p=d.b,v=d.c,g=d.d,m=d.e,y=d.f;if(n.resetTransform(),!(l!=null&&l.gridSize)){this.imagePool.createImageTiles(s,[],function(){a.ownerDocument&&(a.dirty(),a.ownerDocument.defaultView.context.renderingService.dirtify())},a).catch(function(I){console.error(I)});return}for(var b=[f[0]/c[2],f[1]/c[3]],x=[l.tileSize[0]/b[0],l.tileSize[1]/b[1]],O=[Math.floor((u[0]-c[0])/x[0]),Math.ceil((u[0]+u[2]-c[0])/x[0])],w=O[0],S=O[1],k=[Math.floor((u[1]-c[1])/x[1]),Math.ceil((u[1]+u[3]-c[1])/x[1])],E=k[0],_=k[1],A=E;A<=_;A++)for(var M=w;M<=S;M++){var T=l.tiles[A][M];if(T){var C=[Math.floor(c[0]+T.tileX*x[0]),Math.floor(c[1]+T.tileY*x[1]),Math.ceil(x[0]),Math.ceil(x[1])];n.drawImage(T.data,C[0],C[1],C[2],C[3])}}n.setTransform(h,p,v,g,m,y)}},{key:"render",value:function(n,i,a){var o=i.x,s=o===void 0?0:o,l=i.y,c=l===void 0?0:l,u=i.width,f=i.height,d=i.src,h=i.shadowColor,p=i.shadowBlur,v=this.imagePool.getImageSync(d,a),g=v==null?void 0:v.img,m=u,y=f;if(g){m||(m=g.width),y||(y=g.height);var b=!pt(h)&&p>0;vl(a,n,b);try{var x=a.ownerDocument.defaultView.getContextService().getDomElement(),O=x.width,w=x.height,S=n.getTransform(),k=S.a,E=S.b,_=S.c,A=S.d,M=S.e,T=S.f,C=Wk(k,_,0,0,E,A,0,0,0,0,1,0,M,T,0,1),I=Dz([s,c,m,y],C),R=jz([0,0,O,w],I);if(!R)return;if(!a.ownerDocument.defaultView.getConfig().enableLargeImageOptimization){r.renderFull(n,i,a,{image:g,drawRect:[s,c,m,y]});return}var L=I[2]/v.size[0];if(L<(v.downSamplingRate||.5)){this.renderDownSampled(n,i,a,{src:d,imageCache:v,drawRect:[s,c,m,y]});return}if(!Bd.isSupportTile){r.renderFull(n,i,a,{image:g,drawRect:[s,c,m,y]});return}this.renderTile(n,i,a,{src:d,imageCache:v,imageRect:I,drawRect:R})}catch{}}}},{key:"drawToContext",value:function(n,i,a,o,s){this.render(n,i.parsedStyle,i)}}],[{key:"renderFull",value:function(n,i,a,o){n.drawImage(o.image,Math.floor(o.drawRect[0]),Math.floor(o.drawRect[1]),Math.ceil(o.drawRect[2]),Math.ceil(o.drawRect[3]))}}])}(Fd),Fz=function(t){function r(){return Q(this,r),kt(this,r,arguments)}return St(r,t),Z(r,[{key:"render",value:function(n,i,a,o,s,l){a.getBounds();var c=i.lineWidth,u=c===void 0?1:c,f=i.textAlign,d=f===void 0?"start":f,h=i.textBaseline,p=h===void 0?"alphabetic":h,v=i.lineJoin,g=v===void 0?"miter":v,m=i.miterLimit,y=m===void 0?10:m,b=i.letterSpacing,x=b===void 0?0:b,O=i.stroke,w=i.fill,S=i.fillRule,k=i.fillOpacity,E=k===void 0?1:k,_=i.strokeOpacity,A=_===void 0?1:_,M=i.opacity,T=M===void 0?1:M,C=i.metrics,I=i.x,R=I===void 0?0:I,L=i.y,P=L===void 0?0:L,N=i.dx,j=i.dy,B=i.shadowColor,F=i.shadowBlur,$=C.font,W=C.lines,G=C.height,Y=C.lineHeight,V=C.lineMetrics;n.font=$,n.lineWidth=u,n.textAlign=d==="middle"?"center":d;var z=p;z==="alphabetic"&&(z="bottom"),n.lineJoin=g,pt(y)||(n.miterLimit=y);var U=P;p==="middle"?U+=-G/2-Y/2:p==="bottom"||p==="alphabetic"||p==="ideographic"?U+=-G:(p==="top"||p==="hanging")&&(U+=-Y);var q=R+(N||0);U+=j||0,W.length===1&&(z==="bottom"?(z="middle",U-=.5*G):z==="top"&&(z="middle",U+=.5*G)),n.textBaseline=z;var rt=!pt(B)&&F>0;vl(a,n,rt);for(var tt=0;tt<W.length;tt++){var at=u/2+q;U+=Y,!pt(O)&&!O.isNone&&u&&this.drawLetterSpacing(n,a,W[tt],V[tt],d,at,U,x,w,S,E,O,A,T,!0,o,s,l),pt(w)||this.drawLetterSpacing(n,a,W[tt],V[tt],d,at,U,x,w,S,E,O,A,T,!1,o,s,l)}}},{key:"drawLetterSpacing",value:function(n,i,a,o,s,l,c,u,f,d,h,p,v,g,m,y,b,x){if(u===0){m?this.strokeText(n,i,a,l,c,p,v,y,b,x):this.fillText(n,i,a,l,c,f,d,h,g,y,b,x);return}var O=n.textAlign;n.textAlign="left";var w=l;s==="center"||s==="middle"?w=l-o.width/2:(s==="right"||s==="end")&&(w=l-o.width);for(var S=Array.from(a),k=n.measureText(a).width,E=0,_=0;_<S.length;++_){var A=S[_];m?this.strokeText(n,i,A,w,c,p,v,y,b,x):this.fillText(n,i,A,w,c,f,d,h,g,y,b,x),E=n.measureText(a.substring(_+1)).width,w+=k-E+u,k=E}n.textAlign=O}},{key:"fillText",value:function(n,i,a,o,s,l,c,u,f,d,h,p){tw(n,i,l,c,d,h,p,this.imagePool,!0);var v,g=!pt(u)&&u!==1;g&&(v=n.globalAlpha,n.globalAlpha=u*f),n.fillText(a,o,s),g&&(n.globalAlpha=v)}},{key:"strokeText",value:function(n,i,a,o,s,l,c,u,f,d){Uu(n,i,l,u,f,d,this.imagePool,!0);var h,p=!pt(c)&&c!==1;p&&(h=n.globalAlpha,n.globalAlpha=c),n.strokeText(a,o,s),p&&(n.globalAlpha=h)}},{key:"drawToContext",value:function(n,i,a,o,s){this.render(n,i.parsedStyle,i,i.ownerDocument.defaultView.context,o,s)}}])}(Fd),$z=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(this,r),e=kt(this,r),e.name="canvas-renderer",e.options=n,e}return St(r,t),Z(r,[{key:"init",value:function(){var n,i=wt({dirtyObjectNumThreshold:500,dirtyObjectRatioThreshold:.8},this.options),a=this.context.imagePool,o=new Fd(a),s=(n={},st(st(st(st(st(st(st(st(st(st(n,H.CIRCLE,o),H.ELLIPSE,o),H.RECT,o),H.IMAGE,new Bz(a)),H.TEXT,new Fz(a)),H.LINE,o),H.POLYLINE,o),H.POLYGON,o),H.PATH,o),H.GROUP,void 0),st(st(st(n,H.HTML,void 0),H.MESH,void 0),H.FRAGMENT,void 0));this.context.defaultStyleRendererFactory=s,this.context.styleRendererFactory=s,this.addRenderingPlugin(new JO(i))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins(),delete this.context.defaultStyleRendererFactory,delete this.context.styleRendererFactory}}])}(Dr);/*!
 * @antv/g-plugin-dom-interaction
 * @description A G plugin
 * @version 2.1.26
 * @date 7/18/2025, 7:14:00 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var ew=function(){function t(){Q(this,t)}return Z(t,[{key:"apply",value:function(e,n){var i=this,a=e.renderingService,o=e.renderingContext,s=e.config;this.context=e;var l=o.root.ownerDocument.defaultView,c=function(k){a.hooks.pointerMove.call(k)},u=function(k){a.hooks.pointerUp.call(k)},f=function(k){a.hooks.pointerDown.call(k)},d=function(k){a.hooks.pointerOver.call(k)},h=function(k){a.hooks.pointerOut.call(k)},p=function(k){a.hooks.pointerCancel.call(k)},v=function(k){a.hooks.pointerWheel.call(k)},g=function(k){a.hooks.click.call(k)},m=function(k){n.globalThis.document.addEventListener("pointermove",c,!0),k.addEventListener("pointerdown",f,!0),k.addEventListener("pointerleave",h,!0),k.addEventListener("pointerover",d,!0),n.globalThis.addEventListener("pointerup",u,!0),n.globalThis.addEventListener("pointercancel",p,!0)},y=function(k){k.addEventListener("touchstart",f,!0),k.addEventListener("touchend",u,!0),k.addEventListener("touchmove",c,!0),k.addEventListener("touchcancel",p,!0)},b=function(k){n.globalThis.document.addEventListener("mousemove",c,!0),k.addEventListener("mousedown",f,!0),k.addEventListener("mouseout",h,!0),k.addEventListener("mouseover",d,!0),n.globalThis.addEventListener("mouseup",u,!0)},x=function(k){n.globalThis.document.removeEventListener("pointermove",c,!0),k.removeEventListener("pointerdown",f,!0),k.removeEventListener("pointerleave",h,!0),k.removeEventListener("pointerover",d,!0),n.globalThis.removeEventListener("pointerup",u,!0),n.globalThis.removeEventListener("pointercancel",p,!0)},O=function(k){k.removeEventListener("touchstart",f,!0),k.removeEventListener("touchend",u,!0),k.removeEventListener("touchmove",c,!0),k.removeEventListener("touchcancel",p,!0)},w=function(k){n.globalThis.document.removeEventListener("mousemove",c,!0),k.removeEventListener("mousedown",f,!0),k.removeEventListener("mouseout",h,!0),k.removeEventListener("mouseover",d,!0),n.globalThis.removeEventListener("mouseup",u,!0)};a.hooks.init.tap(t.tag,function(){var S=i.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(S.style.msContentZooming="none",S.style.msTouchAction="none"):l.supportsPointerEvents&&(S.style.touchAction="none"),l.supportsPointerEvents?m(S):b(S),l.supportsTouchEvents&&y(S),s.useNativeClickEvent&&S.addEventListener("click",g,!0),S.addEventListener("wheel",v,{passive:!0,capture:!0})}),a.hooks.destroy.tap(t.tag,function(){var S=i.context.contextService.getDomElement();n.globalThis.navigator.msPointerEnabled?(S.style.msContentZooming="",S.style.msTouchAction=""):l.supportsPointerEvents&&(S.style.touchAction=""),l.supportsPointerEvents?x(S):w(S),l.supportsTouchEvents&&O(S),s.useNativeClickEvent&&S.removeEventListener("click",g,!0),S.removeEventListener("wheel",v,!0)})}}])}();ew.tag="DOMInteraction";var zz=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.name="dom-interaction",e}return St(r,t),Z(r,[{key:"init",value:function(){this.addRenderingPlugin(new ew)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Dr);/*!
 * @antv/g-plugin-html-renderer
 * @description A G plugin for rendering HTML
 * @version 2.1.26
 * @date 7/18/2025, 7:14:10 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Gz="g-canvas-camera",nw=function(){function t(){Q(this,t),this.displayObjectHTMLElementMap=new WeakMap}return Z(t,[{key:"joinTransformMatrix",value:function(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0,0,0];return"matrix(".concat([e[0],e[1],e[4],e[5],e[12]+n[0],e[13]+n[1]].join(","),")")}},{key:"apply",value:function(e,n){var i=this,a=e.camera,o=e.renderingContext,s=e.renderingService;this.context=e;var l=o.root.ownerDocument.defaultView,c=l.context.eventService.nativeHTMLMap,u=function(m,y){y.style.transform=i.joinTransformMatrix(m.getWorldTransform(),m.getOrigin())},f=function(m){var y=m.target;if(y.nodeName===H.HTML){i.$camera||(i.$camera=i.createCamera(a));var b=i.getOrCreateEl(y);i.$camera.appendChild(b),Object.keys(y.attributes).forEach(function(x){i.updateAttribute(x,y)}),u(y,b),c.set(b,y)}},d=function(m){var y=m.target;if(y.nodeName===H.HTML&&i.$camera){var b=i.getOrCreateEl(y);b&&(b.remove(),c.delete(b))}},h=function(m){var y=m.target;if(y.nodeName===H.HTML){var b=m.attrName;i.updateAttribute(b,y)}},p=function(m){var y=m.target,b=y.nodeName===H.FRAGMENT?y.childNodes:[y];b.forEach(function(x){if(x.nodeName===H.HTML){var O=i.getOrCreateEl(x);u(x,O)}})},v=function(){if(i.$camera){var m=i.context.config,y=m.width,b=m.height;i.$camera.parentElement.style.width="".concat(y||0,"px"),i.$camera.parentElement.style.height="".concat(b||0,"px")}};s.hooks.init.tap(t.tag,function(){l.addEventListener(mn.RESIZE,v),l.addEventListener(Et.MOUNTED,f),l.addEventListener(Et.UNMOUNTED,d),l.addEventListener(Et.ATTR_MODIFIED,h),l.addEventListener(Et.BOUNDS_CHANGED,p)}),s.hooks.endFrame.tap(t.tag,function(){i.$camera&&o.renderReasons.has(Gi.CAMERA_CHANGED)&&(i.$camera.style.transform=i.joinTransformMatrix(a.getOrthoMatrix()))}),s.hooks.destroy.tap(t.tag,function(){i.$camera&&i.$camera.remove(),l.removeEventListener(mn.RESIZE,v),l.removeEventListener(Et.MOUNTED,f),l.removeEventListener(Et.UNMOUNTED,d),l.removeEventListener(Et.ATTR_MODIFIED,h),l.removeEventListener(Et.BOUNDS_CHANGED,p)})}},{key:"createCamera",value:function(e){var n=this.context.config,i=n.document,a=n.width,o=n.height,s=this.context.contextService.getDomElement(),l=s.parentNode;if(l){var c=Gz,u=l.querySelector("#".concat(c));if(!u){var f=(i||document).createElement("div");f.style.overflow="hidden",f.style.pointerEvents="none",f.style.position="absolute",f.style.left="0px",f.style.top="0px",f.style.width="".concat(a||0,"px"),f.style.height="".concat(o||0,"px");var d=(i||document).createElement("div");u=d,d.id=c,d.style.position="absolute",d.style.left="".concat(s.offsetLeft||0,"px"),d.style.top="".concat(s.offsetTop||0,"px"),d.style.transformOrigin="left top",d.style.transform=this.joinTransformMatrix(e.getOrthoMatrix()),d.style.pointerEvents="none",d.style.width="100%",d.style.height="100%",f.appendChild(d),l.appendChild(f)}return u}return null}},{key:"getOrCreateEl",value:function(e){var n=this.context.config.document,i=this.displayObjectHTMLElementMap.get(e);return i||(i=(n||document).createElement("div"),e.parsedStyle.$el=i,this.displayObjectHTMLElementMap.set(e,i),e.id&&(i.id=e.id),e.name&&i.setAttribute("name",e.name),e.className&&(i.className=e.className),i.style.position="absolute",i.style["will-change"]="transform",i.style.transform=this.joinTransformMatrix(e.getWorldTransform(),e.getOrigin())),i}},{key:"updateAttribute",value:function(e,n){var i=this.getOrCreateEl(n);switch(e){case"innerHTML":var a=n.parsedStyle.innerHTML;ce(a)?i.innerHTML=a:(i.innerHTML="",i.appendChild(a));break;case"x":i.style.left="".concat(n.parsedStyle.x,"px");break;case"y":i.style.top="".concat(n.parsedStyle.y,"px");break;case"transformOrigin":var o=n.parsedStyle.transformOrigin;i.style["transform-origin"]="".concat(o[0].buildCSSText(null,null,"")," ").concat(o[1].buildCSSText(null,null,""));break;case"width":var s=n.parsedStyle.width;i.style.width=re(s)?"".concat(s,"px"):s.toString();break;case"height":var l=n.parsedStyle.height;i.style.height=re(l)?"".concat(l,"px"):l.toString();break;case"zIndex":var c=n.parsedStyle.zIndex;i.style["z-index"]="".concat(c);break;case"visibility":var u=n.parsedStyle.visibility;i.style.visibility=u;break;case"pointerEvents":var f=n.parsedStyle.pointerEvents,d=f===void 0?"auto":f;i.style.pointerEvents=d;break;case"opacity":var h=n.parsedStyle.opacity;i.style.opacity="".concat(h);break;case"fill":var p=n.parsedStyle.fill,v="";Ks(p)?p.isNone?v="transparent":v=n.getAttribute("fill"):Array.isArray(p)?v=n.getAttribute("fill"):pi(p),i.style.background=v;break;case"stroke":var g=n.parsedStyle.stroke,m="";Ks(g)?g.isNone?m="transparent":m=n.getAttribute("stroke"):Array.isArray(g)?m=n.getAttribute("stroke"):pi(g),i.style["border-color"]=m,i.style["border-style"]="solid";break;case"lineWidth":var y=n.parsedStyle.lineWidth;i.style["border-width"]="".concat(y||0,"px");break;case"lineDash":i.style["border-style"]="dashed";break;case"filter":var b=n.style.filter;i.style.filter=b;break;default:!pt(n.style[e])&&n.style[e]!==""&&(i.style[e]=n.style[e])}}}])}();nw.tag="HTMLRendering";var Wz=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.name="html-renderer",e}return St(r,t),Z(r,[{key:"init",value:function(){this.addRenderingPlugin(new nw)}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}}])}(Dr);/*!
 * @antv/g-canvas
 * @description A renderer implemented by Canvas 2D API
 * @version 2.0.47
 * @date 7/18/2025, 7:16:40 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var Yz=function(){function t(r){Q(this,t),this.renderingContext=r.renderingContext,this.canvasConfig=r.config}return Z(t,[{key:"init",value:function(){var e=this.canvasConfig,n=e.container,i=e.canvas;if(i)this.$canvas=i,n&&i.parentElement!==n&&n.appendChild(i),this.$container=i.parentElement,this.canvasConfig.container=this.$container;else if(n&&(this.$container=ce(n)?document.getElementById(n):n,this.$container)){var a=document.createElement("canvas");this.$container.appendChild(a),this.$container.style.position||(this.$container.style.position="relative"),this.$canvas=a}this.context=this.$canvas.getContext("2d"),this.resize(this.canvasConfig.width,this.canvasConfig.height)}},{key:"getContext",value:function(){return this.context}},{key:"getDomElement",value:function(){return this.$canvas}},{key:"getDPR",value:function(){return this.dpr}},{key:"getBoundingClientRect",value:function(){if(this.$canvas.getBoundingClientRect)return this.$canvas.getBoundingClientRect()}},{key:"destroy",value:function(){this.$container&&this.$canvas&&this.$canvas.parentNode&&this.$container.removeChild(this.$canvas)}},{key:"resize",value:function(e,n){var i=this.canvasConfig.devicePixelRatio;this.dpr=i,this.$canvas&&(this.$canvas.width=this.dpr*e,this.$canvas.height=this.dpr*n,nL(this.$canvas,e,n)),this.renderingContext.renderReasons.add(Gi.CAMERA_CHANGED)}},{key:"applyCursorStyle",value:function(e){this.$container&&this.$container.style&&(this.$container.style.cursor=e)}},{key:"toDataURL",value:function(){var r=Cr(He().mark(function n(){var i,a,o,s=arguments;return He().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return i=s.length>0&&s[0]!==void 0?s[0]:{},a=i.type,o=i.encoderOptions,l.abrupt("return",this.context.canvas.toDataURL(a,o));case 1:case"end":return l.stop()}},n,this)}));function e(){return r.apply(this,arguments)}return e}()}])}(),Hz=function(t){function r(){var e;Q(this,r);for(var n=arguments.length,i=new Array(n),a=0;a<n;a++)i[a]=arguments[a];return e=kt(this,r,[].concat(i)),e.name="canvas-context-register",e}return St(r,t),Z(r,[{key:"init",value:function(){this.context.ContextService=Yz}},{key:"destroy",value:function(){delete this.context.ContextService}}])}(Dr),rw=function(t){function r(e){var n;return Q(this,r),n=kt(this,r,[e]),n.registerPlugin(new Hz),n.registerPlugin(new Nz),n.registerPlugin(new hz),n.registerPlugin(new $z),n.registerPlugin(new zz),n.registerPlugin(new Lz),n.registerPlugin(new Wz),n}return St(r,t),Z(r)}(UM);/*!
 * @antv/g-plugin-dragndrop
 * @description A G plugin for Drag n Drop implemented with PointerEvents
 * @version 2.0.37
 * @date 7/18/2025, 7:14:02 AM
 * @author AntVis
 * @docs https://g.antv.antgroup.com/
 */var iw=function(){function t(r){Q(this,t),this.dragndropPluginOptions=r}return Z(t,[{key:"apply",value:function(e){var n=this,i=e.renderingService,a=e.renderingContext,o=a.root.ownerDocument,s=o.defaultView,l=function(u){var f=u.target,d=f===o,h=d&&n.dragndropPluginOptions.isDocumentDraggable?o:f.closest&&f.closest("[draggable=true]");if(h){var p=!1,v=u.timeStamp,g=[u.clientX,u.clientY],m=null,y=[u.clientX,u.clientY],b=function(){var O=Cr(He().mark(function w(S){var k,E,_,A,M,T;return He().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(p){C.next=2;break}if(k=S.timeStamp-v,E=en([S.clientX,S.clientY],g),!(k<=n.dragndropPluginOptions.dragstartTimeThreshold||E<=n.dragndropPluginOptions.dragstartDistanceThreshold)){C.next=1;break}return C.abrupt("return");case 1:S.type="dragstart",h.dispatchEvent(S),p=!0;case 2:if(S.type="drag",S.dx=S.clientX-y[0],S.dy=S.clientY-y[1],h.dispatchEvent(S),y=[S.clientX,S.clientY],d){C.next=4;break}return _=n.dragndropPluginOptions.overlap==="pointer"?[S.canvasX,S.canvasY]:f.getBounds().center,C.next=3,o.elementsFromPoint(_[0],_[1]);case 3:A=C.sent,M=A[A.indexOf(f)+1],T=(M==null?void 0:M.closest("[droppable=true]"))||(n.dragndropPluginOptions.isDocumentDroppable?o:null),m!==T&&(m&&(S.type="dragleave",S.target=m,m.dispatchEvent(S)),T&&(S.type="dragenter",S.target=T,T.dispatchEvent(S)),m=T,m&&(S.type="dragover",S.target=m,m.dispatchEvent(S)));case 4:case"end":return C.stop()}},w)}));return function(S){return O.apply(this,arguments)}}();s.addEventListener("pointermove",b);var x=function(w){if(p){w.detail={preventClick:!0};var S=w.clone();m&&(S.type="drop",S.target=m,m.dispatchEvent(S)),S.type="dragend",h.dispatchEvent(S),p=!1}s.removeEventListener("pointermove",b)};f.addEventListener("pointerup",x,{once:!0}),f.addEventListener("pointerupoutside",x,{once:!0})}};i.hooks.init.tap(t.tag,function(){s.addEventListener("pointerdown",l)}),i.hooks.destroy.tap(t.tag,function(){s.removeEventListener("pointerdown",l)})}}])}();iw.tag="Dragndrop";var aw=function(t){function r(){var e,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Q(this,r),e=kt(this,r),e.name="dragndrop",e.options=n,e}return St(r,t),Z(r,[{key:"init",value:function(){this.addRenderingPlugin(new iw(wt({overlap:"pointer",isDocumentDraggable:!1,isDocumentDroppable:!1,dragstartDistanceThreshold:0,dragstartTimeThreshold:0},this.options)))}},{key:"destroy",value:function(){this.removeAllRenderingPlugins()}},{key:"setOptions",value:function(n){Object.assign(this.plugins[0].dragndropPluginOptions,n)}}])}(Dr),Vz="*",ow=function(){function t(){this._events={}}return t.prototype.on=function(r,e,n){return this._events[r]||(this._events[r]=[]),this._events[r].push({callback:e,once:!!n}),this},t.prototype.once=function(r,e){return this.on(r,e,!0)},t.prototype.emit=function(r){for(var e=this,n=[],i=1;i<arguments.length;i++)n[i-1]=arguments[i];var a=this._events[r]||[],o=this._events[Vz]||[],s=function(l){for(var c=l.length,u=0;u<c;u++)if(l[u]){var f=l[u],d=f.callback,h=f.once;h&&(l.splice(u,1),l.length===0&&delete e._events[r],c--,u--),d.apply(e,n)}};s(a),s(o)},t.prototype.off=function(r,e){if(!r)this._events={};else if(!e)delete this._events[r];else{for(var n=this._events[r]||[],i=n.length,a=0;a<i;a++)n[a].callback===e&&(n.splice(a,1),i--,a--);n.length===0&&delete this._events[r]}return this},t.prototype.getEvents=function(){return this._events},t}();const Dt={BEFORE_RENDER:"beforerender",AFTER_RENDER:"afterrender",BEFORE_PAINT:"beforepaint",AFTER_PAINT:"afterpaint",BEFORE_CLEAR:"beforeclear",AFTER_CLEAR:"afterclear",BEFORE_DESTROY:"beforedestroy",AFTER_DESTROY:"afterdestroy",BEFORE_CHANGE_SIZE:"beforechangesize",AFTER_CHANGE_SIZE:"afterchangesize",POINTER_TAP:"pointertap",POINTER_DOWN:"pointerdown",POINTER_UP:"pointerup",POINTER_OVER:"pointerover",POINTER_OUT:"pointerout",POINTER_MOVE:"pointermove",POINTER_ENTER:"pointerenter",POINTER_LEAVE:"pointerleave",POINTER_UPOUTSIDE:"pointerupoutside",DRAG_START:"dragstart",DRAG:"drag",DRAG_END:"dragend",DRAG_ENTER:"dragenter",DRAG_LEAVE:"dragleave",DRAG_OVER:"dragover",DROP:"DROP",CLICK:"click",DBLCLICK:"dblclick"},Xz={abs:Math.abs,ceil:Math.ceil,floor:Math.floor,max:Math.max,min:Math.min,round:Math.round,sqrt:Math.sqrt,pow:Math.pow};class Me extends Error{constructor(r,e,n){super(r),this.position=e,this.token=n,this.name="ExpressionError"}}var xt;(function(t){t[t.STRING=0]="STRING",t[t.NUMBER=1]="NUMBER",t[t.BOOLEAN=2]="BOOLEAN",t[t.NULL=3]="NULL",t[t.IDENTIFIER=4]="IDENTIFIER",t[t.OPERATOR=5]="OPERATOR",t[t.FUNCTION=6]="FUNCTION",t[t.DOT=7]="DOT",t[t.BRACKET_LEFT=8]="BRACKET_LEFT",t[t.BRACKET_RIGHT=9]="BRACKET_RIGHT",t[t.PAREN_LEFT=10]="PAREN_LEFT",t[t.PAREN_RIGHT=11]="PAREN_RIGHT",t[t.COMMA=12]="COMMA",t[t.QUESTION=13]="QUESTION",t[t.COLON=14]="COLON",t[t.DOLLAR=15]="DOLLAR"})(xt||(xt={}));const Uz=new Set([32,9,10,13]),qz=new Set([43,45,42,47,37,33,38,124,61,60,62]),Kz=new Map([["true",xt.BOOLEAN],["false",xt.BOOLEAN],["null",xt.NULL]]),Uc=new Map([["===",!0],["!==",!0],["<=",!0],[">=",!0],["&&",!0],["||",!0],["+",!0],["-",!0],["*",!0],["/",!0],["%",!0],["!",!0],["<",!0],[">",!0]]),Zz=new Map([[46,xt.DOT],[91,xt.BRACKET_LEFT],[93,xt.BRACKET_RIGHT],[40,xt.PAREN_LEFT],[41,xt.PAREN_RIGHT],[44,xt.COMMA],[63,xt.QUESTION],[58,xt.COLON],[36,xt.DOLLAR]]),sw=new Map;for(const[t,r]of Zz.entries())sw.set(t,{type:r,value:String.fromCharCode(t)});function Ra(t){return t>=48&&t<=57}function qu(t){return t>=97&&t<=122||t>=65&&t<=90||t===95}function og(t){return qu(t)||Ra(t)}function Qz(t){return qz.has(t)}var ge;(function(t){t[t.Program=0]="Program",t[t.Literal=1]="Literal",t[t.Identifier=2]="Identifier",t[t.MemberExpression=3]="MemberExpression",t[t.CallExpression=4]="CallExpression",t[t.BinaryExpression=5]="BinaryExpression",t[t.UnaryExpression=6]="UnaryExpression",t[t.ConditionalExpression=7]="ConditionalExpression"})(ge||(ge={}));const Jz=new Map([["||",2],["&&",3],["===",4],["!==",4],[">",5],[">=",5],["<",5],["<=",5],["+",6],["-",6],["*",7],["/",7],["%",7],["!",8]]),tG={type:ge.Literal,value:null},eG={type:ge.Literal,value:!0},nG={type:ge.Literal,value:!1},rG=t=>{let r=0;const e=t.length,n=()=>r>=e?null:t[r],i=()=>t[r++],a=f=>{const d=n();return d!==null&&d.type===f},o=f=>f.type===xt.OPERATOR?Jz.get(f.value)||-1:f.type===xt.DOT||f.type===xt.BRACKET_LEFT?9:f.type===xt.QUESTION?1:-1,s=f=>{let d,h;if(i().type===xt.DOT){if(!a(xt.IDENTIFIER)){const v=n();throw new Me("Expected property name",r,v?v.value:"<end of input>")}const p=i();d={type:ge.Identifier,name:p.value},h=!1}else{if(d=c(0),!a(xt.BRACKET_RIGHT)){const p=n();throw new Me("Expected closing bracket",r,p?p.value:"<end of input>")}i(),h=!0}return{type:ge.MemberExpression,object:f,property:d,computed:h}},l=()=>{const f=n();if(!f)throw new Me("Unexpected end of input",r,"<end of input>");if(f.type===xt.OPERATOR&&(f.value==="!"||f.value==="-")){i();const d=l();return{type:ge.UnaryExpression,operator:f.value,argument:d,prefix:!0}}switch(f.type){case xt.NUMBER:return i(),{type:ge.Literal,value:Number(f.value)};case xt.STRING:return i(),{type:ge.Literal,value:f.value};case xt.BOOLEAN:return i(),f.value==="true"?eG:nG;case xt.NULL:return i(),tG;case xt.IDENTIFIER:return i(),{type:ge.Identifier,name:f.value};case xt.FUNCTION:return(()=>{const d=i(),h=[];if(!a(xt.PAREN_LEFT)){const p=n();throw new Me("Expected opening parenthesis after function name",r,p?p.value:"<end of input>")}for(i();;){if(a(xt.PAREN_RIGHT)){i();break}if(!n()){const v=n();throw new Me("Expected closing parenthesis",r,v?v.value:"<end of input>")}if(h.length>0){if(!a(xt.COMMA)){const v=n();throw new Me("Expected comma between function arguments",r,v?v.value:"<end of input>")}i()}const p=c(0);h.push(p)}return{type:ge.CallExpression,callee:{type:ge.Identifier,name:d.value},arguments:h}})();case xt.PAREN_LEFT:{i();const d=c(0);if(!a(xt.PAREN_RIGHT)){const h=n();throw new Me("Expected closing parenthesis",r,h?h.value:"<end of input>")}return i(),d}default:throw new Me(`Unexpected token: ${f.type}`,r,f.value)}},c=(f=0)=>{let d=l();for(;r<e;){const h=t[r],p=o(h);if(p<=f)break;if(h.type!==xt.QUESTION)if(h.type!==xt.OPERATOR){if(h.type!==xt.DOT&&h.type!==xt.BRACKET_LEFT)break;d=s(d)}else{i();const v=c(p);d={type:ge.BinaryExpression,operator:h.value,left:d,right:v}}else{i();const v=c(0);if(!a(xt.COLON)){const m=n();throw new Me("Expected : in conditional expression",r,m?m.value:"<end of input>")}i();const g=c(0);d={type:ge.ConditionalExpression,test:d,consequent:v,alternate:g}}}return d},u=c();return{type:ge.Program,body:u}},iG=(t,r,e)=>{let n=r;e&&(n={...r,context:{...r.context,...e}});const i=a=>{switch(a.type){case ge.Literal:return(o=>o.value)(a);case ge.Identifier:return(o=>{if(!(o.name in n.context))throw new Me(`Undefined variable: ${o.name}`);return n.context[o.name]})(a);case ge.MemberExpression:return(o=>{const s=i(o.object);if(s==null)throw new Me("Cannot access property of null or undefined");return s[o.computed?i(o.property):o.property.name]})(a);case ge.CallExpression:return(o=>{const s=n.functions[o.callee.name];if(!s)throw new Me(`Undefined function: ${o.callee.name}`);return s(...o.arguments.map(l=>i(l)))})(a);case ge.BinaryExpression:return(o=>{if(o.operator==="&&"){const c=i(o.left);return c&&i(o.right)}if(o.operator==="||")return i(o.left)||i(o.right);const s=i(o.left),l=i(o.right);switch(o.operator){case"+":return s+l;case"-":return s-l;case"*":return s*l;case"/":return s/l;case"%":return s%l;case"===":return s===l;case"!==":return s!==l;case">":return s>l;case">=":return s>=l;case"<":return s<l;case"<=":return s<=l;default:throw new Me(`Unknown operator: ${o.operator}`)}})(a);case ge.UnaryExpression:return(o=>{const s=i(o.argument);if(o.prefix)switch(o.operator){case"!":return!s;case"-":if(typeof s!="number")throw new Me(`Cannot apply unary - to non-number: ${s}`);return-s;default:throw new Me(`Unknown operator: ${o.operator}`)}throw new Me(`Postfix operators are not supported: ${o.operator}`)})(a);case ge.ConditionalExpression:return(o=>{const s=i(o.test);return i(s?o.consequent:o.alternate)})(a);default:throw new Me(`Evaluation error: Unsupported node type: ${a.type}`)}};return i(t.body)};function aG(t){const r=(i=>{const a=i,o=a.length,s=new Array(Math.ceil(o/3));let l=0,c=0;function u(g){const m=c+1;c++;let y="",b=!1;for(;c<o;){const x=a.charCodeAt(c);if(x===g)return b||(y=a.substring(m,c)),c++,{type:xt.STRING,value:y};x===92?(b||(y=a.substring(m,c),b=!0),c++,y+=a[c]):b&&(y+=a[c]),c++}throw new Me(`Unterminated string starting with ${String.fromCharCode(g)}`,c,a.substring(Math.max(0,c-10),c))}function f(){const g=c;for(a.charCodeAt(c)===45&&c++;c<o&&Ra(a.charCodeAt(c));)c++;if(c<o&&a.charCodeAt(c)===46)for(c++;c<o&&Ra(a.charCodeAt(c));)c++;const m=a.slice(g,c);return{type:xt.NUMBER,value:m}}function d(){c++;const g=c;if(c<o&&qu(a.charCodeAt(c)))for(c++;c<o&&og(a.charCodeAt(c));)c++;const m=a.slice(g,c);return{type:xt.FUNCTION,value:m}}function h(){const g=c++;for(;c<o&&og(a.charCodeAt(c));)c++;const m=a.slice(g,c),y=Kz.get(m);return y?{type:y,value:m}:{type:xt.IDENTIFIER,value:m}}function p(){if(c+2<o){const m=a.substring(c,c+3);if(Uc.has(m))return c+=3,{type:xt.OPERATOR,value:m}}if(c+1<o){const m=a.substring(c,c+2);if(Uc.has(m))return c+=2,{type:xt.OPERATOR,value:m}}const g=a[c];if(Uc.has(g))return c++,{type:xt.OPERATOR,value:g};throw new Me(`Unknown operator at position ${c}: ${a.substring(c,c+1)}`,c,a.substring(Math.max(0,c-10),c))}for(;c<o;){const g=a.charCodeAt(c);if(v=g,Uz.has(v)){c++;continue}const m=sw.get(g);if(m)s[l++]=m,c++;else if(g!==34&&g!==39)if(Ra(g)||g===45&&c+1<o&&Ra(a.charCodeAt(c+1)))s[l++]=f();else if(g!==64)if(qu(g))s[l++]=h();else{if(!Qz(g))throw new Me(`Unexpected character: ${a[c]}`,c,a.substring(Math.max(0,c-10),c));s[l++]=p()}else s[l++]=d();else s[l++]=u(g)}var v;return l===s.length?s:s.slice(0,l)})(t),e=rG(r),n=((i={},a={})=>({context:i,functions:a}))({},Xz);return(i={})=>iG(e,n,i)}const oG=["style","encode","labels","children"],sG=cx(t=>{const r=aG(t);return(...e)=>{const n=Array.from({length:e.length},(a,o)=>String.fromCharCode(97+o)),i=Object.fromEntries(e.map((a,o)=>[n[o],a]));return r(Object.assign(Object.assign({},i),{global:Object.assign({},i)}))}},t=>t,128);function Ps(t,r=!0){if(Array.isArray(t))return t.map((e,n)=>Ps(t[n],r));if(typeof t=="object"&&t)return VA(t,(e,n)=>r&&oG.includes(n)?Ps(e,n==="children"):r?e:Ps(e,!1));if(typeof t=="string"){const e=t.trim();if(e.startsWith("{")&&e.endsWith("}"))return sG(e.slice(1,-1))}return t}const lG=[["legendCategory",[[["color","discrete"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["shape","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","discrete"]],[["color","discrete"],["opacity","discrete"],["size","constant"]],[["color","discrete"],["opacity","constant"],["shape","discrete"]],[["color","discrete"],["opacity","constant"],["size","constant"]],[["color","discrete"],["shape","constant"],["size","constant"]],[["color","discrete"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["opacity","constant"],["shape","constant"]],[["color","constant"],["shape","discrete"],["size","constant"]],[["color","constant"],["opacity","discrete"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["size","constant"]],[["color","constant"],["opacity","constant"],["shape","discrete"]],[["color","constant"],["opacity","discrete"],["shape","constant"]],[["color","discrete"],["shape","discrete"]],[["color","discrete"],["size","constant"]],[["color","discrete"],["opacity","discrete"]],[["color","discrete"],["opacity","constant"]],[["color","discrete"],["shape","constant"]],[["color","constant"],["shape","discrete"]],[["color","constant"],["size","constant"]],[["color","constant"],["opacity","discrete"]],[["color","discrete"]]]],["legendContinuousSize",[[["color","continuous"],["opacity","continuous"],["size","continuous"]],[["color","constant"],["opacity","continuous"],["size","continuous"]],[["color","continuous"],["size","continuous"]],[["color","constant"],["size","continuous"]],[["size","continuous"],["opacity","continuous"]],[["size","continuous"]]]],["legendContinuousBlockSize",[[["color","distribution"],["opacity","distribution"],["size","distribution"]],[["color","distribution"],["size","distribution"]]]],["legendContinuousBlock",[[["color","distribution"],["opacity","continuous"]],[["color","distribution"]]]],["legendContinuous",[[["color","continuous"],["opacity","continuous"]],[["color","continuous"]],[["opacity","continuous"]]]]];var cG={}.toString,ac=function(t,r){return cG.call(t)==="[object "+r+"]"};const lw=function(t){return ac(t,"Function")},cw=function(t){return Array.isArray?Array.isArray(t):ac(t,"Array")},uG=function(t){var r=typeof t;return t!==null&&r==="object"||r==="function"};function fG(t,r){if(t){var e;if(cw(t))for(var n=0,i=t.length;n<i&&(e=r(t[n],n),e!==!1);n++);else if(uG(t)){for(var a in t)if(t.hasOwnProperty(a)&&(e=r(t[a],a),e===!1))break}}}var dG=function(t){return typeof t=="object"&&t!==null},sg=function(t){if(!dG(t)||!ac(t,"Object"))return!1;if(Object.getPrototypeOf(t)===null)return!0;for(var r=t;Object.getPrototypeOf(r)!==null;)r=Object.getPrototypeOf(r);return Object.getPrototypeOf(t)===r};const hG=function(t){return ac(t,"String")};var pG=Object.values?function(t){return Object.values(t)}:function(t){var r=[];return fG(t,function(e,n){lw(t)&&n==="prototype"||r.push(e)}),r};const vG=function(t,r){if(!lw(t))throw new TypeError("Expected a function");var e=function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];var a=r?r.apply(this,n):n[0],o=e.cache;if(o.has(a))return o.get(a);var s=t.apply(this,n);return o.set(a,s),s};return e.cache=new Map,e};var gG=5;function uw(t,r,e,n){e=e||0,n=n||gG;for(var i in r)if(r.hasOwnProperty(i)){var a=r[i];a!==null&&sg(a)?(sg(t[i])||(t[i]={}),e<n?uw(t[i],a,e+1,n):t[i]=r[i]):cw(a)?(t[i]=[],t[i]=t[i].concat(a)):a!==void 0&&(t[i]=a)}}var fw=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];for(var n=0;n<r.length;n+=1)uw(t,r[n]);return t};const $d=function(t){return t};var xs;vG(function(t,r){r===void 0&&(r={});var e=r.fontSize,n=r.fontFamily,i=r.fontWeight,a=r.fontStyle,o=r.fontVariant;return xs||(xs=document.createElement("canvas").getContext("2d")),xs.font=[a,o,i,e+"px",n].join(" "),xs.measureText(hG(t)?t:"").width},function(t,r){return r===void 0&&(r={}),Kk([t],pG(r)).join("")});function dw(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return t?r.reduce(function(n,i){return function(a){return i(n(a))}},t):$d}function hw(t){return t instanceof Float32Array||t instanceof Array}var pw=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},vw=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))};function mG(t){return function(r){for(var e=[],n=0;n<r.length-1;n+=2){var i=[r[n],r[n+1]],a=t(i);e.push.apply(e,vw([],pw(a),!1))}return e}}function yG(t){return function(r){for(var e=[],n=0;n<r.length-1;n+=3){var i=[r[n],r[n+1],r[n+2]],a=t(i);e.push.apply(e,vw([],pw(a),!1))}return e}}function gw(t,r,e){for(;t<r;)t+=Math.PI*2;for(;t>e;)t-=Math.PI*2;return t}var bG=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},xG=function(t,r,e,n,i){var a=bG(t,2),o=a[0],s=a[1],l=uo();return Yk(l,[o,s])},lg=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},OG=function(t,r,e,n,i){var a=new Zt({range:[r,r+n]}),o=new Zt({range:[e,e+i]});return{transform:function(s){var l=lg(s,2),c=l[0],u=l[1];return[a.map(c),o.map(u)]},untransform:function(s){var l=lg(s,2),c=l[0],u=l[1];return[a.invert(c),o.invert(u)]}}},wG=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},SG=function(t,r,e,n,i){var a=wG(t,1),o=a[0];return o(r,e,n,i)},kG=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},EG=function(t,r,e,n,i){var a=kG(t,1),o=a[0];return o},qc=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},_G=function(t,r,e,n,i){var a=qc(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=new Zt({range:[l,c]}),f=new Zt({range:[o,s]}),d=i/n,h=d>1?1:d,p=d>1?1/d:1;return{transform:function(v){var g=qc(v,2),m=g[0],y=g[1],b=f.map(m),x=u.map(y),O=x*Math.cos(b)*h,w=x*Math.sin(b)*p,S=O*.5+.5,k=w*.5+.5;return[S,k]},untransform:function(v){var g=qc(v,2),m=g[0],y=g[1],b=(m-.5)*2/h,x=(y-.5)*2/p,O=Math.sqrt(Math.pow(b,2)+Math.pow(x,2)),w=Math.atan2(x,b),S=gw(w,o,s),k=f.invert(S),E=u.invert(O);return[k,E]}}},cg=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},AG=function(t,r,e,n,i){return{transform:function(a){var o=cg(a,2),s=o[0],l=o[1];return[l,s]},untransform:function(a){var o=cg(a,2),s=o[0],l=o[1];return[l,s]}}},TG=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},oc=function(t,r,e,n,i){var a=TG(t,2),o=a[0],s=a[1],l=uo();return Hk(l,[o,s])},zd=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Gd=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},MG=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return oc.apply(void 0,Gd([[-1,-1]],zd(r),!1))},PG=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return oc.apply(void 0,Gd([[-1,1]],zd(r),!1))},CG=function(t){for(var r=[],e=1;e<arguments.length;e++)r[e-1]=arguments[e];return oc.apply(void 0,Gd([[1,-1]],zd(r),!1))},LG=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},RG=function(t,r,e,n,i){var a=LG(t,1),o=a[0],s=uo();return Vk(s,o)},Kc=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},NG=function(t,r,e,n,i){var a=Kc(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=(s-0)/(2*Math.PI)+1,f=(c-l)/u,d=f/(Math.PI*2),h=new Zt({range:[l,l+f*.99]}),p=new Zt({range:[o,s]}),v=i/n,g=v>1?1:v,m=v>1?1/v:1;return{transform:function(y){var b=Kc(y,2),x=b[0],O=b[1],w=p.map(x),S=h.map(O),k=Math.cos(w)*(d*w+S)*g,E=Math.sin(w)*(d*w+S)*m,_=k*.5+.5,A=E*.5+.5;return[_,A]},untransform:function(y){var b=Kc(y,2),x=b[0],O=b[1],w=(x-.5)*2/g,S=(O-.5)*2/m,k=Math.sqrt(Math.pow(w,2)+Math.pow(S,2)),E=Math.atan2(S,w)+Math.floor(k/f)*Math.PI*2,_=gw(E,o,s),A=k-d*_,M=p.invert(_),T=h.invert(A);return[M,T]}}},IG=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},jG=function(t,r,e,n,i){var a=IG(t,4),o=a[0],s=a[1],l=a[2],c=a[3],u=new Zt({range:[l,c]});return{transform:function(f){for(var d=[],h=f.length,p=new oy({domain:new Array(h).fill(0).map(function(b,x){return x}),range:[o,s]}),v=0;v<h;v++){var g=f[v],m=p.map(v),y=u.map(g);d.push(m,y)}return d},untransform:function(f){for(var d=[],h=0;h<f.length;h+=2){var p=f[h+1];d.push(u.invert(p))}return d}}},Wi=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};function mw(t){return 1/Math.tan(t)}var DG=function(t,r,e,n,i){var a=Wi(t,1),o=a[0],s=mw(o);return{transform:function(l){var c=Wi(l,2),u=c[0],f=c[1],d=u+f*s;return[d,f]},untransform:function(l){var c=Wi(l,2),u=c[0],f=c[1],d=u-f*s;return[d,f]}}},BG=function(t,r,e,n,i){var a=Wi(t,1),o=a[0],s=mw(o);return{transform:function(l){var c=Wi(l,2),u=c[0],f=c[1],d=f+u*s;return[u,d]},untransform:function(l){var c=Wi(l,2),u=c[0],f=c[1],d=f-u*s;return[u,d]}}},bn=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a};function ao(t,r,e,n,i){var a=t<r,o=(a?r-n:i-r)||i-n,s=a?-1:1;return s*o*(e+1)/(e+o/((t-r)*s))+r}function oo(t,r,e,n,i){var a=t<r,o=(a?r-n:i-r)||i-n,s=a?-1:1;return o/(o*(e+1)/(t-r)-e*s)+r}function gl(t,r,e){if(!e)return t;var n=new Zt({range:[0,1],domain:[0,r]});return n.map(t)}var FG=function(t,r,e,n,i){var a=bn(t,3),o=a[0],s=a[1],l=a[2],c=l===void 0?!1:l,u=gl(o,n,c);return{transform:function(f){var d=bn(f,2),h=d[0],p=d[1],v=ao(h,u,s,0,1);return[v,p]},untransform:function(f){var d=bn(f,2),h=d[0],p=d[1],v=oo(h,u,s,0,1);return[v,p]}}},$G=function(t,r,e,n,i){var a=bn(t,3),o=a[0],s=a[1],l=a[2],c=l===void 0?!1:l,u=gl(o,i,c);return{transform:function(f){var d=bn(f,2),h=d[0],p=d[1],v=ao(p,u,s,0,1);return[h,v]},untransform:function(f){var d=bn(f,2),h=d[0],p=d[1],v=oo(p,u,s,0,1);return[h,v]}}},zG=function(t,r,e,n,i){var a=bn(t,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],f=u===void 0?!1:u,d=gl(o,n,f),h=gl(s,i,f);return{transform:function(p){var v=bn(p,2),g=v[0],m=v[1],y=ao(g,d,l,0,1),b=ao(m,h,c,0,1);return[y,b]},untransform:function(p){var v=bn(p,2),g=v[0],m=v[1],y=oo(g,d,l,0,1),b=oo(m,h,c,0,1);return[y,b]}}},GG=function(t,r,e,n,i){var a=bn(t,5),o=a[0],s=a[1],l=a[2],c=a[3],u=a[4],f=u===void 0?!1:u,d=new Zt({range:[0,n]}),h=new Zt({range:[0,i]}),p=f?o:d.map(o),v=f?s:h.map(s);return{transform:function(g){var m=bn(g,2),y=m[0],b=m[1],x=d.map(y)-p,O=h.map(b)-v,w=Math.sqrt(x*x+O*O);if(w>l)return[y,b];var S=ao(w,0,c,0,l),k=Math.atan2(O,x),E=p+S*Math.cos(k),_=v+S*Math.sin(k);return[d.invert(E),h.invert(_)]},untransform:function(g){var m=bn(g,2),y=m[0],b=m[1],x=d.map(y)-p,O=h.map(b)-v,w=Math.sqrt(x*x+O*O);if(w>l)return[y,b];var S=oo(w,0,c,0,l),k=Math.atan2(O,x),E=p+S*Math.cos(k),_=v+S*Math.sin(k);return[d.invert(E),h.invert(_)]}}},ug=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},WG=function(t,r,e,n,i,a,o){var s=new Zt({range:[r,r+i]}),l=new Zt({range:[e,e+a]}),c=new Zt({range:[n,n+o]});return{transform:function(u){var f=ug(u,3),d=f[0],h=f[1],p=f[2];return[s.map(d),l.map(h),c.map(p)]},untransform:function(u){var f=ug(u,3),d=f[0],h=f[1],p=f[2];return[s.invert(d),l.invert(h),c.invert(p)]}}},YG=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},HG=function(t,r,e,n,i,a,o){var s=YG(t,3),l=s[0],c=s[1],u=s[2];return xr(Bt(),[l,c,u])},fg=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},VG=function(t,r,e,n,i,a,o){return{transform:function(s){var l=fg(s,3),c=l[0],u=l[1],f=l[2];return[u,c,f]},untransform:function(s){var l=fg(s,3),c=l[0],u=l[1],f=l[2];return[u,c,f]}}},XG=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},UG=function(t,r,e,n,i,a,o){var s=XG(t,3),l=s[0],c=s[1],u=s[2];return ti(Bt(),[l,c,u])},Ri=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},Ni=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},qG=function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},KG=function(){function t(r){this.options={x:0,y:0,width:300,height:150,transformations:[]},this.transformers={cartesian:OG,translate:xG,custom:SG,matrix:EG,polar:_G,transpose:AG,scale:oc,"shear.x":DG,"shear.y":BG,reflect:MG,"reflect.x":PG,"reflect.y":CG,rotate:RG,helix:NG,parallel:jG,fisheye:zG,"fisheye.x":FG,"fisheye.y":$G,"fisheye.circular":GG},this.update(r)}return t.prototype.update=function(r){this.options=fw({},this.options,r),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var r=this.options,e=r.width,n=r.height;return[e,n]},t.prototype.getCenter=function(){var r=this.options,e=r.x,n=r.y,i=r.width,a=r.height;return[(e*2+i)/2,(n*2+a)/2]},t.prototype.transform=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=this.options.transformations;return this.update({transformations:Ni(Ni([],Ri(n),!1),[Ni([],Ri(r),!1)],!1)}),this},t.prototype.map=function(r){return this.output(r)},t.prototype.invert=function(r){return this.input(r)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(r){var e,n;r===void 0&&(r=!1);var i=r?Ni([],Ri(this.options.transformations),!1).reverse():this.options.transformations,a=r?function(S){return S.untransform}:function(S){return S.transform},o=[],s=[],l=function(S,k){return k===void 0&&(k=!0),s.push(k?mG(S):S)};try{for(var c=qG(i),u=c.next();!u.done;u=c.next()){var f=Ri(u.value),d=f[0],h=f.slice(1),p=this.transformers[d];if(p){var v=this.options,g=v.x,m=v.y,y=v.width,b=v.height,x=p(Ni([],Ri(h),!1),g,m,y,b);if(hw(x))o.push(x);else{if(o.length){var O=this.createMatrixTransform(o,r);l(O),o.splice(0,o.length)}var w=a(x)||$d;l(w,d!=="parallel")}}}}catch(S){e={error:S}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}if(o.length){var w=this.createMatrixTransform(o,r);l(w)}return dw.apply(void 0,Ni([],Ri(s),!1))},t.prototype.createMatrixTransform=function(r,e){var n=uo();return e&&r.reverse(),r.forEach(function(i){return Xk(n,n,i)}),e&&Uk(n,qk(n)),function(i){var a=[i[0],i[1],1];return rm(a,a,n),[a[0],a[1]]}},t}(),Ii=function(t,r){var e=typeof Symbol=="function"&&t[Symbol.iterator];if(!e)return t;var n=e.call(t),i,a=[],o;try{for(;(r===void 0||r-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){o={error:s}}finally{try{i&&!i.done&&(e=n.return)&&e.call(n)}finally{if(o)throw o.error}}return a},ji=function(t,r,e){if(e||arguments.length===2)for(var n=0,i=r.length,a;n<i;n++)(a||!(n in r))&&(a||(a=Array.prototype.slice.call(r,0,n)),a[n]=r[n]);return t.concat(a||Array.prototype.slice.call(r))},ZG=function(t){var r=typeof Symbol=="function"&&Symbol.iterator,e=r&&t[r],n=0;if(e)return e.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(r?"Object is not iterable.":"Symbol.iterator is not defined.")},QG=function(){function t(r){this.options={x:0,y:0,z:0,width:300,height:150,depth:150,transformations:[]},this.transformers={cartesian3D:WG,translate3D:HG,scale3D:UG,transpose3D:VG},this.update(r)}return t.prototype.update=function(r){this.options=fw({},this.options,r),this.recoordinate()},t.prototype.clone=function(){return new t(this.options)},t.prototype.getOptions=function(){return this.options},t.prototype.clear=function(){this.update({transformations:[]})},t.prototype.getSize=function(){var r=this.options,e=r.width,n=r.height,i=r.depth;return[e,n,i]},t.prototype.getCenter=function(){var r=this.options,e=r.x,n=r.y,i=r.z,a=r.width,o=r.height,s=r.depth;return[(e*2+a)/2,(n*2+o)/2,(i*2+s)/2]},t.prototype.transform=function(){for(var r=[],e=0;e<arguments.length;e++)r[e]=arguments[e];var n=this.options.transformations;return this.update({transformations:ji(ji([],Ii(n),!1),[ji([],Ii(r),!1)],!1)}),this},t.prototype.map=function(r){return this.output(r)},t.prototype.invert=function(r){return this.input(r)},t.prototype.recoordinate=function(){this.output=this.compose(),this.input=this.compose(!0)},t.prototype.compose=function(r){var e,n;r===void 0&&(r=!1);var i=r?ji([],Ii(this.options.transformations),!1).reverse():this.options.transformations,a=r?function(E){return E.untransform}:function(E){return E.transform},o=[],s=[],l=function(E,_){return _===void 0&&(_=!0),s.push(_?yG(E):E)};try{for(var c=ZG(i),u=c.next();!u.done;u=c.next()){var f=Ii(u.value),d=f[0],h=f.slice(1),p=this.transformers[d];if(p){var v=this.options,g=v.x,m=v.y,y=v.z,b=v.width,x=v.height,O=v.depth,w=p(ji([],Ii(h),!1),g,m,y,b,x,O);if(hw(w))o.push(w);else{if(o.length){var S=this.createMatrixTransform(o,r);l(S),o.splice(0,o.length)}var k=a(w)||$d;l(k,!0)}}}}catch(E){e={error:E}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(e)throw e.error}}if(o.length){var k=this.createMatrixTransform(o,r);l(k)}return dw.apply(void 0,ji([],Ii(s),!1))},t.prototype.createMatrixTransform=function(r,e){var n=Bt();return e&&r.reverse(),r.forEach(function(i){return am(n,n,i)}),e&&Hn(n,om(n)),function(i){var a=[i[0],i[1],i[2],1];return Yn(a,a,n),[a[0],a[1],a[2]]}},t}(),JG=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Co(t){return(r,...e)=>X({},t(r,...e),r)}function Ti(t){return(r,...e)=>X({},r,t(r,...e))}function tW(t){return t instanceof Date?!1:typeof t=="object"}function Wd(t,r){if(!t)return r;if(Array.isArray(t))return t;if(tW(t)){const{value:e=r}=t,n=JG(t,["value"]);return Object.assign(Object.assign({},n),{value:e})}return t}var eW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const yw=()=>t=>{const{children:r}=t;if(!Array.isArray(r))return[];const{x:e=0,y:n=0,width:i,height:a,data:o}=t;return r.map(s=>{var{data:l,x:c,y:u,width:f,height:d}=s,h=eW(s,["data","x","y","width","height"]);return Object.assign(Object.assign({},h),{data:Wd(l,o),x:c??e,y:u??n,width:f??i,height:d??a})})};yw.props={};var nW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const bw=()=>t=>{const{children:r}=t;if(!Array.isArray(r))return[];const{direction:e="row",ratio:n=r.map(()=>1),padding:i=0,data:a}=t,[o,s,l,c]=e==="col"?["y","height","width","x"]:["x","width","height","y"],u=n.reduce((v,g)=>v+g),f=t[s]-i*(r.length-1),d=n.map(v=>f*(v/u)),h=[];let p=t[o]||0;for(let v=0;v<d.length;v+=1){const g=r[v],{data:m}=g,y=nW(g,["data"]),b=Wd(m,a);h.push(Object.assign({[o]:p,[s]:d[v],[c]:t[c]||0,[l]:t[l],data:b},y)),p+=d[v]+i}return h};bw.props={};var Zc=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const xw=()=>t=>{const{children:r}=t,e=Zc(t,["children"]);if(!Array.isArray(r))return[];const{data:n,scale:i={},axis:a={},legend:o={},encode:s={},transform:l=[]}=e,c=Zc(e,["data","scale","axis","legend","encode","transform"]),u=r.map(f=>{var{data:d,scale:h={},axis:p={},legend:v={},encode:g={},transform:m=[]}=f,y=Zc(f,["data","scale","axis","legend","encode","transform"]);return Object.assign({data:Wd(d,n),scale:X({},i,h),encode:X({},s,g),transform:[...l,...m],axis:p&&a?X({},a,p):!1,legend:v&&o?X({},o,v):!1},y)});return[Object.assign(Object.assign({},c),{marks:u,type:"standardView"})]};xw.props={};var rW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const Ow=({static:t=!1}={})=>r=>{const{width:e,height:n,depth:i,paddingLeft:a,paddingRight:o,paddingTop:s,paddingBottom:l,padding:c,inset:u,insetLeft:f,insetTop:d,insetRight:h,insetBottom:p,margin:v,marginLeft:g,marginBottom:m,marginTop:y,marginRight:b,data:x,coordinate:O,theme:w,component:S,interaction:k,x:E,y:_,z:A,key:M,frame:T,labelTransform:C,parentKey:I,clip:R,viewStyle:L,title:P}=r,N=rW(r,["width","height","depth","paddingLeft","paddingRight","paddingTop","paddingBottom","padding","inset","insetLeft","insetTop","insetRight","insetBottom","margin","marginLeft","marginBottom","marginTop","marginRight","data","coordinate","theme","component","interaction","x","y","z","key","frame","labelTransform","parentKey","clip","viewStyle","title"]);return[Object.assign(Object.assign({type:"standardView",x:E,y:_,z:A,key:M,width:e,height:n,depth:i,padding:c,paddingLeft:a,paddingRight:o,paddingTop:s,inset:u,insetLeft:f,insetTop:d,insetRight:h,insetBottom:p,paddingBottom:l,theme:w,coordinate:O,component:S,interaction:k,frame:T,labelTransform:C,margin:v,marginLeft:g,marginBottom:m,marginTop:y,marginRight:b,parentKey:I,clip:R,style:L},!t&&{title:P}),{marks:[Object.assign(Object.assign(Object.assign({},N),{key:`${M}-0`,data:x}),t&&{title:P})]})]};Ow.props={};class Lo{constructor(r){this.$value=r}static of(r){return new Lo(r)}call(r,...e){return this.$value=r(this.$value,...e),this}value(){return this.$value}}var iW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const aW=Co(t=>{const{encode:r,data:e,scale:n,shareSize:i=!1}=t,{x:a,y:o}=r,s=(l,c)=>{var u;if(l===void 0||!i)return{};const f=Kt(e,p=>p[l]),d=((u=n==null?void 0:n[c])===null||u===void 0?void 0:u.domain)||Array.from(f.keys()),h=d.map(p=>f.has(p)?f.get(p).length:1);return{domain:d,flex:h}};return{scale:{x:Object.assign(Object.assign({paddingOuter:0,paddingInner:.1,guide:a===void 0?null:{position:"top"}},a===void 0&&{paddingInner:0}),s(a,"x")),y:Object.assign(Object.assign({range:[0,1],paddingOuter:0,paddingInner:.1,guide:o===void 0?null:{position:"right"}},o===void 0&&{paddingInner:0}),s(o,"y"))}}}),Yd=Ti(t=>{const{data:r,scale:e,legend:n}=t,i=[t];let a,o,s;for(;i.length;){const d=i.shift(),{children:h,encode:p={},scale:v={},legend:g={}}=d,{color:m}=p,{color:y}=v,{color:b}=g;m!==void 0&&(a=m),y!==void 0&&(o=y),b!==void 0&&(s=b),Array.isArray(h)&&i.push(...h)}const l=()=>{var d;const h=(d=e==null?void 0:e.color)===null||d===void 0?void 0:d.domain;if(h!==void 0)return[h];if(a===void 0)return[void 0];const p=typeof a=="function"?a:g=>g[a],v=r.map(p);return v.some(g=>typeof g=="number")?[ua(v)]:[Array.from(new Set(v)),"ordinal"]},c=typeof a=="string"?a:"",[u,f]=l();return Object.assign({encode:{color:{type:"column",value:u??[]}},scale:{color:X({},o,{domain:u,type:f})}},n===void 0&&{legend:{color:X({title:c},s)}})}),Hd=Co(()=>({animate:{enterType:"fadeIn"}})),Vd=Ti(()=>({frame:!1,encode:{shape:"hollow"},style:{lineWidth:0}})),Xd=Ti(()=>({type:"cell"})),ww=Ti(t=>{const{data:r}=t;return{data:{type:"inline",value:r,transform:[{type:"custom",callback:()=>{const{data:n,encode:i}=t,{x:a,y:o}=i,s=a?Array.from(new Set(n.map(u=>u[a]))):[],l=o?Array.from(new Set(n.map(u=>u[o]))):[];return(()=>{if(s.length&&l.length){const u=[];for(const f of s)for(const d of l)u.push({[a]:f,[o]:d});return u}if(s.length)return s.map(u=>({[a]:u}));if(l.length)return l.map(u=>({[o]:u}))})()}}]}}}),Sw=Ti((t,r=oW,e=sW,n=lW,i={})=>{const{data:a,encode:o,children:s,scale:l,x:c=0,y:u=0,shareData:f=!1,key:d}=t,{value:h}=a,{x:p,y:v}=o,{color:g}=l,{domain:m}=g;return{children:(b,x,O)=>{const{x:w,y:S}=x,{paddingLeft:k,paddingTop:E,marginLeft:_,marginTop:A}=O,{domain:M}=w.getOptions(),{domain:T}=S.getOptions(),C=Oi(b),I=b.map(r),R=b.map(({x:F,y:$})=>[w.invert(F),S.invert($)]),P=R.map(([F,$])=>W=>{const{[p]:G,[v]:Y}=W;return(p!==void 0?G===F:!0)&&(v!==void 0?Y===$:!0)}).map(F=>h.filter(F)),N=f?Vt(P,F=>F.length):void 0,j=R.map(([F,$])=>({columnField:p,columnIndex:M.indexOf(F),columnValue:F,columnValuesLength:M.length,rowField:v,rowIndex:T.indexOf($),rowValue:$,rowValuesLength:T.length})),B=j.map(F=>Array.isArray(s)?s:[s(F)].flat(1));return C.flatMap(F=>{const[$,W,G,Y]=I[F],V=j[F],z=P[F];return B[F].map(q=>{var rt,tt,{scale:at,key:ot,facet:lt=!0,axis:vt={},legend:ft={}}=q,dt=iW(q,["scale","key","facet","axis","legend"]);const mt=((rt=at==null?void 0:at.y)===null||rt===void 0?void 0:rt.guide)||vt.y,xe=((tt=at==null?void 0:at.x)===null||tt===void 0?void 0:tt.guide)||vt.x,We={x:{tickCount:p?5:void 0},y:{tickCount:v?5:void 0}},se=lt?z:z.length===0?[]:h,Oe={color:{domain:m}},we={x:dg(xe,e)(V,se),y:dg(mt,n)(V,se)};return Object.assign(Object.assign({key:`${ot}-${F}`,data:se,margin:0,x:$+k+c+_,y:W+E+u+A,parentKey:d,width:G,height:Y,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!!se.length,dataDomain:N,scale:X(We,at,Oe),axis:X({},vt,we),legend:!1},dt),i)})})}}});function oW(t){const{points:r}=t;return Df(r)}function sc(t,r){return r.length?X({title:!1,tick:null,label:null},t):X({title:!1,tick:null,label:null,grid:null},t)}function sW(t){return(r,e)=>{const{rowIndex:n,rowValuesLength:i,columnIndex:a,columnValuesLength:o}=r;if(n!==i-1)return sc(t,e);const s=a!==o-1?!1:void 0,l=e.length?void 0:null;return X({title:s,grid:l},t)}}function lW(t){return(r,e)=>{const{rowIndex:n,columnIndex:i}=r;if(i!==0)return sc(t,e);const a=n!==0?!1:void 0,o=e.length?void 0:null;return X({title:a,grid:o},t)}}function dg(t,r){return typeof t=="function"?t:t===null||t===!1?()=>null:r(t)}const kw=()=>t=>[Lo.of(t).call(Xd).call(Yd).call(Hd).call(aW).call(Vd).call(ww).call(Sw).value()];kw.props={};var Ku=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const cW=Co(t=>({scale:{x:{guide:null,paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),uW=Ti(t=>{const{data:r,children:e,x:n=0,y:i=0,key:a}=t;return{children:(s,l,c)=>{const{x:u,y:f}=l,{paddingLeft:d,paddingTop:h,marginLeft:p,marginTop:v}=c,{domain:g}=u.getOptions(),{domain:m}=f.getOptions(),y=Oi(s),b=s.map(({points:S})=>Df(S)),x=s.map(({x:S,y:k})=>[u.invert(S),f.invert(k)]),O=x.map(([S,k])=>({columnField:S,columnIndex:g.indexOf(S),columnValue:S,columnValuesLength:g.length,rowField:k,rowIndex:m.indexOf(k),rowValue:k,rowValuesLength:m.length})),w=O.map(S=>Array.isArray(e)?e:[e(S)].flat(1));return y.flatMap(S=>{const[k,E,_,A]=b[S],[M,T]=x[S],C=O[S];return w[S].map(R=>{var L,P;const{scale:N,key:j,encode:B,axis:F,interaction:$}=R,W=Ku(R,["scale","key","encode","axis","interaction"]),G=(L=N==null?void 0:N.y)===null||L===void 0?void 0:L.guide,Y=(P=N==null?void 0:N.x)===null||P===void 0?void 0:P.guide,V={x:{facet:!1},y:{facet:!1}},z={x:dW(Y)(C,r),y:hW(G)(C,r)},U={x:{tickCount:5},y:{tickCount:5}};return Object.assign({data:r,parentKey:a,key:`${j}-${S}`,x:k+d+n+p,y:E+h+i+v,width:_,height:A,margin:0,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,frame:!0,scale:X(V,N),axis:X(U,F,z),legend:!1,encode:X({},B,{x:M,y:T}),interaction:X({},$,{legendFilter:!1})},W)})})}}}),fW=Ti(t=>{const{encode:r}=t,e=Ku(t,["encode"]),{position:n=[],x:i=n,y:a=[...n].reverse()}=r,o=Ku(r,["position","x","y"]),s=[];for(const l of[i].flat(1))for(const c of[a].flat(1))s.push({$x:l,$y:c});return Object.assign(Object.assign({},e),{data:s,encode:Object.assign(Object.assign({},o),{x:"$x",y:"$y"}),scale:Object.assign(Object.assign({},[i].flat(1).length===1&&{x:{paddingInner:0}}),[a].flat(1).length===1&&{y:{paddingInner:0}})})});function dW(t){return typeof t=="function"?t:t===null?()=>null:(r,e)=>{const{rowIndex:n,rowValuesLength:i}=r;if(n!==i-1)return sc(t,e)}}function hW(t){return typeof t=="function"?t:t===null?()=>null:(r,e)=>{const{columnIndex:n}=r;if(n!==0)return sc(t,e)}}const pW=()=>t=>[Lo.of(t).call(Xd).call(Yd).call(uW).call(fW).call(Hd).call(Vd).call(cW).value()];var vW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const gW=Co(t=>({scale:{x:{guide:{type:"axisArc"},paddingOuter:0,paddingInner:.1},y:{guide:null,range:[0,1],paddingOuter:0,paddingInner:.1}}})),mW=Co(t=>({coordinate:{type:"polar"}})),yW=t=>{const{encode:r}=t,e=vW(t,["encode"]),{position:n}=r;return Object.assign(Object.assign({},e),{encode:{x:n}})};function hg(t){return r=>null}function bW(t){const{points:r}=t,[e,n,i,a]=r,o=ue(e,a),s=ye(e,a),l=ye(n,i),c=t0(s,l),u=1/Math.sin(c/2),f=o/(1+u),d=f*Math.sqrt(2),[h,p]=i,g=ta(s)+c/2,m=f*u,y=h+m*Math.sin(g),b=p-m*Math.cos(g);return[y-d/2,b-d/2,d,d]}const xW=()=>t=>[Lo.of(t).call(Xd).call(yW).call(Yd).call(mW).call(ww).call(Sw,bW,hg,hg,{frame:!1}).call(Hd).call(Vd).call(gW).value()];function OW(t,r,e){const i=e,a=[0,i],o=[-i+1,1];if(t==="normal")return a;if(t==="reverse")return o;if(t==="alternate")return r%2===0?a:o;if(t==="reverse-alternate")return r%2===0?o:a}function wW(t,r,e){const n=[t];for(;n.length;){const i=n.pop();i.animate=X({enter:{duration:r},update:{duration:r,easing:e,type:"morphing",fill:"both"},exit:{type:"fadeOut",duration:r}},i.animate||{});const{children:a}=i;Array.isArray(a)&&n.push(...a)}return t}const Ew=()=>t=>{const{children:r=[],duration:e=1e3,iterationCount:n=1,direction:i="normal",easing:a="ease-in-out-sine"}=t,o=r.length;if(!Array.isArray(r)||o===0)return[];const{key:s}=r[0],l=r.map(c=>Object.assign(Object.assign({},c),{key:s})).map(c=>wW(c,e,a));return function*(){let c=0,u;for(;n==="infinite"||c<n;){const[f,d]=OW(i,c,o);for(let h=f;h<d;h+=1){const p=Math.abs(h);u!==p&&(yield l[p]),u=p}c++}}};Ew.props={};var SW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const _w=()=>t=>{const{type:r,data:e,scale:n,encode:i,style:a,animate:o,key:s,state:l,tooltip:c}=t,u=SW(t,["type","data","scale","encode","style","animate","key","state","tooltip"]);return[Object.assign(Object.assign({type:"geoView"},u),{children:[{type:"geoPath",key:`${s}-0`,data:{value:e},scale:n,encode:i,style:a,animate:o,state:l,tooltip:c}]})]};_w.props={};const kW=Object.freeze(Object.defineProperty({__proto__:null,geoAlbers:W_,geoAlbersUsa:Y_,geoAzimuthalEqualArea:H_,geoAzimuthalEqualAreaRaw:V_,geoAzimuthalEquidistant:X_,geoAzimuthalEquidistantRaw:U_,geoConicConformal:q_,geoConicConformalRaw:K_,geoConicEqualArea:Z_,geoConicEqualAreaRaw:Q_,geoConicEquidistant:J_,geoConicEquidistantRaw:tA,geoEqualEarth:eA,geoEqualEarthRaw:nA,geoEquirectangular:rA,geoEquirectangularRaw:iA,geoGnomonic:aA,geoGnomonicRaw:oA,geoIdentity:sA,geoMercator:lA,geoMercatorRaw:cA,geoNaturalEarth1:uA,geoNaturalEarth1Raw:fA,geoOrthographic:dA,geoOrthographicRaw:hA,geoProjection:pA,geoProjectionMutator:vA,geoStereographic:gA,geoStereographicRaw:mA,geoTransverseMercator:yA,geoTransverseMercatorRaw:bA},Symbol.toStringTag,{value:"Module"}));var EW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function _W(t){if(typeof t=="function")return t;const r=`geo${Nr(t)}`,e=kW[r];if(!e)throw new Error(`Unknown coordinate: ${t}`);return e}function AW(t){return{type:"FeatureCollection",features:t.flatMap(r=>TW(r).features)}}function TW(t){const r={Point:"geometry",MultiPoint:"geometry",LineString:"geometry",MultiLineString:"geometry",Polygon:"geometry",MultiPolygon:"geometry",GeometryCollection:"geometry",Feature:"feature",FeatureCollection:"featureCollection"};if(!t||!t.type)return null;const e=r[t.type];if(!e)return null;if(e==="geometry")return{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:t}]};if(e==="feature")return{type:"FeatureCollection",features:[t]};if(e==="featureCollection")return t}function MW(t,r){var e;for(const[n,i]of Object.entries(r))(e=t[n])===null||e===void 0||e.call(t,i)}function PW(t,r,e,n){const i=()=>{const s=r.filter(Aw);return s.find(c=>c.sphere)?{type:"Sphere"}:AW(s.filter(c=>!c.sphere).flatMap(c=>c.data.value))},{outline:a=i()}=n,{size:o="fitExtent"}=n;if(o==="fitExtent")return CW(t,a,e);if(o==="fitWidth")return LW(t,a,e)}function CW(t,r,e){const{x:n,y:i,width:a,height:o}=e;t.fitExtent([[n,i],[a,o]],r)}function LW(t,r,e){const{width:n,height:i}=e,[[a,o],[s,l]]=gm(t.fitWidth(n,r)).bounds(r),c=Math.ceil(l-o),u=Math.min(Math.ceil(s-a),c),f=t.scale()*(u-1)/u,[d,h]=t.translate(),p=h+(i-c)/2;t.scale(f).translate([d,p]).precision(.2)}function RW(t){const{data:r}=t;if(Array.isArray(r))return Object.assign(Object.assign({},t),{data:{value:r}});const{type:e}=r;return e==="graticule10"?Object.assign(Object.assign({},t),{data:{value:[xA()]}}):e==="sphere"?Object.assign(Object.assign({},t),{sphere:!0,data:{value:[{type:"Sphere"}]}}):t}function Aw(t){return t.type==="geoPath"}const Tw=()=>t=>{const{children:r,coordinate:e={}}=t;if(!Array.isArray(r))return[];const{type:n="equalEarth"}=e,i=EW(e,["type"]),a=_W(n),o=r.map(RW);let s;function l(){return[["custom",(f,d,h,p)=>{const v=a();PW(v,o,{x:f,y:d,width:h,height:p},i),MW(v,i),s=gm(v);const m=new Zt({domain:[f,f+h]}),y=new Zt({domain:[d,d+p]}),b=O=>{const w=v(O);if(!w)return[null,null];const[S,k]=w;return[m.map(S),y.map(k)]},x=O=>{if(!O)return null;const[w,S]=O,k=[m.invert(w),y.invert(S)];return v.invert(k)};return{transform:O=>b(O),untransform:O=>x(O)}}]]}function c(f){const{style:d,tooltip:h={}}=f;return Object.assign(Object.assign({},f),{type:"path",tooltip:cl(h,{title:"id",items:[{channel:"color"}]}),style:Object.assign(Object.assign({},d),{d:p=>s(p)||[]})})}const u=f=>Aw(f)?c(f):f;return[Object.assign(Object.assign({},t),{type:"view",scale:{x:{type:"identity"},y:{type:"identity"}},axis:!1,coordinate:{type:l},children:o.flatMap(u)})]};Tw.props={};function NW(t){return Io(t,r=>r.className==="component")}function IW(t){return Io(t,r=>r.className==="element")}function jW(t){return Io(t,r=>r.className==="label")}function Ie(t,r,e,n=i=>!0){return i=>{if(!n(i))return;e.emit(`plot:${t}`,i);const{target:a}=i;if(!a)return;const{className:o}=a;if(o==="plot")return;const s=IW(a),l=NW(a),c=jW(a),u=s||l||c;if(!u)return;const{className:f,markType:d}=u,h=Object.assign(Object.assign({},i),{nativeEvent:!0});f==="element"?(h.data={data:Pf(u,r)},e.emit(`element:${t}`,h),e.emit(`${d}:${t}`,h)):f==="label"?(h.data={data:u.attributes.datum},e.emit(`label:${t}`,h),e.emit(`${o}:${t}`,h)):(e.emit(`component:${t}`,h),e.emit(`${o}:${t}`,h))}}function Mw(){return(t,r,e)=>{const{container:n,view:i}=t,a=Ie(Dt.CLICK,i,e,S=>S.detail===1),o=Ie(Dt.DBLCLICK,i,e,S=>S.detail===2),s=Ie(Dt.POINTER_TAP,i,e),l=Ie(Dt.POINTER_DOWN,i,e),c=Ie(Dt.POINTER_UP,i,e),u=Ie(Dt.POINTER_OVER,i,e),f=Ie(Dt.POINTER_OUT,i,e),d=Ie(Dt.POINTER_MOVE,i,e),h=Ie(Dt.POINTER_ENTER,i,e),p=Ie(Dt.POINTER_LEAVE,i,e),v=Ie(Dt.POINTER_UPOUTSIDE,i,e),g=Ie(Dt.DRAG_START,i,e),m=Ie(Dt.DRAG,i,e),y=Ie(Dt.DRAG_END,i,e),b=Ie(Dt.DRAG_ENTER,i,e),x=Ie(Dt.DRAG_LEAVE,i,e),O=Ie(Dt.DRAG_OVER,i,e),w=Ie(Dt.DROP,i,e);return n.addEventListener("click",a),n.addEventListener("click",o),n.addEventListener("pointertap",s),n.addEventListener("pointerdown",l),n.addEventListener("pointerup",c),n.addEventListener("pointerover",u),n.addEventListener("pointerout",f),n.addEventListener("pointermove",d),n.addEventListener("pointerenter",h),n.addEventListener("pointerleave",p),n.addEventListener("pointerupoutside",v),n.addEventListener("dragstart",g),n.addEventListener("drag",m),n.addEventListener("dragend",y),n.addEventListener("dragenter",b),n.addEventListener("dragleave",x),n.addEventListener("dragover",O),n.addEventListener("drop",w),()=>{n.removeEventListener("click",a),n.removeEventListener("click",o),n.removeEventListener("pointertap",s),n.removeEventListener("pointerdown",l),n.removeEventListener("pointerup",c),n.removeEventListener("pointerover",u),n.removeEventListener("pointerout",f),n.removeEventListener("pointermove",d),n.removeEventListener("pointerenter",h),n.removeEventListener("pointerleave",p),n.removeEventListener("pointerupoutside",v),n.removeEventListener("dragstart",g),n.removeEventListener("drag",m),n.removeEventListener("dragend",y),n.removeEventListener("dragenter",b),n.removeEventListener("dragleave",x),n.removeEventListener("dragover",O),n.removeEventListener("drop",w)}}}Mw.props={reapplyWhenUpdate:!0};function DW(){return{"component.axisRadar":PO,"component.axisLinear":zr,"component.axisArc":AO,"component.legendContinuousBlock":LO,"component.legendContinuousBlockSize":RO,"component.legendContinuousSize":Id,"interaction.event":Mw,"composition.mark":Ow,"composition.view":xw,"shape.label.label":ax}}var BW=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function ne(t,r){const e=Object.assign(Object.assign({},DW()),r),n=a=>{if(typeof a!="string")return a;const o=`${t}.${a}`;return e[o]||Qi(`Unknown Component: ${o}`)};return[(a,o)=>{const{type:s}=a,l=BW(a,["type"]);s||Qi("Plot type is required!");const c=n(s);return c==null?void 0:c(l,o)},n]}function Pw(t){const{canvas:r,group:e}=t;return(r==null?void 0:r.document)||(e==null?void 0:e.ownerDocument)||Qi("Cannot find library document")}var pg=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function FW(t,r,e){const[n]=ne("coordinate",e),{innerHeight:i,innerWidth:a,insetLeft:o,insetTop:s,insetRight:l,insetBottom:c}=t,{coordinates:u=[]}=r,f=YW(u),d=f[0].type==="cartesian3D",h=Object.assign(Object.assign({},t),{x:o,y:s,width:a-o-l,height:i-c-s,transformations:f.flatMap(n)});return d?new QG(h):new KG(h)}function Cw(t,r){const{coordinate:e={},coordinates:n}=t,i=pg(t,["coordinate","coordinates"]);if(n)return t;const{type:a,transform:o=[]}=e,s=pg(e,["type","transform"]);if(!a)return Object.assign(Object.assign({},i),{coordinates:o});const[,l]=ne("coordinate",r),{transform:c=!1}=l(a).props||{};if(c)throw new Error(`Unknown coordinate: ${a}.`);return Object.assign(Object.assign({},i),{coordinates:[Object.assign({type:a},s),...o]})}function Ln(t,r){return t.filter(e=>e.type===r)}function ii(t){return Ln(t,"polar").length>0}function $W(t){return Ln(t,"helix").length>0}function Yi(t){return Ln(t,"transpose").length%2===1}function zW(t){return Ln(t,"parallel").length>0}function Lw(t){return Ln(t,"theta").length>0}function GW(t){return Ln(t,"reflect").length>0}function za(t){return Ln(t,"radial").length>0}function Rw(t){return Ln(t,"radar").length>0}function WW(t){return Ln(t,"reflectY").length>0}function YW(t){return t.find(r=>r.type==="cartesian"||r.type==="cartesian3D")?t:[...t,{type:"cartesian"}]}const Zu=Object.freeze(Object.defineProperty({__proto__:null,interpolateBlues:mE,interpolateBrBG:yE,interpolateBuGn:bE,interpolateBuPu:xE,interpolateCividis:OE,interpolateCool:wE,interpolateCubehelixDefault:SE,interpolateGnBu:kE,interpolateGreens:EE,interpolateGreys:_E,interpolateInferno:AE,interpolateMagma:TE,interpolateOrRd:ME,interpolateOranges:PE,interpolatePRGn:CE,interpolatePiYG:LE,interpolatePlasma:RE,interpolatePuBu:NE,interpolatePuBuGn:IE,interpolatePuOr:jE,interpolatePuRd:DE,interpolatePurples:BE,interpolateRainbow:FE,interpolateRdBu:$E,interpolateRdGy:zE,interpolateRdPu:GE,interpolateRdYlBu:WE,interpolateRdYlGn:YE,interpolateReds:HE,interpolateSinebow:VE,interpolateSpectral:XE,interpolateTurbo:UE,interpolateViridis:qE,interpolateWarm:KE,interpolateYlGn:ZE,interpolateYlGnBu:QE,interpolateYlOrBr:JE,interpolateYlOrRd:t_,schemeAccent:e_,schemeBlues:n_,schemeBrBG:r_,schemeBuGn:i_,schemeBuPu:a_,schemeCategory10:o_,schemeDark2:s_,schemeGnBu:l_,schemeGreens:c_,schemeGreys:u_,schemeObservable10:f_,schemeOrRd:d_,schemeOranges:h_,schemePRGn:p_,schemePaired:v_,schemePastel1:g_,schemePastel2:m_,schemePiYG:y_,schemePuBu:b_,schemePuBuGn:x_,schemePuOr:O_,schemePuRd:w_,schemePurples:S_,schemeRdBu:k_,schemeRdGy:E_,schemeRdPu:__,schemeRdYlBu:A_,schemeRdYlGn:T_,schemeReds:M_,schemeSet1:P_,schemeSet2:C_,schemeSet3:L_,schemeSpectral:R_,schemeTableau10:N_,schemeYlGn:I_,schemeYlGnBu:j_,schemeYlOrBr:D_,schemeYlOrRd:B_},Symbol.toStringTag,{value:"Module"}));function HW(t,r,e,n,i,a){const{guide:o={}}=e,s=e3(t,r,e);if(typeof s!="string")return e;const l=n3(s,t,r,e),c=QW(s,l,e);return Object.assign(Object.assign(Object.assign({},e),i3(s,t,r,e,n)),{domain:c,range:r3(s,t,r,e,c,i,a),expectedDomain:l,guide:o,name:t,type:s})}function VW(t,r){const e={};for(const n of t){const{values:i,name:a}=n,o=r[a];for(const s of i){const{name:l,value:c}=s;e[l]=c.map(u=>o.map(u))}}return e}function XW(t,r){const e=Array.from(t.values()).flatMap(i=>i.channels);hf(e,i=>i.map(a=>r.get(a.scale.uid)),i=>i.name).filter(([,i])=>i.some(a=>typeof a.getOptions().groupTransform=="function")&&i.every(a=>a.getTicks)).map(i=>i[1]).forEach(i=>{const a=i.map(o=>o.getOptions().groupTransform)[0];a(i)})}function UW(t,r){var e;const{components:n=[]}=r,i=["scale","encode","axis","legend","data","transform"],a=Array.from(new Set(t.flatMap(s=>s.channels.map(l=>l.scale)))),o=new Map(a.map(s=>[s.name,s]));for(const s of n){const l=ZW(s);for(const c of l){const u=o.get(c),f=((e=s.scale)===null||e===void 0?void 0:e[c])||{},{independent:d=!1}=f;if(u&&!d){const{guide:h}=u,p=typeof h=="boolean"?{}:h;u.guide=X({},p,s),Object.assign(u,f)}else{const h=Object.assign(Object.assign({},f),{expectedDomain:f.domain,name:c,guide:Sf(s,i)});a.push(h)}}}return a}function qW(t){if(!t||!Array.isArray(t))return[di,di];let r,e;return[a=>{var o;r=a.map.bind(a),e=(o=a.invert)===null||o===void 0?void 0:o.bind(a);const s=t.filter(([d])=>typeof d=="function"),l=t.filter(([d])=>typeof d!="function"),c=new Map(l);if(a.map=d=>{for(const[h,p]of s)if(h(d))return p;return c.has(d)?c.get(d):r(d)},!e)return a;const u=new Map(l.map(([d,h])=>[h,d])),f=new Map(s.map(([d,h])=>[h,d]));return a.invert=d=>f.has(d)?d:u.has(d)?u.get(d):e(d),a},a=>(r!==null&&(a.map=r),e!==null&&(a.invert=e),a)]}function vg(t,r){const e=Object.keys(t);for(const n of Object.values(r)){const{name:i}=n.getOptions();if(!(i in t))t[i]=n;else{const a=e.filter(l=>l.startsWith(i)).map(l=>+(l.replace(i,"")||0)),o=Vt(a)+1,s=`${i}${o}`;t[s]=n,n.getOptions().key=s}}return t}function gg(t,r){const[e]=ne("scale",r),{relations:n}=t,[i]=qW(n),a=e(t);return i(a)}function KW(t){const r=t.flatMap(e=>Array.from(e.values())).flatMap(e=>e.channels.map(n=>n.scale));mg(r,"x"),mg(r,"y")}function ZW(t){const{channels:r=[],type:e,scale:n={}}=t,i=["shape","color","opacity","size"];return r.length!==0?r:e==="axisX"?["x"]:e==="axisY"?["y"]:e==="legends"?Object.keys(n).filter(a=>i.includes(a)):[]}function mg(t,r){const e=t.filter(({name:a,facet:o=!0})=>o&&a===r),n=e.flatMap(a=>a.domain),i=e.every(Nw)?ua(n):e.every(Iw)?Array.from(new Set(n)):null;if(i!==null)for(const a of e)a.domain=i}function QW(t,r,e){const{ratio:n}=e;return n==null?r:Nw({type:t})?JW(r,n,t):Iw({type:t})?t3(r,n):r}function JW(t,r,e){const n=t.map(Number),i=new Zt({domain:n,range:[n[0],n[0]+(n[n.length-1]-n[0])*r]});return e==="time"?t.map(a=>new Date(i.map(a))):t.map(a=>i.map(a))}function t3(t,r){const e=Math.round(t.length*r);return t.slice(0,e)}function Nw(t){const{type:r}=t;return typeof r!="string"?!1:["linear","log","pow","time"].includes(r)}function Iw(t){const{type:r}=t;return typeof r!="string"?!1:["band","point","ordinal"].includes(r)}function e3(t,r,e){const{type:n,domain:i,range:a,quantitative:o,ordinal:s}=e;return n!==void 0?n:g3(r)?"identity":typeof a=="string"?"linear":(i||a||[]).length>2?Qc(t,s):i!==void 0?Og([i])?Qc(t,s):wg(r)?"time":bg(t,a,o):Og(r)?Qc(t,s):wg(r)?"time":bg(t,a,o)}function n3(t,r,e,n){const{domain:i}=n;if(i!==void 0)return i;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":case"quantize":case"threshold":return xg(f3(e,n),n);case"band":case"ordinal":case"point":return d3(e);case"quantile":return h3(e);case"sequential":return xg(p3(e),n);default:return[]}}function r3(t,r,e,n,i,a,o){const{range:s}=n;if(typeof s=="string")return a3(s);if(s!==void 0)return s;const{rangeMin:l,rangeMax:c}=n;switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":{const u=yg(e,n,i,a,o),[f,d]=v3(r,u);return[l??f,c??d]}case"band":case"point":return[l??(r==="size"?5:0),c??(r==="size"?10:1)];case"ordinal":return yg(e,n,i,a,o);case"sequential":return;case"constant":return[e[0][0]];default:return[]}}function i3(t,r,e,n,i){switch(t){case"linear":case"time":case"log":case"pow":case"sqrt":return l3(i,n);case"band":case"point":return c3(t,r,i,n);case"sequential":return s3(n);default:return n}}function yg(t,r,e,n,i){const[a]=ne("palette",i),{category10:o,category20:s}=n,l=B2(e).length<=o.length?o:s,{palette:c=l,offset:u}=r;if(Array.isArray(c))return c;try{return a({type:c})}catch{const d=o3(c,e,u);if(d)return d;throw new Error(`Unknown Component: ${c} `)}}function a3(t){return t.split("-")}function o3(t,r,e=n=>n){if(!t)return null;const n=Nr(t),i=Zu[`scheme${n}`],a=Zu[`interpolate${n}`];if(!i&&!a)return null;if(i){if(!i.some(Array.isArray))return i;const o=i[r.length];if(o)return o}return r.map((o,s)=>a(e(s/r.length)))}function s3(t){const{palette:r="ylGnBu",offset:e}=t,n=Nr(r),i=Zu[`interpolate${n}`];if(!i)throw new Error(`Unknown palette: ${n}`);return{interpolator:e?a=>i(e(a)):i}}function l3(t,r){const{interpolate:e=bo,nice:n=!1,tickCount:i=5}=r;return Object.assign(Object.assign({},r),{interpolate:e,nice:n,tickCount:i})}function c3(t,r,e,n){if(n.padding!==void 0||n.paddingInner!==void 0||n.paddingOuter!==void 0)return Object.assign(Object.assign({},n),{unknown:NaN});const i=u3(t,r,e),{paddingInner:a=i,paddingOuter:o=i}=n;return Object.assign(Object.assign({},n),{paddingInner:a,paddingOuter:o,padding:i,unknown:NaN})}function u3(t,r,e){return r==="enterDelay"||r==="enterDuration"||r==="size"?0:t==="band"?Lw(e)?0:.1:t==="point"?.5:0}function Qc(t,r){return r||(m3(t)?"point":"ordinal")}function bg(t,r,e){return e||(t!=="color"||r?"linear":"sequential")}function xg(t,r){if(t.length===0)return t;const{domainMin:e,domainMax:n}=r,[i,a]=t;return[e??i,n??a]}function f3(t,r){const{zero:e=!1}=r;let n=1/0,i=-1/0;for(const a of t)for(const o of a)qt(o)&&(n=Math.min(n,+o),i=Math.max(i,+o));return n===1/0?[]:e?[Math.min(0,n),i]:[n,i]}function d3(t){return Array.from(new Set(t.flat()))}function h3(t){return t.flat().sort()}function p3(t){let r=1/0,e=-1/0;for(const n of t)for(const i of n)qt(i)&&(r=Math.min(r,+i),e=Math.max(e,+i));return r===1/0?[]:[r<0?-e:r,e]}function v3(t,r){return t==="enterDelay"?[0,1e3]:t=="enterDuration"?[300,1e3]:t.startsWith("y")||t.startsWith("position")?[1,0]:t==="color"?[D2(r),xy(r)]:t==="opacity"?[0,1]:t==="size"?[1,10]:[0,1]}function Og(t){return Ud(t,r=>{const e=typeof r;return e==="string"||e==="boolean"})}function wg(t){return Ud(t,r=>r instanceof Date)}function g3(t){return Ud(t,Ji)}function Ud(t,r){for(const e of t)if(e.some(r))return!0;return!1}function m3(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t.startsWith("size")}function y3(t){return t.startsWith("x")||t.startsWith("y")||t.startsWith("position")||t==="enterDelay"||t==="enterDuration"||t==="updateDelay"||t==="updateDuration"||t==="exitDelay"||t==="exitDuration"}function b3(t){if(!t||!t.type)return!1;if(typeof t.type=="function")return!0;const{type:r,domain:e,range:n,interpolator:i}=t,a=e&&e.length>0,o=n&&n.length>0;return!!(["linear","sqrt","log","time","pow","threshold","quantize","quantile","ordinal","band","point"].includes(r)&&a&&o||["sequential"].includes(r)&&a&&(o||i)||["constant","identity"].includes(r)&&o)}const x3={linear:"linear",identity:"identity",log:"log",pow:"pow",sqrt:"sqrt",sequential:"sequential"},O3={threshold:"threshold",quantize:"quantize",quantile:"quantile"},w3={ordinal:"ordinal",band:"band",point:"point"},S3={constant:"constant"};var Wr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function k3(t,r,e){const{coordinates:n=[],title:i}=r,[,a]=ne("component",e),o=t.filter(({guide:u})=>u!==null),s=[],l=N3(r,t,e);if(s.push(...l),i){const{props:u}=a("title"),{defaultPosition:f,defaultOrientation:d,defaultOrder:h,defaultSize:p,defaultCrossPadding:v}=u,g=typeof i=="string"?{title:i}:i;s.push(Object.assign({type:"title",position:f,orientation:d,order:h,crossPadding:v[0],defaultSize:p},g))}return M3(o,n).forEach(([u,f])=>{const{props:d}=a(u),{defaultPosition:h,defaultPlane:p="xy",defaultOrientation:v,defaultSize:g,defaultOrder:m,defaultLength:y,defaultPadding:b=[0,0],defaultCrossPadding:x=[0,0]}=d,O=X({},...f),{guide:w,field:S}=O,k=Array.isArray(w)?w:[w];for(const E of k){const[_,A]=L3(u,h,v,E,f,o,n);if(!_&&!A)continue;const M=_==="left"||_==="right",T=M?b[1]:b[0],C=M?x[1]:x[0],{size:I,order:R=m,length:L=y,padding:P=T,crossPadding:N=C}=E;s.push(Object.assign(Object.assign({title:S},E),{defaultSize:g,length:L,position:_,plane:p,orientation:A,padding:P,order:R,crossPadding:N,size:I,type:u,scales:f}))}}),s}function Sg(t,r,e,n,i){const[a]=ne("component",n),{scaleInstances:o,scale:s,bbox:l}=t,c=Wr(t,["scaleInstances","scale","bbox"]),u={bbox:l,library:n};return a(c)({coordinate:r,library:n,markState:i,scales:o,theme:e,value:u,scale:s})}function E3(t){return t.map(r=>{const e=X(r,r.style);return delete e.style,e})}function jw(t,r){const e=["left","right","bottom","top"];return vf(t,({type:a,position:o,group:s})=>e.includes(o)?s===void 0?a.startsWith("legend")?`legend-${o}`:Symbol("independent"):s==="independent"?Symbol("independent"):s:Symbol("independent")).flatMap(([,a])=>{if(a.length===1)return a[0];if(r!==void 0){const u=a.filter(v=>v.length!==void 0).map(v=>v.length),f=yn(u);if(f>r)return a.forEach(v=>v.group=Symbol("independent")),a;const d=r-f,h=a.length-u.length,p=d/h;a.forEach(v=>{v.length===void 0&&(v.length=p)})}const o=Vt(a,u=>u.size),s=Vt(a,u=>u.order),l=Vt(a,u=>u.crossPadding),c=a[0].position;return{type:"group",size:o,order:s,position:c,children:a,crossPadding:l}})}function _3(t,r){const e=["shape","size","color","opacity"],n=(d,h)=>d==="constant"&&h==="size",i=t.filter(({type:d,name:h})=>typeof d=="string"&&e.includes(h)&&!n(d,h)),a=i.filter(({type:d})=>d==="constant"),o=i.filter(({type:d})=>d!=="constant"),l=vf(o,d=>d.field?d.field:Symbol("independent")).map(([d,h])=>[d,[...h,...a]]).filter(([,d])=>d.some(h=>h.type!=="constant")),c=new Map(l);if(c.size===0)return[];const u=d=>d.sort(([h],[p])=>h.localeCompare(p));return Array.from(c).map(([,d])=>{const p=F2(d).sort((v,g)=>g.length-v.length).map(v=>({combination:v,option:v.map(g=>[g.name,A3(g)])}));for(const{option:v,combination:g}of p)if(!v.every(m=>m[1]==="constant")&&v.every(m=>m[1]==="discrete"||m[1]==="constant"))return["legendCategory",g];for(const[v,g]of lG)for(const{option:m,combination:y}of p)if(g.some(b=>Ds(u(b),u(m))))return[v,y];return null}).filter(qt)}function A3(t){const{type:r}=t;return typeof r!="string"?null:r in x3?"continuous":r in w3?"discrete":r in O3?"distribution":r in S3?"constant":null}function T3(t,r){return t.map(e=>{const{name:n}=e;if($W(r)||Lw(r)||Yi(r)&&(ii(r)||za(r)))return null;if(n.startsWith("x"))return ii(r)?["axisArc",[e]]:za(r)?["axisLinear",[e]]:[Yi(r)?"axisY":"axisX",[e]];if(n.startsWith("y"))return ii(r)?["axisLinear",[e]]:za(r)?["axisArc",[e]]:[Yi(r)?"axisX":"axisY",[e]];if(n.startsWith("z"))return["axisZ",[e]];if(n.startsWith("position")){if(Rw(r))return["axisRadar",[e]];if(!ii(r))return["axisY",[e]]}return null}).filter(qt)}function M3(t,r){const e=t.filter(n=>b3(n));return[..._3(e),...T3(e,r)]}function Qu(t){const r=Ln(t,"polar");if(r.length){const n=r[r.length-1],{startAngle:i,endAngle:a}=ym(n);return[i,a]}const e=Ln(t,"radial");if(e.length){const n=e[e.length-1],{startAngle:i,endAngle:a}=Om(n);return[i,a]}return[-Math.PI/2,Math.PI/2*3]}function P3(t){const r=/position(\d*)/g.exec(t);return r?+r[1]:null}function C3(t,r,e,n,i){const{name:a}=e[0];if(t==="axisRadar"){const o=n.filter(d=>d.name.startsWith("position")),s=P3(a);if(s===null)return[null,null];const[l,c]=Qu(i),u=Rw(i)?o.length:o.length-1;return["center",(c-l)/u*s+l]}if(t==="axisY"&&zW(i))return Yi(i)?["center","horizontal"]:["center","vertical"];if(t==="axisLinear"){const[o]=Qu(i);return["center",o]}return t==="axisArc"?r[0]==="inner"?["inner",null]:["outer",null]:ii(i)?["center",null]:za(i)?["center",null]:t==="axisX"&&GW(i)||t==="axisX"&&WW(i)?["top",null]:r}function L3(t,r,e,n,i,a,o){const[s]=Qu(o),l=[n.position||r,s??e];return typeof t=="string"&&t.startsWith("axis")?C3(t,l,i,a,o):typeof t=="string"&&t.startsWith("legend")&&ii(o)&&n.position==="center"?["center","vertical"]:l}function R3(t,r,e=[]){return t==="x"?Yi(e)?`${r}Y`:`${r}X`:t==="y"?Yi(e)?`${r}X`:`${r}Y`:null}function N3(t,r,e){const[,n]=ne("component",e),{coordinates:i}=t;function a(o,s,l,c){const u=R3(s,o,i);if(!c||!u)return;const{props:f}=n(u),{defaultPosition:d,defaultSize:h,defaultOrder:p,defaultCrossPadding:[v]}=f;return Object.assign(Object.assign({position:d,defaultSize:h,order:p,type:u,crossPadding:v},c),{scales:[l]})}return r.filter(o=>o.slider||o.scrollbar).flatMap(o=>{const{slider:s,scrollbar:l,name:c}=o;return[a("slider",c,o,s),a("scrollbar",c,o,l)]}).filter(o=>!!o)}function Dw(t,r,e,n,i,a){const{type:o}=t;if(!["left","right","bottom","top"].includes(n)||typeof o!="string")return;const l=o;return(l.startsWith("axis")?F3:l.startsWith("group")?I3:l.startsWith("legendContinuous")?$3:l==="legendCategory"?z3:l.startsWith("slider")?B3:l==="title"?D3:l.startsWith("scrollbar")?j3:()=>{})(t,r,e,n,i,a)}function I3(t,r,e,n,i,a){const{children:o}=t,s=Vt(o,c=>c.crossPadding);o.forEach(c=>c.crossPadding=s),o.forEach(c=>Dw(c,r,e,n,i,a));const l=Vt(o,c=>c.size);t.size=l,o.forEach(c=>c.size=l)}function j3(t,r,e,n,i,a){const{trackSize:o=6}=X({},i.scrollbar,t);t.size=o}function D3(t,r,e,n,i,a){const o=X({},i.title,t),{title:s,subtitle:l,spacing:c=0}=o,u=Wr(o,["title","subtitle","spacing"]);if(s){const f=et(u,"title"),d=ml(s,f);t.size=d.height}if(l){const f=et(u,"subtitle"),d=ml(l,f);t.size+=c+d.height}}function B3(t,r,e,n,i,a){const o=()=>{const{slider:u}=i;return X({},u,t)},{trackSize:s,handleIconSize:l}=o(),c=Math.max(s,l*2.4);t.size=c}function F3(t,r,e,n,i,a){var o;t.transform=t.transform||[{type:"hide"}];const s=n==="left"||n==="right",l=Bw(t,n,i),{tickLength:c=0,labelSpacing:u=0,titleSpacing:f=0,labelAutoRotate:d}=l,h=Wr(l,["tickLength","labelSpacing","titleSpacing","labelAutoRotate"]),p=lc(t,a),v=cc(h,p),g=c+u;if(v&&v.length){const y=Vt(v,x=>x.width),b=Vt(v,x=>x.height);if(s)t.size=y+g;else{const{tickFilter:x,labelTransform:O}=t;Y3(p,v,r,e,x)&&!O&&d!==!1&&d!==null?(t.labelTransform="rotate(90)",t.size=y+g):(t.labelTransform=(o=t.labelTransform)!==null&&o!==void 0?o:"rotate(0)",t.size=b+g)}}else t.size=c;const m=uc(h);m&&(s?t.size+=f+m.width:t.size+=f+m.height)}function $3(t,r,e,n,i,a){const s=(()=>{const{legendContinuous:x}=i;return X({},x,t)})(),{labelSpacing:l=0,titleSpacing:c=0}=s,u=Wr(s,["labelSpacing","titleSpacing"]),f=n==="left"||n==="right",d=et(u,"ribbon"),{size:h}=d,p=et(u,"handleIcon"),{size:v}=p,g=Math.max(h,v*2.4);t.size=g;const m=lc(t,a),y=cc(u,m);if(y){const x=f?"width":"height",O=Vt(y,w=>w[x]);t.size+=O+l}const b=uc(u);b&&(f?t.size=Math.max(t.size,b.width):t.size+=c+b.height)}function z3(t,r,e,n,i,a){const s=(()=>{const{legendCategory:C}=i,{title:I}=t,[R,L]=Array.isArray(I)?[I,void 0]:[void 0,I];return X({title:R},C,Object.assign(Object.assign({},t),{title:L}))})(),{itemSpacing:l,itemMarkerSize:c,titleSpacing:u,rowPadding:f,colPadding:d,maxCols:h=1/0,maxRows:p=1/0}=s,v=Wr(s,["itemSpacing","itemMarkerSize","titleSpacing","rowPadding","colPadding","maxCols","maxRows"]),{cols:g,length:m}=t,y=C=>Math.min(C,p),b=C=>Math.min(C,h),x=n==="left"||n==="right",O=m===void 0?r+(x?0:e[0]+e[1]):m,w=uc(v),S=lc(t,a),k=cc(v,S,"itemLabel"),E=Math.max(k[0].height,c)+f,_=(C,I=0)=>c+C+l[0]+I;x?(()=>{let C=-1/0,I=0,R=1,L=0,P=-1/0,N=-1/0;const j=w?w.height:0,B=O-j;for(const{width:F}of k){const $=_(F,d);C=Math.max(C,$),I+E>B?(R++,P=Math.max(P,L),N=Math.max(N,I),L=1,I=E):(I+=E,L++)}R<=1&&(P=L,N=I),t.size=C*b(R),t.length=N+j,X(t,{cols:b(R),gridRow:P})})():typeof g=="number"?(()=>{const C=Math.ceil(k.length/g),I=Vt(k,R=>_(R.width))*g;t.size=E*y(C)-f,t.length=Math.min(I,O)})():(()=>{let C=1,I=0,R=-1/0;for(const{width:L}of k){const P=_(L,d);I+P>O?(R=Math.max(R,I),I=P,C++):I+=P}C===1&&(R=I),t.size=E*y(C)-f,t.length=R})(),w&&(x?t.size=Math.max(t.size,w.width):t.size+=u+w.height)}function lc(t,r){const[e]=ne("scale",r),{scales:n,tickCount:i,tickMethod:a}=t,o=n.find(s=>s.type!=="constant"&&s.type!=="identity");return i!==void 0&&(o.tickCount=i),a!==void 0&&(o.tickMethod=a),e(o)}function cc(t,r,e="label"){const{labelFormatter:n,tickFilter:i,label:a=!0}=t,o=Wr(t,["labelFormatter","tickFilter","label"]);if(!a)return null;const s=G3(r,n,i),l=et(o,e),c=s.map((d,h)=>Object.fromEntries(Object.entries(l).map(([p,v])=>[p,typeof v=="function"?v(d,h):v]))),u=s.map((d,h)=>{const p=c[h];return ml(d,p)});if(!c.some(d=>d.transform)){const d=s.map((h,p)=>p);t.indexBBox=new Map(d.map(h=>[h,[s[h],u[h]]]))}return u}function uc(t){const r=c=>c===!1||c===null,{title:e}=t,n=Wr(t,["title"]);if(r(e)||e===void 0)return null;const i=et(n,"title"),{direction:a,transform:o}=i,s=Array.isArray(e)?e.join(","):e;return typeof s!="string"?null:ml(s,Object.assign(Object.assign({},i),{transform:o||(a==="vertical"?"rotate(-90)":"")}))}function Bw(t,r,e){const{title:n}=t,[i,a]=Array.isArray(n)?[n,void 0]:[void 0,n],{axis:o,[`axis${Lf(r)}`]:s}=e;return X({title:i},o,s,Object.assign(Object.assign({},t),{title:a}))}function Fw(t,r){const e=t.getTicks?t.getTicks():t.getOptions().domain;return r?e.filter(r):e}function G3(t,r,e){const i=Fw(t,e).map(o=>typeof o=="number"?el(o):o),a=r?typeof r=="string"?xi(r):r:t.getFormatter?t.getFormatter():o=>`${o}`;return i.map(a)}function W3(t,r){return t.getBandWidth?t.getBandWidth(r)/2:0}function Y3(t,r,e,n,i){if(yn(r,h=>h.width)>e)return!0;const o=t.clone();o.update({range:[0,e]});const s=Fw(t,i),l=s.map(h=>o.map(h)+W3(o,h)),c=s.map((h,p)=>p),u=-n[0],f=e+n[1],d=(h,p)=>{const{width:v}=p;return[h-v/2,h+v/2]};for(let h=0;h<c.length;h++){const p=l[h],[v,g]=d(p,r[h]);if(v<u||g>f)return!0;const m=l[h+1];if(m){const[y]=d(m,r[h+1]);if(g>y)return!0}}return!1}function ml(t,r){const e=H3(t),{filter:n}=r,i=Wr(r,["filter"]);return e.attr(Object.assign(Object.assign({},i),{visibility:"none"})),e.getBBox()}function H3(t){return t instanceof Jt?t:new Pn({style:{text:`${t}`}})}function V3(t){const r=t.find(({type:i})=>i==="axisX"),e=t.find(({type:i})=>i==="axisY"),n=t.find(({type:i})=>i==="axisZ");r&&e&&n&&(r.plane="xy",e.plane="xy",n.plane="yz",n.origin=[r.bbox.x,r.bbox.y,0],n.eulerAngles=[0,-90,0],n.bbox.x=r.bbox.x,n.bbox.y=r.bbox.y,t.push(Object.assign(Object.assign({},r),{plane:"xz",showLabel:!1,showTitle:!1,origin:[r.bbox.x,r.bbox.y,0],eulerAngles:[-90,0,0]})),t.push(Object.assign(Object.assign({},e),{plane:"yz",showLabel:!1,showTitle:!1,origin:[e.bbox.x+e.bbox.width,e.bbox.y,0],eulerAngles:[0,-90,0]})),t.push(Object.assign(Object.assign({},n),{plane:"xz",actualPosition:"left",showLabel:!1,showTitle:!1,eulerAngles:[90,-90,0]})))}function X3(t,r,e,n){var i,a;const{width:o,height:s,depth:l,x:c=0,y:u=0,z:f=0,inset:d=(i=e.inset)!==null&&i!==void 0?i:0,insetLeft:h=d,insetTop:p=d,insetBottom:v=d,insetRight:g=d,margin:m=(a=e.margin)!==null&&a!==void 0?a:0,marginLeft:y=m,marginBottom:b=m,marginTop:x=m,marginRight:O=m,padding:w=e.padding,paddingBottom:S=w,paddingLeft:k=w,paddingRight:E=w,paddingTop:_=w}=q3(t,r,e,n),A=1/4,M=(q,rt,tt,at,ot)=>{const{marks:lt}=r;if(lt.length===0)return[at,ot];if(q-at-ot-q*A>0)return[at,ot];const dt=q*(1-A);return[rt==="auto"?dt*at/(at+ot):at,tt==="auto"?dt*ot/(at+ot):ot]},T=q=>q==="auto"?20:q??20,C=T(_),I=T(S),R=kg(t,s-C-I,[C+x,I+b],["left","right"],r,e,n),{paddingLeft:L,paddingRight:P}=R,N=o-y-O,[j,B]=M(N,k,E,L,P),F=N-j-B,$=kg(t,F,[j+y,B+O],["bottom","top"],r,e,n),{paddingTop:W,paddingBottom:G}=$,Y=s-b-x,[V,z]=M(Y,S,_,G,W),U=Y-V-z;return{width:o,height:s,depth:l,insetLeft:h,insetTop:p,insetBottom:v,insetRight:g,innerWidth:F,innerHeight:U,paddingLeft:j,paddingRight:B,paddingTop:z,paddingBottom:V,marginLeft:y,marginBottom:b,marginTop:x,marginRight:O,x:c,y:u,z:f}}function U3(t){const{height:r,width:e,padding:n=0,paddingLeft:i=n,paddingRight:a=n,paddingTop:o=n,paddingBottom:s=n,margin:l=16,marginLeft:c=l,marginRight:u=l,marginTop:f=l,marginBottom:d=l,inset:h=0,insetLeft:p=h,insetRight:v=h,insetTop:g=h,insetBottom:m=h}=t,y=O=>O==="auto"?20:O,b=e-y(i)-y(a)-c-u-p-v,x=r-y(o)-y(s)-f-d-g-m;return{width:b,height:x}}function q3(t,r,e,n){const{coordinates:i}=r;if(!ii(i)&&!za(i))return r;const a=t.filter(m=>typeof m.type=="string"&&m.type.startsWith("axis"));if(a.length===0)return r;const o=a.map(m=>{const y=m.type==="axisArc"?"arc":"linear";return Bw(m,y,e)}),s=Vt(o,m=>{var y;return(y=m.labelSpacing)!==null&&y!==void 0?y:0}),l=a.flatMap((m,y)=>{const b=o[y],x=lc(m,n);return cc(b,x)}).filter(qt),c=Vt(l,m=>m.height)+s,u=a.flatMap((m,y)=>{const b=o[y];return uc(b)}).filter(m=>m!==null),f=u.length===0?0:Vt(u,m=>m.height),{inset:d=c,insetLeft:h=d,insetBottom:p=d,insetTop:v=d+f,insetRight:g=d}=r;return Object.assign(Object.assign({},r),{insetLeft:h,insetBottom:p,insetTop:v,insetRight:g})}function kg(t,r,e,n,i,a,o){const s=Kt(t,p=>p.position),{padding:l=a.padding,paddingLeft:c=l,paddingRight:u=l,paddingBottom:f=l,paddingTop:d=l}=i,h={paddingBottom:f,paddingLeft:c,paddingTop:d,paddingRight:u};for(const p of n){const v=`padding${Lf(sd(p))}`,g=s.get(p)||[],m=h[v],y=E=>{E.size===void 0&&(E.size=E.defaultSize)},b=E=>{E.type==="group"?(E.children.forEach(y),E.size=Vt(E.children,_=>_.size)):E.size=E.defaultSize},x=E=>{E.size||(m!=="auto"?b(E):(Dw(E,r,e,p,a,o),y(E)))},O=E=>{E.type.startsWith("axis")&&E.labelAutoHide===void 0&&(E.labelAutoHide=!0)},w=p==="bottom"||p==="top",S=Rn(g,E=>E.order),k=g.filter(E=>E.type.startsWith("axis")&&E.order==S);if(k.length&&(k[0].crossPadding=0),typeof m=="number")g.forEach(y),g.forEach(O);else if(g.length===0)h[v]=0;else{const E=w?r+e[0]+e[1]:r,_=jw(g,E);_.forEach(x);const A=_.reduce((M,{size:T,crossPadding:C=12})=>M+T+C,0);h[v]=A}}return h}function K3(t,r,e){const n=Kt(t,w=>`${w.plane||"xy"}-${w.position}`),{paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:d,innerWidth:h,insetBottom:p,insetLeft:v,insetRight:g,insetTop:m,height:y,width:b,depth:x}=e,O={xy:Jc({width:b,height:y,paddingLeft:i,paddingRight:a,paddingTop:o,paddingBottom:s,marginLeft:l,marginTop:c,marginBottom:u,marginRight:f,innerHeight:d,innerWidth:h,insetBottom:p,insetLeft:v,insetRight:g,insetTop:m}),yz:Jc({width:x,height:y,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:x,innerHeight:y,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0}),xz:Jc({width:b,height:x,paddingLeft:0,paddingRight:0,paddingTop:0,paddingBottom:0,marginLeft:0,marginTop:0,marginBottom:0,marginRight:0,innerWidth:b,innerHeight:x,insetBottom:0,insetLeft:0,insetRight:0,insetTop:0})};for(const[w,S]of n.entries()){const[k,E]=w.split("-"),_=O[k][E],[A,M]=Oy(S,T=>typeof T.type!="string"?!1:!!(E==="center"||T.type.startsWith("axis")&&["inner","outer"].includes(E)));A.length&&Z3(A,r,_,E),M.length&&o5(S,r,_)}}function Jc({width:t,height:r,paddingLeft:e,paddingRight:n,paddingTop:i,paddingBottom:a,marginLeft:o,marginTop:s,marginBottom:l,marginRight:c,innerHeight:u,innerWidth:f,insetBottom:d,insetLeft:h,insetRight:p,insetTop:v}){const g=e+o,m=i+s,y=n+c,b=a+l,x=t-o-c,O=[g+h,m+v,f-h-p,u-v-d,"center",null,null];return{top:[g,0,f,m,"vertical",!0,_n,o,x],right:[t-y,m,y,u,"horizontal",!1,_n],bottom:[g,r-b,f,b,"vertical",!1,_n,o,x],left:[0,m,g,u,"horizontal",!0,_n],"top-left":[g,0,f,m,"vertical",!0,_n],"top-right":[g,0,f,m,"vertical",!0,_n],"bottom-left":[g,r-b,f,b,"vertical",!1,_n],"bottom-right":[g,r-b,f,b,"vertical",!1,_n],center:O,inner:O,outer:O}}function Z3(t,r,e,n){const[i,a]=Oy(t,o=>!!(typeof o.type=="string"&&o.type.startsWith("axis")));Q3(i,r,e,n),s5(a,r,e)}function Q3(t,r,e,n){n==="center"?TM(r)?a5(t,r,e):$t(r)?e5(t,r,e):Bl(r)&&n5(t,r,e,t[0].orientation):n==="inner"?J3(t,r,e):n==="outer"&&t5(t,r,e)}function J3(t,r,e){const[n,i,,a]=e,[o,s]=r.getCenter(),[l]=Fl(r),c=a/2,u=l*c,f=o-u,d=s-u;for(let h=0;h<t.length;h++){const p=t[h];p.bbox={x:n+f,y:i+d,width:u*2,height:u*2}}}function t5(t,r,e){const[n,i,a,o]=e;for(const s of t)s.bbox={x:n,y:i,width:a,height:o}}function e5(t,r,e){const[n,i,a,o]=e;for(const s of t)s.bbox={x:n,y:i,width:a,height:o}}function n5(t,r,e,n){n==="horizontal"?i5(t,r,e):n==="vertical"&&r5(t,r,e)}function r5(t,r,e){const[n,i,,a]=e,o=new Array(t.length).fill(0),l=r.map(o).filter((c,u)=>u%2===0).map(c=>c+n);for(let c=0;c<t.length;c++){const u=t[c],f=l[c],d=l[c+1]-f;u.bbox={x:f,y:i,width:d,height:a}}}function i5(t,r,e){const[n,i,a]=e,o=new Array(t.length).fill(0),l=r.map(o).filter((c,u)=>u%2===1).map(c=>c+i);for(let c=0;c<t.length;c++){const u=t[c],f=l[c],d=l[c+1]-f;u.bbox={x:n,y:f,width:a,height:d}}}function a5(t,r,e,n){const[i,a,o,s]=e;for(const l of t)l.bbox={x:i,y:a,width:o,height:s},l.radar={index:t.indexOf(l),count:t.length}}function o5(t,r,e){const[n,i,a,o,s,l,c,u,f]=e,[d,h,p,v,g,m,y,b]=s==="vertical"?["y",i,"x",n,"height",o,"width",a]:["x",n,"y",i,"width",a,"height",o];t.sort((E,_)=>c==null?void 0:c(E.order,_.order));const x=E=>E==="title"||E==="group"||E.startsWith("legend"),O=(E,_,A)=>A===void 0?_:x(E)?A:_,w=(E,_,A)=>A===void 0?_:x(E)?A:_,S=l?h+m:h;for(let E=0,_=S;E<t.length;E++){const A=t[E],{crossPadding:M=0,type:T}=A,{size:C}=A;A.bbox={[d]:l?_-C-M:_+M,[p]:w(T,v,u),[g]:C,[y]:O(T,b,f)},_+=(C+M)*(l?-1:1)}const k=t.filter(E=>E.type==="group");for(const E of k){const{bbox:_,children:A}=E,M=_[y],T=M/A.length,C=A.reduce((N,j)=>{var B;const F=(B=j.layout)===null||B===void 0?void 0:B.justifyContent;return F||N},"flex-start"),I=A.map((N,j)=>{const{length:B=T,padding:F=0}=N;return B+(j===A.length-1?0:F)}),R=yn(I),L=M-R,P=C==="flex-start"?0:C==="center"?L/2:L;for(let N=0,j=_[p]+P;N<A.length;N++){const B=A[N],{padding:F=0}=B,$=N===A.length-1?0:F;B.bbox={[g]:_[g],[d]:_[d],[p]:j,[y]:I[N]-$},X(B,{layout:{justifyContent:C}}),j+=I[N]}}}function s5(t,r,e){if(t.length===0)return;const[n,i,a,o]=e,[s]=Fl(r),l=o/2*s/Math.sqrt(2),c=n+a/2,u=i+o/2;for(let f=0;f<t.length;f++){const d=t[f];d.bbox={x:c-l,y:u-l,width:l*2,height:l*2}}}var l5=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},la=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const $w=Symbol("CALLBACK_ITEM");function c5(t,r,e){const{encode:n={},scale:i={},transform:a=[]}=r,o=la(r,["encode","scale","transform"]);return[t,Object.assign(Object.assign({},o),{encode:n,scale:i,transform:a})]}function zw(t,r,e){return l5(this,void 0,void 0,function*(){const{library:n}=e,{data:i}=r,[a]=ne("data",n),o=w5(i),{transform:s=[]}=o,u=[la(o,["transform"]),...s].map(h=>a(h,e)),f=yield R2(u)(i),d=i&&!Array.isArray(i)&&!Array.isArray(f)?{value:f}:f;return[Array.isArray(f)?Oi(f):[],Object.assign(Object.assign({},r),{data:d})]})}function u5(t,r,e){const{encode:n}=r;if(!n)return[t,r];const i={};for(const[a,o]of Object.entries(n))if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=`${a}${s===0?"":s}`;i[l]=o[s]}else i[a]=o;return[t,Object.assign(Object.assign({},r),{encode:i})]}function f5(t,r,e){const{encode:n,data:i}=r;if(!n)return[t,r];const a=Jn(n,o=>b5(o)?o:{type:x5(i,o),value:o});return[t,Object.assign(Object.assign({},r),{encode:a})]}function d5(t,r,e){const{encode:n}=r;if(!n)return[t,r];const i=Jn(n,(a,o)=>{const{type:s}=a;return s!=="constant"||y3(o)?a:Object.assign(Object.assign({},a),{constant:!0})});return[t,Object.assign(Object.assign({},r),{encode:i})]}function h5(t,r,e){const{encode:n,data:i}=r;if(!n)return[t,r];const{library:a}=e,o=E5(a),s=Jn(n,l=>o(i,l));return[t,Object.assign(Object.assign({},r),{encode:s})]}function p5(t,r,e){const{tooltip:n={}}=r;return vr(n)?[t,r]:Array.isArray(n)?[t,Object.assign(Object.assign({},r),{tooltip:{items:n}})]:Ji(n)&&Cx(n)?[t,Object.assign(Object.assign({},r),{tooltip:n})]:[t,Object.assign(Object.assign({},r),{tooltip:{items:[n]}})]}function v5(t,r,e){const{data:n,encode:i,tooltip:a={}}=r;if(vr(a))return[t,r];const o=f=>{if(!f)return f;if(typeof f=="string")return t.map(d=>({name:f,value:n[d][f]}));if(Ji(f)){const{field:d,channel:h,color:p,name:v=d,valueFormatter:g=w=>w}=f,m=typeof g=="string"?xi(g):g,y=h&&i[h],b=y&&i[h].field,x=v||b||h,O=[];for(const w of t){const S=d?n[w][d]:y?i[h].value[w]:null;O[w]={name:x,color:p,value:m(S)}}return O}if(typeof f=="function"){const d=[];for(const h of t){const p=f(n[h],h,n,i);Ji(p)?d[h]=Object.assign(Object.assign({},p),{[$w]:!0}):d[h]={value:p}}return d}return f},{title:s,items:l=[]}=a,c=la(a,["title","items"]),u=Object.assign({title:o(s),items:Array.isArray(l)?l.map(o):[]},c);return[t,Object.assign(Object.assign({},r),{tooltip:u})]}function g5(t,r,e){const{encode:n}=r,i=la(r,["encode"]);if(!n)return[t,r];const a=Object.entries(n),o=a.filter(([,l])=>{const{value:c}=l;return Array.isArray(c[0])}).flatMap(([l,c])=>{const u=[[l,new Array(t.length).fill(void 0)]],{value:f}=c,d=la(c,["value"]);for(let h=0;h<f.length;h++){const p=f[h];if(Array.isArray(p))for(let v=0;v<p.length;v++){const g=u[v]||[`${l}${v}`,new Array(t).fill(void 0)];g[1][h]=p[v],u[v]=g}}return u.map(([h,p])=>[h,Object.assign({type:"column",value:p},d)])}),s=Object.fromEntries([...a,...o]);return[t,Object.assign(Object.assign({},i),{encode:s})]}function m5(t,r,e){const{axis:n={},legend:i={},slider:a={},scrollbar:o={}}=r,s=(c,u)=>{if(typeof c=="boolean")return c?{}:null;const f=c[u];return f===void 0||f?f:null},l=typeof n=="object"?Array.from(new Set(["x","y","z",...Object.keys(n)])):["x","y","z"];return X(r,{scale:Object.assign(Object.assign({},Object.fromEntries(l.map(c=>{const u=s(o,c);return[c,Object.assign({guide:s(n,c),slider:s(a,c),scrollbar:u},u&&{ratio:u.ratio===void 0?.5:u.ratio})]}))),{color:{guide:s(i,"color")},size:{guide:s(i,"size")},shape:{guide:s(i,"shape")},opacity:{guide:s(i,"opacity")}})}),[t,r]}function y5(t,r,e){const{animate:n}=r;return n||n===void 0?[t,r]:(X(r,{animate:{enter:{type:null},exit:{type:null},update:{type:null}}}),[t,r])}function b5(t){if(typeof t!="object"||t instanceof Date||t===null)return!1;const{type:r}=t;return qt(r)}function x5(t,r){return typeof r=="function"?"transform":typeof r=="string"&&O5(t,r)?"field":"constant"}function O5(t,r){return Array.isArray(t)?t.some(e=>e[r]!==void 0):!1}function w5(t){if(re(t))return{type:"inline",value:t};if(!t)return{type:"inline",value:null};if(Array.isArray(t))return{type:"inline",value:t};const{type:r="inline"}=t,e=la(t,["type"]);return Object.assign(Object.assign({},e),{type:r})}var Gw=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},S5=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function k5(t,r,e){return Gw(this,void 0,void 0,function*(){const[n,i]=yield _5(t,r,e),{encode:a,scale:o,data:s,tooltip:l}=i;if(Array.isArray(s)===!1)return null;const{channels:c}=r,u=hf(Object.entries(a).filter(([,d])=>qt(d)),d=>d.map(([h,p])=>Object.assign({name:h},p)),([d])=>{var h;const p=(h=/([^\d]+)\d*$/.exec(d))===null||h===void 0?void 0:h[1],v=c.find(g=>g.name===p);return v!=null&&v.independent?d:p}),f=c.filter(d=>{const{name:h,required:p}=d;if(u.find(([v])=>v===h))return!0;if(p)throw new Error(`Missing encoding for channel: ${h}.`);return!1}).flatMap(d=>{const{name:h,scale:p,scaleKey:v,range:g,quantitative:m,ordinal:y}=d;return u.filter(([x])=>x.startsWith(h)).map(([x,O],w)=>{const S=O.some(R=>R.visual),k=O.some(R=>R.constant),E=o[x]||{},{independent:_=!1,key:A=v||x,type:M=k?"constant":S?"identity":p}=E,T=S5(E,["independent","key","type"]),C=M==="constant",I=C?void 0:g;return{name:x,values:O,scaleKey:_||C?Symbol("independent"):A,scale:Object.assign(Object.assign({type:M,range:I},T),{quantitative:m,ordinal:y})}})});return[i,Object.assign(Object.assign({},r),{index:n,channels:f,tooltip:l})]})}function E5(t){const[r]=ne("encode",t);return(e,n)=>n===void 0||e===void 0?null:Object.assign(Object.assign({},n),{type:"column",value:r(n)(e),field:A5(n)})}function _5(t,r,e){return Gw(this,void 0,void 0,function*(){const{library:n}=e,[i]=ne("transform",n),{preInference:a=[],postInference:o=[]}=r,{transform:s=[]}=t,l=[c5,zw,u5,f5,d5,h5,g5,y5,m5,p5,...a.map(i),...s.map(i),...o.map(i),v5];let c=[],u=t;for(const f of l)[c,u]=yield f(c,u,e);return[c,u]})}function A5(t){const{type:r,value:e}=t;return r==="field"&&typeof e=="string"?e:null}var hr=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},Lr=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function qd(t,r,e){var n;return hr(this,void 0,void 0,function*(){const{library:i}=e,[a]=ne("composition",i),[o]=ne("interaction",i),s=new Set(Object.keys(i).map(T=>{var C;return(C=/mark\.(.*)/.exec(T))===null||C===void 0?void 0:C[1]}).filter(qt)),l=new Set(Object.keys(i).map(T=>{var C;return(C=/component\.(.*)/.exec(T))===null||C===void 0?void 0:C[1]}).filter(qt)),c=T=>{const{type:C}=T;if(typeof C=="function"){const{props:I={}}=C,{composite:R=!0}=I;if(R)return"mark"}return typeof C!="string"?C:s.has(C)||l.has(C)?"mark":C},u=T=>c(T)==="mark",f=T=>c(T)==="standardView",d=T=>{const{type:C}=T;return typeof C!="string"?!1:!!l.has(C)},h=T=>{if(f(T))return[T];const C=c(T);return a({type:C,static:d(T)})(T)},p=[],v=new Map,g=new Map,m=[t],y=[];for(;m.length;){const T=m.shift();if(f(T)){const C=g.get(T),[I,R]=C?Hw(C,T,i):yield Ww(T,e);v.set(I,T),p.push(I);const L=R.flatMap(h).map(P=>Cw(P,i));if(m.push(...L),L.every(f)){const P=yield Promise.all(L.map(N=>Yw(N,e)));KW(P);for(let N=0;N<L.length;N++){const j=L[N],B=P[N];g.set(j,B)}}}else{const C=u(T)?T:yield qw(T,e),I=h(C);Array.isArray(I)?m.push(...I):typeof I=="function"&&y.push(I())}}e.emitter.emit(Dt.BEFORE_PAINT);const b=new Map,x=new Map,O=[];r.selectAll(Un(fl)).data(p,T=>T.key).join(T=>T.append("g").attr("className",fl).attr("id",C=>C.key).call(Eg).each(function(C,I,R){tf(C,ht(R),O,e),b.set(C,R)}),T=>T.call(Eg).each(function(C,I,R){tf(C,ht(R),O,e),x.set(C,R)}),T=>T.each(function(C,I,R){const L=R.nameInteraction.values();for(const P of L)P.destroy()}).remove());const w=(T,C,I)=>Array.from(T.entries()).map(([R,L])=>{const P=I||new Map,N=(F,$=W=>W)=>P.set(F,$),j=v.get(R),B=M5(ht(L),j,e);return{view:R,container:L,options:j,setState:N,update:(F,$)=>hr(this,void 0,void 0,function*(){const G=Cf(Array.from(P.values()))(j);return yield B(G,F,()=>{Ge($)&&C(T,$,P)})})}}),S=(T=x,C,I)=>{var R;const L=w(T,S,I);for(const P of L){const{options:N,container:j}=P,B=j.nameInteraction;let F=yl(N);C&&(F=F.filter($=>C.includes($[0])));for(const $ of F){const[W,G]=$,Y=B.get(W);if(Y&&((R=Y.destroy)===null||R===void 0||R.call(Y)),G){const z=Ju(P.view,W,G,o)(P,L,e.emitter);B.set(W,{destroy:z})}}}},k=w(b,S);for(const T of k){const{options:C}=T,I=new Map;T.container.nameInteraction=I;for(const R of yl(C)){const[L,P]=R;if(P){const j=Ju(T.view,L,P,o)(T,k,e.emitter);I.set(L,{destroy:j})}}}S();const{width:E,height:_}=t,A=[];for(const T of y){const C=new Promise(I=>hr(this,void 0,void 0,function*(){for(const R of T){const L=Object.assign({width:E,height:_},R);yield qd(L,r,e)}I()}));A.push(C)}e.views=p,(n=e.animations)===null||n===void 0||n.forEach(T=>T==null?void 0:T.cancel()),e.animations=O,e.emitter.emit(Dt.AFTER_PAINT);const M=O.filter(qt).map(Y5).map(T=>T.finished);return Promise.all([...M,...A])})}function Eg(t){t.style("transform",r=>`translate(${r.layout.x}, ${r.layout.y})`)}function T5(t){const[,r]=ne("interaction",t);return e=>{const[n,i]=e;try{return[n,r(n)]}catch{return[n,i.type]}}}function M5(t,r,e){const{library:n}=e,i=T5(n),a=l=>l[1]&&l[1].props&&l[1].props.reapplyWhenUpdate,s=yl(r).map(i).filter(a).map(l=>l[0]);return(l,c,u)=>hr(this,void 0,void 0,function*(){const f=[],[d,h]=yield Ww(l,e);tf(d,t,f,e);for(const p of s.filter(v=>v!==c))P5(p,t,l,d,e);for(const p of h)qd(p,t,e);return u(),{options:l,view:d}})}function P5(t,r,e,n,i){var a;const{library:o}=i,[s]=ne("interaction",o),c=r.node().nameInteraction,u=yl(e).find(([v])=>v===t),f=c.get(t);if(!f||((a=f.destroy)===null||a===void 0||a.call(f),!u[1]))return;const d=Ju(n,t,u[1],s),h={options:e,view:n,container:r.node(),update:v=>Promise.resolve(v)},p=d(h,[],i.emitter);c.set(t,{destroy:p})}function Ww(t,r){return hr(this,void 0,void 0,function*(){const{library:e}=r,n=yield L5(t,r),i=C5(n);t.interaction=i.interaction,t.coordinate=i.coordinate,t.marks=[...i.marks,...i.components];const a=Cw(i,e),o=yield Yw(a,r);return Hw(o,a,e)})}function C5(t){const{coordinate:r={},interaction:e={},style:n={},marks:i}=t,a=Lr(t,["coordinate","interaction","style","marks"]),o=i.map(d=>d.coordinate||{}),s=i.map(d=>d.interaction||{}),l=i.map(d=>d.viewStyle||{}),c=[...o,r].reduceRight((d,h)=>X(d,h),{}),u=[e,...s].reduce((d,h)=>X(d,h),{}),f=[...l,n].reduce((d,h)=>X(d,h),{});return Object.assign(Object.assign({},a),{marks:i,coordinate:c,interaction:u,style:f})}function L5(t,r){return hr(this,void 0,void 0,function*(){const{library:e}=r,[n,i]=ne("mark",e),a=new Set(Object.keys(e).map(h=>{var p;return(p=/component\.(.*)/.exec(h))===null||p===void 0?void 0:p[1]}).filter(qt)),{marks:o}=t,s=[],l=[],c=[...o],{width:u,height:f}=U3(t),d={options:t,width:u,height:f};for(;c.length;){const[h]=c.splice(0,1),p=yield qw(h,r),{type:v=Qi("G2Mark type is required."),key:g}=p;if(a.has(v))l.push(p);else{const{props:m={}}=i(v),{composite:y=!0}=m;if(!y)s.push(p);else{const{data:b}=p,x=Object.assign(Object.assign({},p),{data:b&&(Array.isArray(b)?b:b.value)}),O=yield n(x,d),w=Array.isArray(O)?O:[O];c.unshift(...w.map((S,k)=>Object.assign(Object.assign({},S),{key:`${g}-${k}`})))}}}return Object.assign(Object.assign({},t),{marks:s,components:l})})}function Yw(t,r){return hr(this,void 0,void 0,function*(){const{library:e}=r,[n]=ne("theme",e),[,i]=ne("mark",e),{theme:a,marks:o,coordinates:s=[]}=t,l=n(Uw(a)),c=new Map;for(const f of o){const{type:d}=f,{props:h={}}=i(d),p=yield k5(f,h,r);if(p){const[v,g]=p;c.set(v,g)}}const u=Kt(Array.from(c.values()).flatMap(f=>f.channels),({scaleKey:f})=>f);for(const f of u.values()){const d=f.reduce((x,{scale:O})=>X(x,O),{}),{scaleKey:h}=f[0],{values:p}=f[0],v=Array.from(new Set(p.map(x=>x.field).filter(qt))),g=X({guide:{title:v.length===0?void 0:v},field:v[0]},d),{name:m}=f[0],y=f.flatMap(({values:x})=>x.map(O=>O.value)),b=Object.assign(Object.assign({},HW(m,y,g,s,l,e)),{uid:Symbol("scale"),key:h});f.forEach(x=>x.scale=b)}return c})}function Ju(t,r,e,n){const i=t.theme,a=typeof r=="string"?i[r]||{}:{};return n(X(a,Object.assign({type:r},e)))}function Hw(t,r,e){var n;const[i]=ne("mark",e),[a]=ne("theme",e),[o]=ne("labelTransform",e),{key:s,frame:l=!1,theme:c,clip:u,style:f={},labelTransform:d=[]}=r,h=a(Uw(c)),p=Array.from(t.values()),v=UW(p,r),g=E3(k3(U5(Array.from(v),p,t),r,e)),m=X3(g,r,h,e),y=FW(m,r,e),b=l?X({mainLineWidth:1,mainStroke:"#000"},f):f;K3(jw(g),y,m),V3(g);const x=new Map(Array.from(t.values()).flatMap(E=>{const{channels:_}=E;return _.map(({scale:A})=>[A.uid,gg(A,e)])}));XW(t,x);const O={};for(const E of g){const{scales:_=[]}=E,A=[];for(const M of _){const{name:T,uid:C}=M,I=(n=x.get(C))!==null&&n!==void 0?n:gg(M,e);A.push(I),T==="y"&&I.update(Object.assign(Object.assign({},I.getOptions()),{xScale:O.x})),vg(O,{[T]:I})}E.scaleInstances=A}const w=[],S=new Map;for(const[E,_]of t.entries()){const{children:A,dataDomain:M,modifier:T,key:C,data:I}=E;S.set(C,I);const{index:R,channels:L,tooltip:P}=_,N=Object.fromEntries(L.map(({name:tt,scale:at})=>[tt,at])),j=Jn(N,({uid:tt})=>x.get(tt));vg(O,j);const B=VW(L,j),F=i(E),[$,W,G]=I5(F(R,j,B,y)),Y=M||$.length,V=T?T(W,Y,m):[],z=tt=>{var at,ot;return(ot=(at=P.title)===null||at===void 0?void 0:at[tt])===null||ot===void 0?void 0:ot.value},U=tt=>P.items.map(at=>at[tt]),q=$.map((tt,at)=>{const ot=Object.assign({points:W[at],transform:V[at],index:tt,markKey:C,viewKey:s,data:I[tt]},P&&{title:z(tt),items:U(tt)});for(const[lt,vt]of Object.entries(B))ot[lt]=vt[tt],G&&(ot[`series${Nr(lt)}`]=G[at].map(ft=>vt[ft]));return G&&(ot.seriesIndex=G[at]),G&&P&&(ot.seriesItems=G[at].map(lt=>U(lt)),ot.seriesTitle=G[at].map(lt=>z(lt))),ot});_.data=q,_.index=$;const rt=A==null?void 0:A(q,j,m);w.push(...rt||[])}return[{layout:m,theme:h,coordinate:y,markState:t,key:s,clip:u,scale:O,style:b,components:g,data:S,labelTransform:Cf(d.map(o))},w]}function tf(t,r,e,n){return hr(this,void 0,void 0,function*(){const{library:i}=n,{components:a,theme:o,layout:s,markState:l,coordinate:c,key:u,style:f,clip:d,scale:h}=t,{x:p,y:v,width:g,height:m}=s,y=Lr(s,["x","y","width","height"]),b=["view","plot","main","content"],x=b.map((P,N)=>N),O=["a","margin","padding","inset"],w=b.map(P=>yy(Object.assign({},o.view,f),P)),S=O.map(P=>et(y,P)),k=P=>P.style("x",N=>T[N].x).style("y",N=>T[N].y).style("width",N=>T[N].width).style("height",N=>T[N].height).each(function(N,j,B){q5(ht(B),w[N])});let E=0,_=0,A=g,M=m;const T=x.map(P=>{const N=S[P],{left:j=0,top:B=0,bottom:F=0,right:$=0}=N;return E+=j,_+=B,A-=j+$,M-=B+F,{x:E,y:_,width:A,height:M}});r.selectAll(Un(ng)).data(x.filter(P=>qt(w[P])),P=>b[P]).join(P=>P.append("rect").attr("className",ng).style("zIndex",-2).call(k),P=>P.call(k),P=>P.remove());const C=F5(l),I=C?{duration:C[1]}:!1;for(const[,P]of vf(a,N=>`${N.type}-${N.position}`))P.forEach((N,j)=>N.index=j);const R=r.selectAll(Un(eg)).data(a,P=>`${P.type}-${P.position}-${P.index}`).join(P=>P.append("g").style("zIndex",({zIndex:N})=>N||-1).attr("className",eg).append(N=>Sg(X({animate:I,scale:h},N),c,o,i,l)),P=>P.transition(function(N,j,B){const{preserve:F=!1}=N;if(F)return;const $=Sg(X({animate:I,scale:h},N),c,o,i,l),{attributes:W}=$,[G]=B.childNodes;return G.update(W,!1)})).transitions();e.push(...R.flat().filter(qt));const L=r.selectAll(Un(dl)).data([s],()=>u).join(P=>P.append("rect").style("zIndex",0).style("fill","transparent").attr("className",dl).call(_g).call(Ag,Array.from(l.keys())).call(Tg,d),P=>P.call(Ag,Array.from(l.keys())).call(N=>C?X5(N,C):_g(N)).call(Tg,d)).transitions();e.push(...L.flat());for(const[P,N]of l.entries()){const{data:j}=N,{key:B,class:F,type:$}=P,W=r.select(`#${B}`),G=G5(P,N,t,n),Y=W5(P,N,t,i),V=H5(P,N,t,i),z=V5(P,N,t,i),U=$5(r,W,F,"element"),q=W.selectAll(Un(Gn)).selectFacetAll(U).data(j,rt=>rt.key,rt=>rt.groupKey).join(rt=>rt.append(G).attr("className",Gn).attr("markType",$).transition(function(tt,at,ot){return Y(tt,[ot])}),rt=>rt.call(tt=>{const at=tt.parent(),ot=N2(lt=>{const[vt,ft]=lt.getBounds().min;return[vt,ft]});tt.transition(function(lt,vt,ft){z5(ft,at,ot);const dt=G(lt,vt),mt=V(lt,[ft],[dt]);return mt!=null&&mt.length||(ft.nodeName===dt.nodeName&&dt.nodeName!=="g"?Rf(ft,dt):(ft.parentNode.replaceChild(dt,ft),dt.className=Gn,dt.markType=$,dt.__data__=ft.__data__)),mt}).attr("markType",$).attr("className",Gn)}),rt=>rt.each(function(tt,at,ot){ot.__removed__=!0}).transition(function(tt,at,ot){return z(tt,[ot])}).remove(),rt=>rt.append(G).attr("className",Gn).attr("markType",$).transition(function(tt,at,ot){const{__fromElements__:lt}=ot,vt=V(tt,lt,[ot]);return new tl(lt,null,ot.parentNode).transition(vt).remove(),vt}),rt=>rt.transition(function(tt,at,ot){const vt=new tl([],ot.__toData__,ot.parentNode).append(G).attr("className",Gn).attr("markType",$).nodes();return V(tt,[ot],vt)}).remove()).transitions();e.push(...q.flat())}R5(t,r,e,i,n)})}function R5(t,r,e,n,i){const[a]=ne("labelTransform",n),{markState:o,labelTransform:s}=t,l=r.select(Un(Hu)).node(),c=new Map,u=new Map,f=Array.from(o.entries()).flatMap(([m,y])=>{const{labels:b=[],key:x}=m,O=B5(m,y,t,n,i),w=r.select(`#${x}`).selectAll(Un(Gn)).nodes().filter(S=>!S.__removed__);return b.flatMap((S,k)=>{const{transform:E=[]}=S,_=Lr(S,["transform"]);return w.flatMap(A=>{const M=N5(_,k,A);return M.forEach(T=>{c.set(T,C=>O(Object.assign(Object.assign({},C),{element:A}))),u.set(T,S)}),M})})}),d=ht(l).selectAll(Un(Vu)).data(f,m=>m.key).join(m=>m.append(y=>c.get(y)(y)).attr("className",Vu),m=>m.each(function(y,b,x){const w=c.get(y)(y);Rf(x,w)}),m=>m.remove()).nodes(),h=Kt(d,m=>u.get(m.__data__)),{coordinate:p,layout:v}=t,g={canvas:i.canvas,coordinate:p,layout:v};for(const[m,y]of h){const{transform:b=[]}=m;Cf(b.map(a))(y,g)}s&&s(d,g)}function N5(t,r,e){const{seriesIndex:n,seriesKey:i,points:a,key:o,index:s}=e.__data__,l=D5(e);if(!n)return[Object.assign(Object.assign({},t),{key:`${o}-${r}`,bounds:l,index:s,points:a,dependentElement:e})];const c=j5(t),u=n.map((f,d)=>Object.assign(Object.assign({},t),{key:`${i[d]}-${r}`,bounds:[a[d]],index:f,points:a,dependentElement:e}));return c?c(u):u}function I5([t,r,e]){if(e)return[t,r,e];const n=[],i=[];for(let a=0;a<t.length;a++){const o=t[a],s=r[a];s.every(([l,c])=>qt(l)&&qt(c))&&(n.push(o),i.push(s))}return[n,i]}function j5(t){const{selector:r}=t;if(!r)return null;if(typeof r=="function")return r;if(r==="first")return e=>[e[0]];if(r==="last")return e=>[e[e.length-1]];throw new Error(`Unknown selector: ${r}`)}function D5(t){const r=t.cloneNode(!0),e=t.getAnimations();r.style.visibility="hidden",e.forEach(o=>{const s=o.effect.getKeyframes();r.attr(s[s.length-1])}),t.parentNode.appendChild(r);const n=r.getLocalBounds();r.destroy();const{min:i,max:a}=n;return[i,a]}function B5(t,r,e,n,i){const[a]=ne("shape",n),{data:o,encode:s}=t,{data:l,defaultLabelShape:c}=r,u=l.map(v=>v.points),f=Jn(s,v=>v.value),{theme:d,coordinate:h}=e,p=Object.assign(Object.assign({},i),{document:Pw(i),theme:d,coordinate:h});return v=>{const{index:g,points:m}=v,y=o[g],{formatter:b=N=>`${N}`,transform:x,style:O,render:w,selector:S,element:k}=v,E=Lr(v,["formatter","transform","style","render","selector","element"]),_=Jn(Object.assign(Object.assign({},E),O),N=>Vw(N,y,g,o,{channel:f,element:k})),{shape:A=c,text:M}=_,T=Lr(_,["shape","text"]),C=typeof b=="string"?xi(b):b,I=Object.assign(Object.assign({},T),{text:C(M,y,g,o),datum:y}),R=Object.assign({type:`label.${A}`,render:w},T),L=a(R,p),P=Xw(d,"label",A,"label");return L(m,I,P,u)}}function Vw(t,r,e,n,i){return typeof t=="function"?t(r,e,n,i):typeof t!="string"?t:Ji(r)&&r[t]!==void 0?r[t]:t}function F5(t){let r=-1/0,e=1/0;for(const[n,i]of t){const{animate:a={}}=n,{data:o}=i,{enter:s={},update:l={},exit:c={}}=a,{type:u,duration:f=300,delay:d=0}=l,{type:h,duration:p=300,delay:v=0}=s,{type:g,duration:m=300,delay:y=0}=c;for(const b of o){const{updateType:x=u,updateDuration:O=f,updateDelay:w=d,enterType:S=h,enterDuration:k=p,enterDelay:E=v,exitDuration:_=m,exitDelay:A=y,exitType:M=g}=b;(x===void 0||x)&&(r=Math.max(r,O+w),e=Math.min(e,w)),(M===void 0||M)&&(r=Math.max(r,_+A),e=Math.min(e,A)),(S===void 0||S)&&(r=Math.max(r,k+E),e=Math.min(e,E))}}return r===-1/0?null:[e,r-e]}function $5(t,r,e,n){const i=t.node().parentElement;return!i||typeof i.findAll!="function"?[]:i.findAll(a=>a.style.facet!==void 0&&a.style.facet===e&&a!==r.node()).flatMap(a=>a.getElementsByClassName(n))}function z5(t,r,e){if(!t.__facet__)return;const n=t.parentNode.parentNode,i=r.parentNode,[a,o]=e(n),[s,l]=e(i),c=`translate(${a-s}, ${o-l})`;I2(t,c),r.append(t)}function G5(t,r,e,n){const{library:i}=n,[a]=ne("shape",i),{data:o,encode:s}=t,{defaultShape:l,data:c,shape:u}=r,f=Jn(s,y=>y.value),d=c.map(y=>y.points),{theme:h,coordinate:p}=e,{type:v,style:g={}}=t,m=Object.assign(Object.assign({},n),{document:Pw(n),coordinate:p,theme:h});return y=>{const{shape:b=l}=g,{shape:x=b,points:O,seriesIndex:w,index:S}=y,k=Lr(y,["shape","points","seriesIndex","index"]),E=Object.assign(Object.assign({},k),{index:S}),_=w?w.map(I=>o[I]):o[S],A=w||S,M=Jn(g,I=>Vw(I,_,A,o,{channel:f})),T=u[x]?u[x](M,m):a(Object.assign(Object.assign({},M),{type:Kw(t,x)}),m),C=Xw(h,v,x,l);return T(O,E,C,d)}}function Xw(t,r,e,n){if(typeof r!="string")return;const{color:i}=t,a=t[r]||{},o=a[e]||a[n];return Object.assign({color:i},o)}function Kd(t,r,e,n,i){var a,o;const[,s]=ne("shape",i),[l]=ne("animation",i),{defaultShape:c,shape:u}=e,{theme:f,coordinate:d}=n,p=`default${Nr(t)}Animation`,{[p]:v}=((a=u[c])===null||a===void 0?void 0:a.props)||s(Kw(r,c)).props,{[t]:g={}}=f,m=((o=r.animate)===null||o===void 0?void 0:o[t])||{},y={coordinate:d};return(b,x,O)=>{const{[`${t}Type`]:w,[`${t}Delay`]:S,[`${t}Duration`]:k,[`${t}Easing`]:E}=b,_=Object.assign({type:w||v},m);if(!_.type)return null;const T=l(_,y)(x,O,X(g,{delay:S,duration:k,easing:E}));let C=[];return Array.isArray(T)?C=T:C=[T],C.filter(Boolean)}}function W5(t,r,e,n){return Kd("enter",t,r,e,n)}function Y5(t){return t.finished.then(()=>{t.cancel()}),t}function H5(t,r,e,n){return Kd("update",t,r,e,n)}function V5(t,r,e,n){return Kd("exit",t,r,e,n)}function Uw(t={}){if(typeof t=="string")return{type:t};const{type:r="light"}=t,e=Lr(t,["type"]);return Object.assign(Object.assign({},e),{type:r})}function yl(t){const r={event:!0,tooltip:!0,sliderFilter:!0,legendFilter:!0,scrollbarFilter:!0},{interaction:e={}}=t;return Object.entries(X(r,e)).reverse()}function qw(t,r){return hr(this,void 0,void 0,function*(){const{data:e}=t,n=Lr(t,["data"]);if(e==null)return t;const[,{data:i}]=yield zw([],{data:e},r);return Object.assign({data:i},n)})}function _g(t){t.style("transform",r=>`translate(${r.paddingLeft+r.marginLeft}, ${r.paddingTop+r.marginTop})`).style("width",r=>r.innerWidth).style("height",r=>r.innerHeight)}function X5(t,r){const[e,n]=r;t.transition(function(i,a,o){const{transform:s,width:l,height:c}=o.style,{paddingLeft:u,paddingTop:f,innerWidth:d,innerHeight:h,marginLeft:p,marginTop:v}=i,g=[{transform:s,width:l,height:c},{transform:`translate(${u+p}, ${f+v})`,width:d,height:h}];return o.animate(g,{delay:e,duration:n,fill:"both"})})}function Kw(t,r){const{type:e}=t;return typeof r=="string"?`${e}.${r}`:r}function Ag(t,r){const e=a=>a.class!==void 0?`${a.class}`:"";t.nodes().length===0||(t.selectAll(Un(tg)).data(r,a=>a.key).join(a=>a.append("g").attr("className",tg).attr("id",o=>o.key).style("facet",e).style("fill","transparent").style("zIndex",o=>{var s;return(s=o.zIndex)!==null&&s!==void 0?s:0}),a=>a.style("facet",e).style("fill","transparent").style("zIndex",o=>{var s;return(s=o.zIndex)!==null&&s!==void 0?s:0}),a=>a.remove()),t.select(Un(Hu)).node())||t.append("g").attr("className",Hu).style("zIndex",0)}function Un(...t){return t.map(r=>`.${r}`).join("")}function Tg(t,r){t.node()&&t.style("clipPath",e=>{if(!r)return null;const{paddingTop:n,paddingLeft:i,marginLeft:a,marginTop:o,innerWidth:s,innerHeight:l}=e;return new Br({style:{x:i+a,y:n+o,width:s,height:l}})})}function U5(t,r,e){var n;for(const[c]of e.entries())if(c.type==="cell")return t.filter(u=>u.name!=="shape");if(r.length!==1||t.some(c=>c.name==="shape"))return t;const{defaultShape:i}=r[0];if(!["point","line","rect","hollow"].includes(i))return t;const o={point:"point",line:"hyphen",rect:"square",hollow:"hollow"},l={field:((n=t.find(c=>c.name==="color"))===null||n===void 0?void 0:n.field)||null,name:"shape",type:"constant",domain:[],range:[o[i]]};return[...t,l]}function q5(t,r){for(const[e,n]of Object.entries(r))t.style(e,n)}function K5(...t){return r=>t.reduce((e,n)=>n(e),r)}function Z5(t){const{style:r,scale:e,type:n}=t,i={},a=Rt(r,"columnWidthRatio");return a&&n==="interval"&&(i.x=Object.assign(Object.assign({},e==null?void 0:e.x),{padding:1-a})),Object.assign(Object.assign({},t),{scale:Object.assign(Object.assign({},e),i)})}function Zw(t){const r=Q5(t);return r.children&&Array.isArray(r.children)&&(r.children=r.children.map(e=>Zw(e))),r}function Q5(t){return K5(Z5)(t)}function J5(t){const r=X({},t),e=new Map([[r,null]]),n=new Map([[null,-1]]),i=[r];for(;i.length;){const a=i.shift();if(a.key===void 0){const s=e.get(a),l=n.get(a),c=s===null?"0":`${s.key}-${l}`;a.key=c}const{children:o=[]}=a;if(Array.isArray(o))for(let s=0;s<o.length;s++){const l=X({},o[s]);o[s]=l,e.set(l,a),n.set(l,s),i.push(l)}}return r}function tY(t,r){const e=new rw;return e.registerPlugin(new aw),new X0({width:t,height:r,container:document.createElement("div"),renderer:e})}function eY(t,r={},e=()=>{},n=i=>{throw i}){const i=Ps(t),{width:a=640,height:o=480,depth:s=0}=i,l=Zw(i),c=J5(l),{canvas:u=tY(a,o),emitter:f=new ow,library:d}=r;r.canvas=u,r.emitter=f;const{width:h,height:p}=u.getConfig();(h!==a||p!==o)&&u.resize(a,o),f.emit(Dt.BEFORE_RENDER);const v=ht(u.document.documentElement);return u.ready.then(()=>qd(Object.assign(Object.assign({},c),{width:a,height:o,depth:s}),v,r)).then(()=>{if(s){const[g,m]=u.document.documentElement.getPosition();u.document.documentElement.setPosition(g,m,-s/2)}u.requestAnimationFrame(()=>{u.requestAnimationFrame(()=>{f.emit(Dt.AFTER_RENDER),e==null||e()})})}).catch(g=>{n==null||n(g)}),rY(u.getConfig().container)}function Mg(t,r={},e=!1,n=!0){const{canvas:i,emitter:a}=r;i&&(nY(i),e?i.destroy():i.destroyChildren()),n&&a.off()}function nY(t){const r=t.getRoot().querySelectorAll(`.${fl}`);r==null||r.forEach(e=>{const{nameInteraction:n=new Map}=e;(n==null?void 0:n.size)>0&&Array.from(n==null?void 0:n.values()).forEach(i=>{i==null||i.destroy()})})}function rY(t){return typeof t=="string"?document.getElementById(t):t}function so(t,r){if(r(t))return!0;if(t.tagName==="g"){const{childNodes:e=[]}=t;for(const n of e)if(so(n,r))return!0}return!1}const iY={visibility:"visible",opacity:1,fillOpacity:1,strokeOpacity:1};function aY(t,r){let e;return so(t,n=>{var i;return n.tagName!=="g"&&((i=n.style)===null||i===void 0?void 0:i[r])!==void 0?(e=n.style[r],!0):!1}),e??iY[r]}function Zd(t,r,e,n){t.style[r]=e,t.children.forEach(i=>Zd(i,r,e))}function Qd(t){Zd(t,"visibility","hidden")}function fc(t){Zd(t,"visibility","visible")}var Ga=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function Rr(t){return ht(t).selectAll(`.${Gn}`).nodes().filter(r=>!r.__removed__)}function Qw(t,r){return ef(t,r).flatMap(({container:e})=>Rr(e))}function ef(t,r){return r.filter(e=>e!==t&&e.options.parentKey===t.options.key)}function jn(t){return ht(t).select(`.${dl}`).node()}function bl(t){if(t.tagName==="g")return t.getRenderBounds();const r=t.getGeometryBounds(),e=new _e;return e.setFromTransformedAABB(r,t.getWorldTransform()),e}function gi(t,r){const{offsetX:e,offsetY:n}=r,i=bl(t),{min:[a,o],max:[s,l]}=i,c=e<a||e>s,u=n<o||n>l;return c||u?null:[e-a,n-o]}function tu(t,r){const{offsetX:e,offsetY:n}=r,[i,a,o,s]=oY(t);return[Math.min(o,Math.max(i,e))-i,Math.min(s,Math.max(a,n))-a]}function oY(t){const r=t.getRenderBounds(),{min:[e,n],max:[i,a]}=r;return[e,n,i,a]}function Jw(t){return r=>r.__data__.color}function Ro(t){return r=>r.__data__.x}function mi(t){const r=Array.isArray(t)?t:[t],e=new Map(r.flatMap(n=>Array.from(n.markState.keys()).map(a=>[xl(n.key,a.key),a.data])));return n=>{const{index:i,markKey:a,viewKey:o}=n.__data__;return e.get(xl(o,a))[i]}}const Pg={selected:3,unselected:3,active:2,inactive:2,default:1},sY={selection:["selected","unselected"],highlight:["active","inactive"]},tS=(t,r,e)=>{so(t,n=>{"setAttribute"in n&&typeof n.setAttribute=="function"&&n.setAttribute(r,e)})};function eS(t,r){return r.forEach(e=>{const n=e.__interactionStyle__;n?e.__interactionStyle__=Object.assign(Object.assign({},n),t):e.__interactionStyle__=t}),(e=(i,a)=>i,n=tS)=>Pr(void 0,e,n)}function Pr(t,r=(n,i)=>n,e=tS){const n="__states__",i="__ordinal__",a=h=>Pg[h]||Pg.default,o=h=>{var p;return(p=Object.entries(sY).find(([v,g])=>g.includes(h)))===null||p===void 0?void 0:p[0]},s=h=>{var p;const{[n]:v=[],[i]:g={}}=h,m=[...v].sort((x,O)=>a(O)-a(x)),y=new Map;for(const x of m){const O=((p=t??h.__interactionStyle__)===null||p===void 0?void 0:p[x])||{};for(const[w,S]of Object.entries(O))y.has(w)||y.set(w,S)}const b=Object.assign({},g);for(const[x,O]of y.entries())b[x]=O;if(Object.keys(b).length!==0){for(const[x,O]of Object.entries(b)){const w=aY(h,x),S=r(O,h);e(h,x,S),x in g||(g[x]=w)}h[i]=g}},l=h=>{h[n]||(h[n]=[])};return{setState:(h,...p)=>{l(h),h[n]=[...p],s(h)},updateState:(h,...p)=>{l(h);const v=h[n],g=new Set(p.map(y=>o(y)).filter(y=>y!==void 0)),m=v.filter(y=>!g.has(o(y)));h[n]=[...m,...p],s(h)},removeState:(h,...p)=>{l(h);for(const v of p){const g=h[n].indexOf(v);g!==-1&&h[n].splice(g,1)}s(h)},hasState:(h,p)=>(l(h),h[n].indexOf(p)!==-1)}}function lY(t){return t===void 0?!0:typeof t!="object"?!1:Object.keys(t).length===0}function xl(t,r){return`${t},${r}`}function ca(t,r){const n=(Array.isArray(t)?t:[t]).flatMap(a=>a.marks.map(o=>[xl(a.key,o.key),o.state])),i={};for(const a of r){const[o,s]=Array.isArray(a)?a:[a,{}];i[o]=n.reduce((l,c)=>{const[u,f={}]=c,d=lY(f[o])?s:f[o];for(const[h,p]of Object.entries(d)){const v=l[h],g=(m,y,b,x)=>{const O=xl(x.__data__.viewKey,x.__data__.markKey);return u!==O?v==null?void 0:v(m,y,b,x):typeof p!="function"?p:p(m,y,b,x)};l[h]=g}return l},{})}return i}function No(t,r){const e=new Map(t.map((i,a)=>[i,a])),n=r?t.map(r):t;return(i,a)=>{if(typeof i!="function")return i;const o=e.get(a),s=r?r(a):a;return i(s,o,n,a)}}function nS(t){var{link:r=!1,valueof:e=(u,f)=>u,coordinate:n}=t,i=Ga(t,["link","valueof","coordinate"]);const a="element-link";if(!r)return[()=>{},()=>{}];const o=u=>u.__data__.points,s=(u,f)=>{const[,d,h]=u,[p,,,v]=f;return[d,p,v,h]};return[u=>{var f;if(u.length<=1)return;const d=fr(u,(h,p)=>{const{x:v}=h.__data__,{x:g}=p.__data__;return v-g});for(let h=1;h<d.length;h++){const p=Nn(),v=d[h-1],g=d[h],[m,y,b,x]=s(o(v),o(g));p.moveTo(...m),p.lineTo(...y),p.lineTo(...b),p.lineTo(...x),p.closePath();const O=Jn(i,E=>e(E,v)),{fill:w=v.getAttribute("fill")}=O,S=Ga(O,["fill"]),k=new Qe({className:a,style:Object.assign({d:p.toString(),fill:w,zIndex:-2},S)});(f=v.link)===null||f===void 0||f.remove(),v.parentNode.appendChild(k),v.link=k}},u=>{var f;(f=u.link)===null||f===void 0||f.remove(),u.link=null}]}function rS(t,r,e){const n=i=>{const{transform:a}=t.style;return a?`${a} ${i}`:i};if($t(e)){const{points:i}=t.__data__,[a,o]=Qt(e)?Ul(i):i,s=e.getCenter(),l=ye(a,s),c=ye(o,s),u=xn(l),f=t0(l,c),d=u+f/2,h=r*Math.cos(d),p=r*Math.sin(d);return n(`translate(${h}, ${p})`)}return Qt(e)?n(`translate(${r}, 0)`):n(`translate(0, ${-r})`)}function iS(t){var{document:r,background:e,scale:n,coordinate:i,valueof:a}=t,o=Ga(t,["document","background","scale","coordinate","valueof"]);const s="element-background";if(!e)return[()=>{},()=>{}];const l=(m,y,b)=>{const x=m.invert(y),O=y+m.getBandWidth(x)/2,w=m.getStep(x)/2,S=w*b;return[O-w+S,O+w-S]},c=(m,y)=>{const{x:b}=n;if(!$a(b))return[0,1];const{__data__:x}=m,{x:O}=x,[w,S]=l(b,O,y);return[w,S]},u=(m,y)=>{const{y:b}=n;if(!$a(b))return[0,1];const{__data__:x}=m,{y:O}=x,[w,S]=l(b,O,y);return[w,S]},f=(m,y)=>{const{padding:b}=y,[x,O]=c(m,b),[w,S]=u(m,b),k=[[x,w],[O,w],[O,S],[x,S]].map(M=>i.map(M)),{__data__:E}=m,{y:_,y1:A}=E;return ib(r,k,{y:_,y1:A},i,y)},d=(m,y)=>{const{transform:b="scale(1.2, 1.2)",transformOrigin:x="center center",stroke:O=""}=y,w=Ga(y,["transform","transformOrigin","stroke"]),S=Object.assign({transform:b,transformOrigin:x,stroke:O},w),k=m.cloneNode(!0);for(const[E,_]of Object.entries(S))k.style[E]=_;return k},h=()=>{const{x:m,y}=n;return[m,y].some($a)};return[m=>{m.background&&m.background.remove();const y=Jn(o,M=>a(M,m)),{fill:b="#CCD6EC",fillOpacity:x=.3,zIndex:O=-2,padding:w=.001,lineWidth:S=0}=y,k=Ga(y,["fill","fillOpacity","zIndex","padding","lineWidth"]),E=Object.assign(Object.assign({},k),{fill:b,fillOpacity:x,zIndex:O,padding:w,lineWidth:S}),A=(h()?f:d)(m,E);A.className=s,m.parentNode.parentNode.appendChild(A),m.background=A},m=>{var y;(y=m.background)===null||y===void 0||y.remove(),m.background=null},m=>m.className===s]}function br(t,r){const n=t.getRootNode().defaultView.getContextService().getDomElement();n!=null&&n.style&&(t.cursor=n.style.cursor,n.style.cursor=r)}function cY(t){br(t,t.cursor)}function Jd(t,r,e){return t.find(n=>Object.entries(r).every(([i,a])=>e(n)[i]===a))}function Ol(t,r){return Math.sqrt(Math.pow(t[0]-r[0],2)+Math.pow(t[1]-r[1],2))}function Aa(t,r=!1){const e=MA(t,n=>!!n).map((n,i)=>[i===0?"M":"L",...n]);return r&&e.push(["Z"]),e}function aS(t){return t.querySelectorAll(".element")}function uY(t,r,e=0){const n=[["M",...r[1]]],i=Ol(t,r[1]),a=Ol(t,r[0]);return i===0?n.push(["L",...r[3]],["A",a,a,0,e,1,...r[0]],["Z"]):n.push(["A",i,i,0,e,0,...r[2]],["L",...r[3]],["A",a,a,0,e,1,...r[0]],["Z"]),n}function Io(t,r){if(r(t))return t;let e=t.parent;for(;e&&!r(e);)e=e.parent;return e}const th=["interval","point","density"];function oS({elementsof:t,root:r,coordinate:e,scale:n,validFindByXMarks:i=th}){var a,o;let s=t(r);const l=u=>i.includes(u.markType);if(s.find(l)){s=s.filter(l);const u=n.x,f=n.series,d=(o=(a=u==null?void 0:u.getBandWidth)===null||a===void 0?void 0:a.call(u))!==null&&o!==void 0?o:0,h=f?p=>{var v,g;const m=Math.round(1/((v=f.valueBandWidth)!==null&&v!==void 0?v:1));return p.__data__.x+((g=p.__data__.series)!==null&&g!==void 0?g:0)*d+d/(m*2)}:p=>p.__data__.x+d/2;return s.sort((p,v)=>h(p)-h(v)),p=>{const v=gi(r,p);if(!v)return;const[g]=e.invert(v),m=oi(h).center,y=m(s,g);return s[y]}}return u=>{const{target:f}=u;return Io(f,d=>d.classList?d.classList.includes("element"):!1)}}var fY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function dY(t,{elements:r,datum:e,groupKey:n=p=>p,regionGroupKey:i=p=>p,link:a=!1,background:o=!1,delay:s=60,scale:l,coordinate:c,emitter:u,state:f={},region:d=!1,regionEleFilter:h=p=>th.includes(p.markType)}){var p,v;const g=(p=r(t))!==null&&p!==void 0?p:[],m=d?g.filter(h):g,y=new Set(m),b=d?i:n,x=Kt(m,b),O=oS({elementsof:r,root:t,coordinate:c,scale:l}),w=No(m,e),[S,k]=nS(Object.assign({elements:m,valueof:w,link:a,coordinate:c},et(f.active,"link"))),[E,_,A]=iS(Object.assign({document:t.ownerDocument,scale:l,coordinate:c,background:o,valueof:w},et(f.active,"background"))),M=X(f,{active:Object.assign({},((v=f.active)===null||v===void 0?void 0:v.offset)&&{transform:(...G)=>{const Y=f.active.offset(...G),[,V]=G;return rS(m[V],Y,c)}})}),T=eS(M,m),{updateState:C,removeState:I,hasState:R}=T(w);let L;const P=G=>{const{nativeEvent:Y=!0}=G;let V=G.target;if(d&&(V=O(G)),!y.has(V))return;L&&clearTimeout(L);const z=b(V),U=x.get(z),q=new Set(U);for(const rt of m)q.has(rt)?R(rt,"active")||C(rt,"active"):(C(rt,"inactive"),k(rt)),rt!==V&&_(rt);E(V),S(U),Y&&u.emit("element:highlight",{nativeEvent:Y,data:{data:e(V),group:U.map(e)}})},N=()=>{L&&clearTimeout(L),L=setTimeout(()=>{j(),L=null},s)},j=(G=!0)=>{for(const Y of m)I(Y,"active","inactive"),_(Y),k(Y);G&&u.emit("element:unhighlight",{nativeEvent:G})},B=G=>{let Y=G.target;if(d&&(Y=O(G)),!Y){s>0?N():j();return}o&&!A(Y)||!o&&!y.has(Y)||(s>0?N():j())},F=()=>{j()};t.addEventListener("pointerover",P),t.addEventListener("pointermove",P),t.addEventListener("pointerout",B),t.addEventListener("pointerleave",F);const $=G=>{const{nativeEvent:Y}=G;Y||j(!1)},W=G=>{const{nativeEvent:Y}=G;if(Y)return;const{data:V}=G.data,z=Jd(m,V,e);z&&P({target:z,nativeEvent:!1})};return u.on("element:highlight",W),u.on("element:unhighlight",$),()=>{t.removeEventListener("pointerover",P),t.removeEventListener("pointermove",P),t.removeEventListener("pointerout",B),t.removeEventListener("pointerleave",F),u.off("element:highlight",W),u.off("element:unhighlight",$);for(const G of m)_(G),k(G)}}function dc(t){var{delay:r,createGroup:e,createRegionGroup:n,background:i=!1,link:a=!1}=t,o=fY(t,["delay","createGroup","createRegionGroup","background","link"]);return(s,l,c)=>{const{container:u,view:f,options:d}=s,{scale:h,coordinate:p}=f,v=jn(u);return dY(v,Object.assign({elements:Rr,datum:mi(f),groupKey:e?e(f):void 0,regionGroupKey:n?n(f):Ro(),coordinate:p,scale:h,state:ca(d,[["active",i?{}:{lineWidth:"1",stroke:"#000"}],"inactive"]),background:i,link:a,delay:r,emitter:c},o))}}dc.props={reapplyWhenUpdate:!0};function sS(t){return dc(Object.assign(Object.assign({},t),{createGroup:Ro}))}sS.props={reapplyWhenUpdate:!0};function lS(t){return dc(Object.assign(Object.assign({},t),{createGroup:Jw}))}lS.props={reapplyWhenUpdate:!0};var hY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function pY(t,{elements:r,datum:e,groupKey:n=v=>v,regionGroupKey:i=v=>v,link:a=!1,single:o=!1,multipleSelectHotkey:s,coordinate:l,background:c=!1,scale:u,emitter:f,state:d={},region:h=!1,regionEleFilter:p=v=>th.includes(v.markType)}){var v;const g=r(t),m=new Set(g),y=oS({elementsof:r,root:t,coordinate:l,scale:u}),b=Kt(g,n),x=Kt(g,i),O=No(g,e),[w,S]=nS(Object.assign({link:a,elements:g,valueof:O,coordinate:l},et(d.selected,"link"))),[k,E]=iS(Object.assign({document:t.ownerDocument,background:c,coordinate:l,scale:u,valueof:O},et(d.selected,"background"))),_=X(d,{selected:Object.assign({},((v=d.selected)===null||v===void 0?void 0:v.offset)&&{transform:(...z)=>{const U=d.selected.offset(...z),[,q]=z;return rS(g[q],U,l)}})}),A=eS(_,g),{updateState:M,removeState:T,hasState:C}=A(O);let I=!o,R=null;const L=(z=!0)=>{for(const U of g)T(U,"selected","unselected"),S(U),E(U);z&&f.emit("element:unselect",{nativeEvent:!0})},P=({event:z,element:U,nativeEvent:q=!0,filter:rt=ot=>!0,groupBy:tt=n,groupMap:at=b})=>{const ot=g.filter(rt);if(C(U,"selected"))L();else{const lt=tt(U),vt=at.get(lt),ft=new Set(vt);for(const dt of ot)ft.has(dt)?M(dt,"selected"):(M(dt,"unselected"),S(dt)),dt!==U&&E(dt);if(w(vt),k(U),!q)return;f.emit("element:select",Object.assign(Object.assign({},z),{nativeEvent:q,data:{data:[e(U),...vt.map(e)]}}))}},N=({event:z,element:U,nativeEvent:q=!0,filter:rt=ot=>!0,groupBy:tt=n,groupMap:at=b})=>{const ot=tt(U),lt=at.get(ot),vt=new Set(lt),ft=g.filter(rt);if(C(U,"selected")){if(!g.some(mt=>!vt.has(mt)&&C(mt,"selected")))return L();for(const mt of lt)M(mt,"unselected"),S(mt),E(mt)}else{const dt=lt.some(mt=>C(mt,"selected"));for(const mt of ft)vt.has(mt)?M(mt,"selected"):C(mt,"selected")||M(mt,"unselected");!dt&&a&&w(lt),k(U)}q&&f.emit("element:select",Object.assign(Object.assign({},z),{nativeEvent:q,data:{data:g.filter(dt=>C(dt,"selected")).map(e)}}))},j=z=>{if(m.has(z))return!0;for(const U of m)if(so(U,rt=>rt===z))return!0;return!1},B=z=>{if(m.has(z))return z;for(const U of m){let q=null;if(so(U,rt=>{rt===z&&(q=U)}),q)return q}return z},F=z=>{const{target:U,nativeEvent:q=!0}=z,rt=I?N:P;let tt=U;const at=j(U);return!h||at?at?rt({event:z,element:B(tt),nativeEvent:q,groupBy:n}):L():(tt=y(z),m.has(tt)?rt({event:z,element:tt,nativeEvent:q,filter:p,groupBy:i,groupMap:x}):L())},$=Array.isArray(s)?s:[s],W=z=>{$.includes(z.code)&&!R&&(R=z.code,I=!0)},G=z=>{z.code===R&&(R=null,I=!1)};t.addEventListener("click",F),s&&(I=!1,document.addEventListener("keydown",W),document.addEventListener("keyup",G));const Y=z=>{const{nativeEvent:U,data:q}=z;if(U)return;const rt=I?q.data:q.data.slice(0,1);for(const tt of rt){const at=Jd(g,tt,e);F({target:at,nativeEvent:!1})}},V=()=>{L(!1)};return f.on("element:select",Y),f.on("element:unselect",V),()=>{for(const z of g)S(z);t.removeEventListener("click",F),s&&(document.removeEventListener("keydown",W),document.removeEventListener("keyup",G)),f.off("element:select",Y),f.off("element:unselect",V)}}function hc(t){var{createGroup:r,createRegionGroup:e,background:n=!1,link:i=!1}=t,a=hY(t,["createGroup","createRegionGroup","background","link"]);return(o,s,l)=>{const{container:c,view:u,options:f}=o,{coordinate:d,scale:h}=u,p=jn(c);return pY(p,Object.assign({elements:Rr,datum:mi(u),groupKey:r?r(u):void 0,regionGroupKey:e?e(u):Ro(),coordinate:d,scale:h,state:ca(f,[["selected",n?{}:{lineWidth:"1",stroke:"#000"}],"unselected"]),background:n,link:i,emitter:l},a))}}hc.props={reapplyWhenUpdate:!0};function cS(t){return hc(Object.assign(Object.assign({},t),{createGroup:Ro}))}cS.props={reapplyWhenUpdate:!0};function uS(t){return hc(Object.assign(Object.assign({},t),{createGroup:Jw}))}uS.props={reapplyWhenUpdate:!0};var vY=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},gY=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function mY(t){const{transform:r=[]}=t,e=r.find(i=>i.type==="normalizeY");if(e)return e;const n={type:"normalizeY"};return r.push(n),t.transform=r,n}function yY(t,r,e){const[n]=Array.from(t.entries()).filter(([i])=>i.type===r).map(([i])=>{const{encode:a}=i,o=s=>{const l=a[s];return[s,l?l.value:void 0]};return Object.fromEntries(e.map(o))});return n}function fS(t){var{wait:r=20,leading:e,trailing:n=!1,labelFormatter:i=o=>`${o}`}=t,a=gY(t,["wait","leading","trailing","labelFormatter"]);return o=>{const{view:s,container:l,update:c,setState:u}=o,{markState:f,scale:d,coordinate:h}=s,p=yY(f,"line",["x","y","series"]);if(!p)return;const{y:v,x:g,series:m=[]}=p,y=v.map((L,P)=>P),b=fr(y.map(L=>g[L])),x=jn(l),O=l.getElementsByClassName(Gn),w=l.getElementsByClassName(Vu),k=Kt(w,L=>L.__data__.key.split("-")[0]),E=new ki({style:Object.assign({x1:0,y1:0,x2:0,y2:x.getAttribute("height"),stroke:"black",lineWidth:1},et(a,"rule"))}),_=new Pn({style:Object.assign({x:0,y:x.getAttribute("height"),text:"",fontSize:10},et(a,"label"))});E.append(_),x.appendChild(E);const A=(L,P,N)=>{const[j]=L.invert(N),B=P.invert(j);return b[rE(b,B)]},M=(L,P)=>{E.setAttribute("x1",L[0]),E.setAttribute("x2",L[0]),_.setAttribute("text",i(P))};let T;const C=L=>vY(this,void 0,void 0,function*(){const{x:P}=d,N=A(h,P,L);M(L,N),u("chartIndex",B=>{const F=X({},B),$=F.marks.find(z=>z.type==="line"),G=Vt(sm(y,z=>Vt(z,U=>+v[U])/Rn(z,U=>+v[U]),z=>m[z]).values()),Y=[1/G,G];X($,{scale:{y:{domain:Y}}});const V=mY($);V.groupBy="color",V.basis=(z,U)=>{const q=z[oi(rt=>g[+rt]).center(z,N)];return U[q]};for(const z of F.marks)z.animate=!1;return F}),T=(yield c("chartIndex")).view}),I=L=>{const{scale:P,coordinate:N}=T,{x:j,y:B}=P,F=A(N,j,L);M(L,F);for(const $ of O){const{seriesIndex:W,key:G}=$.__data__,Y=W[oi(at=>g[+at]).center(W,F)],V=[0,B.map(1)],z=[0,B.map(v[Y]/v[W[0]])],[,U]=N.map(V),[,q]=N.map(z),rt=U-q;$.setAttribute("transform",`translate(0, ${rt})`);const tt=k.get(G)||[];for(const at of tt)at.setAttribute("dy",rt)}},R=li(L=>{const P=gi(x,L);P&&I(P)},r,{leading:e,trailing:n});return C([0,0]),x.addEventListener("pointerenter",R),x.addEventListener("pointermove",R),x.addEventListener("pointerleave",R),()=>{E.remove(),x.removeEventListener("pointerenter",R),x.removeEventListener("pointermove",R),x.removeEventListener("pointerleave",R)}}}fS.props={reapplyWhenUpdate:!0};function bY(t){const{coordinate:r={}}=t,{transform:e=[]}=r,n=e.find(a=>a.type==="fisheye");if(n)return n;const i={type:"fisheye"};return e.push(i),r.transform=e,t.coordinate=r,i}function xY({wait:t=30,leading:r,trailing:e=!1}){return n=>{const{options:i,update:a,setState:o,container:s}=n,l=jn(s),c=li(u=>{const f=gi(l,u);if(!f){o("fisheye"),a();return}o("fisheye",d=>{const h=X({},d,{interaction:{tooltip:{preserve:!0}}});for(const m of h.marks)m.animate=!1;const[p,v]=f,g=bY(h);return g.focusX=p,g.focusY=v,g.visual=!0,h}),a()},t,{leading:r,trailing:e});return l.addEventListener("pointerenter",c),l.addEventListener("pointermove",c),l.addEventListener("pointerleave",c),()=>{l.removeEventListener("pointerenter",c),l.removeEventListener("pointermove",c),l.removeEventListener("pointerleave",c)}}}var yi=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function wl(t,r){var e;if(r)return typeof r=="string"?document.querySelector(r):r;const n=(e=t.ownerDocument)===null||e===void 0?void 0:e.defaultView;return n?n.getContextService().getDomElement().parentElement:void 0}function OY(t){const r=t.getRenderBounds(),{min:[e,n],max:[i,a]}=r;return{x:e,y:n,width:i-e,height:a-n}}function wY(t,r){const e=t.getBoundingClientRect(),n=r.getBoundingClientRect();return{x:e.x-n.x,y:e.y-n.y}}function SY(t,r,e,n,i,a,o,s={},l=[10,10]){const c={".g2-tooltip":{},".g2-tooltip-title":{overflow:"hidden","white-space":"nowrap","text-overflow":"ellipsis"}},u=new kD({className:"tooltip",style:{x:r,y:e,container:o,data:[],bounding:a,position:n,enterable:i,title:"",offset:l,template:{prefixCls:"g2-"},style:X(c,s)}});return t.appendChild(u.HTMLTooltipElement),u}function dS({root:t,data:r,x:e,y:n,render:i,event:a,single:o,position:s="right-bottom",enterable:l=!1,css:c,mount:u,bounding:f,offset:d}){const h=wl(t,u),p=wl(t),v=o?p:t,g=f||OY(t),m=wY(p,h),{tooltipElement:y=SY(h,e,n,s,l,g,m,c,d)}=v,{items:b,title:x=""}=r;y.update(Object.assign({x:e,y:n,data:b,title:x,position:s,enterable:l,container:m},i!==void 0&&{content:i(a,{items:b,title:x})})),v.tooltipElement=y}function Sr({root:t,single:r,emitter:e,nativeEvent:n=!0,event:i=null}){n&&e.emit("tooltip:hide",{nativeEvent:n});const a=wl(t),o=r?a:t,{tooltipElement:s}=o;s&&s.hide(i==null?void 0:i.clientX,i==null?void 0:i.clientY),gS(t),mS(t),yS(t)}function nf({root:t,single:r}){const e=wl(t),n=r?e:t;if(!n)return;const{tooltipElement:i}=n;i&&(i.destroy(),n.tooltipElement=void 0),gS(t),mS(t),yS(t)}function hS(t){const{value:r}=t;return Object.assign(Object.assign({},t),{value:r===void 0?"undefined":r})}function kY(t){var r,e,n,i,a,o,s;const l=t.__data__,c=(e=(r=l==null?void 0:l.normalized)===null||r===void 0?void 0:r.x)!==null&&e!==void 0?e:0,u=(n=t.parentNode)===null||n===void 0?void 0:n.__data__,f=(i=u==null?void 0:u.encode)!==null&&i!==void 0?i:{},{x:d={},y:h={},color:p={}}=f,{value:v=[]}=d,{value:g=[]}=h,{value:m=[]}=p,y=Math.min(Math.round(v.length*c),v.length-1);return{title:`${v[y]}, ${g[y]}`,items:[{name:(a=p.field)!==null&&a!==void 0?a:"value",value:m[y],color:((o=t.style)===null||o===void 0?void 0:o.fill)||((s=t.getAttribute)===null||s===void 0?void 0:s.call(t,"color"))||"#000"}]}}function EY(t){const{__data__:r}=t;if(Ml(t))return kY(t);const{title:e,items:n=[]}=r,i=n.filter(qt).map(a=>{var{color:o=pS(t)}=a,s=yi(a,["color"]);return Object.assign(Object.assign({},s),{color:o})}).map(hS);return Object.assign(Object.assign({},e&&{title:e}),{items:i})}function pS(t){const r=t.getAttribute("fill"),e=t.getAttribute("stroke"),{__data__:n}=t,{color:i=r&&r!=="transparent"?r:e}=n;return i}function Cg(t,r=e=>e){const e=new Map(t.map(n=>[r(n),n]));return Array.from(e.values())}function vS(t,r,e,n=t.map(a=>a.__data__),i={}){const a=l=>l instanceof Date?+l:l,o=Cg(n.map(l=>l.title),a).filter(qt),s=n.flatMap((l,c)=>{const u=l.element||t[c],{items:f=[],title:d}=l,h=f.filter(qt),p=e!==void 0?e:f.length<=1;return h.map(v=>{var{color:g=pS(u)||i.color,name:m}=v,y=yi(v,["color","name"]);const b=L2(r,l),x=p&&!($w in y)?b||m:m||b;return Object.assign(Object.assign({},y),{color:g,name:x||d})})}).map(hS);return Object.assign(Object.assign({},o.length>0&&{title:o.join(",")}),{items:Cg(s,l=>`(${a(l.name)}, ${a(l.value)}, ${a(l.color)})`)})}function _Y(t,r,e,n){var{plotWidth:i,plotHeight:a,mainWidth:o,mainHeight:s,startX:l,startY:c,transposed:u,polar:f,insetLeft:d,insetTop:h}=n,p=yi(n,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const v=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},p),g=(w,S,k)=>{const E=new gr({style:Object.assign({cx:w,cy:S,r:k},v)});return t.appendChild(E),E},m=(w,S,k,E)=>{const _=new ki({style:Object.assign({x1:w,x2:S,y1:k,y2:E},v)});return t.appendChild(_),_},b=((w,S)=>{if(S.length===1)return S[0];const k=S.map(_=>ue(_,w)),E=El(k,_=>_);return S[E]})(e,r),x=()=>u?[l+b[0],l+b[0],c,c+a]:[l,l+i,b[1]+c,b[1]+c],O=()=>{const w=l+d+o/2,S=c+h+s/2,k=ue([w,S],b);return[w,S,k]};if(f){const[w,S,k]=O(),E=t.ruleX||g(w,S,k);E.style.cx=w,E.style.cy=S,E.style.r=k,t.ruleX=E}else{const[w,S,k,E]=x(),_=t.ruleX||m(w,S,k,E);_.style.x1=w,_.style.x2=S,_.style.y1=k,_.style.y2=E,t.ruleX=_}}function AY(t,r,e){var{plotWidth:n,plotHeight:i,mainWidth:a,mainHeight:o,startX:s,startY:l,transposed:c,polar:u,insetLeft:f,insetTop:d}=e,h=yi(e,["plotWidth","plotHeight","mainWidth","mainHeight","startX","startY","transposed","polar","insetLeft","insetTop"]);const p=Object.assign({lineWidth:1,stroke:"#1b1e23",strokeOpacity:.5},h),v=r.map(E=>E[1]),g=r.map(E=>E[0]),m=Ya(v),y=Ya(g),b=()=>{if(u){const E=Math.min(a,o)/2,_=s+f+a/2,A=l+d+o/2,M=xn(ye([y,m],[_,A])),T=_+E*Math.cos(M),C=A+E*Math.sin(M);return[_,T,A,C]}return c?[s,s+n,m+l,m+l]:[y+s,y+s,l,l+i]},[x,O,w,S]=b(),k=()=>{const E=new ki({style:Object.assign({x1:x,x2:O,y1:w,y2:S},p)});return t.appendChild(E),E};if(g.length>0){const E=t.ruleY||k();E.style.x1=x,E.style.x2=O,E.style.y1=w,E.style.y2=S,t.ruleY=E}}function gS(t){t.ruleY&&(t.ruleY.remove(),t.ruleY=void 0)}function mS(t){t.ruleX&&(t.ruleX.remove(),t.ruleX=void 0)}function TY(t,{data:r,style:e,theme:n}){t.markers&&t.markers.forEach(o=>o.remove());const{type:i=""}=e,a=r.filter(o=>{const[{x:s,y:l}]=o;return qt(s)&&qt(l)}).map(o=>{const[{color:s,element:l},c]=o,u=s||l.style.fill||l.style.stroke||n.color,f=i==="hollow"?"transparent":u,d=i==="hollow"?u:"#fff";return new gr({className:"g2-tooltip-marker",style:Object.assign({cx:c[0],cy:c[1],fill:f,r:4,stroke:d,lineWidth:2,pointerEvents:"none"},e)})});for(const o of a)t.appendChild(o);t.markers=a}function yS(t){t.markers&&(t.markers.forEach(r=>r.remove()),t.markers=[])}function Lg(t,r){return Array.from(t.values()).some(e=>{var n;return(n=e.interaction)===null||n===void 0?void 0:n[r]})}function zn(t,r){return t===void 0?r:t}function bS(t){const{title:r,items:e}=t;return e.length===0&&r===void 0}function MY(t){return Array.from(t.values()).some(r=>{var e;return((e=r.interaction)===null||e===void 0?void 0:e.seriesTooltip)&&r.tooltip})}function PY(t,r){const{innerWidth:e,innerHeight:n,marginLeft:i,paddingLeft:a,insetLeft:o,marginTop:s,paddingTop:l,insetTop:c}=t.getOptions();return{x:(r.x-i-a-o)/e,y:(r.y-s-l-c)/n}}function xS({root:t,event:r,elements:e=[],coordinate:n,scale:i,shared:a}){var o,s;const l=g=>g.markType==="interval",c=e.every(l)&&!$t(n),u=i.x,f=i.series,d=(s=(o=u==null?void 0:u.getBandWidth)===null||o===void 0?void 0:o.call(u))!==null&&s!==void 0?s:0,h=f?g=>{const m=Math.round(1/f.valueBandWidth);return g.__data__.x+g.__data__.series*d+d/(m*2)}:g=>g.__data__.x+d/2;c&&e.sort((g,m)=>h(g)-h(m));const p=g=>{const{target:m=fa(e)}=g;return Io(m,y=>y.classList?(Ml(y)&&jm(y,"__data__.normalized",PY(n,{x:g.offsetX,y:g.offsetY})),y.classList.includes("element")):!1)};return(c?g=>{const m=gi(t,g);if(!m)return;const[y]=n.invert(m),b=oi(h).center,x=b(e,y),O=e[x];return!a&&e.find(S=>S!==O&&h(S)===h(O))?p(g):O}:p)(r)}function OS({root:t,event:r,elements:e,coordinate:n,scale:i,startX:a,startY:o}){const s=Qt(n),l=[],c=[];for(const L of e){const{__data__:P}=L,{seriesX:N,title:j,items:B}=P;N?l.push(L):(j||B)&&c.push(L)}const u=L=>L.markType==="interval",f=c.length&&c.every(u)&&!$t(n),d=L=>L.__data__.x,p=!!i.x.getBandWidth&&c.length>0;l.sort((L,P)=>{const N=s?0:1,j=B=>B.getBounds().min[N];return s?j(P)-j(L):j(L)-j(P)});const v=L=>{const P=s?1:0,{min:N,max:j}=L.getLocalBounds();return fr([N[P],j[P]])};f?e.sort((L,P)=>d(L)-d(P)):c.sort((L,P)=>{const[N,j]=v(L),[B,F]=v(P),$=(N+j)/2,W=(B+F)/2;return s?W-$:$-W});const g=new Map(l.map(L=>{const{__data__:P}=L,{seriesX:N}=P,j=N.map((F,$)=>$),B=fr(j,F=>N[+F]);return[L,[B,N]]})),{x:m}=i,y=m!=null&&m.getBandWidth?m.getBandWidth()/2:0,b=L=>{const[P]=n.invert(L);return P-y},x=(L,P,N,j)=>{const{_x:B}=L,F=B!==void 0?m.map(B):b(P),$=j.filter(qt),[W,G]=fr([$[0],$[$.length-1]]),Y=W===G;if(!p&&(F<W||F>G)&&!Y)return null;const V=oi(U=>j[+U]).center,z=V(N,F);return N[z]},O=f?(L,P)=>{const N=oi(d).center,j=N(P,b(L)),B=P[j];return Kt(P,d).get(d(B))}:(L,P)=>{const j=L[s?1:0],B=P.filter(W=>{const[G,Y]=v(W);return j>=G&&j<=Y});if(!p||B.length>0)return B;const F=oi(W=>{const[G,Y]=v(W);return(G+Y)/2}).center,$=F(P,j);return[P[$]].filter(qt)},w=(L,P)=>{const{__data__:N}=L;return Object.fromEntries(Object.entries(N).filter(([j])=>j.startsWith("series")&&j!=="series").map(([j,B])=>{const F=B[P];return[Lm(j.replace("series","")),F]}))},S=gi(t,r);if(!S)return;const k=[S[0]-a,S[1]-o];if(!k)return;const E=O(k,c),_=[],A=[];for(const L of l){const[P,N]=g.get(L),j=x(r,k,P,N);if(j!==null){_.push(L);const B=w(L,j),{x:F,y:$}=B,W=n.map([(F||0)+y,$||0]);A.push([Object.assign(Object.assign({},B),{element:L}),W])}}const M=Array.from(new Set(A.map(L=>L[0].x))),T=M[El(M,L=>Math.abs(L-b(k)))],C=A.filter(L=>L[0].x===T),I=[...C.map(L=>L[0]),...E.map(L=>L.__data__)];return{selectedElements:[..._,...E],selectedData:I,filteredSeriesData:C,abstractX:b}}function Rg(t,r){var{elements:e,sort:n,filter:i,scale:a,coordinate:o,crosshairs:s,crosshairsX:l,crosshairsY:c,render:u,groupName:f,emitter:d,wait:h=50,leading:p=!0,trailing:v=!1,startX:g=0,startY:m=0,body:y=!0,single:b=!0,position:x,enterable:O,mount:w,bounding:S,theme:k,offset:E,disableNative:_=!1,marker:A=!0,preserve:M=!1,style:T={},css:C={}}=r,I=yi(r,["elements","sort","filter","scale","coordinate","crosshairs","crosshairsX","crosshairsY","render","groupName","emitter","wait","leading","trailing","startX","startY","body","single","position","enterable","mount","bounding","theme","offset","disableNative","marker","preserve","style","css"]);const R=e(t),L=X(T,I),P=$t(o),N=Qt(o),{innerWidth:j,innerHeight:B,width:F,height:$,insetLeft:W,insetTop:G}=o.getOptions(),Y=li(lt=>{var vt;const ft=gi(t,lt);if(!ft)return;const dt=bl(t),mt=dt.min[0],xe=dt.min[1],{selectedElements:We,selectedData:se,filteredSeriesData:Oe,abstractX:we}=OS({root:t,event:lt,elements:R,coordinate:o,scale:a,startX:g,startY:m}),te=vS(We,a,f,se,k);if(n&&te.items.sort((de,he)=>n(de)-n(he)),i&&(te.items=te.items.filter(i)),We.length===0||bS(te)){V(lt);return}if(y&&dS({root:t,data:te,x:ft[0]+mt,y:ft[1]+xe,render:u,event:lt,single:b,position:x,enterable:O,mount:w,bounding:S,css:C,offset:E}),s||l||c){const de=et(L,"crosshairs"),he=Object.assign(Object.assign({},de),et(L,"crosshairsX")),ee=Object.assign(Object.assign({},de),et(L,"crosshairsY")),Xe=Oe.map(Ue=>Ue[1]);l&&_Y(t,Xe,ft,Object.assign(Object.assign({},he),{plotWidth:j,plotHeight:B,mainWidth:F,mainHeight:$,insetLeft:W,insetTop:G,startX:g,startY:m,transposed:N,polar:P})),c&&AY(t,Xe,Object.assign(Object.assign({},ee),{plotWidth:j,plotHeight:B,mainWidth:F,mainHeight:$,insetLeft:W,insetTop:G,startX:g,startY:m,transposed:N,polar:P}))}if(A){const de=et(L,"marker");TY(t,{data:Oe,style:de,theme:k})}const It=(vt=Oe[0])===null||vt===void 0?void 0:vt[0].x,fe=It??we(focus);d.emit("tooltip:show",Object.assign(Object.assign({},lt),{nativeEvent:!0,data:Object.assign(Object.assign({},te),{data:{x:oa(a.x,fe,!0)}})}))},h,{leading:p,trailing:v}),V=lt=>{Sr({root:t,single:b,emitter:d,event:lt})},z=()=>{nf({root:t,single:b})},U=lt=>{var vt,{nativeEvent:ft,data:dt,offsetX:mt,offsetY:xe}=lt,We=yi(lt,["nativeEvent","data","offsetX","offsetY"]);if(ft)return;const se=(vt=dt==null?void 0:dt.data)===null||vt===void 0?void 0:vt.x,we=a.x.map(se),[te,It]=o.map([we,.5]),fe=t.getRenderBounds(),de=fe.min[0],he=fe.min[1];Y(Object.assign(Object.assign({},We),{offsetX:mt!==void 0?mt:de+te,offsetY:xe!==void 0?xe:he+It,_x:se}))},q=()=>{Sr({root:t,single:b,emitter:d,nativeEvent:!1})},rt=()=>{ot(),z()},tt=()=>{at()},at=()=>{_||(t.addEventListener("pointerdown",Y),t.addEventListener("pointerenter",Y),t.addEventListener("pointermove",Y),t.addEventListener("pointerleave",lt=>{gi(t,lt)||V(lt)}),t.addEventListener("pointerup",V))},ot=()=>{_||(t.removeEventListener("pointerdown",Y),t.removeEventListener("pointerenter",Y),t.removeEventListener("pointermove",Y),t.removeEventListener("pointerleave",V),t.removeEventListener("pointerup",V))};return at(),d.on("tooltip:show",U),d.on("tooltip:hide",q),d.on("tooltip:disable",rt),d.on("tooltip:enable",tt),()=>{ot(),d.off("tooltip:show",U),d.off("tooltip:hide",q),d.off("tooltip:disable",rt),d.off("tooltip:enable",tt),M?Sr({root:t,single:b,emitter:d,nativeEvent:!1}):z()}}function CY(t,{elements:r,coordinate:e,scale:n,render:i,groupName:a,sort:o,filter:s,emitter:l,wait:c=50,leading:u=!0,trailing:f=!1,groupKey:d=A=>A,single:h=!0,position:p,enterable:v,datum:g,view:m,mount:y,bounding:b,theme:x,offset:O,shared:w=!1,body:S=!0,disableNative:k=!1,preserve:E=!1,css:_={}}){const A=r(t),M=Kt(A,d),T=li(B=>{const F=xS({root:t,event:B,elements:A,coordinate:e,scale:n,shared:w});if(!F){Sr({root:t,single:h,emitter:l,event:B});return}const $=d(F),W=M.get($);if(!W)return;const G=W.length===1&&!w?EY(W[0]):vS(W,n,a,void 0,x);if(o&&G.items.sort((z,U)=>o(z)-o(U)),s&&(G.items=G.items.filter(s)),bS(G)){Sr({root:t,single:h,emitter:l,event:B});return}const{offsetX:Y,offsetY:V}=B;S&&dS({root:t,data:G,x:Y,y:V,render:i,event:B,single:h,position:p,enterable:v,mount:y,bounding:b,css:_,offset:O}),l.emit("tooltip:show",Object.assign(Object.assign({},B),{nativeEvent:!0,data:Object.assign(Object.assign({},G),{data:Pf(F,m)})}))},c,{leading:u,trailing:f}),C=B=>{Sr({root:t,single:h,emitter:l,event:B})},I=()=>{k||(t.addEventListener("pointerdown",T),t.addEventListener("pointermove",T),t.addEventListener("pointerleave",C),t.addEventListener("pointerup",C))},R=()=>{k||(t.removeEventListener("pointerdown",T),t.removeEventListener("pointermove",T),t.removeEventListener("pointerleave",C),t.removeEventListener("pointerup",C))},L=({nativeEvent:B,offsetX:F,offsetY:$,data:W})=>{if(B)return;const{data:G}=W,Y=Jd(A,G,g);if(!Y)return;const V=Y.getBBox(),{x:z,y:U,width:q,height:rt}=V,tt=t.getBBox();T({target:Y,offsetX:F!==void 0?F+tt.x:z+q/2,offsetY:$!==void 0?$+tt.y:U+rt/2})},P=({nativeEvent:B}={})=>{B||Sr({root:t,single:h,emitter:l,nativeEvent:!1})},N=()=>{R(),nf({root:t,single:h})},j=()=>{I()};return l.on("tooltip:show",L),l.on("tooltip:hide",P),l.on("tooltip:enable",j),l.on("tooltip:disable",N),I(),()=>{R(),l.off("tooltip:show",L),l.off("tooltip:hide",P),l.off("tooltip:enable",j),l.off("tooltip:disable",N),E?Sr({root:t,single:h,emitter:l,nativeEvent:!1}):nf({root:t,single:h})}}function wS(t){const{shared:r,crosshairs:e,crosshairsX:n,crosshairsY:i,series:a,name:o,item:s=()=>({}),facet:l=!1}=t,c=yi(t,["shared","crosshairs","crosshairsX","crosshairsY","series","name","item","facet"]);return(u,f,d)=>{const{container:h,view:p}=u,{scale:v,markState:g,coordinate:m,theme:y}=p,b=Lg(g,"seriesTooltip"),x=Lg(g,"crosshairs"),O=jn(h),w=zn(a,b),S=zn(e,x);if(w&&MY(g)&&!l)return Rg(O,Object.assign(Object.assign({},c),{theme:y,elements:Rr,scale:v,coordinate:m,crosshairs:S,crosshairsX:zn(zn(n,e),!1),crosshairsY:zn(i,S),item:s,emitter:d}));if(w&&l){const k=f.filter(C=>C!==u&&C.options.parentKey===u.options.key),E=Qw(u,f),_=k[0].view.scale,A=O.getBounds(),M=A.min[0],T=A.min[1];return Object.assign(_,{facet:!0}),Rg(O.parentNode.parentNode,Object.assign(Object.assign({},c),{theme:y,elements:()=>E,scale:_,coordinate:m,crosshairs:zn(e,x),crosshairsX:zn(zn(n,e),!1),crosshairsY:zn(i,S),item:s,startX:M,startY:T,emitter:d}))}return CY(O,Object.assign(Object.assign({},c),{datum:mi(p),elements:Rr,scale:v,coordinate:m,groupKey:r?Ro():void 0,item:s,emitter:d,view:p,theme:y,shared:r}))}}wS.props={reapplyWhenUpdate:!0};var Cs=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};const SS="legend-category",LY="legend-continuous",RY="items-item",NY="legend-category-item-marker",IY="legend-category-item-label";function kS(t){return t.getElementsByClassName(NY)[0]}function ES(t){return t.getElementsByClassName(IY)[0]}function _S(t){return t.getElementsByClassName(RY)}function eh(t){return t.getElementsByClassName(SS)}function AS(t){return t.getElementsByClassName(LY)}function jY(t,r){[...eh(t),...AS(t)].forEach(n=>{r(n,i=>i)})}function rf(t){let r=t.parentNode;for(;r&&!r.__data__;)r=r.parentNode;return r.__data__}function DY(t,{legends:r,marker:e,label:n,datum:i,filter:a,emitter:o,channel:s,state:l={}}){const c=new Map,u=new Map,f=new Map,{unselected:d={markerStroke:"#aaa",markerFill:"#aaa",labelFill:"#aaa"}}=l,h={unselected:et(d,"marker")},p={unselected:et(d,"label")},{setState:v,removeState:g}=Pr(h,void 0),{setState:m,removeState:y}=Pr(p,void 0),b=Array.from(r(t));let x=b.map(i);const O=()=>{for(const k of b){const E=i(k),_=e(k),A=n(k);x.includes(E)?(g(_,"unselected"),y(A,"unselected")):(v(_,"unselected"),m(A,"unselected"))}};for(const k of b){const E=()=>{br(t,"pointer")},_=()=>{cY(t)},A=M=>Cs(this,void 0,void 0,function*(){const T=i(k),C=x.indexOf(T);C===-1?x.push(T):x.splice(C,1),yield a(x),O();const{nativeEvent:I=!0}=M;I&&(x.length===b.length?o.emit("legend:reset",{nativeEvent:I}):o.emit("legend:filter",Object.assign(Object.assign({},M),{nativeEvent:I,data:{channel:s,values:x}})))});k.addEventListener("click",A),k.addEventListener("pointerenter",E),k.addEventListener("pointerout",_),c.set(k,A),u.set(k,E),f.set(k,_)}const w=k=>Cs(this,void 0,void 0,function*(){const{nativeEvent:E}=k;if(E)return;const{data:_}=k,{channel:A,values:M}=_;A===s&&(x=M,yield a(x),O())}),S=k=>Cs(this,void 0,void 0,function*(){const{nativeEvent:E}=k;E||(x=b.map(i),yield a(x),O())});return o.on("legend:filter",w),o.on("legend:reset",S),()=>{for(const k of b)k.removeEventListener("click",c.get(k)),k.removeEventListener("pointerenter",u.get(k)),k.removeEventListener("pointerout",f.get(k)),o.off("legend:filter",w),o.off("legend:reset",S)}}function BY(t,{legend:r,filter:e,emitter:n,channel:i}){const a=({detail:{value:o}})=>{e(o),n.emit({nativeEvent:!0,data:{channel:i,values:o}})};return r.addEventListener("valuechange",a),()=>{r.removeEventListener("valuechange",a)}}function TS(t,{legend:r,channel:e,value:n,ordinal:i,channels:a,allChannels:o,facet:s=!1}){return Cs(this,void 0,void 0,function*(){const{view:l,update:c,setState:u}=t;u(r,f=>{const{marks:d}=f,h=d.map(p=>{if(p.type==="legends")return p;const{transform:v=[],data:g=[]}=p,m=v.findIndex(({type:x})=>x.startsWith("group")||x.startsWith("bin")),y=[...v];g.length&&y.splice(m+1,0,{type:"filter",[e]:{value:n,ordinal:i}});const b=Object.fromEntries(a.map(x=>[x,{domain:l.scale[x].getOptions().domain}]));return X({},p,Object.assign(Object.assign({transform:y,scale:b},!i&&{animate:!1}),{legend:s?!1:Object.fromEntries(o.map(x=>[x,{preserve:!0}]))}))});return Object.assign(Object.assign({},f),{marks:h})}),yield c()})}function FY(t,r){for(const e of t)TS(e,Object.assign(Object.assign({},r),{facet:!0}))}function $Y(){return(t,r,e)=>{const{container:n}=t,i=r.filter(f=>f!==t),a=i.length>0,o=f=>rf(f).scales.map(d=>d.name),s=[...eh(n),...AS(n)],l=s.flatMap(o),c=a?li(FY,50,{trailing:!0}):li(TS,50,{trailing:!0}),u=s.map(f=>{const{name:d,domain:h}=rf(f).scales[0],p=o(f),v={legend:f,channel:d,channels:p,allChannels:l};return f.className===SS?DY(n,{legends:_S,marker:kS,label:ES,datum:g=>{const{__data__:m}=g,{index:y}=m;return h[y]},filter:g=>{const m=Object.assign(Object.assign({},v),{value:g,ordinal:!0});c(a?i:t,m)},state:f.attributes.state,channel:d,emitter:e}):BY(n,{legend:f,filter:g=>{const m=Object.assign(Object.assign({},v),{value:g,ordinal:!1});c(a?i:t,m)},emitter:e,channel:d})});return()=>{u.forEach(f=>f())}}}function zY(){return(t,r,e)=>{const{container:n,view:i,options:a}=t,o=eh(n),s=Rr(n),l=h=>rf(h).scales[0].name,c=h=>{const{scale:{[h]:p}}=i;return p},u=ca(a,["active","inactive"]),f=No(s,mi(i)),d=[];for(const h of o){const p=j=>{const{data:B}=h.attributes,{__data__:F}=j,{index:$}=F;return B[$].label},v=l(h),g=_S(h),m=c(v),y=Kt(s,j=>m.invert(j.__data__[v])),{state:b={}}=h.attributes,{inactive:x={}}=b,{setState:O,removeState:w}=Pr(u,f),S={inactive:et(x,"marker")},k={inactive:et(x,"label")},{setState:E,removeState:_}=Pr(S),{setState:A,removeState:M}=Pr(k),T=j=>{for(const B of g){const F=kS(B),$=ES(B);B===j||j===null?(_(F,"inactive"),M($,"inactive")):(E(F,"inactive"),A($,"inactive"))}},C=(j,B)=>{const F=p(B),$=new Set(y.get(F));for(const G of s)$.has(G)?O(G,"active"):O(G,"inactive");T(B);const{nativeEvent:W=!0}=j;W&&e.emit("legend:highlight",Object.assign(Object.assign({},j),{nativeEvent:W,data:{channel:v,value:F}}))},I=new Map;for(const j of g){const B=F=>{C(F,j)};j.addEventListener("pointerover",B),I.set(j,B)}const R=j=>{for(const F of s)w(F,"inactive","active");T(null);const{nativeEvent:B=!0}=j;B&&e.emit("legend:unhighlight",{nativeEvent:B})},L=j=>{const{nativeEvent:B,data:F}=j;if(B)return;const{channel:$,value:W}=F;if($!==v)return;const G=g.find(Y=>p(Y)===W);G&&C({nativeEvent:!1},G)},P=j=>{const{nativeEvent:B}=j;B||R({nativeEvent:!1})};h.addEventListener("pointerleave",R),e.on("legend:highlight",L),e.on("legend:unhighlight",P);const N=()=>{h.removeEventListener(R),e.off("legend:highlight",L),e.off("legend:unhighlight",P);for(const[j,B]of I)j.removeEventListener(B)};d.push(N)}return()=>d.forEach(h=>h())}}var vn=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function GY(t,r){const[e,n,i,a]=t,[o,s,l,c]=r;return!(o>i||l<e||s>a||c<n)}function WY(t,r,e,n,i){const[a,o,s,l]=i;return[Math.max(a,Math.min(t,e)),Math.max(o,Math.min(r,n)),Math.min(s,Math.max(t,e)),Math.min(l,Math.max(r,n))]}function YY(t){const{width:r,height:e}=t.getBBox();return[0,0,r,e]}function ir(t,r){for(const[e,n]of Object.entries(r))t.style(e,n)}const Ng=ra(t=>{const r=t.attributes,{x:e,y:n,width:i,height:a,class:o,renders:s={},handleSize:l=10,document:c}=r,u=vn(r,["x","y","width","height","class","renders","handleSize","document"]);if(!c||i===void 0||a===void 0||e===void 0||n===void 0)return;const f=l/2,d=(W,G,Y)=>{W.handle||(W.handle=Y.createElement("rect"),W.append(W.handle));const{handle:V}=W;return V.attr(G),V},h=et(_s(u,"handleNW","handleNE"),"handleN"),{render:p=d}=h,v=vn(h,["render"]),g=et(u,"handleE"),{render:m=d}=g,y=vn(g,["render"]),b=et(_s(u,"handleSE","handleSW"),"handleS"),{render:x=d}=b,O=vn(b,["render"]),w=et(u,"handleW"),{render:S=d}=w,k=vn(w,["render"]),E=et(u,"handleNW"),{render:_=d}=E,A=vn(E,["render"]),M=et(u,"handleNE"),{render:T=d}=M,C=vn(M,["render"]),I=et(u,"handleSE"),{render:R=d}=I,L=vn(I,["render"]),P=et(u,"handleSW"),{render:N=d}=P,j=vn(P,["render"]),B=(W,G)=>{const{id:Y}=W,V=G(W,W.attributes,c);V.id=Y,V.style.draggable=!0},F=W=>()=>{const G=ra(Y=>B(Y,W));return new G({})},$=ht(t).attr("className",o).style("transform",`translate(${e}, ${n})`).style("draggable",!0);$.maybeAppend("selection","rect").style("draggable",!0).style("fill","transparent").call(ir,Object.assign(Object.assign({width:i,height:a},_s(u,"handle")),{transform:void 0})),$.maybeAppend("handle-n",F(p)).style("x",f).style("y",-f).style("width",i-l).style("height",l).style("fill","transparent").call(ir,v),$.maybeAppend("handle-e",F(m)).style("x",i-f).style("y",f).style("width",l).style("height",a-l).style("fill","transparent").call(ir,y),$.maybeAppend("handle-s",F(x)).style("x",f).style("y",a-f).style("width",i-l).style("height",l).style("fill","transparent").call(ir,O),$.maybeAppend("handle-w",F(S)).style("x",-f).style("y",f).style("width",l).style("height",a-l).style("fill","transparent").call(ir,k),$.maybeAppend("handle-nw",F(_)).style("x",-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(ir,A),$.maybeAppend("handle-ne",F(T)).style("x",i-f).style("y",-f).style("width",l).style("height",l).style("fill","transparent").call(ir,C),$.maybeAppend("handle-se",F(R)).style("x",i-f).style("y",a-f).style("width",l).style("height",l).style("fill","transparent").call(ir,L),$.maybeAppend("handle-sw",F(N)).style("x",-f).style("y",a-f).style("width",l).style("height",l).style("fill","transparent").call(ir,j)});function nh(t,r){var{brushed:e=()=>{},brushended:n=()=>{},brushcreated:i=()=>{},brushstarted:a=()=>{},brushupdated:o=()=>{},extent:s=YY(t),brushRegion:l=(V,z,U,q,rt)=>[V,z,U,q],reverse:c=!1,fill:u="#777",fillOpacity:f="0.3",stroke:d="#fff",selectedHandles:h=["handle-n","handle-e","handle-s","handle-w","handle-nw","handle-ne","handle-se","handle-sw"]}=r,p=vn(r,["brushed","brushended","brushcreated","brushstarted","brushupdated","extent","brushRegion","reverse","fill","fillOpacity","stroke","selectedHandles"]);let v=null,g=null,m=null,y=null,b=null,x=!1;const[O,w,S,k]=s;br(t,"crosshair"),t.style.draggable=!0;const E=(V,z,U)=>{if(a(U),y&&y.remove(),b&&b.remove(),v=[V,z],c)return _();A()},_=()=>{b=new Qe({style:Object.assign(Object.assign({},p),{fill:u,fillOpacity:f,stroke:d,pointerEvents:"none"})}),y=new Ng({style:{x:0,y:0,width:0,height:0,draggable:!0,document:t.ownerDocument},className:"mask"}),t.appendChild(b),t.appendChild(y)},A=()=>{y=new Ng({style:Object.assign(Object.assign({document:t.ownerDocument,x:0,y:0},p),{fill:u,fillOpacity:f,stroke:d,draggable:!0}),className:"mask"}),t.appendChild(y)},M=(V=!0)=>{y&&y.remove(),b&&b.remove(),v=null,g=null,m=null,x=!1,y=null,b=null,n(V)},T=(V,z,U=!0)=>{const[q,rt,tt,at]=WY(V[0],V[1],z[0],z[1],s),[ot,lt,vt,ft]=l(q,rt,tt,at,s);return c?I(ot,lt,vt,ft):C(ot,lt,vt,ft),e(ot,lt,vt,ft,U),[ot,lt,vt,ft]},C=(V,z,U,q)=>{y.style.x=V,y.style.y=z,y.style.width=U-V,y.style.height=q-z},I=(V,z,U,q)=>{b.style.d=`
      M${O},${w}L${S},${w}L${S},${k}L${O},${k}Z
      M${V},${z}L${V},${q}L${U},${q}L${U},${z}Z
    `,y.style.x=V,y.style.y=z,y.style.width=U-V,y.style.height=q-z},R=V=>{const z=(lt,vt,ft,dt,mt)=>lt+vt<dt?dt-vt:lt+ft>mt?mt-ft:lt,U=V[0]-m[0],q=V[1]-m[1],rt=z(U,v[0],g[0],O,S),tt=z(q,v[1],g[1],w,k),at=[v[0]+rt,v[1]+tt],ot=[g[0]+rt,g[1]+tt];T(at,ot)},L={"handle-n":{vector:[0,1,0,0],cursor:"ns-resize"},"handle-e":{vector:[0,0,1,0],cursor:"ew-resize"},"handle-s":{vector:[0,0,0,1],cursor:"ns-resize"},"handle-w":{vector:[1,0,0,0],cursor:"ew-resize"},"handle-nw":{vector:[1,1,0,0],cursor:"nwse-resize"},"handle-ne":{vector:[0,1,1,0],cursor:"nesw-resize"},"handle-se":{vector:[0,0,1,1],cursor:"nwse-resize"},"handle-sw":{vector:[1,0,0,1],cursor:"nesw-resize"}},P=V=>j(V)||N(V),N=V=>{const{id:z}=V;return h.indexOf(z)===-1?!1:new Set(Object.keys(L)).has(z)},j=V=>V===y.getElementById("selection"),B=V=>{const{target:z}=V,[U,q]=tu(t,V);if(!y||!P(z)){E(U,q,V),x=!0;return}P(z)&&(m=[U,q])},F=V=>{const{target:z}=V,U=tu(t,V);if(!v)return;if(!m)return T(v,U);if(j(z))return R(U);const[q,rt]=[U[0]-m[0],U[1]-m[1]],{id:tt}=z;if(L[tt]){const[at,ot,lt,vt]=L[tt].vector;return T([v[0]+q*at,v[1]+rt*ot],[g[0]+q*lt,g[1]+rt*vt])}},$=V=>{if(m){m=null;const{x:tt,y:at,width:ot,height:lt}=y.style;v=[tt,at],g=[tt+ot,at+lt],o(tt,at,tt+ot,at+lt,V);return}g=tu(t,V);const[z,U,q,rt]=T(v,g);x=!1,i(z,U,q,rt,V)},W=V=>{const{target:z}=V;y&&!P(z)&&M()},G=V=>{const{target:z}=V;!y||!P(z)||x?br(t,"crosshair"):j(z)?br(t,"move"):N(z)&&br(t,L[z.id].cursor)},Y=()=>{br(t,"default")};return t.addEventListener("dragstart",B),t.addEventListener("drag",F),t.addEventListener("dragend",$),t.addEventListener("click",W),t.addEventListener("pointermove",G),t.addEventListener("pointerleave",Y),{mask:y,move(V,z,U,q,rt=!0){y||E(V,z,{}),v=[V,z],g=[U,q],T([V,z],[U,q],rt)},remove(V=!0){y&&M(V)},destroy(){y&&M(!1),br(t,"default"),t.removeEventListener("dragstart",B),t.removeEventListener("drag",F),t.removeEventListener("dragend",$),t.removeEventListener("click",W),t.removeEventListener("pointermove",G),t.removeEventListener("pointerleave",Y)}}}function rh(t,r,e){return r.filter(n=>{if(n===t)return!1;const{interaction:i={}}=n.options;return Object.values(i).find(a=>a.brushKey===e)})}function HY(t,r,e){return rh(t,r,e).map(n=>jn(n.container))}function VY(t,r,e){return rh(t,r,e).map(n=>n.options)}function Ig(t,r){var{elements:e,selectedHandles:n,siblings:i=F=>[],datum:a,brushRegion:o,extent:s,reverse:l,scale:c,coordinate:u,series:f=!1,key:d=F=>F,bboxOf:h=F=>{const{x:$,y:W,width:G,height:Y}=F.style;return{x:$,y:W,width:G,height:Y}},state:p={},emitter:v}=r,g=vn(r,["elements","selectedHandles","siblings","datum","brushRegion","extent","reverse","scale","coordinate","series","key","bboxOf","state","emitter"]);const m=e(t),y=i(t),b=y.flatMap(e),x=No(m,a),O=et(g,"mask"),{setState:w,removeState:S}=Pr(p,x),k=new Map,{width:E,height:_,x:A=0,y:M=0}=h(t),T=s||[0,0,E,_],C=()=>{for(const F of[...m,...b])S(F,"active","inactive")},I=(F,$,W,G)=>{var Y;for(const z of y)(Y=z.brush)===null||Y===void 0||Y.remove();const V=new Set;for(const z of m){const{min:U,max:q}=z.getLocalBounds(),[rt,tt]=U,[at,ot]=q;GY([rt,tt,at,ot],[F,$,W,G])?(w(z,"active"),V.add(d(z))):w(z,"inactive")}for(const z of b)V.has(d(z))?w(z,"active"):w(z,"inactive")},R=()=>{for(const F of m)S(F,"inactive");for(const F of k.values())F.remove();k.clear()},L=(F,$,W,G)=>{const Y=z=>{const U=z.cloneNode();return U.__data__=z.__data__,z.parentNode.appendChild(U),k.set(z,U),U},V=new Br({style:{x:F+A,y:$+M,width:W-F,height:G-$}});t.appendChild(V);for(const z of m){const U=k.get(z)||Y(z);U.style.clipPath=V,w(z,"inactive"),w(U,"active")}},P=nh(t,Object.assign(Object.assign({},O),{extent:T,brushRegion:o,reverse:l,selectedHandles:n,brushended:F=>{const $=f?R:C;F&&v.emit("brush:remove",{nativeEvent:!0}),$()},brushed:(F,$,W,G,Y)=>{const V=Ms(F,$,W,G,c,u);Y&&v.emit("brush:highlight",{nativeEvent:!0,data:{selection:V}}),(f?L:I)(F,$,W,G)},brushcreated:(F,$,W,G,Y)=>{const V=Ms(F,$,W,G,c,u);v.emit("brush:end",Object.assign(Object.assign({},Y),{nativeEvent:!0,data:{selection:V}}))},brushupdated:(F,$,W,G,Y)=>{const V=Ms(F,$,W,G,c,u);v.emit("brush:end",Object.assign(Object.assign({},Y),{nativeEvent:!0,data:{selection:V}}))},brushstarted:F=>{v.emit("brush:start",F)}})),N=({nativeEvent:F,data:$})=>{if(F)return;const{selection:W}=$,[G,Y,V,z]=$$(W,c,u);P.move(G,Y,V,z,!1)};v.on("brush:highlight",N);const j=({nativeEvent:F}={})=>{F||P.remove(!1)};v.on("brush:remove",j);const B=P.destroy.bind(P);return P.destroy=()=>{v.off("brush:highlight",N),v.off("brush:remove",j),B()},P}function ih(t){var{facet:r,brushKey:e}=t,n=vn(t,["facet","brushKey"]);return(i,a,o)=>{const{container:s,view:l,options:c}=i,u=jn(s),f={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",reverse:!1},d=["active",["inactive",{opacity:.5}]],{scale:h,coordinate:p}=l;if(r){const g=u.getBounds(),m=g.min[0],y=g.min[1],b=g.max[0],x=g.max[1];return Ig(u.parentNode.parentNode,Object.assign(Object.assign({elements:()=>Qw(i,a),datum:mi(ef(i,a).map(O=>O.view)),brushRegion:(O,w,S,k)=>[O,w,S,k],extent:[m,y,b,x],state:ca(ef(i,a).map(O=>O.options),d),emitter:o,scale:h,coordinate:p,selectedHandles:void 0},f),n))}const v=Ig(u,Object.assign(Object.assign({elements:Rr,key:g=>g.__data__.key,siblings:()=>HY(i,a,e),datum:mi([l,...rh(i,a,e).map(g=>g.view)]),brushRegion:(g,m,y,b)=>[g,m,y,b],extent:void 0,state:ca([c,...VY(i,a,e)],d),emitter:o,scale:h,coordinate:p,selectedHandles:void 0},f),n));return u.brush=v,()=>v.destroy()}}function ah(t,r,e,n,i){const[,a,,o]=i;return[t,a,e,o]}function XY(t){return ih(Object.assign(Object.assign({},t),{brushRegion:ah,selectedHandles:["handle-e","handle-w"]}))}function oh(t,r,e,n,i){const[a,,o]=i;return[a,r,o,n]}function UY(t){return ih(Object.assign(Object.assign({},t),{brushRegion:oh,selectedHandles:["handle-n","handle-s"]}))}var sh=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const qY="axis",KY="axis-line",ZY="axis-main-group",MS="axis-hot-area";function QY(t){return t.getElementsByClassName(qY)}function PS(t){return t.getElementsByClassName(KY)[0]}function JY(t){return t.getElementsByClassName(ZY)[0]}function CS(t){return JY(t).getLocalBounds()}function tH(t,r){var{cross:e,offsetX:n,offsetY:i}=r,a=sh(r,["cross","offsetX","offsetY"]);const o=CS(t),s=PS(t),[l]=s.getLocalBounds().min,[c,u]=o.min,[f,d]=o.max,h=(f-c)*2;return{brushRegion:oh,hotZone:new Br({className:MS,style:Object.assign({width:e?h/2:h,transform:`translate(${(e?c:l-h/2).toFixed(2)}, ${u})`,height:d-u},a)}),extent:e?(p,v,g,m)=>[-1/0,v,1/0,m]:(p,v,g,m)=>[Math.floor(c-n),v,Math.ceil(f-n),m]}}function eH(t,r){var{offsetY:e,offsetX:n,cross:i=!1}=r,a=sh(r,["offsetY","offsetX","cross"]);const o=CS(t),s=PS(t),[,l]=s.getLocalBounds().min,[c,u]=o.min,[f,d]=o.max,h=d-u;return{brushRegion:ah,hotZone:new Br({className:MS,style:Object.assign({width:f-c,height:i?h:h*2,transform:`translate(${c}, ${i?u:l-h})`},a)}),extent:i?(p,v,g,m)=>[p,-1/0,g,1/0]:(p,v,g,m)=>[p,Math.floor(u-e),g,Math.ceil(d-e)]}}function nH(t,r){var{axes:e,elements:n,points:i,horizontal:a,datum:o,offsetY:s,offsetX:l,reverse:c=!1,state:u={},emitter:f,coordinate:d}=r,h=sh(r,["axes","elements","points","horizontal","datum","offsetY","offsetX","reverse","state","emitter","coordinate"]);const p=n(t),v=e(t),g=No(p,o),{setState:m,removeState:y}=Pr(u,g),b=new Map,x=et(h,"mask"),O=N=>Array.from(b.values()).every(([j,B,F,$])=>N.some(([W,G])=>W>=j&&W<=F&&G>=B&&G<=$)),w=v.map(N=>N.attributes.scale),S=N=>N.length>2?[N[0],N[N.length-1]]:N,k=new Map,E=()=>{k.clear();for(let N=0;N<v.length;N++){const j=w[N],{domain:B}=j.getOptions();k.set(N,S(B))}};E();const _=(N,j)=>{const B=[];for(const $ of p){const W=i($);O(W)?(m($,"active"),B.push($)):m($,"inactive")}if(k.set(N,M(B,N)),!j)return;const F=()=>{if(!T)return Array.from(k.values());const $=[];for(const[W,G]of k){const Y=w[W],{name:V}=Y.getOptions();V==="x"?$[0]=G:$[1]=G}return $};f.emit("brushAxis:highlight",{nativeEvent:!0,data:{selection:F()}})},A=N=>{for(const j of p)y(j,"active","inactive");E(),N&&f.emit("brushAxis:remove",{nativeEvent:!0})},M=(N,j)=>{const B=w[j],{name:F}=B.getOptions(),$=N.map(W=>{const G=W.__data__;return B.invert(G[F])});return S(Er(B,$))},T=v.some(a)&&v.some(N=>!a(N)),C=[];for(let N=0;N<v.length;N++){const j=v[N],B=a(j)?eH:tH,{hotZone:F,brushRegion:$,extent:W}=B(j,{offsetY:s,offsetX:l,cross:T,zIndex:999,fill:"transparent"});j.parentNode.appendChild(F);const G=nh(F,Object.assign(Object.assign({},x),{reverse:c,brushRegion:$,brushended(Y){b.delete(j),Array.from(b.entries()).length===0?A(Y):_(N,Y)},brushed(Y,V,z,U,q){b.set(j,W(Y,V,z,U)),_(N,q)}}));C.push(G)}const I=(N={})=>{const{nativeEvent:j}=N;j||C.forEach(B=>B.remove(!1))},R=(N,j,B)=>{const[F,$]=N,W=V=>V.getStep?V.getStep():0,G=L(F,j,B),Y=L($,j,B)+W(j);return a(B)?[G,-1/0,Y,1/0]:[-1/0,G,1/0,Y]},L=(N,j,B)=>{const{height:F,width:$}=d.getOptions(),W=j.clone();return a(B)?W.update({range:[0,$]}):W.update({range:[F,0]}),W.map(N)},P=N=>{const{nativeEvent:j}=N;if(j)return;const{selection:B}=N.data;for(let F=0;F<C.length;F++){const $=B[F],W=C[F],G=v[F];if($){const Y=w[F];W.move(...R($,Y,G),!1)}else W.remove(!1)}};return f.on("brushAxis:remove",I),f.on("brushAxis:highlight",P),()=>{C.forEach(N=>N.destroy()),f.off("brushAxis:remove",I),f.off("brushAxis:highlight",P)}}function rH(t){return(r,e,n)=>{const{container:i,view:a,options:o}=r,s=jn(i),{x:l,y:c}=s.getBBox(),{coordinate:u}=a;return nH(i,Object.assign({elements:Rr,axes:QY,offsetY:c,offsetX:l,points:f=>f.__data__.points,horizontal:f=>{const{startPos:[d,h],endPos:[p,v]}=f.attributes;return d!==p&&h===v},datum:mi(a),state:ca(o,["active",["inactive",{opacity:.5}]]),coordinate:u,emitter:n},t))}}var iH=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},LS=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function aH(t=300){let r=null;return e=>{const{timeStamp:n}=e;return r!==null&&n-r<t?(r=n,!0):(r=n,!1)}}function oH(t,r){var{filter:e,reset:n,brushRegion:i,extent:a,reverse:o,emitter:s,scale:l,coordinate:c,selection:u,series:f=!1}=r,d=LS(r,["filter","reset","brushRegion","extent","reverse","emitter","scale","coordinate","selection","series"]);const h=et(d,"mask"),{width:p,height:v}=t.getBBox(),g=a||[0,0,p,v],m=aH(),y=nh(t,Object.assign(Object.assign({},h),{extent:g,brushRegion:i,reverse:o,brushcreated:b}));t.addEventListener("click",x);function b(w,S,k,E,_){w===k&&S===E||(_.nativeEvent=!0,e(u(w,S,k,E),_),y.remove())}function x(w){m(w)&&(w.nativeEvent=!0,n(w))}const O=({nativeEvent:w,data:S})=>{if(w)return;const{selection:k}=S;e(k,{nativeEvent:!1})};return s.on("brush:filter",O),()=>{y.destroy(),s.off("brush:filter",O),t.removeEventListener("click",x)}}function lh(t){var{hideX:r=!0,hideY:e=!0}=t,n=LS(t,["hideX","hideY"]);return(i,a,o)=>{const{container:s,view:l,options:c,update:u,setState:f}=i,d=jn(s),h={maskFill:"#777",maskFillOpacity:"0.3",maskStroke:"#fff",unhighlightedOpacity:.5,reverse:!1};let p=!1,v=!1,g=l;const{scale:m,coordinate:y}=l;return oH(d,Object.assign(Object.assign({brushRegion:(b,x,O,w)=>[b,x,O,w],selection:(b,x,O,w)=>{const{scale:S,coordinate:k}=g;return Ms(b,x,O,w,S,k)},filter:(b,x)=>iH(this,void 0,void 0,function*(){if(v)return;v=!0;const[O,w]=b;f("brushFilter",k=>{const{marks:E}=k,_=E.map(A=>X({axis:Object.assign(Object.assign({},r&&{x:{transform:[{type:"hide"}]}}),e&&{y:{transform:[{type:"hide"}]}})},A,{scale:{x:{domain:O,nice:!1},y:{domain:w,nice:!1}}}));return Object.assign(Object.assign({},c),{marks:_,clip:!0})}),o.emit("brush:filter",Object.assign(Object.assign({},x),{data:{selection:[O,w]}})),g=(yield u()).view,v=!1,p=!0}),reset:b=>{if(v||!p)return;const{scale:x}=l,{x:O,y:w}=x,S=O.getOptions().domain,k=w.getOptions().domain;o.emit("brush:filter",Object.assign(Object.assign({},b),{data:{selection:[S,k]}})),p=!1,g=l,f("brushFilter"),u()},extent:void 0,emitter:o,scale:m,coordinate:y},h),n))}}function sH(t){return lh(Object.assign(Object.assign({hideX:!0},t),{brushRegion:ah}))}function lH(t){return lh(Object.assign(Object.assign({hideY:!0},t),{brushRegion:oh}))}var cH=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};const uH="slider";function fH(t,r,e,n=!1,i="x",a="y"){const{marks:o}=t,s=o.map(l=>{var c,u;return X({axis:{x:{transform:[{type:"hide"}]},y:{transform:[{type:"hide"}]}}},l,{scale:r,[e]:Object.assign(Object.assign({},((c=l[e])===null||c===void 0?void 0:c[i])&&{[i]:Object.assign({preserve:!0},n&&{ratio:null})}),((u=l[e])===null||u===void 0?void 0:u[a])&&{[a]:{preserve:!0}}),animate:!1})});return Object.assign(Object.assign({},t),{marks:s,clip:!0,animate:!1})}function dH(t,r,e){const[n,i]=t,a=e?l=>1-l:l=>l,o=oa(r,a(n),!0),s=oa(r,a(i),!1);return Er(r,[o,s])}function Os(t){return[t[0],t[t.length-1]]}function RS({initDomain:t={},className:r=uH,prefix:e="slider",setValue:n=(c,u)=>c.setValues(u),hasState:i=!1,wait:a=50,leading:o=!0,trailing:s=!1,getInitValues:l=c=>{var u;const f=(u=c==null?void 0:c.attributes)===null||u===void 0?void 0:u.values;if(f[0]!==0||f[1]!==1)return f}}){return(c,u,f)=>{const{container:d,view:h,update:p,setState:v}=c,g=d.getElementsByClassName(r);if(!g.length)return()=>{};let m=!1;const{scale:y,coordinate:b,layout:x}=h,{paddingLeft:O,paddingTop:w,paddingBottom:S,paddingRight:k}=x,{x:E,y:_}=y,A=Qt(b),M=R=>{const L=R==="vertical"?"y":"x",P=R==="vertical"?"x":"y";return A?[P,L]:[L,P]},T=new Map,C=new Set,I={x:t.x||E.getOptions().domain,y:t.y||_.getOptions().domain};for(const R of g){const{orientation:L}=R.attributes,[P,N]=M(L),j=`${e}${Nr(P)}:filter`,B=P==="x",{ratio:F}=E.getOptions(),{ratio:$}=_.getOptions(),W=z=>{if(z.data){const{selection:at}=z.data,[ot=Os(I.x),lt=Os(I.y)]=at;return B?[Er(E,ot,F),Er(_,lt,$)]:[Er(_,lt,$),Er(E,ot,F)]}const{value:U}=z.detail,q=y[P],rt=dH(U,q,A&&L==="horizontal"),tt=I[N];return[rt,tt]},G=li(z=>cH(this,void 0,void 0,function*(){const{initValue:U=!1}=z;if(m&&!U)return;m=!0;const{nativeEvent:q=!0}=z,rt=E.getOptions();Rt(rt,"domain.length")!==Rt(rt,"expectedDomain.length")&&E.update({domain:rt.expectedDomain});const tt=_.getOptions();Rt(tt,"domain.length")!==Rt(tt,"expectedDomain.length")&&_.update({domain:tt.expectedDomain});const[at,ot]=W(z);if(I[P]=at,I[N]=ot,q){const lt=B?at:ot,vt=B?ot:at;f.emit(j,Object.assign(Object.assign({},z),{nativeEvent:q,data:{selection:[Os(lt),Os(vt)]}}))}v(R,lt=>Object.assign(Object.assign({},fH(lt,{[P]:{domain:at,nice:!1}},e,i,P,N)),{paddingLeft:O,paddingTop:w,paddingBottom:S,paddingRight:k})),yield p(),m=!1}),a,{leading:o,trailing:s}),Y=z=>{const{nativeEvent:U}=z;if(U)return;const{data:q}=z,{selection:rt}=q,[tt,at]=rt;R.dispatchEvent(new Ht("valuechange",{data:q,nativeEvent:!1}));const ot=B?ul(tt,E):ul(at,_);n(R,ot)};f.on(j,Y),R.addEventListener("valuechange",G),T.set(R,G),C.add([j,Y]);const V=l(R);V&&R.dispatchEvent(new Ht("valuechange",{detail:{value:V},nativeEvent:!1,initValue:!0}))}return()=>{for(const[R,L]of T)R.removeEventListener("valuechange",L);for(const[R,L]of C)f.off(R,L)}}}const jg="g2-scrollbar";function hH(t={}){return(r,e,n)=>{const{view:i,container:a}=r;if(!a.getElementsByClassName(jg).length)return()=>{};const{scale:s}=i,{x:l,y:c}=s,u={x:[...l.getOptions().domain],y:[...c.getOptions().domain]};return RS(Object.assign({initDomain:u,className:jg,prefix:"scrollbar",hasState:!0,setValue:(d,h)=>d.setValue(h[0]),getInitValues:d=>{const h=d.slider.attributes.values;if(h[0]!==0)return h}},t))(r,e,n)}}var pH=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function vH(t,r,e){return`<${t} style="${Object.entries(e).map(([n,i])=>`${TN(n)}:${i}`).join(";")}">${r}</${t}>`}const gH={backgroundColor:"rgba(0,0,0,0.75)",color:"#fff",width:"max-content",padding:"1px 4px",fontSize:"12px",borderRadius:"2.5px",boxShadow:"0 3px 6px -4px rgba(0,0,0,0.12), 0 6px 16px 0 rgba(0,0,0,0.08), 0 9px 28px 8px rgba(0,0,0,0.05)"};function Dg(t){return t.nodeName!=="text"?!1:!!t.isOverflowing()}function NS(t){var{offsetX:r=8,offsetY:e=8}=t,n=pH(t,["offsetX","offsetY"]);return i=>{const{container:a}=i,[o,s]=a.getBounds().min,l=et(n,"tip"),c=new Set,u=d=>{const{target:h}=d;if(!Dg(h)){d.stopPropagation();return}const{offsetX:p,offsetY:v}=d,g=p+r-o,m=v+e-s;if(h.tip){h.tip.style.x=g,h.tip.style.y=m;return}const{text:y}=h.style,b=new Eo({className:"poptip",style:{innerHTML:vH("div",y,Object.assign(Object.assign({},gH),l)),x:g,y:m}});a.appendChild(b),h.tip=b,c.add(b)},f=d=>{const{target:h}=d;if(!Dg(h)){d.stopPropagation();return}h.tip&&(h.tip.remove(),h.tip=null,c.delete(h.tip))};return a.addEventListener("pointerover",u),a.addEventListener("pointerout",f),()=>{a.removeEventListener("pointerover",u),a.removeEventListener("pointerout",f),c.forEach(d=>d.remove())}}}NS.props={reapplyWhenUpdate:!0};var mH=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},yH=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};function bH(t){return ht(t).select(`.${dl}`).node()}const xH={breadCrumbFill:"rgba(0, 0, 0, 0.85)",breadCrumbFontSize:12,breadCrumbY:12,activeFill:"rgba(0, 0, 0, 0.5)"};function OH(t={}){const{originData:r=[],layout:e}=t,n=yH(t,["originData","layout"]),i=X({},xH,n),a=et(i,"breadCrumb"),o=et(i,"active");return s=>{const{update:l,setState:c,container:u,options:f}=s,d=bH(u),h=f.marks[0],{state:p}=h,v=new Re;d.appendChild(v);const g=(w,S)=>mH(this,void 0,void 0,function*(){if(v.removeChildren(),S){let k="",E=a.y,_=0;const A=[],M=d.getBBox().width,T=w.map((C,I)=>{k=`${k}${C}/`,A.push(C);const R=new Pn({name:k.replace(/\/$/,""),style:Object.assign(Object.assign({text:C,x:_,path:[...A],depth:I},a),{y:E})});v.appendChild(R),_+=R.getBBox().width;const L=new Pn({style:Object.assign(Object.assign({x:_,text:" / "},a),{y:E})});return v.appendChild(L),_+=L.getBBox().width,_>M&&(E=v.getBBox().height+a.y,_=0,R.attr({x:_,y:E}),_+=R.getBBox().width,L.attr({x:_,y:E}),_+=L.getBBox().width),I===Bs(w)-1&&L.remove(),R});T.forEach((C,I)=>{if(I===Bs(T)-1)return;const R=Object.assign({},C.attributes);C.attr("cursor","pointer"),C.addEventListener("mouseenter",()=>{C.attr(o)}),C.addEventListener("mouseleave",()=>{C.attr(R)}),C.addEventListener("click",()=>{g(Rt(C,["style","path"]),Rt(C,["style","depth"]))})})}jY(u,c),c("treemapDrillDown",k=>{const{marks:E}=k,_=w.join("/"),A=E.map(M=>{if(M.type!=="rect")return M;let T=r;if(S){const I=r.filter(j=>{const B=Rt(j,["id"]);return B&&(B.match(`${_}/`)||_.match(B))}).map(j=>({value:j.height===0?Rt(j,["value"]):void 0,name:Rt(j,["id"])})),{paddingLeft:R,paddingBottom:L,paddingRight:P}=e,N=Object.assign(Object.assign({},e),{paddingTop:(e.paddingTop||v.getBBox().height+10)/(S+1),paddingLeft:R/(S+1),paddingBottom:L/(S+1),paddingRight:P/(S+1),path:j=>j.name,layer:j=>j.depth===S+1});T=Dx(I,N,{value:"value"})[0]}else T=r.filter(I=>I.depth===1);const C=[];return T.forEach(({path:I})=>{C.push(fa(I))}),X({},M,{data:T,scale:{color:{domain:C}}})});return Object.assign(Object.assign({},k),{marks:A})}),yield l(void 0,["legendFilter"])}),m=w=>w.attributes.key.split("-")[0],y=w=>Rt(w,["__data__","key"]),b=w=>{const S=w.target,{markType:k,nodeName:E,attributes:_}=S||{};if(k!=="rect"&&E!==H.TEXT)return;const A=E===H.TEXT&&Rt(_,"isTreemapLabel")===!0?m(S):y(S),M=Ui(r,T=>T.id===A);Rt(M,"height")&&g(Rt(M,"path"),Rt(M,"depth"))};d.addEventListener("click",b);const x=Tm(Object.assign(Object.assign({},p.active),p.inactive)),O=()=>{aS(d).forEach(S=>{const k=Rt(S,["style","cursor"]),E=Ui(r,_=>_.id===Rt(S,["__data__","key"]));if(k!=="pointer"&&(E!=null&&E.height)){S.style.cursor="pointer";const _=UA(S.attributes,x);S.addEventListener("mouseenter",()=>{S.attr(p.active)}),S.addEventListener("mouseleave",()=>{S.attr(X(_,p.inactive))})}})};return O(),d.addEventListener("mousemove",O),()=>{v.remove(),d.removeEventListener("click",b),d.removeEventListener("mousemove",O)}}}var eu=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},wH=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const SH={pointR:6,pointStrokeWidth:1,pointStroke:"#888",pointActiveStroke:"#f5f5f5",pathStroke:"#888",pathLineDash:[3,4],labelFontSize:12,labelFill:"#888",labelStroke:"#fff",labelLineWidth:1,labelY:-6,labelX:2},nu="movePoint",Bg=t=>{const r=t.target,{markType:e}=r;e==="line"&&(r.attr("_lineWidth",r.attr("lineWidth")||1),r.attr("lineWidth",r.attr("_lineWidth")+3)),e==="interval"&&(r.attr("_opacity",r.attr("opacity")||1),r.attr("opacity",.7*r.attr("_opacity")))},Fg=t=>{const r=t.target,{markType:e}=r;e==="line"&&r.attr("lineWidth",r.attr("_lineWidth")),e==="interval"&&r.attr("opacity",r.attr("_opacity"))},kH=(t,r,e)=>r.map(n=>["x","color"].reduce((a,o)=>{const s=e[o];return s&&n[s]!==t[s]?!1:a},!0)?Object.assign(Object.assign({},n),t):n),EH=t=>{const r=Rt(t,["__data__","y"]),n=Rt(t,["__data__","y1"])-r,{__data__:{data:i,encode:a,transform:o},childNodes:s}=t.parentNode,l=Ui(o,({type:f})=>f==="normalizeY"),c=Rt(a,["y","field"]),u=i[s.indexOf(t)][c];return(f,d=!1)=>l||d?f/(1-f)/(n/(1-n))*u:f},_H=(t,r)=>{const e=Rt(t,["__data__","seriesItems",r,"0","value"]),n=Rt(t,["__data__","seriesIndex",r]),{__data__:{data:i,encode:a,transform:o}}=t.parentNode,s=Ui(o,({type:u})=>u==="normalizeY"),l=Rt(a,["y","field"]),c=i[n][l];return u=>s?e===1?u:u/(1-u)/(e/(1-e))*c:u},$g=(t,r,e)=>{t.forEach((n,i)=>{n.attr("stroke",r[1]===i?e.activeStroke:e.stroke)})},zg=(t,r,e,n)=>{const i=new Qe({style:e}),a=new Pn({style:n});return r.appendChild(a),t.appendChild(i),[i,a]},Gg=(t,r)=>{if(!Rt(t,["options","range","indexOf"]))return;const n=t.options.range.indexOf(r);return t.sortedDomain[n]},ru=(t,r,e)=>{const n=Ol(t,r),a=Ol(t,e)/n,o=t[0]+(r[0]-t[0])*a,s=t[1]+(r[1]-t[1])*a;return[o,s]};function AH(t={}){const{selection:r=[],precision:e=2}=t,n=wH(t,["selection","precision"]),i=Object.assign(Object.assign({},SH),n||{}),a=et(i,"path"),o=et(i,"label"),s=et(i,"point");return(l,c,u)=>{const{update:f,setState:d,container:h,view:p,options:{marks:v,coordinate:g}}=l,m=jn(h);let y=aS(m),b,x=r;const{transform:O=[],type:w}=g,S=!!Ui(O,({type:P})=>P==="transpose"),k=w==="polar",E=w==="theta",_=!!Ui(y,({markType:P})=>P==="area");_&&(y=y.filter(({markType:P})=>P==="area"));const A=new Re({style:{zIndex:2}});m.appendChild(A);const M=()=>{u.emit("element-point:select",{nativeEvent:!0,data:{selection:x}})},T=(P,N)=>{u.emit("element-point:moved",{nativeEvent:!0,data:{changeData:P,data:N}})},C=P=>{const N=P.target;x=[N.parentNode.childNodes.indexOf(N)],M(),R(N)},I=P=>{const{data:{selection:N},nativeEvent:j}=P;if(j)return;x=N;const B=Rt(y,[x==null?void 0:x[0]]);B&&R(B)},R=P=>{const{attributes:N,markType:j,__data__:B}=P,{stroke:F}=N,{points:$,seriesTitle:W,color:G,title:Y,seriesX:V,y1:z}=B;if(S&&j!=="interval")return;const{scale:U,coordinate:q}=(b==null?void 0:b.view)||p,{color:rt,y:tt,x:at}=U,ot=q.getCenter();A.removeChildren();let lt;const vt=(ft,dt,mt,xe)=>eu(this,void 0,void 0,function*(){return d("elementPointMove",We=>{var se;const Oe=(((se=b==null?void 0:b.options)===null||se===void 0?void 0:se.marks)||v).map(we=>{if(!xe.includes(we.type))return we;const{data:te,encode:It}=we,de=Object.keys(It).reduce((ee,Xe)=>{const Ue=It[Xe];return Xe==="x"&&(ee[Ue]=ft),Xe==="y"&&(ee[Ue]=dt),Xe==="color"&&(ee[Ue]=mt),ee},{}),he=kH(de,te,It);return T(de,he),X({},we,{data:he,animate:!1})});return Object.assign(Object.assign({},We),{marks:Oe})}),yield f("elementPointMove")});if(["line","area"].includes(j))$.forEach((ft,dt)=>{const mt=at.invert(V[dt]);if(!mt)return;const xe=new gr({name:nu,style:Object.assign({cx:ft[0],cy:ft[1],fill:F},s)}),We=_H(P,dt);xe.addEventListener("mousedown",se=>{const Oe=q.output([V[dt],0]),we=W==null?void 0:W.length;h.attr("cursor","move"),x[1]!==dt&&(x[1]=dt,M()),$g(A.childNodes,x,s);const[te,It]=zg(A,xe,a,o),fe=he=>{const ee=ft[1]+he.clientY-lt[1];if(_)if(k){const Xe=ft[0]+he.clientX-lt[0],[Ue,Yr]=ru(ot,Oe,[Xe,ee]),[,ma]=q.output([1,tt.output(0)]),[,pc]=q.invert([Ue,ma-($[dt+we][1]-Yr)]),fh=(dt+1)%we,hk=(dt-1+we)%we,pk=Aa([$[hk],[Ue,Yr],W[fh]&&$[fh]]);It.attr("text",We(tt.invert(pc)).toFixed(e)),te.attr("d",pk),xe.attr("cx",Ue),xe.attr("cy",Yr)}else{const[,Xe]=q.output([1,tt.output(0)]),[,Ue]=q.invert([ft[0],Xe-($[dt+we][1]-ee)]),Yr=Aa([$[dt-1],[ft[0],ee],W[dt+1]&&$[dt+1]]);It.attr("text",We(tt.invert(Ue)).toFixed(e)),te.attr("d",Yr),xe.attr("cy",ee)}else{const[,Xe]=q.invert([ft[0],ee]),Ue=Aa([$[dt-1],[ft[0],ee],$[dt+1]]);It.attr("text",tt.invert(Xe).toFixed(e)),te.attr("d",Ue),xe.attr("cy",ee)}};lt=[se.clientX,se.clientY],window.addEventListener("mousemove",fe);const de=()=>eu(this,void 0,void 0,function*(){if(h.attr("cursor","default"),window.removeEventListener("mousemove",fe),h.removeEventListener("mouseup",de),Ut(It.attr("text")))return;const he=Number(It.attr("text")),ee=Gg(rt,G);b=yield vt(mt,he,ee,["line","area"]),It.remove(),te.remove(),R(P)});h.addEventListener("mouseup",de)}),A.appendChild(xe)}),$g(A.childNodes,x,s);else if(j==="interval"){let ft=[($[0][0]+$[1][0])/2,$[0][1]];S?ft=[$[0][0],($[0][1]+$[1][1])/2]:E&&(ft=$[0]);const dt=EH(P),mt=new gr({name:nu,style:Object.assign(Object.assign({cx:ft[0],cy:ft[1],fill:F},s),{stroke:s.activeStroke})});mt.addEventListener("mousedown",xe=>{h.attr("cursor","move");const We=Gg(rt,G),[se,Oe]=zg(A,mt,a,o),we=It=>{if(S){const fe=ft[0]+It.clientX-lt[0],[de]=q.output([tt.output(0),tt.output(0)]),[,he]=q.invert([de+(fe-$[2][0]),ft[1]]),ee=Aa([[fe,$[0][1]],[fe,$[1][1]],$[2],$[3]],!0);Oe.attr("text",dt(tt.invert(he)).toFixed(e)),se.attr("d",ee),mt.attr("cx",fe)}else if(E){const fe=ft[1]+It.clientY-lt[1],de=ft[0]+It.clientX-lt[0],[he,ee]=ru(ot,[de,fe],ft),[Xe,Ue]=ru(ot,[de,fe],$[1]),Yr=q.invert([he,ee])[1],ma=z-Yr;if(ma<0)return;const pc=uY(ot,[[he,ee],[Xe,Ue],$[2],$[3]],ma>.5?1:0);Oe.attr("text",dt(ma,!0).toFixed(e)),se.attr("d",pc),mt.attr("cx",he),mt.attr("cy",ee)}else{const fe=ft[1]+It.clientY-lt[1],[,de]=q.output([1,tt.output(0)]),[,he]=q.invert([ft[0],de-($[2][1]-fe)]),ee=Aa([[$[0][0],fe],[$[1][0],fe],$[2],$[3]],!0);Oe.attr("text",dt(tt.invert(he)).toFixed(e)),se.attr("d",ee),mt.attr("cy",fe)}};lt=[xe.clientX,xe.clientY],window.addEventListener("mousemove",we);const te=()=>eu(this,void 0,void 0,function*(){if(h.attr("cursor","default"),h.removeEventListener("mouseup",te),window.removeEventListener("mousemove",we),Ut(Oe.attr("text")))return;const It=Number(Oe.attr("text"));b=yield vt(Y,It,We,[j]),Oe.remove(),se.remove(),R(P)});h.addEventListener("mouseup",te)}),A.appendChild(mt)}};y.forEach((P,N)=>{x[0]===N&&R(P),P.addEventListener("click",C),P.addEventListener("mouseenter",Bg),P.addEventListener("mouseleave",Fg)});const L=P=>{const N=P==null?void 0:P.target;(!N||N.name!==nu&&!y.includes(N))&&(x=[],M(),A.removeChildren())};return u.on("element-point:select",I),u.on("element-point:unselect",L),h.addEventListener("mousedown",L),()=>{A.remove(),u.off("element-point:select",I),u.off("element-point:unselect",L),h.removeEventListener("mousedown",L),y.forEach(P=>{P.removeEventListener("click",C),P.removeEventListener("mouseenter",Bg),P.removeEventListener("mouseleave",Fg)})}}}var TH=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};const IS=t=>{const{value:r,format:e=r.split(".").pop(),delimiter:n=",",autoType:i=!0}=t;return()=>TH(void 0,void 0,void 0,function*(){const a=yield fetch(r);if(e==="csv"){const o=yield a.text();return z_(n).parse(o,i?G_:di)}if(e==="json")return yield a.json();throw new Error(`Unknown format: ${e}.`)})};IS.props={};function MH(t){return!t||Object.keys(t).length===0}const jS=t=>{const{fields:r,key:e="key",value:n="value"}=t;return i=>MH(r)?i:i.flatMap(a=>r.map(o=>Object.assign(Object.assign({},a),{[e]:o,[n]:a[o]})))};jS.props={};function PH(t){return t!=null&&!Number.isNaN(t)}const DS=t=>{const{callback:r=PH}=t;return e=>e.filter(r)};DS.props={};const BS=t=>{const{callback:r}=t;return e=>Array.isArray(e)?[...e].sort(r):e};BS.props={};function CH(t,r=[]){return r.reduce((e,n)=>(n in t&&(e[n]=t[n]),e),{})}const FS=t=>{const{fields:r}=t;return e=>e.map(n=>CH(n,r))};FS.props={};function LH(t){return Object.keys(t).length===0}const $S=t=>r=>{if(!t||LH(t))return r;const e=n=>Object.entries(n).reduce((i,[a,o])=>(i[t[a]||a]=o,i),{});return r.map(e)};$S.props={};function RH(t,r){return t.map(e=>{if(Array.isArray(e)){const[n,i=r]=e;return[n,i]}return[e,r]})}const zS=t=>{const{fields:r=[]}=t,e=RH(r,!0);return n=>{const i=(a,o)=>e.reduce((s,[l,c=!0])=>s!==0?s:c?a[l]<o[l]?-1:+(a[l]!==o[l]):a[l]>o[l]?-1:+(a[l]!==o[l]),0);return[...n].sort(i)}};zS.props={};const GS=t=>{const{value:r}=t;return()=>r};GS.props={};const WS=t=>{const{callback:r=di}=t;return e=>r(e)};WS.props={};const YS=t=>{const{callback:r=di}=t;return e=>Array.isArray(e)?e.map(r):e};YS.props={};var NH=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})};function IH(t,r){return{set(e,n,i){if(r[e]===void 0)return this;const a=n?n.call(null,r[e]):r[e];return i?i.call(null,a):typeof t[e]=="function"?t[e](a):t[e]=a,this},setAsync(e,n,i){return NH(this,void 0,void 0,function*(){if(r[e]===void 0)return this;const a=n?yield n.call(null,r[e]):r[e];return i?i.call(null,a):typeof t[e]=="function"?t[e](a):t[e]=a,this})}}}const iu=Math.PI/180,Na=64,Ls=2048;function jH(t){return t.text}function DH(){return"serif"}function Wg(){return"normal"}function BH(t){return t.value}function FH(){return~~(Math.random()*2)*90}function $H(){return 1}function zH(){}function GH(t,r,e,n){if(r.sprite)return;const i=t.context,a=t.ratio;i.clearRect(0,0,(Na<<5)/a,Ls/a);let o=0,s=0,l=0;const c=e.length;for(--n;++n<c;){r=e[n],i.save(),i.font=r.style+" "+r.weight+" "+~~((r.size+1)/a)+"px "+r.font;let d=i.measureText(r.text+"m").width*a,h=r.size<<1;if(r.rotate){const p=Math.sin(r.rotate*iu),v=Math.cos(r.rotate*iu),g=d*v,m=d*p,y=h*v,b=h*p;d=Math.max(Math.abs(g+b),Math.abs(g-b))+31>>5<<5,h=~~Math.max(Math.abs(m+y),Math.abs(m-y))}else d=d+31>>5<<5;if(h>l&&(l=h),o+d>=Na<<5&&(o=0,s+=l,l=0),s+h>=Ls)break;i.translate((o+(d>>1))/a,(s+(h>>1))/a),r.rotate&&i.rotate(r.rotate*iu),i.fillText(r.text,0,0),r.padding&&(i.lineWidth=2*r.padding,i.strokeText(r.text,0,0)),i.restore(),r.width=d,r.height=h,r.xoff=o,r.yoff=s,r.x1=d>>1,r.y1=h>>1,r.x0=-r.x1,r.y0=-r.y1,r.hasText=!0,o+=d}const u=i.getImageData(0,0,(Na<<5)/a,Ls/a).data,f=[];for(;--n>=0;){if(r=e[n],!r.hasText)continue;const d=r.width,h=d>>5;let p=r.y1-r.y0;for(let m=0;m<p*h;m++)f[m]=0;if(o=r.xoff,o==null)return;s=r.yoff;let v=0,g=-1;for(let m=0;m<p;m++){for(let y=0;y<d;y++){const b=h*m+(y>>5),x=u[(s+m)*(Na<<5)+(o+y)<<2]?1<<31-y%32:0;f[b]|=x,v|=x}v?g=m:(r.y0++,p--,m--,s++)}r.y1=r.y0+g,r.sprite=f.slice(0,(r.y1-r.y0)*h)}}function WH(t,r,e){e>>=5;const n=t.sprite,i=t.width>>5,a=t.x-(i<<4),o=a&127,s=32-o,l=t.y1-t.y0;let c=(t.y+t.y0)*e+(a>>5),u;for(let f=0;f<l;f++){u=0;for(let d=0;d<=i;d++)if((u<<s|(d<i?(u=n[f*i+d])>>>o:0))&r[c+d])return!0;c+=e}return!1}function YH(t,r){const e=t[0],n=t[1];r.x+r.x0<e.x&&(e.x=r.x+r.x0),r.y+r.y0<e.y&&(e.y=r.y+r.y0),r.x+r.x1>n.x&&(n.x=r.x+r.x1),r.y+r.y1>n.y&&(n.y=r.y+r.y1)}function HH(t,r){return t.x+t.x1>r[0].x&&t.x+t.x0<r[1].x&&t.y+t.y1>r[0].y&&t.y+t.y0<r[1].y}function HS(t){const r=t[0]/t[1];return function(e){return[r*(e*=.1)*Math.cos(e),e*Math.sin(e)]}}function VH(t){const e=4*t[0]/t[1];let n=0,i=0;return function(a){const o=a<0?-1:1;switch(Math.sqrt(1+4*o*a)-o&3){case 0:n+=e;break;case 1:i+=4;break;case 2:n-=e;break;default:i-=4;break}return[n,i]}}function Yg(t){const r=[];let e=-1;for(;++e<t;)r[e]=0;return r}function XH(){return document.createElement("canvas")}function ar(t){return typeof t=="function"?t:function(){return t}}const UH={archimedean:HS,rectangular:VH};function qH(){let t=[256,256],r=jH,e=DH,n=BH,i=Wg,a=FH,o=$H,s=HS,l=Math.random,c=zH,u=[],f=null,d=1/0,h=XH;const p=Wg,v={};v.start=function(){const[y,b]=t,x=g(h()),O=v.board?v.board:Yg((t[0]>>5)*t[1]),w=u.length,S=[],k=u.map(function(M,T,C){return M.text=r.call(this,M,T,C),M.font=e.call(this,M,T,C),M.style=p.call(this,M,T,C),M.weight=i.call(this,M,T,C),M.rotate=a.call(this,M,T,C),M.size=~~n.call(this,M,T,C),M.padding=o.call(this,M,T,C),M}).sort(function(M,T){return T.size-M.size});let E=-1,_=v.board?[{x:0,y:0},{x:y,y:b}]:void 0;f&&clearInterval(f),f=setInterval(A,0),A();function A(){const M=Date.now();for(;Date.now()-M<d&&++E<w;){const T=k[E];T.x=y*(l()+.5)>>1,T.y=b*(l()+.5)>>1,GH(x,T,k,E),T.hasText&&m(O,T,_)&&(c.call(null,"word",{cloud:v,word:T}),S.push(T),_?v.hasImage||YH(_,T):_=[{x:T.x+T.x0,y:T.y+T.y0},{x:T.x+T.x1,y:T.y+T.y1}],T.x-=t[0]>>1,T.y-=t[1]>>1)}v._tags=S,v._bounds=_,E>=w&&(v.stop(),c.call(null,"end",{cloud:v,words:S,bounds:_}))}return v},v.stop=function(){return f&&(clearInterval(f),f=null),v};function g(y){y.width=y.height=1;const b=Math.sqrt(y.getContext("2d").getImageData(0,0,1,1).data.length>>2);y.width=(Na<<5)/b,y.height=Ls/b;const x=y.getContext("2d");return x.fillStyle=x.strokeStyle="red",x.textAlign="center",x.textBaseline="middle",{context:x,ratio:b}}function m(y,b,x){const O=b.x,w=b.y,S=Math.sqrt(t[0]*t[0]+t[1]*t[1]),k=s(t),E=l()<.5?1:-1;let _,A=-E,M,T;for(;(_=k(A+=E))&&(M=~~_[0],T=~~_[1],!(Math.min(Math.abs(M),Math.abs(T))>=S));)if(b.x=O+M,b.y=w+T,!(b.x+b.x0<0||b.y+b.y0<0||b.x+b.x1>t[0]||b.y+b.y1>t[1])&&(!x||!WH(b,y,t[0]))&&(!x||HH(b,x))){const C=b.sprite,I=b.width>>5,R=t[0]>>5,L=b.x-(I<<4),P=L&127,N=32-P,j=b.y1-b.y0;let B,F=(b.y+b.y0)*R+(L>>5);for(let $=0;$<j;$++){B=0;for(let W=0;W<=I;W++)y[F+W]|=B<<N|(W<I?(B=C[$*I+W])>>>P:0);F+=R}return delete b.sprite,!0}return!1}return v.createMask=y=>{const b=document.createElement("canvas"),[x,O]=t;if(!x||!O)return;const w=x>>5,S=Yg((x>>5)*O);b.width=x,b.height=O;const k=b.getContext("2d");k.drawImage(y,0,0,y.width,y.height,0,0,x,O);const E=k.getImageData(0,0,x,O).data;for(let _=0;_<O;_++)for(let A=0;A<x;A++){const M=w*_+(A>>5),T=_*x+A<<2,I=E[T]>=250&&E[T+1]>=250&&E[T+2]>=250?1<<31-A%32:0;S[M]|=I}v.board=S,v.hasImage=!0},v.timeInterval=function(y){d=y??1/0},v.words=function(y){u=y},v.size=function(y=[]){t=[+y[0],+y[1]]},v.text=function(y){r=ar(y)},v.font=function(y){e=ar(y)},v.fontWeight=function(y){i=ar(y)},v.rotate=function(y){a=ar(y)},v.canvas=function(y){h=ar(y)},v.spiral=function(y){s=UH[y]||y},v.fontSize=function(y){n=ar(y)},v.padding=function(y){o=ar(y)},v.random=function(y){l=ar(y)},v.on=function(y){c=ar(y)},v}var KH=function(t,r,e,n){function i(a){return a instanceof e?a:new e(function(o){o(a)})}return new(e||(e=Promise))(function(a,o){function s(u){try{c(n.next(u))}catch(f){o(f)}}function l(u){try{c(n.throw(u))}catch(f){o(f)}}function c(u){u.done?a(u.value):i(u.value).then(s,l)}c((n=n.apply(t,r||[])).next())})},ZH=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const QH={fontSize:[20,60],font:"Impact",padding:2,rotate:function(){return(~~(Math.random()*6)-3)*30}};function JH(t){return new Promise((r,e)=>{if(t instanceof HTMLImageElement){r(t);return}if(typeof t=="string"){const n=new Image;n.crossOrigin="anonymous",n.src=t,n.onload=()=>r(n),n.onerror=()=>{console.error(`'image ${t} load failed !!!'`),e()};return}e()})}function tV(t,r){if(typeof t=="function")return t;if(Array.isArray(t)){const[e,n]=t;if(!r)return()=>(n+e)/2;const[i,a]=r;return a===i?()=>(n+e)/2:({value:o})=>(n-e)/(a-i)*(o-i)+e}return()=>t}const VS=(t,r)=>e=>KH(void 0,void 0,void 0,function*(){const n=Object.assign({},QH,t,{canvas:r.createCanvas}),i=qH();yield IH(i,n).set("fontSize",y=>{const b=e.map(x=>x.value);return tV(y,[Rn(b),Vt(b)])}).set("font").set("fontStyle").set("fontWeight").set("padding").set("rotate").set("size").set("spiral").set("timeInterval").set("random").set("text").set("on").set("canvas").setAsync("imageMask",JH,i.createMask),i.words([...e]);const a=i.start(),[o,s]=n.size,l=[{x:0,y:0},{x:o,y:s}],{_bounds:c=l,_tags:u,hasImage:f}=a,d=u.map(y=>{var{x:b,y:x,font:O}=y,w=ZH(y,["x","y","font"]);return Object.assign(Object.assign({},w),{x:b+o/2,y:x+s/2,fontFamily:O})}),[{x:h,y:p},{x:v,y:g}]=c,m={text:"",value:0,opacity:0,fontSize:0};return d.push(Object.assign(Object.assign({},m),{x:f?0:h,y:f?0:p}),Object.assign(Object.assign({},m),{x:f?o:v,y:f?s:g})),d});VS.props={};function Hg(t){return typeof t=="string"?r=>r[t]:t}const XS=t=>{const{join:r,on:e,select:n=[],as:i=n,unknown:a=NaN}=t,[o,s]=e,l=Hg(s),c=Hg(o),u=sm(r,([f])=>f,f=>l(f));return f=>f.map(d=>{const h=u.get(c(d));return Object.assign(Object.assign({},d),n.reduce((p,v,g)=>(p[i[g]]=h?h[v]:a,p),{}))})};XS.props={};const US=t=>{const{start:r,end:e}=t;return n=>n.slice(r,e)};US.props={};const qS=t=>{const{field:r,groupBy:e,as:n=["y","size"],min:i,max:a,size:o=10,width:s}=t,[l,c]=n;return u=>Array.from(Kt(u,d=>e.map(h=>d[h]).join("-")).values()).map(d=>{const h=$_.create(d.map(g=>g[r]),{min:i,max:a,size:o,width:s}),p=h.map(g=>g.x),v=h.map(g=>g.y);return Object.assign(Object.assign({},d[0]),{[l]:p,[c]:v})})};qS.props={};function eV(t,r,e,n){n=n||{};const i=n.maxIterations||100,a=n.tolerance||1e-10,o=t(r),s=t(e);let l=e-r;if(o*s>0)throw"Initial bisect points must have opposite signs";if(o===0)return r;if(s===0)return e;for(let c=0;c<i;++c){l/=2;const u=r+l,f=t(u);if(f*o>=0&&(r=u),Math.abs(l)<a||f===0)return u}return r+l}function af(t){const r=new Array(t);for(let e=0;e<t;++e)r[e]=0;return r}function Vg(t,r){return af(t).map(()=>af(r))}function Hi(t,r){let e=0;for(let n=0;n<t.length;++n)e+=t[n]*r[n];return e}function of(t){return Math.sqrt(Hi(t,t))}function sf(t,r,e){for(let n=0;n<r.length;++n)t[n]=r[n]*e}function lr(t,r,e,n,i){for(let a=0;a<t.length;++a)t[a]=r*e[a]+n*i[a]}function nV(t,r,e){e=e||{};const n=e.maxIterations||r.length*200,i=e.nonZeroDelta||1.05,a=e.zeroDelta||.001,o=e.minErrorDelta||1e-6,s=e.minErrorDelta||1e-5,l=e.rho!==void 0?e.rho:1,c=e.chi!==void 0?e.chi:2,u=e.psi!==void 0?e.psi:-.5,f=e.sigma!==void 0?e.sigma:.5;let d;const h=r.length,p=new Array(h+1);p[0]=r,p[0].fx=t(r),p[0].id=0;for(let O=0;O<h;++O){const w=r.slice();w[O]=w[O]?w[O]*i:a,p[O+1]=w,p[O+1].fx=t(w),p[O+1].id=O+1}function v(O){for(let w=0;w<O.length;w++)p[h][w]=O[w];p[h].fx=O.fx}const g=(O,w)=>O.fx-w.fx,m=r.slice(),y=r.slice(),b=r.slice(),x=r.slice();for(let O=0;O<n;++O){if(p.sort(g),e.history){const S=p.map(k=>{const E=k.slice();return E.fx=k.fx,E.id=k.id,E});S.sort((k,E)=>k.id-E.id),e.history.push({x:p[0].slice(),fx:p[0].fx,simplex:S})}d=0;for(let S=0;S<h;++S)d=Math.max(d,Math.abs(p[0][S]-p[1][S]));if(Math.abs(p[0].fx-p[h].fx)<o&&d<s)break;for(let S=0;S<h;++S){m[S]=0;for(let k=0;k<h;++k)m[S]+=p[k][S];m[S]/=h}const w=p[h];if(lr(y,1+l,m,-l,w),y.fx=t(y),y.fx<p[0].fx)lr(x,1+c,m,-c,w),x.fx=t(x),x.fx<y.fx?v(x):v(y);else if(y.fx>=p[h-1].fx){let S=!1;if(y.fx>w.fx?(lr(b,1+u,m,-u,w),b.fx=t(b),b.fx<w.fx?v(b):S=!0):(lr(b,1-u*l,m,u*l,w),b.fx=t(b),b.fx<y.fx?v(b):S=!0),S){if(f>=1)break;for(let k=1;k<p.length;++k)lr(p[k],1-f,p[0],f,p[k]),p[k].fx=t(p[k])}}else v(y)}return p.sort(g),{fx:p[0].fx,x:p[0]}}function rV(t,r,e,n,i,a,o){const s=e.fx,l=Hi(e.fxprime,r);let c=s,u=s,f=l,d=0;i=i||1,a=a||1e-6,o=o||.1;function h(p,v,g){for(let m=0;m<16;++m)if(i=(p+v)/2,lr(n.x,1,e.x,i,r),c=n.fx=t(n.x,n.fxprime),f=Hi(n.fxprime,r),c>s+a*i*l||c>=g)v=i;else{if(Math.abs(f)<=-o*l)return i;f*(v-p)>=0&&(v=p),p=i,g=c}return 0}for(let p=0;p<10;++p){if(lr(n.x,1,e.x,i,r),c=n.fx=t(n.x,n.fxprime),f=Hi(n.fxprime,r),c>s+a*i*l||p&&c>=u)return h(d,i,u);if(Math.abs(f)<=-o*l)return i;if(f>=0)return h(i,d,c);u=c,d=i,i*=2}return i}function iV(t,r,e){let n={x:r.slice(),fx:0,fxprime:r.slice()},i={x:r.slice(),fx:0,fxprime:r.slice()};const a=r.slice();let o,s=1;e=e||{};const l=e.maxIterations||r.length*20;n.fx=t(n.x,n.fxprime);const c=n.fxprime.slice();sf(c,n.fxprime,-1);for(let u=0;u<l;++u){if(s=rV(t,c,n,i,s),e.history&&e.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:s}),!s)sf(c,n.fxprime,-1);else{lr(a,1,i.fxprime,-1,n.fxprime);const f=Hi(n.fxprime,n.fxprime),d=Math.max(0,Hi(a,i.fxprime)/f);lr(c,d,c,-1,i.fxprime),o=n,n=i,i=o}if(of(n.fxprime)<=1e-5)break}return e.history&&e.history.push({x:n.x.slice(),fx:n.fx,fxprime:n.fxprime.slice(),alpha:s}),n}const KS=1e-10;function ZS(t,r){const e=oV(t),n=e.filter(function(l){return aV(l,t)});let i=0,a=0,o;const s=[];if(n.length>1){const l=sV(n);for(o=0;o<n.length;++o){const u=n[o];u.angle=Math.atan2(u.x-l.x,u.y-l.y)}n.sort(function(u,f){return f.angle-u.angle});let c=n[n.length-1];for(o=0;o<n.length;++o){const u=n[o];a+=(c.x+u.x)*(u.y-c.y);const f={x:(u.x+c.x)/2,y:(u.y+c.y)/2};let d=null;for(let h=0;h<u.parentIndex.length;++h)if(c.parentIndex.indexOf(u.parentIndex[h])>-1){const p=t[u.parentIndex[h]],v=Math.atan2(u.x-p.x,u.y-p.y),g=Math.atan2(c.x-p.x,c.y-p.y);let m=g-v;m<0&&(m+=2*Math.PI);const y=g-m/2;let b=lo(f,{x:p.x+p.radius*Math.sin(y),y:p.y+p.radius*Math.cos(y)});b>p.radius*2&&(b=p.radius*2),(d===null||d.width>b)&&(d={circle:p,width:b,p1:u,p2:c})}d!==null&&(s.push(d),i+=lf(d.circle.radius,d.width),c=u)}}else{let l=t[0];for(o=1;o<t.length;++o)t[o].radius<l.radius&&(l=t[o]);let c=!1;for(o=0;o<t.length;++o)if(lo(t[o],l)>Math.abs(l.radius-t[o].radius)){c=!0;break}c?i=a=0:(i=l.radius*l.radius*Math.PI,s.push({circle:l,p1:{x:l.x,y:l.y+l.radius},p2:{x:l.x-KS,y:l.y+l.radius},width:l.radius*2}))}return a/=2,r&&(r.area=i+a,r.arcArea=i,r.polygonArea=a,r.arcs=s,r.innerPoints=n,r.intersectionPoints=e),i+a}function aV(t,r){for(let e=0;e<r.length;++e)if(lo(t,r[e])>r[e].radius+KS)return!1;return!0}function oV(t){const r=[];for(let e=0;e<t.length;++e)for(let n=e+1;n<t.length;++n){const i=JS(t[e],t[n]);for(let a=0;a<i.length;++a){const o=i[a];o.parentIndex=[e,n],r.push(o)}}return r}function lf(t,r){return t*t*Math.acos(1-r/t)-(t-r)*Math.sqrt(r*(2*t-r))}function lo(t,r){return Math.sqrt((t.x-r.x)*(t.x-r.x)+(t.y-r.y)*(t.y-r.y))}function QS(t,r,e){if(e>=t+r)return 0;if(e<=Math.abs(t-r))return Math.PI*Math.min(t,r)*Math.min(t,r);const n=t-(e*e-r*r+t*t)/(2*e),i=r-(e*e-t*t+r*r)/(2*e);return lf(t,n)+lf(r,i)}function JS(t,r){const e=lo(t,r),n=t.radius,i=r.radius;if(e>=n+i||e<=Math.abs(n-i))return[];const a=(n*n-i*i+e*e)/(2*e),o=Math.sqrt(n*n-a*a),s=t.x+a*(r.x-t.x)/e,l=t.y+a*(r.y-t.y)/e,c=-(r.y-t.y)*(o/e),u=-(r.x-t.x)*(o/e);return[{x:s+c,y:l-u},{x:s-c,y:l+u}]}function sV(t){const r={x:0,y:0};for(let e=0;e<t.length;++e)r.x+=t[e].x,r.y+=t[e].y;return r.x/=t.length,r.y/=t.length,r}function lV(t,r){r=r||{},r.maxIterations=r.maxIterations||500;const e=r.initialLayout||dV,n=r.lossFunction||ch;t=cV(t);const i=e(t,r),a=[],o=[];let s;for(s in i)i.hasOwnProperty(s)&&(a.push(i[s].x),a.push(i[s].y),o.push(s));const c=nV(function(u){const f={};for(let d=0;d<o.length;++d){const h=o[d];f[h]={x:u[2*d],y:u[2*d+1],radius:i[h].radius}}return n(f,t)},a,r).x;for(let u=0;u<o.length;++u)s=o[u],i[s].x=c[2*u],i[s].y=c[2*u+1];return i}const tk=1e-10;function cf(t,r,e){return Math.min(t,r)*Math.min(t,r)*Math.PI<=e+tk?Math.abs(t-r):eV(function(n){return QS(t,r,n)-e},0,t+r)}function cV(t){t=t.slice();const r=[],e={};let n,i,a,o;for(n=0;n<t.length;++n){const s=t[n];s.sets.length==1?r.push(s.sets[0]):s.sets.length==2&&(a=s.sets[0],o=s.sets[1],e[[a,o]]=!0,e[[o,a]]=!0)}for(r.sort((s,l)=>s>l?1:-1),n=0;n<r.length;++n)for(a=r[n],i=n+1;i<r.length;++i)o=r[i],[a,o]in e||t.push({sets:[a,o],size:0});return t}function uV(t,r,e){const n=Vg(r.length,r.length),i=Vg(r.length,r.length);return t.filter(function(a){return a.sets.length==2}).map(function(a){const o=e[a.sets[0]],s=e[a.sets[1]],l=Math.sqrt(r[o].size/Math.PI),c=Math.sqrt(r[s].size/Math.PI),u=cf(l,c,a.size);n[o][s]=n[s][o]=u;let f=0;a.size+1e-10>=Math.min(r[o].size,r[s].size)?f=1:a.size<=1e-10&&(f=-1),i[o][s]=i[s][o]=f}),{distances:n,constraints:i}}function fV(t,r,e,n){let i=0,a;for(a=0;a<r.length;++a)r[a]=0;for(a=0;a<e.length;++a){const o=t[2*a],s=t[2*a+1];for(let l=a+1;l<e.length;++l){const c=t[2*l],u=t[2*l+1],f=e[a][l],d=n[a][l],h=(c-o)*(c-o)+(u-s)*(u-s),p=Math.sqrt(h),v=h-f*f;d>0&&p<=f||d<0&&p>=f||(i+=2*v*v,r[2*a]+=4*v*(o-c),r[2*a+1]+=4*v*(s-u),r[2*l]+=4*v*(c-o),r[2*l+1]+=4*v*(u-s))}}return i}function dV(t,r){let e=pV(t,r);const n=r.lossFunction||ch;if(t.length>=8){const i=hV(t,r),a=n(i,t),o=n(e,t);a+1e-8<o&&(e=i)}return e}function hV(t,r){r=r||{};const e=r.restarts||10,n=[],i={};let a;for(a=0;a<t.length;++a){const v=t[a];v.sets.length==1&&(i[v.sets[0]]=n.length,n.push(v))}const o=uV(t,n,i);let s=o.distances;const l=o.constraints,c=of(s.map(of))/s.length;s=s.map(function(v){return v.map(function(g){return g/c})});const u=function(v,g){return fV(v,g,s,l)};let f,d;for(a=0;a<e;++a){const v=af(s.length*2).map(Math.random);d=iV(u,v,r),(!f||d.fx<f.fx)&&(f=d)}const h=f.x,p={};for(a=0;a<n.length;++a){const v=n[a];p[v.sets[0]]={x:h[2*a]*c,y:h[2*a+1]*c,radius:Math.sqrt(v.size/Math.PI)}}if(r.history)for(a=0;a<r.history.length;++a)sf(r.history[a].x,c);return p}function pV(t,r){const e=r&&r.lossFunction?r.lossFunction:ch,n={},i={};let a;for(let f=0;f<t.length;++f){const d=t[f];d.sets.length==1&&(a=d.sets[0],n[a]={x:1e10,y:1e10,rowid:Object.keys(n).length,size:d.size,radius:Math.sqrt(d.size/Math.PI)},i[a]=[])}t=t.filter(function(f){return f.sets.length==2});for(let f=0;f<t.length;++f){const d=t[f];let h=d.hasOwnProperty("weight")?d.weight:1;const p=d.sets[0],v=d.sets[1];d.size+tk>=Math.min(n[p].size,n[v].size)&&(h=0),i[p].push({set:v,size:d.size,weight:h}),i[v].push({set:p,size:d.size,weight:h})}const o=[];for(a in i)if(i.hasOwnProperty(a)){let f=0;for(let d=0;d<i[a].length;++d)f+=i[a][d].size*i[a][d].weight;o.push({set:a,size:f})}function s(f,d){return d.size-f.size}o.sort(s);const l={};function c(f){return f.set in l}function u(f,d){n[d].x=f.x,n[d].y=f.y,l[d]=!0}u({x:0,y:0},o[0].set);for(let f=1;f<o.length;++f){const d=o[f].set,h=i[d].filter(c);if(a=n[d],h.sort(s),h.length===0)throw"ERROR: missing pairwise overlap information";const p=[];for(let m=0;m<h.length;++m){const y=n[h[m].set],b=cf(a.radius,y.radius,h[m].size);p.push({x:y.x+b,y:y.y}),p.push({x:y.x-b,y:y.y}),p.push({y:y.y+b,x:y.x}),p.push({y:y.y-b,x:y.x});for(let x=m+1;x<h.length;++x){const O=n[h[x].set],w=cf(a.radius,O.radius,h[x].size),S=JS({x:y.x,y:y.y,radius:b},{x:O.x,y:O.y,radius:w});for(let k=0;k<S.length;++k)p.push(S[k])}}let v=1e50,g=p[0];for(let m=0;m<p.length;++m){n[d].x=p[m].x,n[d].y=p[m].y;const y=e(n,t);y<v&&(v=y,g=p[m])}u(g,d)}return n}function ch(t,r){let e=0;function n(i){return i.map(function(a){return t[a]})}for(let i=0;i<r.length;++i){const a=r[i];let o;if(a.sets.length==1)continue;if(a.sets.length==2){const l=t[a.sets[0]],c=t[a.sets[1]];o=QS(l.radius,c.radius,lo(l,c))}else o=ZS(n(a.sets));const s=a.hasOwnProperty("weight")?a.weight:1;e+=s*(o-a.size)*(o-a.size)}return e}function vV(t){const r=function(e){const n=Math.max.apply(null,t.map(function(a){return a[e]+a.radius})),i=Math.min.apply(null,t.map(function(a){return a[e]-a.radius}));return{max:n,min:i}};return{xRange:r("x"),yRange:r("y")}}function gV(t,r,e,n){const i=[],a=[];for(const v in t)t.hasOwnProperty(v)&&(a.push(v),i.push(t[v]));r-=2*n,e-=2*n;const o=vV(i),s=o.xRange,l=o.yRange;if(s.max==s.min||l.max==l.min)return console.log("not scaling solution: zero size detected"),t;const c=r/(s.max-s.min),u=e/(l.max-l.min),f=Math.min(u,c),d=(r-(s.max-s.min)*f)/2,h=(e-(l.max-l.min)*f)/2,p={};for(let v=0;v<i.length;++v){const g=i[v];p[a[v]]={radius:f*g.radius,x:n+d+(g.x-s.min)*f,y:n+h+(g.y-l.min)*f}}return p}function mV(t,r,e){const n=[],i=t-e,a=r;return n.push("M",i,a),n.push("A",e,e,0,1,0,i+2*e,a),n.push("A",e,e,0,1,0,i,a),n.join(" ")}function yV(t){const r={};ZS(t,r);const e=r.arcs;if(e.length===0)return"M 0 0";if(e.length==1){const n=e[0].circle;return mV(n.x,n.y,n.radius)}else{const n=[`
M`,e[0].p2.x,e[0].p2.y];for(let i=0;i<e.length;++i){const a=e[i],o=a.circle.radius,s=a.width>o;n.push(`
A`,o,o,0,s?1:0,1,a.p1.x,a.p1.y)}return n.join(" ")}}const ek=t=>{const{sets:r="sets",size:e="size",as:n=["key","path"],padding:i=0}=t,[a,o]=n;return s=>{const l=s.map(f=>Object.assign(Object.assign({},f),{sets:f[r],size:f[e],[a]:f.sets.join("&")}));l.sort((f,d)=>f.sets.length-d.sets.length);const c=lV(l);let u;return l.map(f=>{const d=f[r],h=({width:p,height:v})=>{u=u||gV(c,p,v,i);const g=d.map(y=>u[y]);let m=yV(g);return/[zZ]$/.test(m)||(m+=" Z"),m};return Object.assign(Object.assign({},f),{[o]:h})})}};ek.props={};const nk=()=>t=>(console.log("G2 data section:",t),t);nk.props={};function bV(t,r){if(r<0||r>1)throw new Error("alpha must be between 0 and 1.");if(t.length===0)return[];let e=t[0];const n=[];for(const i of t){if(i==null){n.push(i),console.warn("EMAThe value is null or undefined",t);continue}e==null&&(e=i);const a=e*r+(1-r)*i;n.push(a),e=a}return n}const rk=t=>{const{field:r="y",alpha:e=.6,as:n=r}=t;return i=>{const a=i.map(s=>s[r]),o=bV(a,e);return i.map((s,l)=>Object.assign(Object.assign({},s),{[n]:o[l]}))}};rk.props={};const ik=.01;function co(t){const{min:r,max:e}=t;return[[r[0],r[1]],[e[0],e[1]]]}function Xg(t,r,e=ik){const[n,i]=t,[a,o]=r;return n>=a[0]-e&&n<=o[0]+e&&i>=a[1]-e&&i<=o[1]+e}function ak(t,r,e=ik){const[n,i]=t;return!(Xg(n,r,e)&&Xg(i,r,e))}function xV(t,r){const[e,n]=t,[i,a]=r;return e[0]<a[0]&&n[0]>i[0]&&e[1]<a[1]&&n[1]>i[1]}const OV=t=>{const{priority:r}=t;return e=>{const n=[];return r&&e.sort(r),e.forEach(i=>{fc(i);const a=i.getLocalBounds();n.some(s=>xV(co(a),co(s.getLocalBounds())))?Qd(i):n.push(i)}),e}};function wV([t,r],[e,n]){return n>t&&r>e}function ws(){const t=new Map;return[n=>t.get(n),(n,i)=>t.set(n,i)]}function SV(t){const r=t.cloneNode(!0),e=r.getElementById("connector");e&&r.removeChild(e);const{min:n,max:i}=r.getRenderBounds();return r.destroy(),{min:n,max:i}}const kV=t=>{const{maxIterations:r=10,maxError:e=.1,padding:n=1}=t;return i=>{const a=i.length;if(a<=1)return i;const[o,s]=ws(),[l,c]=ws(),[u,f]=ws(),[d,h]=ws();for(const p of i){const{min:v,max:g}=SV(p),[m,y]=v,[b,x]=g;s(p,y),c(p,y),f(p,x-y),h(p,[m,b])}for(let p=0;p<r;p++){i.sort((g,m)=>_n(l(g),l(m)));let v=0;for(let g=0;g<a-1;g++){const m=i[g];let y=g+1,b;for(;(b=i[y])&&!wV(d(m),d(b));)y+=1;if(b){const x=l(m),O=u(m),w=l(b),S=w-(x+O);if(S<n){const k=(n-S)/2;v=Math.max(v,k),c(m,x-k),c(b,w+k)}}}if(v<e)break}for(const p of i)p.style.y+=l(p)-o(p);return i}};function ok(t){return typeof t=="object"?t:Mr(t)}function au(t){let r=t/255;return r=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4),r}function Ug(t,r,e){return .2126*au(t)+.7152*au(r)+.0722*au(e)}function sk(t,r){if(!t||!r||t===r)return 1;const{r:e,g:n,b:i}=t,{r:a,g:o,b:s}=r,l=Ug(e,n,i),c=Ug(a,o,s);return(Math.max(l,c)+.05)/(Math.min(l,c)+.05)}function lk(t,r){const e=ho(r,n=>sk(t,ok(n)));return r[e]}const EV=t=>{const{threshold:r=4.5,palette:e=["#000","#fff"]}=t;return n=>(n.forEach(i=>{const a=i.attr("dependentElement").parsedStyle.fill,o=i.parsedStyle.fill;sk(o,a)<r&&i.attr("fill",lk(a,e))}),n)},_V=()=>t=>(t.forEach(r=>{fc(r);const e=r.attr("bounds"),n=r.getLocalBounds();ak(co(n),e)&&Qd(r)}),t),AV=(t,r)=>{const[[e,n],[i,a]]=r,[[o,s],[l,c]]=t;let u=0,f=0;return o<e?u=e-o:l>i&&(u=i-l),s<n?f=n-s:c>a&&(f=a-c),[u,f]},TV=(t={})=>(r,{canvas:e,layout:n})=>{const{bounds:i="view",offsetX:a=0,offsetY:o=0}=t,l=(()=>{if(i==="main"){const{x:c=0,y:u=0,width:f=0,height:d=0,marginLeft:h=0,marginRight:p=0,marginTop:v=0,marginBottom:g=0,paddingLeft:m=0,paddingRight:y=0,paddingTop:b=0,paddingBottom:x=0}=n;return[[c+h+m+a,u+v+b+o],[c+f-p-y-a,u+d-g-x-o]]}else{const{x:c=0,y:u=0,width:f=0,height:d=0}=n;return[[c+a,u+o],[c+f-a,u+d-o]]}})();return r.forEach(c=>{fc(c);const{max:u,min:f}=c.getRenderBounds(),[d,h]=u,[p,v]=f,g=AV([[p,v],[d,h]],l);c.style.connector&&c.style.connectorPoints&&(c.style.connectorPoints[0][0]-=g[0],c.style.connectorPoints[0][1]-=g[1]),c.style.x+=g[0],c.style.y+=g[1]}),r};function qg(t){var r;const e=t.getAnimations();if(!e||e.length===0)return bl(t);const n=t.cloneNode(!0);n.style.visibility="hidden",e.forEach(a=>{const o=a.effect.getKeyframes();o&&o.length>0&&n.attr(o[o.length-1])}),(r=t.parentNode)===null||r===void 0||r.appendChild(n);const i=bl(n);return n.destroy(),i}const MV=t=>{const{palette:r=["#000","#fff"],threshold:e=2}=t;return n=>(n.forEach(i=>{var a,o;const s=i.attr("dependentElement"),l=(o=(a=i.attributes.fill)!==null&&a!==void 0?a:i.parsedStyle.fill)!==null&&o!==void 0?o:"#fff",c=co(qg(i)),u=co(qg(s));if(ak(c,u,e)){const f=lk(ok(l),r);i.attr("stroke",f)}else i.removeAttribute("stroke")}),n)};function PV(){return{"data.fetch":IS,"data.inline":GS,"data.sortBy":zS,"data.sort":BS,"data.filter":DS,"data.pick":FS,"data.rename":$S,"data.fold":jS,"data.slice":US,"data.custom":WS,"data.map":YS,"data.join":XS,"data.kde":qS,"data.log":nk,"data.wordCloud":VS,"data.ema":rk,"transform.stackY":_y,"transform.binX":r0,"transform.bin":Bf,"transform.dodgeX":Dy,"transform.jitter":$y,"transform.jitterX":zy,"transform.jitterY":Gy,"transform.symmetryY":Wy,"transform.diffY":Yy,"transform.stackEnter":By,"transform.normalizeY":Fy,"transform.select":Il,"transform.selectX":Hy,"transform.selectY":Vy,"transform.groupX":Xy,"transform.groupY":Uy,"transform.groupColor":qy,"transform.group":wo,"transform.sortX":Ky,"transform.sortY":Qy,"transform.sortColor":Zy,"transform.flexX":Jy,"transform.pack":n0,"transform.sample":i0,"transform.filter":a0,"coordinate.cartesian":mm,"coordinate.polar":vo,"coordinate.transpose":bf,"coordinate.theta":xm,"coordinate.parallel":Of,"coordinate.fisheye":wm,"coordinate.radial":xf,"coordinate.radar":Sm,"coordinate.helix":bm,"encode.constant":km,"encode.field":_m,"encode.transform":Em,"encode.column":Am,"mark.interval":hx,"mark.rect":px,"mark.line":vx,"mark.point":gx,"mark.text":mx,"mark.cell":yx,"mark.area":bx,"mark.link":_d,"mark.image":xx,"mark.polygon":Ox,"mark.box":wx,"mark.vector":Sx,"mark.lineX":Ex,"mark.lineY":kx,"mark.connector":_x,"mark.range":Ax,"mark.rangeX":Tx,"mark.rangeY":Mx,"mark.path":Nx,"mark.shape":Wx,"mark.density":Kx,"mark.heatmap":Zx,"mark.wordCloud":Cd,"palette.category10":Jx,"palette.category20":tO,"scale.linear":nO,"scale.ordinal":rO,"scale.band":eO,"scale.identity":iO,"scale.point":aO,"scale.time":oO,"scale.log":sO,"scale.pow":lO,"scale.sqrt":dO,"scale.threshold":cO,"scale.quantile":uO,"scale.quantize":fO,"scale.sequential":hO,"scale.constant":pO,"theme.classic":vO,"theme.classicDark":mO,"theme.academy":yO,"theme.light":Rd,"theme.dark":gO,"component.axisX":TO,"component.axisY":MO,"component.legendCategory":Nd,"component.legendContinuous":Gr,"component.legends":FO,"component.title":NO,"component.sliderX":IO,"component.sliderY":jO,"component.scrollbarX":DO,"component.scrollbarY":BO,"animation.scaleInX":jd,"animation.scaleOutX":V$,"animation.scaleInY":$O,"animation.scaleOutY":X$,"animation.waveIn":HO,"animation.fadeIn":zO,"animation.fadeOut":GO,"animation.zoomIn":iz,"animation.zoomOut":az,"animation.pathIn":VO,"animation.morphing":YO,"animation.growInX":XO,"animation.growInY":UO,"interaction.elementHighlight":dc,"interaction.elementHighlightByX":sS,"interaction.elementHighlightByColor":lS,"interaction.elementSelect":hc,"interaction.elementSelectByX":cS,"interaction.elementSelectByColor":uS,"interaction.fisheye":xY,"interaction.chartIndex":fS,"interaction.tooltip":wS,"interaction.legendFilter":$Y,"interaction.legendHighlight":zY,"interaction.brushHighlight":ih,"interaction.brushXHighlight":XY,"interaction.brushYHighlight":UY,"interaction.brushAxisHighlight":rH,"interaction.brushFilter":lh,"interaction.brushXFilter":sH,"interaction.brushYFilter":lH,"interaction.sliderFilter":RS,"interaction.scrollbarFilter":hH,"interaction.poptip":NS,"interaction.treemapDrillDown":OH,"interaction.elementPointMove":AH,"composition.spaceLayer":yw,"composition.spaceFlex":bw,"composition.facetRect":kw,"composition.repeatMatrix":pW,"composition.facetCircle":xW,"composition.timingKeyframe":Ew,"labelTransform.overlapHide":OV,"labelTransform.overlapDodgeY":kV,"labelTransform.overflowHide":_V,"labelTransform.contrastReverse":EV,"labelTransform.overflowStroke":MV,"labelTransform.exceedAdjust":TV}}function CV(){return{"composition.geoView":Tw,"composition.geoPath":_w}}function LV(){return{"data.arc":Td,"data.cluster":Vx,"mark.forceGraph":Yx,"mark.tree":Ux,"mark.pack":Fx,"mark.sankey":Lx,"mark.chord":Rx,"mark.treemap":Bx}}function RV(){return{"data.venn":ek,"mark.boxplot":Gx,"mark.gauge":qx,"mark.wordCloud":Cd,"mark.liquid":Qx}}function NV(){return Object.assign(Object.assign(Object.assign(Object.assign({},CV()),LV()),RV()),PV())}function IV(t,r){class e extends t{constructor(i){super(Object.assign(Object.assign({},i),{lib:r}))}}return e}const jV={},Di=t=>t?parseInt(t):0;function DV(t){const r=getComputedStyle(t),e=t.clientWidth||Di(r.width),n=t.clientHeight||Di(r.height),i=Di(r.paddingLeft)+Di(r.paddingRight),a=Di(r.paddingTop)+Di(r.paddingBottom);return{width:e-i,height:n-a}}function ou(t,r){const e=[t];for(;e.length;){const n=e.shift();r&&r(n);const i=n.children||[];for(const a of i)e.push(a)}}class uh{constructor(r={},e){this.parentNode=null,this.children=[],this.index=0,this.type=e,this.value=r}map(r=e=>e){const e=r(this.value);return this.value=e,this}attr(r,e){return arguments.length===1?this.value[r]:this.map(n=>(n[r]=e,n))}append(r){const e=new r({});return e.children=[],this.push(e),e}push(r){return r.parentNode=this,r.index=this.children.length,this.children.push(r),this}remove(){const r=this.parentNode;if(r){const{children:e}=r,n=e.findIndex(i=>i===this);e.splice(n,1)}return this}getNodeByKey(r){let e=null;return ou(this,i=>{r===i.attr("key")&&(e=i)}),e}getNodesByType(r){const e=[];return ou(this,i=>{r===i.type&&e.push(i)}),e}getNodeByType(r){let e=null;return ou(this,n=>{e||r===n.type&&(e=n)}),e}call(r,...e){return r(this.map(),...e),this}getRoot(){let r=this;for(;r&&r.parentNode;)r=r.parentNode;return r}}var ck=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const uf=["width","height","depth","padding","paddingLeft","paddingRight","paddingBottom","paddingTop","inset","insetLeft","insetRight","insetTop","insetBottom","margin","marginLeft","marginRight","marginTop","marginBottom","autoFit","theme","title","interaction"],uk="__remove__",fk="__callback__",Kg=1,Zg=1;function BV(t){if(t===void 0){const r=document.createElement("div");return r[uk]=!0,r}return typeof t=="string"?document.getElementById(t):t}function FV(t){const r=t.parentNode;r&&r.removeChild(t)}function $V(t){if(t.type!==null)return t;const r=t.children[t.children.length-1];for(const e of uf)r.attr(e,t.attr(e));return r}function Qg(t){return Object.assign(Object.assign({},t.value),{type:t.type})}function su(t,r){const{width:e,height:n,autoFit:i,depth:a=0}=t;let o=640,s=480;if(i){const{width:l,height:c}=DV(r);o=l||o,s=c||s}return o=e||o,s=n||s,{width:Math.max(re(o)?o:Kg,Kg),height:Math.max(re(s)?s:Zg,Zg),depth:a}}function zV(t){const r=$V(t),e=[r],n=new Map;for(n.set(r,Qg(r));e.length;){const i=e.pop(),a=n.get(i),{children:o=[]}=i;for(const s of o)if(s.type===fk)a.children=s.value;else{const l=Qg(s),{children:c=[]}=a;c.push(l),e.push(s),n.set(s,l),a.children=c}}return n.get(r)}function GV(t,r){return typeof t=="function"?!0:new Set(Object.keys(r)).has(t)}function WV(t,r){return typeof t!="function"&&new Set(Object.keys(r)).has(t)}function YV(t,r,e,n,i){const{type:a}=t,{type:o=e||a}=r;if(WV(o,i)){for(const s of uf)t.attr(s)!==void 0&&r[s]===void 0&&(r[s]=t.attr(s));return r}if(GV(o,n)){const s={type:"view"},l=Object.assign({},r);for(const c of uf)l[c]!==void 0&&(s[c]=l[c],delete l[c]);return Object.assign(Object.assign({},s),{children:[l]})}return r}function HV(t,r,e){if(typeof t=="function")return r.mark;const i=Object.assign(Object.assign({},r),e)[t];if(!i)throw new Error(`Unknown mark: ${t}.`);return i}function VV(t,r,e){if(typeof t=="function"){const l=new uh;return l.value=t,l.type=fk,l}const{type:n,children:i}=t,a=ck(t,["type","children"]),o=HV(n,r,e),s=new o;return s.value=a,s.type=n,s}function XV(t,r){const{type:e,children:n}=r,i=ck(r,["type","children"]);t.type===e||e===void 0?by(t.value,i):typeof e=="string"&&(t.type=e,t.value=i)}function UV(t,r,e,n){if(!t)return;const i=[[t,r]];for(;i.length;){const[a,o]=i.shift(),s=VV(o,e,n);Array.isArray(a.children)&&a.push(s);const{children:l}=o;if(Array.isArray(l))for(const c of l)i.push([s,c]);else typeof l=="function"&&i.push([s,l])}}function qV(t,r,e,n,i){const a=YV(t,r,e,n,i),o=[[null,t,a]];for(;o.length;){const[s,l,c]=o.shift();if(!l)UV(s,c,n,i);else if(!c)l.remove();else{XV(l,c);const{children:u}=c,{children:f}=l;if(Array.isArray(u)&&Array.isArray(f)){const d=Math.max(u.length,f.length);for(let h=0;h<d;h++){const p=u[h],v=f[h];o.push([l,v,p])}}else typeof u=="function"&&o.push([l,null,u])}}}function KV(){let t,r;return[new Promise((n,i)=>{r=n,t=i}),r,t]}function ZV(t,r,{key:e=r}){t.prototype[r]=function(n){return arguments.length===0?this.attr(e):this.attr(e,n)}}function QV(t,r,{key:e=r}){t.prototype[r]=function(n){if(arguments.length===0)return this.attr(e);if(Array.isArray(n))return this.attr(e,n);const i=[...this.attr(e)||[],n];return this.attr(e,i)}}function JV(t,r,{key:e=r}){t.prototype[r]=function(n,i){if(arguments.length===0)return this.attr(e);if(arguments.length===1&&typeof n!="string")return this.attr(e,n);const a=this.attr(e)||{};return a[n]=arguments.length===1?!0:i,this.attr(e,a)}}function tX(t,r,e){t.prototype[r]=function(n){if(arguments.length===0)return this.attr(r);if(Array.isArray(n))return this.attr(r,{items:n});if(Ji(n)&&(n.title!==void 0||n.items!==void 0))return this.attr(r,n);if(n===null||n===!1)return this.attr(r,n);const i=this.attr(r)||{},{items:a=[]}=i;return a.push(n),i.items=a,this.attr(r,i)}}function eX(t,r,{ctor:e}){t.prototype[r]=function(n){const i=this.append(e);return r==="mark"&&(i.type=n),i}}function nX(t,r,{ctor:e}){t.prototype[r]=function(){return this.type=null,this.append(e)}}function Sl(t){return r=>{for(const[e,n]of Object.entries(t)){const{type:i}=n;i==="value"?ZV(r,e,n):i==="array"?QV(r,e,n):i==="object"?JV(r,e,n):i==="node"?eX(r,e,n):i==="container"?nX(r,e,n):i==="mix"&&tX(r,e)}return r}}function Jg(t){return Object.fromEntries(Object.entries(t).map(([r,e])=>[r,{type:"node",ctor:e}]))}const dk={encode:{type:"object"},scale:{type:"object"},data:{type:"value"},transform:{type:"array"},style:{type:"object"},animate:{type:"object"},coordinate:{type:"object"},interaction:{type:"object"},label:{type:"array",key:"labels"},axis:{type:"object"},legend:{type:"object"},slider:{type:"object"},scrollbar:{type:"object"},state:{type:"object"},layout:{type:"object"},theme:{type:"object"},title:{type:"value"}},rX=Object.assign(Object.assign({},dk),{tooltip:{type:"mix"},viewStyle:{type:"object"}}),iX=Object.assign(Object.assign({},dk),{labelTransform:{type:"array"}});var aX=function(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a};let kl=class extends uh{changeData(r){var e;const n=this.getRoot();if(n)return this.attr("data",r),!((e=this.children)===null||e===void 0)&&e.length&&this.children.forEach(i=>{i.attr("data",r)}),n==null?void 0:n.render()}getView(){const r=this.getRoot(),{views:e}=r.getContext();if(e!=null&&e.length)return e.find(n=>n.key===this._key)}getScale(){var r;return(r=this.getView())===null||r===void 0?void 0:r.scale}getScaleByChannel(r){const e=this.getScale();if(e)return e[r]}getCoordinate(){var r;return(r=this.getView())===null||r===void 0?void 0:r.coordinate}getTheme(){var r;return(r=this.getView())===null||r===void 0?void 0:r.theme}getGroup(){const r=this._key;return r?this.getRoot().getContext().canvas.getRoot().getElementById(r):void 0}show(){const r=this.getGroup();r&&!r.isVisible()&&fc(r)}hide(){const r=this.getGroup();r&&r.isVisible()&&Qd(r)}};kl=aX([Sl(iX)],kl);var oX=function(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a};let ff=class extends uh{changeData(r){const e=this.getRoot();if(e)return this.attr("data",r),e==null?void 0:e.render()}getMark(){var r;const e=(r=this.getRoot())===null||r===void 0?void 0:r.getView();if(!e)return;const{markState:n}=e,i=Array.from(n.keys()).find(a=>a.key===this.attr("key"));return n.get(i)}getScale(){var r;const e=(r=this.getRoot())===null||r===void 0?void 0:r.getView();if(e)return e==null?void 0:e.scale}getScaleByChannel(r){var e,n;const i=(e=this.getRoot())===null||e===void 0?void 0:e.getView();if(i)return(n=i==null?void 0:i.scale)===null||n===void 0?void 0:n[r]}getGroup(){const r=this.attr("key");return r?this.getRoot().getContext().canvas.getRoot().getElementById(r):void 0}};ff=oX([Sl(rX)],ff);var sX=function(t,r,e,n){var i=arguments.length,a=i<3?r:n===null?n=Object.getOwnPropertyDescriptor(r,e):n,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")a=Reflect.decorate(t,r,e,n);else for(var s=t.length-1;s>=0;s--)(o=t[s])&&(a=(i<3?o(a):i>3?o(r,e,a):o(r,e))||a);return i>3&&a&&Object.defineProperty(r,e,a),a},lX=function(t,r){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&r.indexOf(n)<0&&(e[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)r.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(e[n[i]]=t[n[i]]);return e};const cX="G2_CHART_KEY";class uX extends kl{constructor(r){const{container:e,canvas:n,renderer:i,plugins:a,lib:o,createCanvas:s}=r,l=lX(r,["container","canvas","renderer","plugins","lib","createCanvas"]);super(l,"view"),this._hasBindAutoFit=!1,this._rendering=!1,this._trailingClear=null,this._trailing=!1,this._trailingResolve=null,this._trailingReject=null,this._previousDefinedType=null,this._onResize=Rm(()=>{this.forceFit()},300),this._renderer=i||new rw,this._plugins=a||[],this._container=BV(e),this._emitter=new ow,this._context={library:Object.assign(Object.assign({},o),jV),emitter:this._emitter,canvas:n,createCanvas:s},this._create()}render(){if(this._rendering)return this._addToTrailing();this._context.canvas||this._createCanvas(),this._bindAutoFit(),this._rendering=!0;const r=new Promise((a,o)=>eY(this._computedOptions(),this._context,this._createResolve(a),this._createReject(o))),[e,n,i]=KV();return r.then(n).then(()=>{if(this._trailingClear){const a=this.options();this._trailingClear(),this._trailing&&this.options(a)}}).catch(i).then(()=>{this._trailingClear=null,this._renderTrailing()}),e}options(r){if(arguments.length===0)return zV(this);const{type:e}=r;return e&&(this._previousDefinedType=e),qV(this,r,this._previousDefinedType,this._marks,this._compositions),this}getContainer(){return this._container}getContext(){return this._context}on(r,e,n){return this._emitter.on(r,e,n),this}once(r,e){return this._emitter.once(r,e),this}emit(r,...e){return this._emitter.emit(r,...e),this}off(r,e){return this._emitter.off(r,e),this}clear(r=!0){if(this._rendering){this._trailingClear=()=>{this.clear(r)},this._reset();return}const e=this.options();this.emit(Dt.BEFORE_CLEAR),this._reset(),Mg(e,this._context,!1,r),this.emit(Dt.AFTER_CLEAR)}destroy(){const r=this.options();this.emit(Dt.BEFORE_DESTROY),this._unbindAutoFit(),this._reset(),Mg(r,this._context,!0),this._container[uk]&&FV(this._container),this.emit(Dt.AFTER_DESTROY)}forceFit(){this.options.autoFit=!0;const{width:r,height:e}=su(this.options(),this._container);if(r===this._width&&e===this._height)return Promise.resolve(this);this.emit(Dt.BEFORE_CHANGE_SIZE);const n=this.render();return n.then(()=>{this.emit(Dt.AFTER_CHANGE_SIZE)}),n}changeSize(r,e){if(r===this._width&&e===this._height)return Promise.resolve(this);this.emit(Dt.BEFORE_CHANGE_SIZE),this.attr("width",r),this.attr("height",e);const n=this.render();return n.then(()=>{this.emit(Dt.AFTER_CHANGE_SIZE)}),n}getDataByXY(r,e={}){const{shared:n=!1,series:i,facet:a=!1,startX:o=0,startY:s=0}=e,{canvas:l,views:c}=this._context,{document:u}=l,{x:f,y:d}=r,{coordinate:h,scale:p,markState:v,data:g,key:m}=c[0],y=u.getElementsByClassName(Gn),b=n?A=>A.__data__.x:A=>A,x=Kt(y,b),O=u.getElementsByClassName(fl)[0],w=jn(O),S=A=>Array.from(A.values()).some(M=>{var T,C;return((T=M.interaction)===null||T===void 0?void 0:T.seriesTooltip)||((C=M.channels)===null||C===void 0?void 0:C.some(I=>I.name==="series"&&I.values!==void 0))}),k=zn(i,S(v)),E=A=>Rt(A,"__data__.data",null),_=A=>A.map(E);try{if(k&&S(v)&&!a){const{selectedData:C}=OS({root:w,event:{offsetX:f,offsetY:d},elements:y,coordinate:h,scale:p,startX:o,startY:s}),I=g.get(`${m}-0`);return C.map(({index:R})=>I[R])}const A=xS({root:w,event:{offsetX:f,offsetY:d},elements:y,coordinate:h,scale:p,shared:n});if(Ml(A))return Pf(A,g.get(m));const M=b(A),T=x.get(M);return T?_(T):[]}catch{const M=l.document.elementFromPointSync(f,d);return M?E(M):[]}}_create(){const{library:r}=this._context,e=a=>a.startsWith("mark.")||a==="component.axisX"||a==="component.axisY"||a==="component.legends",n=["mark.mark",...Object.keys(r).filter(e)];this._marks={};for(const a of n){const o=a.split(".").pop();class s extends ff{constructor(){super({},o)}}this._marks[o]=s,this[o]=function(l){const c=this.append(s);return o==="mark"&&(c.type=l),c}}const i=["composition.view",...Object.keys(r).filter(a=>a.startsWith("composition.")&&a!=="composition.mark")];this._compositions=Object.fromEntries(i.map(a=>{const o=a.split(".").pop();let s=class extends kl{constructor(){super({},o)}};return s=sX([Sl(Jg(this._marks))],s),[o,s]}));for(const a of Object.values(this._compositions))Sl(Jg(this._compositions))(a);for(const a of i){const o=a.split(".").pop();this[o]=function(){const s=this._compositions[o];return this.type=null,this.append(s)}}}_reset(){const r=["theme","type","width","height","autoFit"];this.type="view",this.value=Object.fromEntries(Object.entries(this.value).filter(([e])=>e.startsWith("margin")||e.startsWith("padding")||e.startsWith("inset")||r.includes(e))),this.children=[]}_renderTrailing(){this._trailing&&(this._trailing=!1,this.render().then(()=>{const r=this._trailingResolve.bind(this);this._trailingResolve=null,r(this)}).catch(r=>{const e=this._trailingReject.bind(this);this._trailingReject=null,e(r)}))}_createResolve(r){return()=>{this._rendering=!1,r(this)}}_createReject(r){return e=>{this._rendering=!1,r(e)}}_computedOptions(){const r=this.options(),{key:e=cX}=r,{width:n,height:i,depth:a}=su(r,this._container);return this._width=n,this._height=i,this._key=e,Object.assign(Object.assign({key:this._key},r),{width:n,height:i,depth:a})}_createCanvas(){const{width:r,height:e}=su(this.options(),this._container);this._plugins.push(new aw),this._plugins.forEach(n=>this._renderer.registerPlugin(n)),this._context.canvas=new X0({container:this._container,width:r,height:e,renderer:this._renderer})}_addToTrailing(){var r;return(r=this._trailingResolve)===null||r===void 0||r.call(this,this),this._trailing=!0,new Promise((n,i)=>{this._trailingResolve=n,this._trailingReject=i})}_bindAutoFit(){const r=this.options(),{autoFit:e}=r;if(this._hasBindAutoFit){e||this._unbindAutoFit();return}e&&(this._hasBindAutoFit=!0,window.addEventListener("resize",this._onResize))}_unbindAutoFit(){this._hasBindAutoFit&&(this._hasBindAutoFit=!1,window.removeEventListener("resize",this._onResize))}}const fX=Object.assign({},NV()),NX=IV(uX,fX);export{NX as C};
